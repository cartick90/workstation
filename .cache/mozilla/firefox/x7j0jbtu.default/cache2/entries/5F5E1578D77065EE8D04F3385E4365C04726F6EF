!function(){function parseUri(t){for(var e=parseUri.options,n=e.parser[e.strictMode?"strict":"loose"].exec(t),r={},i=14;i--;)r[e.key[i]]=n[i]||"";return r[e.q.name]={},r[e.key[12]].replace(e.q.parser,function(t,n,i){n&&(r[e.q.name][n]=i)}),r}var requirejs,require,define;if(function(t){function e(t,e){return v.call(t,e)}function n(t,e){var n,r,i,o,s,a,l,u,c,d,p,h=e&&e.split("/"),f=g.map,m=f&&f["*"]||{};if(t&&"."===t.charAt(0))if(e){for(t=t.split("/"),s=t.length-1,g.nodeIdCompat&&b.test(t[s])&&(t[s]=t[s].replace(b,"")),t=h.slice(0,h.length-1).concat(t),c=0;c<t.length;c+=1)if(p=t[c],"."===p)t.splice(c,1),c-=1;else if(".."===p){if(1===c&&(".."===t[2]||".."===t[0]))break;c>0&&(t.splice(c-1,2),c-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((h||m)&&f){for(n=t.split("/"),c=n.length;c>0;c-=1){if(r=n.slice(0,c).join("/"),h)for(d=h.length;d>0;d-=1)if(i=f[h.slice(0,d).join("/")],i&&(i=i[r])){o=i,a=c;break}if(o)break;!l&&m&&m[r]&&(l=m[r],u=c)}!o&&l&&(o=l,a=u),o&&(n.splice(0,a,o),t=n.join("/"))}return t}function r(e,n){return function(){var r=y.call(arguments,0);return"string"!=typeof r[0]&&1===r.length&&r.push(null),c.apply(t,r.concat([e,n]))}}function i(t){return function(e){return n(e,t)}}function o(t){return function(e){h[t]=e}}function s(n){if(e(f,n)){var r=f[n];delete f[n],m[n]=!0,u.apply(t,r)}if(!e(h,n)&&!e(m,n))throw new Error("No "+n);return h[n]}function a(t){var e,n=t?t.indexOf("!"):-1;return n>-1&&(e=t.substring(0,n),t=t.substring(n+1,t.length)),[e,t]}function l(t){return function(){return g&&g.config&&g.config[t]||{}}}var u,c,d,p,h={},f={},g={},m={},v=Object.prototype.hasOwnProperty,y=[].slice,b=/\.js$/;d=function(t,e){var r,o=a(t),l=o[0];return t=o[1],l&&(l=n(l,e),r=s(l)),l?t=r&&r.normalize?r.normalize(t,i(e)):n(t,e):(t=n(t,e),o=a(t),l=o[0],t=o[1],l&&(r=s(l))),{f:l?l+"!"+t:t,n:t,pr:l,p:r}},p={require:function(t){return r(t)},exports:function(t){var e=h[t];return"undefined"!=typeof e?e:h[t]={}},module:function(t){return{id:t,uri:"",exports:h[t],config:l(t)}}},u=function(n,i,a,l){var u,c,g,v,y,b,_=[],w=typeof a;if(l=l||n,"undefined"===w||"function"===w){for(i=!i.length&&a.length?["require","exports","module"]:i,y=0;y<i.length;y+=1)if(v=d(i[y],l),c=v.f,"require"===c)_[y]=p.require(n);else if("exports"===c)_[y]=p.exports(n),b=!0;else if("module"===c)u=_[y]=p.module(n);else if(e(h,c)||e(f,c)||e(m,c))_[y]=s(c);else{if(!v.p)throw new Error(n+" missing "+c);v.p.load(v.n,r(l,!0),o(c),{}),_[y]=h[c]}g=a?a.apply(h[n],_):void 0,n&&(u&&u.exports!==t&&u.exports!==h[n]?h[n]=u.exports:g===t&&b||(h[n]=g))}else n&&(h[n]=a)},requirejs=require=c=function(e,n,r,i,o){if("string"==typeof e)return p[e]?p[e](n):s(d(e,n).f);if(!e.splice){if(g=e,g.deps&&c(g.deps,g.callback),!n)return;n.splice?(e=n,n=r,r=null):e=t}return n=n||function(){},"function"==typeof r&&(r=i,i=o),i?u(t,e,n,r):setTimeout(function(){u(t,e,n,r)},4),c},c.config=function(t){return c(t)},requirejs._defined=h,define=function(t,n,r){if("string"!=typeof t)throw new Error("See almond README: incorrect module build, no module name");n.splice||(r=n,n=[]),e(h,t)||e(f,t)||(f[t]=[t,n,r])},define.amd={jQuery:!0}}(),define("almond",function(){}),function(t){"function"==typeof define?define("es5-shim",t):"function"==typeof YUI?YUI.add("es5",t):t()}(function(){function t(){}function e(t){return t=+t,t!==t?t=0:0!==t&&t!==1/0&&t!==-(1/0)&&(t=(t>0||-1)*Math.floor(Math.abs(t))),t}function n(t){var e=typeof t;return null===t||"undefined"===e||"boolean"===e||"number"===e||"string"===e}function r(t){var e,r,i;if(n(t))return t;if(r=t.valueOf,"function"==typeof r&&(e=r.call(t),n(e)))return e;if(i=t.toString,"function"==typeof i&&(e=i.call(t),n(e)))return e;throw new TypeError}Function.prototype.bind||(Function.prototype.bind=function(e){var n=this;if("function"!=typeof n)throw new TypeError("Function.prototype.bind called on incompatible "+n);var r=p.call(arguments,1),i=function(){if(this instanceof i){var t=n.apply(this,r.concat(p.call(arguments)));return Object(t)===t?t:this}return n.apply(e,r.concat(p.call(arguments)))};return n.prototype&&(t.prototype=n.prototype,i.prototype=new t,t.prototype=null),i});var i,o,s,a,l,u=Function.prototype.call,c=Array.prototype,d=Object.prototype,p=c.slice,h=u.bind(d.toString),f=u.bind(d.hasOwnProperty);if((l=f(d,"__defineGetter__"))&&(i=u.bind(d.__defineGetter__),o=u.bind(d.__defineSetter__),s=u.bind(d.__lookupGetter__),a=u.bind(d.__lookupSetter__)),2!=[1,2].splice(0).length){var g=Array.prototype.splice;Array.prototype.splice=function(){function t(t){for(var e=[];t--;)e.unshift(t);return e}var e,n=[];return n.splice.bind(n,0,0).apply(null,t(20)),n.splice.bind(n,0,0).apply(null,t(26)),e=n.length,n.splice(5,0,"XXX"),e+1==n.length?!0:void 0}()?function(t,e){return arguments.length?g.apply(this,[void 0===t?0:t,void 0===e?this.length-t:e].concat(p.call(arguments,2))):[]}:function(t,e){var n,r=p.call(arguments,2),i=r.length;if(!arguments.length)return[];if(void 0===t&&(t=0),void 0===e&&(e=this.length-t),i>0){if(0>=e){if(t==this.length)return this.push.apply(this,r),[];if(0==t)return this.unshift.apply(this,r),[]}return n=p.call(this,t,t+e),r.push.apply(r,p.call(this,t+e,this.length)),r.unshift.apply(r,p.call(this,0,t)),r.unshift(0,this.length),g.apply(this,r),n}return g.call(this,t,e)}}if(1!=[].unshift(0)){var m=Array.prototype.unshift;Array.prototype.unshift=function(){return m.apply(this,arguments),this.length}}Array.isArray||(Array.isArray=function(t){return"[object Array]"==h(t)});var v=Object("a"),y="a"!=v[0]||!(0 in v);if(Array.prototype.forEach||(Array.prototype.forEach=function(t){var e=P(this),n=y&&"[object String]"==h(this)?this.split(""):e,r=arguments[1],i=-1,o=n.length>>>0;if("[object Function]"!=h(t))throw new TypeError;for(;++i<o;)i in n&&t.call(r,n[i],i,e)}),Array.prototype.map||(Array.prototype.map=function(t){var e=P(this),n=y&&"[object String]"==h(this)?this.split(""):e,r=n.length>>>0,i=Array(r),o=arguments[1];if("[object Function]"!=h(t))throw new TypeError(t+" is not a function");for(var s=0;r>s;s++)s in n&&(i[s]=t.call(o,n[s],s,e));return i}),Array.prototype.filter||(Array.prototype.filter=function(t){var e,n=P(this),r=y&&"[object String]"==h(this)?this.split(""):n,i=r.length>>>0,o=[],s=arguments[1];if("[object Function]"!=h(t))throw new TypeError(t+" is not a function");for(var a=0;i>a;a++)a in r&&(e=r[a],t.call(s,e,a,n)&&o.push(e));return o}),Array.prototype.every||(Array.prototype.every=function(t){var e=P(this),n=y&&"[object String]"==h(this)?this.split(""):e,r=n.length>>>0,i=arguments[1];if("[object Function]"!=h(t))throw new TypeError(t+" is not a function");for(var o=0;r>o;o++)if(o in n&&!t.call(i,n[o],o,e))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(t){var e=P(this),n=y&&"[object String]"==h(this)?this.split(""):e,r=n.length>>>0,i=arguments[1];if("[object Function]"!=h(t))throw new TypeError(t+" is not a function");for(var o=0;r>o;o++)if(o in n&&t.call(i,n[o],o,e))return!0;return!1}),Array.prototype.reduce||(Array.prototype.reduce=function(t){var e=P(this),n=y&&"[object String]"==h(this)?this.split(""):e,r=n.length>>>0;if("[object Function]"!=h(t))throw new TypeError(t+" is not a function");if(!r&&1==arguments.length)throw new TypeError("reduce of empty array with no initial value");var i,o=0;if(arguments.length>=2)i=arguments[1];else for(;;){if(o in n){i=n[o++];break}if(++o>=r)throw new TypeError("reduce of empty array with no initial value")}for(;r>o;o++)o in n&&(i=t.call(void 0,i,n[o],o,e));return i}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(t){var e=P(this),n=y&&"[object String]"==h(this)?this.split(""):e,r=n.length>>>0;if("[object Function]"!=h(t))throw new TypeError(t+" is not a function");if(!r&&1==arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var i,o=r-1;if(arguments.length>=2)i=arguments[1];else for(;;){if(o in n){i=n[o--];break}if(--o<0)throw new TypeError("reduceRight of empty array with no initial value")}if(0>o)return i;do o in this&&(i=t.call(void 0,i,n[o],o,e));while(o--);return i}),Array.prototype.indexOf&&-1==[0,1].indexOf(1,2)||(Array.prototype.indexOf=function(t){var n=y&&"[object String]"==h(this)?this.split(""):P(this),r=n.length>>>0;if(!r)return-1;var i=0;for(arguments.length>1&&(i=e(arguments[1])),i=i>=0?i:Math.max(0,r+i);r>i;i++)if(i in n&&n[i]===t)return i;return-1}),Array.prototype.lastIndexOf&&-1==[0,1].lastIndexOf(0,-3)||(Array.prototype.lastIndexOf=function(t){var n=y&&"[object String]"==h(this)?this.split(""):P(this),r=n.length>>>0;if(!r)return-1;var i=r-1;for(arguments.length>1&&(i=Math.min(i,e(arguments[1]))),i=i>=0?i:r-Math.abs(i);i>=0;i--)if(i in n&&t===n[i])return i;return-1}),!Object.keys){var b=!0,_=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],w=_.length;for(var x in{toString:null})b=!1;Object.keys=function L(t){if("object"!=typeof t&&"function"!=typeof t||null===t)throw new TypeError("Object.keys called on a non-object");var L=[];for(var e in t)f(t,e)&&L.push(e);if(b)for(var n=0,r=w;r>n;n++){var i=_[n];f(t,i)&&L.push(i)}return L}}var k=-621987552e5,C="-000001";Date.prototype.toISOString&&-1!==new Date(k).toISOString().indexOf(C)||(Date.prototype.toISOString=function(){var t,e,n,r,i;if(!isFinite(this))throw new RangeError("Date.prototype.toISOString called on non-finite value.");for(r=this.getUTCFullYear(),i=this.getUTCMonth(),r+=Math.floor(i/12),i=(i%12+12)%12,t=[i+1,this.getUTCDate(),this.getUTCHours(),this.getUTCMinutes(),this.getUTCSeconds()],r=(0>r?"-":r>9999?"+":"")+("00000"+Math.abs(r)).slice(r>=0&&9999>=r?-4:-6),e=t.length;e--;)n=t[e],10>n&&(t[e]="0"+n);return r+"-"+t.slice(0,2).join("-")+"T"+t.slice(2).join(":")+"."+("000"+this.getUTCMilliseconds()).slice(-3)+"Z"});var j=!1;try{j=Date.prototype.toJSON&&null===new Date(0/0).toJSON()&&-1!==new Date(k).toJSON().indexOf(C)&&Date.prototype.toJSON.call({toISOString:function(){return!0}})}catch(M){}j||(Date.prototype.toJSON=function(){var t,e=Object(this),n=r(e);if("number"==typeof n&&!isFinite(n))return null;if(t=e.toISOString,"function"!=typeof t)throw new TypeError("toISOString property is not callable");return t.call(e)}),Date=function(t){function e(n,r,i,o,s,a,l){var u=arguments.length;if(this instanceof t){var c=1==u&&String(n)===n?new t(e.parse(n)):u>=7?new t(n,r,i,o,s,a,l):u>=6?new t(n,r,i,o,s,a):u>=5?new t(n,r,i,o,s):u>=4?new t(n,r,i,o):u>=3?new t(n,r,i):u>=2?new t(n,r):u>=1?new t(n):new t;return c.constructor=e,c}return t.apply(this,arguments)}function n(t,e){var n=e>1?1:0;return i[e]+Math.floor((t-1969+n)/4)-Math.floor((t-1901+n)/100)+Math.floor((t-1601+n)/400)+365*(t-1970)}var r=new RegExp("^(\\d{4}|[+-]\\d{6})(?:-(\\d{2})(?:-(\\d{2})(?:T(\\d{2}):(\\d{2})(?::(\\d{2})(?:(\\.\\d{1,}))?)?(Z|(?:([-+])(\\d{2}):(\\d{2})))?)?)?)?$"),i=[0,31,59,90,120,151,181,212,243,273,304,334,365];for(var o in t)e[o]=t[o];return e.now=t.now,e.UTC=t.UTC,e.prototype=t.prototype,e.prototype.constructor=e,e.parse=function(e){var i=r.exec(e);if(i){var o,s=Number(i[1]),a=Number(i[2]||1)-1,l=Number(i[3]||1)-1,u=Number(i[4]||0),c=Number(i[5]||0),d=Number(i[6]||0),p=Math.floor(1e3*Number(i[7]||0)),h=!i[4]||i[8]?0:Number(new t(1970,0)),f="-"===i[9]?1:-1,g=Number(i[10]||0),m=Number(i[11]||0);return(c>0||d>0||p>0?24:25)>u&&60>c&&60>d&&1e3>p&&a>-1&&12>a&&24>g&&60>m&&l>-1&&l<n(s,a+1)-n(s,a)&&(o=60*(24*(n(s,a)+l)+u+g*f),o=1e3*(60*(o+c+m*f)+d)+p+h,o>=-864e13&&864e13>=o)?o:0/0}return t.parse.apply(this,arguments)},e}(Date),Date.now||(Date.now=function(){return(new Date).getTime()}),Number.prototype.toFixed&&"0.000"===8e-5.toFixed(3)&&"0"!==.9.toFixed(0)&&"1.25"===1.255.toFixed(2)&&"1000000000000000128"===0xde0b6b3a7640080.toFixed(0)||!function(){function t(t,e){for(var n=-1;++n<s;)e+=t*a[n],a[n]=e%o,e=Math.floor(e/o)}function e(t){for(var e=s,n=0;--e>=0;)n+=a[e],a[e]=Math.floor(n/t),n=n%t*o}function n(){for(var t=s,e="";--t>=0;)if(""!==e||0===t||0!==a[t]){var n=String(a[t]);""===e?e=n:e+="0000000".slice(0,7-n.length)+n}return e}function r(t,e,n){return 0===e?n:e%2===1?r(t,e-1,n*t):r(t*t,e/2,n)}function i(t){for(var e=0;t>=4096;)e+=12,t/=4096;for(;t>=2;)e+=1,t/=2;return e}var o,s,a;o=1e7,s=6,a=[0,0,0,0,0,0],Number.prototype.toFixed=function(o){var s,a,l,u,c,d,p,h;if(s=Number(o),s=s!==s?0:Math.floor(s),0>s||s>20)throw new RangeError("Number.toFixed called with invalid number of decimals");if(a=Number(this),a!==a)return"NaN";if(-1e21>=a||a>=1e21)return String(a);if(l="",0>a&&(l="-",a=-a),u="0",a>1e-21)if(c=i(a*r(2,69,1))-69,d=0>c?a*r(2,-c,1):a/r(2,c,1),d*=4503599627370496,c=52-c,c>0){for(t(0,d),p=s;p>=7;)t(1e7,0),p-=7;for(t(r(10,p,1),0),p=c-1;p>=23;)e(1<<23),p-=23;e(1<<p),t(1,1),e(2),u=n()}else t(0,d),t(1<<-c,0),u=n()+"0.00000000000000000000".slice(2,2+s);return s>0?(h=u.length,u=s>=h?l+"0.0000000000000000000".slice(0,s-h+2)+u:l+u.slice(0,h-s)+"."+u.slice(h-s)):u=l+u,u}}();var S=String.prototype.split;if(2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||0==="".split(/.?/).length||".".split(/()()/).length>1?!function(){var t=void 0===/()??/.exec("")[1];String.prototype.split=function(e,n){var r=this;if(void 0===e&&0===n)return[];if("[object RegExp]"!==Object.prototype.toString.call(e))return S.apply(this,arguments);var i,o,s,a,l=[],u=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.extended?"x":"")+(e.sticky?"y":""),c=0,e=new RegExp(e.source,u+"g");for(r+="",t||(i=new RegExp("^"+e.source+"$(?!\\s)",u)),n=void 0===n?-1>>>0:n>>>0;(o=e.exec(r))&&(s=o.index+o[0].length,!(s>c&&(l.push(r.slice(c,o.index)),!t&&o.length>1&&o[0].replace(i,function(){for(var t=1;t<arguments.length-2;t++)void 0===arguments[t]&&(o[t]=void 0)}),o.length>1&&o.index<r.length&&Array.prototype.push.apply(l,o.slice(1)),a=o[0].length,c=s,l.length>=n)));)e.lastIndex===o.index&&e.lastIndex++;return c===r.length?(a||!e.test(""))&&l.push(""):l.push(r.slice(c)),l.length>n?l.slice(0,n):l}}():"0".split(void 0,0).length&&(String.prototype.split=function(t,e){return void 0===t&&0===e?[]:S.apply(this,arguments)}),"".substr&&"b"!=="0b".substr(-1)){var D=String.prototype.substr;String.prototype.substr=function(t,e){return D.call(this,0>t&&(t=this.length+t)<0?0:t,e)}}var z="	\n\f\r   ᠎             　\u2028\u2029﻿";if(!String.prototype.trim||z.trim()){z="["+z+"]";var N=new RegExp("^"+z+z+"*"),T=new RegExp(z+z+"*$");String.prototype.trim=function(){if(void 0===this||null===this)throw new TypeError("can't convert "+this+" to object");return String(this).replace(N,"").replace(T,"")}}var P=function(t){if(null==t)throw new TypeError("can't convert "+t+" to object");return Object(t)}}),function(t,e){function n(t){var e=t.length,n=oe.type(t);return oe.isWindow(t)?!1:1===t.nodeType&&e?!0:"array"===n||"function"!==n&&(0===e||"number"==typeof e&&e>0&&e-1 in t)}function r(t){var e=fe[t]={};return oe.each(t.match(ae)||[],function(t,n){e[n]=!0}),e}function i(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=oe.expando+Math.random()}function o(t,n,r){var i;if(r===e&&1===t.nodeType)if(i="data-"+n.replace(ye,"-$1").toLowerCase(),r=t.getAttribute(i),"string"==typeof r){try{r="true"===r?!0:"false"===r?!1:"null"===r?null:+r+""===r?+r:ve.test(r)?JSON.parse(r):r}catch(o){}ge.set(t,n,r)}else r=e;return r}function s(){return!0}function a(){return!1}function l(){try{return B.activeElement}catch(t){}}function u(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function c(t,e,n){if(oe.isFunction(e))return oe.grep(t,function(t,r){return!!e.call(t,r,t)!==n});if(e.nodeType)return oe.grep(t,function(t){return t===e!==n});if("string"==typeof e){if(De.test(e))return oe.filter(e,t,n);e=oe.filter(e,t)}return oe.grep(t,function(t){return ee.call(e,t)>=0!==n})}function d(t,e){return oe.nodeName(t,"table")&&oe.nodeName(1===e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function p(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function h(t){var e=Re.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function f(t,e){for(var n=t.length,r=0;n>r;r++)me.set(t[r],"globalEval",!e||me.get(e[r],"globalEval"))}function g(t,e){var n,r,i,o,s,a,l,u;if(1===e.nodeType){if(me.hasData(t)&&(o=me.access(t),s=oe.extend({},o),u=o.events,me.set(e,s),u)){delete s.handle,s.events={};for(i in u)for(n=0,r=u[i].length;r>n;n++)oe.event.add(e,i,u[i][n])}ge.hasData(t)&&(a=ge.access(t),l=oe.extend({},a),ge.set(e,l))}}function m(t,n){var r=t.getElementsByTagName?t.getElementsByTagName(n||"*"):t.querySelectorAll?t.querySelectorAll(n||"*"):[];return n===e||n&&oe.nodeName(t,n)?oe.merge([t],r):r}function v(t,e){var n=e.nodeName.toLowerCase();"input"===n&&Ae.test(t.type)?e.checked=t.checked:("input"===n||"textarea"===n)&&(e.defaultValue=t.defaultValue)}function y(t,e){if(e in t)return e;for(var n=e.charAt(0).toUpperCase()+e.slice(1),r=e,i=Je.length;i--;)if(e=Je[i]+n,e in t)return e;return r}function b(t,e){return t=e||t,"none"===oe.css(t,"display")||!oe.contains(t.ownerDocument,t)}function _(e){return t.getComputedStyle(e,null)}function w(t,e){for(var n,r,i,o=[],s=0,a=t.length;a>s;s++)r=t[s],r.style&&(o[s]=me.get(r,"olddisplay"),n=r.style.display,e?(o[s]||"none"!==n||(r.style.display=""),""===r.style.display&&b(r)&&(o[s]=me.access(r,"olddisplay",j(r.nodeName)))):o[s]||(i=b(r),(n&&"none"!==n||!i)&&me.set(r,"olddisplay",i?n:oe.css(r,"display"))));for(s=0;a>s;s++)r=t[s],r.style&&(e&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=e?o[s]||"":"none"));return t}function x(t,e,n){var r=Be.exec(e);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):e}function k(t,e,n,r,i){for(var o=n===(r?"border":"content")?4:"width"===e?1:0,s=0;4>o;o+=2)"margin"===n&&(s+=oe.css(t,n+Ze[o],!0,i)),r?("content"===n&&(s-=oe.css(t,"padding"+Ze[o],!0,i)),"margin"!==n&&(s-=oe.css(t,"border"+Ze[o]+"Width",!0,i))):(s+=oe.css(t,"padding"+Ze[o],!0,i),"padding"!==n&&(s+=oe.css(t,"border"+Ze[o]+"Width",!0,i)));return s}function C(t,e,n){var r=!0,i="width"===e?t.offsetWidth:t.offsetHeight,o=_(t),s=oe.support.boxSizing&&"border-box"===oe.css(t,"boxSizing",!1,o);if(0>=i||null==i){if(i=qe(t,e,o),(0>i||null==i)&&(i=t.style[e]),Ye.test(i))return i;r=s&&(oe.support.boxSizingReliable||i===t.style[e]),i=parseFloat(i)||0}return i+k(t,e,n||(s?"border":"content"),r,o)+"px"}function j(t){var e=B,n=Qe[t];return n||(n=M(t,e),"none"!==n&&n||(He=(He||oe("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(e.documentElement),e=(He[0].contentWindow||He[0].contentDocument).document,e.write("<!doctype html><html><body>"),e.close(),n=M(t,e),He.detach()),Qe[t]=n),n}function M(t,e){var n=oe(e.createElement(t)).appendTo(e.body),r=oe.css(n[0],"display");return n.remove(),r}function S(t,e,n,r){var i;if(oe.isArray(e))oe.each(e,function(e,i){n||tn.test(t)?r(t,i):S(t+"["+("object"==typeof i?e:"")+"]",i,n,r)});else if(n||"object"!==oe.type(e))r(t,e);else for(i in e)S(t+"["+i+"]",e[i],n,r)}function D(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var r,i=0,o=e.toLowerCase().match(ae)||[];if(oe.isFunction(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(t[r]=t[r]||[]).unshift(n)):(t[r]=t[r]||[]).push(n)}}function z(t,e,n,r){function i(a){var l;return o[a]=!0,oe.each(t[a]||[],function(t,a){var u=a(e,n,r);return"string"!=typeof u||s||o[u]?s?!(l=u):void 0:(e.dataTypes.unshift(u),i(u),!1)}),l}var o={},s=t===yn;return i(e.dataTypes[0])||!o["*"]&&i("*")}function N(t,n){var r,i,o=oe.ajaxSettings.flatOptions||{};for(r in n)n[r]!==e&&((o[r]?t:i||(i={}))[r]=n[r]);return i&&oe.extend(!0,t,i),t}function T(t,n,r){for(var i,o,s,a,l=t.contents,u=t.dataTypes;"*"===u[0];)u.shift(),i===e&&(i=t.mimeType||n.getResponseHeader("Content-Type"));if(i)for(o in l)if(l[o]&&l[o].test(i)){u.unshift(o);break}if(u[0]in r)s=u[0];else{for(o in r){if(!u[0]||t.converters[o+" "+u[0]]){s=o;break}a||(a=o)}s=s||a}return s?(s!==u[0]&&u.unshift(s),r[s]):void 0}function P(t,e,n,r){var i,o,s,a,l,u={},c=t.dataTypes.slice();if(c[1])for(s in t.converters)u[s.toLowerCase()]=t.converters[s];for(o=c.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!l&&r&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=o,o=c.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(s=u[l+" "+o]||u["* "+o],!s)for(i in u)if(a=i.split(" "),a[1]===o&&(s=u[l+" "+a[0]]||u["* "+a[0]])){s===!0?s=u[i]:u[i]!==!0&&(o=a[0],c.unshift(a[1]));break}if(s!==!0)if(s&&t["throws"])e=s(e);else try{e=s(e)}catch(d){return{state:"parsererror",error:s?d:"No conversion from "+l+" to "+o}}}return{state:"success",data:e}}function L(){return setTimeout(function(){Sn=e}),Sn=oe.now()}function E(t,e){oe.each(e,function(e,n){for(var r=(Ln[e]||[]).concat(Ln["*"]),i=0,o=r.length;o>i;i++)if(r[i].call(t,e,n))return})}function A(t,e,n){var r,i,o=0,s=Pn.length,a=oe.Deferred().always(function(){delete l.elem}),l=function(){if(i)return!1;for(var e=Sn||L(),n=Math.max(0,u.startTime+u.duration-e),r=n/u.duration||0,o=1-r,s=0,l=u.tweens.length;l>s;s++)u.tweens[s].run(o);return a.notifyWith(t,[u,o,n]),1>o&&l?n:(a.resolveWith(t,[u]),!1)},u=a.promise({elem:t,props:oe.extend({},e),opts:oe.extend(!0,{specialEasing:{}},n),originalProperties:e,originalOptions:n,startTime:Sn||L(),duration:n.duration,tweens:[],createTween:function(e,n){var r=oe.Tween(t,u.opts,e,n,u.opts.specialEasing[e]||u.opts.easing);return u.tweens.push(r),r},stop:function(e){var n=0,r=e?u.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)u.tweens[n].run(1);return e?a.resolveWith(t,[u,e]):a.rejectWith(t,[u,e]),this}}),c=u.props;for(O(c,u.opts.specialEasing);s>o;o++)if(r=Pn[o].call(u,t,c,u.opts))return r;return E(u,c),oe.isFunction(u.opts.start)&&u.opts.start.call(t,u),oe.fx.timer(oe.extend(l,{elem:t,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function O(t,e){var n,r,i,o,s;for(n in t)if(r=oe.camelCase(n),i=e[r],o=t[n],oe.isArray(o)&&(i=o[1],o=t[n]=o[0]),n!==r&&(t[r]=o,delete t[n]),s=oe.cssHooks[r],s&&"expand"in s){o=s.expand(o),delete t[r];for(n in o)n in t||(t[n]=o[n],e[n]=i)}else e[r]=i}function I(t,n,r){var i,o,s,a,l,u,c,d,p,h=this,f=t.style,g={},m=[],v=t.nodeType&&b(t);r.queue||(d=oe._queueHooks(t,"fx"),null==d.unqueued&&(d.unqueued=0,p=d.empty.fire,d.empty.fire=function(){d.unqueued||p()}),d.unqueued++,h.always(function(){h.always(function(){d.unqueued--,oe.queue(t,"fx").length||d.empty.fire()})})),1===t.nodeType&&("height"in n||"width"in n)&&(r.overflow=[f.overflow,f.overflowX,f.overflowY],"inline"===oe.css(t,"display")&&"none"===oe.css(t,"float")&&(f.display="inline-block")),r.overflow&&(f.overflow="hidden",h.always(function(){f.overflow=r.overflow[0],f.overflowX=r.overflow[1],f.overflowY=r.overflow[2]})),l=me.get(t,"fxshow");for(i in n)if(s=n[i],zn.exec(s)){if(delete n[i],u=u||"toggle"===s,s===(v?"hide":"show")){if("show"!==s||l===e||l[i]===e)continue;v=!0}m.push(i)}if(a=m.length){l=me.get(t,"fxshow")||me.access(t,"fxshow",{}),"hidden"in l&&(v=l.hidden),u&&(l.hidden=!v),v?oe(t).show():h.done(function(){oe(t).hide()}),h.done(function(){var e;me.remove(t,"fxshow");for(e in g)oe.style(t,e,g[e])});for(i=0;a>i;i++)o=m[i],c=h.createTween(o,v?l[o]:0),g[o]=l[o]||oe.style(t,o),o in l||(l[o]=c.start,v&&(c.end=c.start,c.start="width"===o||"height"===o?1:0))}}function R(t,e,n,r,i){return new R.prototype.init(t,e,n,r,i)}function $(t,e){var n,r={height:t},i=0;for(e=e?1:0;4>i;i+=2-e)n=Ze[i],r["margin"+n]=r["padding"+n]=t;return e&&(r.opacity=r.width=t),r}function F(t){return oe.isWindow(t)?t:9===t.nodeType&&t.defaultView}var q,H,W=typeof e,V=t.location,B=t.document,Y=B.documentElement,U=t.jQuery,Q=t.$,G={},X=[],Z="2.0.0",J=X.concat,K=X.push,te=X.slice,ee=X.indexOf,ne=G.toString,re=G.hasOwnProperty,ie=Z.trim,oe=function(t,e){return new oe.fn.init(t,e,q)},se=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ae=/\S+/g,le=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,ue=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ce=/^-ms-/,de=/-([\da-z])/gi,pe=function(t,e){return e.toUpperCase()},he=function(){B.removeEventListener("DOMContentLoaded",he,!1),t.removeEventListener("load",he,!1),oe.ready()};oe.fn=oe.prototype={jquery:Z,constructor:oe,init:function(t,n,r){var i,o;if(!t)return this;if("string"==typeof t){if(i="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:le.exec(t),!i||!i[1]&&n)return!n||n.jquery?(n||r).find(t):this.constructor(n).find(t);if(i[1]){if(n=n instanceof oe?n[0]:n,oe.merge(this,oe.parseHTML(i[1],n&&n.nodeType?n.ownerDocument||n:B,!0)),ue.test(i[1])&&oe.isPlainObject(n))for(i in n)oe.isFunction(this[i])?this[i](n[i]):this.attr(i,n[i]);return this}return o=B.getElementById(i[2]),o&&o.parentNode&&(this.length=1,this[0]=o),this.context=B,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):oe.isFunction(t)?r.ready(t):(t.selector!==e&&(this.selector=t.selector,this.context=t.context),oe.makeArray(t,this))},selector:"",length:0,toArray:function(){return te.call(this)},get:function(t){return null==t?this.toArray():0>t?this[this.length+t]:this[t]},pushStack:function(t){var e=oe.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return oe.each(this,t,e)},ready:function(t){return oe.ready.promise().done(t),this},slice:function(){return this.pushStack(te.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(0>t?e:0);return this.pushStack(n>=0&&e>n?[this[n]]:[])},map:function(t){return this.pushStack(oe.map(this,function(e,n){return t.call(e,n,e)}))},end:function(){return this.prevObject||this.constructor(null)},push:K,sort:[].sort,splice:[].splice},oe.fn.init.prototype=oe.fn,oe.extend=oe.fn.extend=function(){var t,n,r,i,o,s,a=arguments[0]||{},l=1,u=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[1]||{},l=2),"object"==typeof a||oe.isFunction(a)||(a={}),u===l&&(a=this,--l);u>l;l++)if(null!=(t=arguments[l]))for(n in t)r=a[n],i=t[n],a!==i&&(c&&i&&(oe.isPlainObject(i)||(o=oe.isArray(i)))?(o?(o=!1,s=r&&oe.isArray(r)?r:[]):s=r&&oe.isPlainObject(r)?r:{},a[n]=oe.extend(c,s,i)):i!==e&&(a[n]=i));return a},oe.extend({expando:"jQuery"+(Z+Math.random()).replace(/\D/g,""),noConflict:function(e){return t.$===oe&&(t.$=Q),e&&t.jQuery===oe&&(t.jQuery=U),oe},isReady:!1,readyWait:1,holdReady:function(t){t?oe.readyWait++:oe.ready(!0)},ready:function(t){(t===!0?--oe.readyWait:oe.isReady)||(oe.isReady=!0,t!==!0&&--oe.readyWait>0||(H.resolveWith(B,[oe]),oe.fn.trigger&&oe(B).trigger("ready").off("ready")))},isFunction:function(t){return"function"===oe.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},type:function(t){return null==t?String(t):"object"==typeof t||"function"==typeof t?G[ne.call(t)]||"object":typeof t},isPlainObject:function(t){if("object"!==oe.type(t)||t.nodeType||oe.isWindow(t))return!1;try{if(t.constructor&&!re.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}return!0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},error:function(t){throw new Error(t)},parseHTML:function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||B;var r=ue.exec(t),i=!n&&[];return r?[e.createElement(r[1])]:(r=oe.buildFragment([t],e,i),i&&oe(i).remove(),oe.merge([],r.childNodes))},parseJSON:JSON.parse,parseXML:function(t){var n,r;if(!t||"string"!=typeof t)return null;try{r=new DOMParser,n=r.parseFromString(t,"text/xml")}catch(i){n=e}return(!n||n.getElementsByTagName("parsererror").length)&&oe.error("Invalid XML: "+t),n},noop:function(){},globalEval:function(t){var e,n=eval;t=oe.trim(t),t&&(1===t.indexOf("use strict")?(e=B.createElement("script"),e.text=t,B.head.appendChild(e).parentNode.removeChild(e)):n(t))},camelCase:function(t){return t.replace(ce,"ms-").replace(de,pe)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,r){var i,o=0,s=t.length,a=n(t);if(r){if(a)for(;s>o&&(i=e.apply(t[o],r),i!==!1);o++);else for(o in t)if(i=e.apply(t[o],r),i===!1)break}else if(a)for(;s>o&&(i=e.call(t[o],o,t[o]),i!==!1);o++);else for(o in t)if(i=e.call(t[o],o,t[o]),i===!1)break;return t},trim:function(t){return null==t?"":ie.call(t)},makeArray:function(t,e){var r=e||[];return null!=t&&(n(Object(t))?oe.merge(r,"string"==typeof t?[t]:t):K.call(r,t)),r},inArray:function(t,e,n){return null==e?-1:ee.call(e,t,n)},merge:function(t,n){var r=n.length,i=t.length,o=0;if("number"==typeof r)for(;r>o;o++)t[i++]=n[o];else for(;n[o]!==e;)t[i++]=n[o++];return t.length=i,t},grep:function(t,e,n){var r,i=[],o=0,s=t.length;for(n=!!n;s>o;o++)r=!!e(t[o],o),n!==r&&i.push(t[o]);return i},map:function(t,e,r){var i,o=0,s=t.length,a=n(t),l=[];if(a)for(;s>o;o++)i=e(t[o],o,r),null!=i&&(l[l.length]=i);else for(o in t)i=e(t[o],o,r),null!=i&&(l[l.length]=i);return J.apply([],l)},guid:1,proxy:function(t,n){var r,i,o;return"string"==typeof n&&(r=t[n],n=t,t=r),oe.isFunction(t)?(i=te.call(arguments,2),o=function(){return t.apply(n||this,i.concat(te.call(arguments)))},o.guid=t.guid=t.guid||oe.guid++,o):e},access:function(t,n,r,i,o,s,a){var l=0,u=t.length,c=null==r;if("object"===oe.type(r)){o=!0;for(l in r)oe.access(t,n,l,r[l],!0,s,a)}else if(i!==e&&(o=!0,oe.isFunction(i)||(a=!0),c&&(a?(n.call(t,i),n=null):(c=n,n=function(t,e,n){return c.call(oe(t),n)})),n))for(;u>l;l++)n(t[l],r,a?i:i.call(t[l],l,n(t[l],r)));return o?t:c?n.call(t):u?n(t[0],r):s},now:Date.now,swap:function(t,e,n,r){var i,o,s={};for(o in e)s[o]=t.style[o],t.style[o]=e[o];i=n.apply(t,r||[]);for(o in e)t.style[o]=s[o];return i}}),oe.ready.promise=function(e){return H||(H=oe.Deferred(),"complete"===B.readyState?setTimeout(oe.ready):(B.addEventListener("DOMContentLoaded",he,!1),t.addEventListener("load",he,!1))),H.promise(e)},oe.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){G["[object "+e+"]"]=e.toLowerCase()}),q=oe(B),function(t,e){function n(t){return be.test(t+"")}function r(){var t,e=[];return t=function(n,r){return e.push(n+=" ")>M.cacheLength&&delete t[e.shift()],t[n]=r}}function i(t){return t[F]=!0,t}function o(t){var e=L.createElement("div");try{return!!t(e)}catch(n){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function s(t,e,n,r){var i,o,s,a,l,u,c,d,p,g;if((e?e.ownerDocument||e:q)!==L&&P(e),e=e||L,n=n||[],!t||"string"!=typeof t)return n;if(1!==(a=e.nodeType)&&9!==a)return[];if(A&&!r){if(i=_e.exec(t))if(s=i[1]){if(9===a){if(o=e.getElementById(s),!o||!o.parentNode)return n;if(o.id===s)return n.push(o),n}else if(e.ownerDocument&&(o=e.ownerDocument.getElementById(s))&&$(e,o)&&o.id===s)return n.push(o),n}else{if(i[2])return ee.apply(n,e.getElementsByTagName(t)),n;if((s=i[3])&&H.getElementsByClassName&&e.getElementsByClassName)return ee.apply(n,e.getElementsByClassName(s)),n}if(H.qsa&&(!O||!O.test(t))){if(d=c=F,p=e,g=9===a&&t,1===a&&"object"!==e.nodeName.toLowerCase()){for(u=h(t),(c=e.getAttribute("id"))?d=c.replace(ke,"\\$&"):e.setAttribute("id",d),d="[id='"+d+"'] ",l=u.length;l--;)u[l]=d+f(u[l]);p=fe.test(t)&&e.parentNode||e,g=u.join(",")}if(g)try{return ee.apply(n,p.querySelectorAll(g)),n}catch(m){}finally{c||e.removeAttribute("id")}}}return x(t.replace(de,"$1"),e,n,r)}function a(t,e){var n=e&&t,r=n&&(~e.sourceIndex||Z)-(~t.sourceIndex||Z);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function l(t,n,r){var i;return r?e:(i=t.getAttributeNode(n))&&i.specified?i.value:t[n]===!0?n.toLowerCase():null}function u(t,n,r){var i;return r?e:i=t.getAttribute(n,"type"===n.toLowerCase()?1:2)}function c(t){return function(e){var n=e.nodeName.toLowerCase();return"input"===n&&e.type===t}}function d(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function p(t){return i(function(e){return e=+e,i(function(n,r){for(var i,o=t([],n.length,e),s=o.length;s--;)n[i=o[s]]&&(n[i]=!(r[i]=n[i]))})})}function h(t,e){var n,r,i,o,a,l,u,c=Y[t+" "];if(c)return e?0:c.slice(0);for(a=t,l=[],u=M.preFilter;a;){(!n||(r=pe.exec(a)))&&(r&&(a=a.slice(r[0].length)||a),l.push(i=[])),n=!1,(r=he.exec(a))&&(n=r.shift(),i.push({value:n,type:r[0].replace(de," ")}),a=a.slice(n.length));
for(o in M.filter)!(r=ye[o].exec(a))||u[o]&&!(r=u[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return e?a.length:a?s.error(t):Y(t,l).slice(0)}function f(t){for(var e=0,n=t.length,r="";n>e;e++)r+=t[e].value;return r}function g(t,e,n){var r=e.dir,i=n&&"parentNode"===r,o=V++;return e.first?function(e,n,o){for(;e=e[r];)if(1===e.nodeType||i)return t(e,n,o)}:function(e,n,s){var a,l,u,c=W+" "+o;if(s){for(;e=e[r];)if((1===e.nodeType||i)&&t(e,n,s))return!0}else for(;e=e[r];)if(1===e.nodeType||i)if(u=e[F]||(e[F]={}),(l=u[r])&&l[0]===c){if((a=l[1])===!0||a===j)return a===!0}else if(l=u[r]=[c],l[1]=t(e,n,s)||j,l[1]===!0)return!0}}function m(t){return t.length>1?function(e,n,r){for(var i=t.length;i--;)if(!t[i](e,n,r))return!1;return!0}:t[0]}function v(t,e,n,r,i){for(var o,s=[],a=0,l=t.length,u=null!=e;l>a;a++)(o=t[a])&&(!n||n(o,r,i))&&(s.push(o),u&&e.push(a));return s}function y(t,e,n,r,o,s){return r&&!r[F]&&(r=y(r)),o&&!o[F]&&(o=y(o,s)),i(function(i,s,a,l){var u,c,d,p=[],h=[],f=s.length,g=i||w(e||"*",a.nodeType?[a]:a,[]),m=!t||!i&&e?g:v(g,p,t,a,l),y=n?o||(i?t:f||r)?[]:s:m;if(n&&n(m,y,a,l),r)for(u=v(y,h),r(u,[],a,l),c=u.length;c--;)(d=u[c])&&(y[h[c]]=!(m[h[c]]=d));if(i){if(o||t){if(o){for(u=[],c=y.length;c--;)(d=y[c])&&u.push(m[c]=d);o(null,y=[],u,l)}for(c=y.length;c--;)(d=y[c])&&(u=o?re.call(i,d):p[c])>-1&&(i[u]=!(s[u]=d))}}else y=v(y===s?y.splice(f,y.length):y),o?o(null,s,y,l):ee.apply(s,y)})}function b(t){for(var e,n,r,i=t.length,o=M.relative[t[0].type],s=o||M.relative[" "],a=o?1:0,l=g(function(t){return t===e},s,!0),u=g(function(t){return re.call(e,t)>-1},s,!0),c=[function(t,n,r){return!o&&(r||n!==N)||((e=n).nodeType?l(t,n,r):u(t,n,r))}];i>a;a++)if(n=M.relative[t[a].type])c=[g(m(c),n)];else{if(n=M.filter[t[a].type].apply(null,t[a].matches),n[F]){for(r=++a;i>r&&!M.relative[t[r].type];r++);return y(a>1&&m(c),a>1&&f(t.slice(0,a-1)).replace(de,"$1"),n,r>a&&b(t.slice(a,r)),i>r&&b(t=t.slice(r)),i>r&&f(t))}c.push(n)}return m(c)}function _(t,e){var n=0,r=e.length>0,o=t.length>0,a=function(i,a,l,u,c){var d,p,h,f=[],g=0,m="0",y=i&&[],b=null!=c,_=N,w=i||o&&M.find.TAG("*",c&&a.parentNode||a),x=W+=null==_?1:Math.random()||.1;for(b&&(N=a!==L&&a,j=n);null!=(d=w[m]);m++){if(o&&d){for(p=0;h=t[p++];)if(h(d,a,l)){u.push(d);break}b&&(W=x,j=++n)}r&&((d=!h&&d)&&g--,i&&y.push(d))}if(g+=m,r&&m!==g){for(p=0;h=e[p++];)h(y,f,a,l);if(i){if(g>0)for(;m--;)y[m]||f[m]||(f[m]=K.call(u));f=v(f)}ee.apply(u,f),b&&!i&&f.length>0&&g+e.length>1&&s.uniqueSort(u)}return b&&(W=x,N=_),y};return r?i(a):a}function w(t,e,n){for(var r=0,i=e.length;i>r;r++)s(t,e[r],n);return n}function x(t,e,n,r){var i,o,s,a,l,u=h(t);if(!r&&1===u.length){if(o=u[0]=u[0].slice(0),o.length>2&&"ID"===(s=o[0]).type&&9===e.nodeType&&A&&M.relative[o[1].type]){if(e=(M.find.ID(s.matches[0].replace(Ce,je),e)||[])[0],!e)return n;t=t.slice(o.shift().value.length)}for(i=ye.needsContext.test(t)?0:o.length;i--&&(s=o[i],!M.relative[a=s.type]);)if((l=M.find[a])&&(r=l(s.matches[0].replace(Ce,je),fe.test(o[0].type)&&e.parentNode||e))){if(o.splice(i,1),t=r.length&&f(o),!t)return ee.apply(n,r),n;break}}return z(t,u)(r,e,!A,n,fe.test(t)),n}function k(){}var C,j,M,S,D,z,N,T,P,L,E,A,O,I,R,$,F="sizzle"+-new Date,q=t.document,H={},W=0,V=0,B=r(),Y=r(),U=r(),Q=!1,G=function(){return 0},X=typeof e,Z=1<<31,J=[],K=J.pop,te=J.push,ee=J.push,ne=J.slice,re=J.indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(this[e]===t)return e;return-1},ie="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",se="[\\x20\\t\\r\\n\\f]",ae="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",le=ae.replace("w","w#"),ue="\\["+se+"*("+ae+")"+se+"*(?:([*^$|!~]?=)"+se+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+le+")|)|)"+se+"*\\]",ce=":("+ae+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+ue.replace(3,8)+")*)|.*)\\)|)",de=new RegExp("^"+se+"+|((?:^|[^\\\\])(?:\\\\.)*)"+se+"+$","g"),pe=new RegExp("^"+se+"*,"+se+"*"),he=new RegExp("^"+se+"*([>+~]|"+se+")"+se+"*"),fe=new RegExp(se+"*[+~]"),ge=new RegExp("="+se+"*([^\\]'\"]*)"+se+"*\\]","g"),me=new RegExp(ce),ve=new RegExp("^"+le+"$"),ye={ID:new RegExp("^#("+ae+")"),CLASS:new RegExp("^\\.("+ae+")"),TAG:new RegExp("^("+ae.replace("w","w*")+")"),ATTR:new RegExp("^"+ue),PSEUDO:new RegExp("^"+ce),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+se+"*(even|odd|(([+-]|)(\\d*)n|)"+se+"*(?:([+-]|)"+se+"*(\\d+)|))"+se+"*\\)|)","i"),"boolean":new RegExp("^(?:"+ie+")$","i"),needsContext:new RegExp("^"+se+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+se+"*((?:-\\d)?\\d*)"+se+"*\\)|)(?=[^-]|$)","i")},be=/^[^{]+\{\s*\[native \w/,_e=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,we=/^(?:input|select|textarea|button)$/i,xe=/^h\d$/i,ke=/'|\\/g,Ce=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,je=function(t,e){var n="0x"+e-65536;return n!==n?e:0>n?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)};try{ee.apply(J=ne.call(q.childNodes),q.childNodes),J[q.childNodes.length].nodeType}catch(Me){ee={apply:J.length?function(t,e){te.apply(t,ne.call(e))}:function(t,e){for(var n=t.length,r=0;t[n++]=e[r++];);t.length=n-1}}}D=s.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},P=s.setDocument=function(t){var r=t?t.ownerDocument||t:q;return r!==L&&9===r.nodeType&&r.documentElement?(L=r,E=r.documentElement,A=!D(r),H.getElementsByTagName=o(function(t){return t.appendChild(r.createComment("")),!t.getElementsByTagName("*").length}),H.attributes=o(function(t){return t.className="i",!t.getAttribute("className")}),H.getElementsByClassName=o(function(t){return t.innerHTML="<div class='a'></div><div class='a i'></div>",t.firstChild.className="i",2===t.getElementsByClassName("i").length}),H.sortDetached=o(function(t){return 1&t.compareDocumentPosition(L.createElement("div"))}),H.getById=o(function(t){return E.appendChild(t).id=F,!r.getElementsByName||!r.getElementsByName(F).length}),H.getById?(M.find.ID=function(t,e){if(typeof e.getElementById!==X&&A){var n=e.getElementById(t);return n&&n.parentNode?[n]:[]}},M.filter.ID=function(t){var e=t.replace(Ce,je);return function(t){return t.getAttribute("id")===e}}):(M.find.ID=function(t,n){if(typeof n.getElementById!==X&&A){var r=n.getElementById(t);return r?r.id===t||typeof r.getAttributeNode!==X&&r.getAttributeNode("id").value===t?[r]:e:[]}},M.filter.ID=function(t){var e=t.replace(Ce,je);return function(t){var n=typeof t.getAttributeNode!==X&&t.getAttributeNode("id");return n&&n.value===e}}),M.find.TAG=H.getElementsByTagName?function(t,e){return typeof e.getElementsByTagName!==X?e.getElementsByTagName(t):void 0}:function(t,e){var n,r=[],i=0,o=e.getElementsByTagName(t);if("*"===t){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},M.find.CLASS=H.getElementsByClassName&&function(t,e){return typeof e.getElementsByClassName!==X&&A?e.getElementsByClassName(t):void 0},I=[],O=[],(H.qsa=n(r.querySelectorAll))&&(o(function(t){t.innerHTML="<select><option selected=''></option></select>",t.querySelectorAll("[selected]").length||O.push("\\["+se+"*(?:value|"+ie+")"),t.querySelectorAll(":checked").length||O.push(":checked")}),o(function(t){var e=L.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("t",""),t.querySelectorAll("[t^='']").length&&O.push("[*^$]="+se+"*(?:''|\"\")"),t.querySelectorAll(":enabled").length||O.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),O.push(",.*:")})),(H.matchesSelector=n(R=E.webkitMatchesSelector||E.mozMatchesSelector||E.oMatchesSelector||E.msMatchesSelector))&&o(function(t){H.disconnectedMatch=R.call(t,"div"),R.call(t,"[s!='']:x"),I.push("!=",ce)}),O=O.length&&new RegExp(O.join("|")),I=I.length&&new RegExp(I.join("|")),$=n(E.contains)||E.compareDocumentPosition?function(t,e){var n=9===t.nodeType?t.documentElement:t,r=e&&e.parentNode;return t===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):t.compareDocumentPosition&&16&t.compareDocumentPosition(r)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},G=E.compareDocumentPosition?function(t,e){if(t===e)return Q=!0,0;var n=e.compareDocumentPosition&&t.compareDocumentPosition&&t.compareDocumentPosition(e);return n?1&n||!H.sortDetached&&e.compareDocumentPosition(t)===n?t===r||$(q,t)?-1:e===r||$(q,e)?1:T?re.call(T,t)-re.call(T,e):0:4&n?-1:1:t.compareDocumentPosition?-1:1}:function(t,e){var n,i=0,o=t.parentNode,s=e.parentNode,l=[t],u=[e];if(t===e)return Q=!0,0;if(!o||!s)return t===r?-1:e===r?1:o?-1:s?1:T?re.call(T,t)-re.call(T,e):0;if(o===s)return a(t,e);for(n=t;n=n.parentNode;)l.unshift(n);for(n=e;n=n.parentNode;)u.unshift(n);for(;l[i]===u[i];)i++;return i?a(l[i],u[i]):l[i]===q?-1:u[i]===q?1:0},L):L},s.matches=function(t,e){return s(t,null,null,e)},s.matchesSelector=function(t,e){if((t.ownerDocument||t)!==L&&P(t),e=e.replace(ge,"='$1']"),!(!H.matchesSelector||!A||I&&I.test(e)||O&&O.test(e)))try{var n=R.call(t,e);if(n||H.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(r){}return s(e,L,null,[t]).length>0},s.contains=function(t,e){return(t.ownerDocument||t)!==L&&P(t),$(t,e)},s.attr=function(t,n){(t.ownerDocument||t)!==L&&P(t);var r=M.attrHandle[n.toLowerCase()],i=r&&r(t,n,!A);return i===e?H.attributes||!A?t.getAttribute(n):(i=t.getAttributeNode(n))&&i.specified?i.value:null:i},s.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},s.uniqueSort=function(t){var e,n=[],r=0,i=0;if(Q=!H.detectDuplicates,T=!H.sortStable&&t.slice(0),t.sort(G),Q){for(;e=t[i++];)e===t[i]&&(r=n.push(i));for(;r--;)t.splice(n[r],1)}return t},S=s.getText=function(t){var e,n="",r=0,i=t.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=S(t)}else if(3===i||4===i)return t.nodeValue}else for(;e=t[r];r++)n+=S(e);return n},M=s.selectors={cacheLength:50,createPseudo:i,match:ye,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(Ce,je),t[3]=(t[4]||t[5]||"").replace(Ce,je),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||s.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&s.error(t[0]),t},PSEUDO:function(t){var e,n=!t[5]&&t[2];return ye.CHILD.test(t[0])?null:(t[4]?t[2]=t[4]:n&&me.test(n)&&(e=h(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(Ce,je).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=B[t+" "];return e||(e=new RegExp("(^|"+se+")"+t+"("+se+"|$)"))&&B(t,function(t){return e.test("string"==typeof t.className&&t.className||typeof t.getAttribute!==X&&t.getAttribute("class")||"")})},ATTR:function(t,e,n){return function(r){var i=s.attr(r,t);return null==i?"!="===e:e?(i+="","="===e?i===n:"!="===e?i!==n:"^="===e?n&&0===i.indexOf(n):"*="===e?n&&i.indexOf(n)>-1:"$="===e?n&&i.slice(-n.length)===n:"~="===e?(" "+i+" ").indexOf(n)>-1:"|="===e?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(t,e,n,r,i){var o="nth"!==t.slice(0,3),s="last"!==t.slice(-4),a="of-type"===e;return 1===r&&0===i?function(t){return!!t.parentNode}:function(e,n,l){var u,c,d,p,h,f,g=o!==s?"nextSibling":"previousSibling",m=e.parentNode,v=a&&e.nodeName.toLowerCase(),y=!l&&!a;if(m){if(o){for(;g;){for(d=e;d=d[g];)if(a?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;f=g="only"===t&&!f&&"nextSibling"}return!0}if(f=[s?m.firstChild:m.lastChild],s&&y){for(c=m[F]||(m[F]={}),u=c[t]||[],h=u[0]===W&&u[1],p=u[0]===W&&u[2],d=h&&m.childNodes[h];d=++h&&d&&d[g]||(p=h=0)||f.pop();)if(1===d.nodeType&&++p&&d===e){c[t]=[W,h,p];break}}else if(y&&(u=(e[F]||(e[F]={}))[t])&&u[0]===W)p=u[1];else for(;(d=++h&&d&&d[g]||(p=h=0)||f.pop())&&((a?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++p||(y&&((d[F]||(d[F]={}))[t]=[W,p]),d!==e)););return p-=i,p===r||p%r===0&&p/r>=0}}},PSEUDO:function(t,e){var n,r=M.pseudos[t]||M.setFilters[t.toLowerCase()]||s.error("unsupported pseudo: "+t);return r[F]?r(e):r.length>1?(n=[t,t,"",e],M.setFilters.hasOwnProperty(t.toLowerCase())?i(function(t,n){for(var i,o=r(t,e),s=o.length;s--;)i=re.call(t,o[s]),t[i]=!(n[i]=o[s])}):function(t){return r(t,0,n)}):r}},pseudos:{not:i(function(t){var e=[],n=[],r=z(t.replace(de,"$1"));return r[F]?i(function(t,e,n,i){for(var o,s=r(t,null,i,[]),a=t.length;a--;)(o=s[a])&&(t[a]=!(e[a]=o))}):function(t,i,o){return e[0]=t,r(e,null,o,n),!n.pop()}}),has:i(function(t){return function(e){return s(t,e).length>0}}),contains:i(function(t){return function(e){return(e.textContent||e.innerText||S(e)).indexOf(t)>-1}}),lang:i(function(t){return ve.test(t||"")||s.error("unsupported lang: "+t),t=t.replace(Ce,je).toLowerCase(),function(e){var n;do if(n=A?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return n=n.toLowerCase(),n===t||0===n.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===E},focus:function(t){return t===L.activeElement&&(!L.hasFocus||L.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeName>"@"||3===t.nodeType||4===t.nodeType)return!1;return!0},parent:function(t){return!M.pseudos.empty(t)},header:function(t){return xe.test(t.nodeName)},input:function(t){return we.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||e.toLowerCase()===t.type)},first:p(function(){return[0]}),last:p(function(t,e){return[e-1]}),eq:p(function(t,e,n){return[0>n?n+e:n]}),even:p(function(t,e){for(var n=0;e>n;n+=2)t.push(n);return t}),odd:p(function(t,e){for(var n=1;e>n;n+=2)t.push(n);return t}),lt:p(function(t,e,n){for(var r=0>n?n+e:n;--r>=0;)t.push(r);return t}),gt:p(function(t,e,n){for(var r=0>n?n+e:n;++r<e;)t.push(r);return t})}};for(C in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})M.pseudos[C]=c(C);for(C in{submit:!0,reset:!0})M.pseudos[C]=d(C);z=s.compile=function(t,e){var n,r=[],i=[],o=U[t+" "];if(!o){for(e||(e=h(t)),n=e.length;n--;)o=b(e[n]),o[F]?r.push(o):i.push(o);o=U(t,_(i,r))}return o},M.pseudos.nth=M.pseudos.eq,k.prototype=M.filters=M.pseudos,M.setFilters=new k,H.sortStable=F.split("").sort(G).join("")===F,P(),[0,0].sort(G),H.detectDuplicates=Q,o(function(t){if(t.innerHTML="<a href='#'></a>","#"!==t.firstChild.getAttribute("href"))for(var e="type|href|height|width".split("|"),n=e.length;n--;)M.attrHandle[e[n]]=u}),o(function(t){if(null!=t.getAttribute("disabled"))for(var e=ie.split("|"),n=e.length;n--;)M.attrHandle[e[n]]=l}),oe.find=s,oe.expr=s.selectors,oe.expr[":"]=oe.expr.pseudos,oe.unique=s.uniqueSort,oe.text=s.getText,oe.isXMLDoc=s.isXML,oe.contains=s.contains}(t);var fe={};oe.Callbacks=function(t){t="string"==typeof t?fe[t]||r(t):oe.extend({},t);var n,i,o,s,a,l,u=[],c=!t.once&&[],d=function(e){for(n=t.memory&&e,i=!0,l=s||0,s=0,a=u.length,o=!0;u&&a>l;l++)if(u[l].apply(e[0],e[1])===!1&&t.stopOnFalse){n=!1;break}o=!1,u&&(c?c.length&&d(c.shift()):n?u=[]:p.disable())},p={add:function(){if(u){var e=u.length;!function r(e){oe.each(e,function(e,n){var i=oe.type(n);"function"===i?t.unique&&p.has(n)||u.push(n):n&&n.length&&"string"!==i&&r(n)})}(arguments),o?a=u.length:n&&(s=e,d(n))}return this},remove:function(){return u&&oe.each(arguments,function(t,e){for(var n;(n=oe.inArray(e,u,n))>-1;)u.splice(n,1),o&&(a>=n&&a--,l>=n&&l--)}),this},has:function(t){return t?oe.inArray(t,u)>-1:!(!u||!u.length)},empty:function(){return u=[],a=0,this},disable:function(){return u=c=n=e,this},disabled:function(){return!u},lock:function(){return c=e,n||p.disable(),this},locked:function(){return!c},fireWith:function(t,e){return e=e||[],e=[t,e.slice?e.slice():e],!u||i&&!c||(o?c.push(e):d(e)),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!i}};return p},oe.extend({Deferred:function(t){var e=[["resolve","done",oe.Callbacks("once memory"),"resolved"],["reject","fail",oe.Callbacks("once memory"),"rejected"],["notify","progress",oe.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var t=arguments;return oe.Deferred(function(n){oe.each(e,function(e,o){var s=o[0],a=oe.isFunction(t[e])&&t[e];i[o[1]](function(){var t=a&&a.apply(this,arguments);t&&oe.isFunction(t.promise)?t.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s+"With"](this===r?n.promise():this,a?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?oe.extend(t,r):r}},i={};return r.pipe=r.then,oe.each(e,function(t,o){var s=o[2],a=o[3];r[o[1]]=s.add,a&&s.add(function(){n=a},e[1^t][2].disable,e[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=s.fireWith}),r.promise(i),t&&t.call(i,i),i},when:function(t){var e,n,r,i=0,o=te.call(arguments),s=o.length,a=1!==s||t&&oe.isFunction(t.promise)?s:0,l=1===a?t:oe.Deferred(),u=function(t,n,r){return function(i){n[t]=this,r[t]=arguments.length>1?te.call(arguments):i,r===e?l.notifyWith(n,r):--a||l.resolveWith(n,r)}};if(s>1)for(e=new Array(s),n=new Array(s),r=new Array(s);s>i;i++)o[i]&&oe.isFunction(o[i].promise)?o[i].promise().done(u(i,r,o)).fail(l.reject).progress(u(i,n,e)):--a;return a||l.resolveWith(r,o),l.promise()}}),oe.support=function(e){var n=B.createElement("input"),r=B.createDocumentFragment(),i=B.createElement("div"),o=B.createElement("select"),s=o.appendChild(B.createElement("option"));return n.type?(n.type="checkbox",e.checkOn=""!==n.value,e.optSelected=s.selected,e.reliableMarginRight=!0,e.boxSizingReliable=!0,e.pixelPosition=!1,n.checked=!0,e.noCloneChecked=n.cloneNode(!0).checked,o.disabled=!0,e.optDisabled=!s.disabled,n=B.createElement("input"),n.value="t",n.type="radio",e.radioValue="t"===n.value,n.setAttribute("checked","t"),n.setAttribute("name","t"),r.appendChild(n),e.checkClone=r.cloneNode(!0).cloneNode(!0).lastChild.checked,e.focusinBubbles="onfocusin"in t,i.style.backgroundClip="content-box",i.cloneNode(!0).style.backgroundClip="",e.clearCloneStyle="content-box"===i.style.backgroundClip,oe(function(){var n,r,o="padding:0;margin:0;border:0;display:block;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box",s=B.getElementsByTagName("body")[0];s&&(n=B.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",s.appendChild(n).appendChild(i),i.innerHTML="",i.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%",oe.swap(s,null!=s.style.zoom?{zoom:1}:{},function(){e.boxSizing=4===i.offsetWidth}),t.getComputedStyle&&(e.pixelPosition="1%"!==(t.getComputedStyle(i,null)||{}).top,e.boxSizingReliable="4px"===(t.getComputedStyle(i,null)||{width:"4px"}).width,r=i.appendChild(B.createElement("div")),r.style.cssText=i.style.cssText=o,r.style.marginRight=r.style.width="0",i.style.width="1px",e.reliableMarginRight=!parseFloat((t.getComputedStyle(r,null)||{}).marginRight)),s.removeChild(n))}),e):e}({});var ge,me,ve=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,ye=/([A-Z])/g;i.uid=1,i.accepts=function(t){return t.nodeType?1===t.nodeType||9===t.nodeType:!0},i.prototype={key:function(t){if(!i.accepts(t))return 0;var e={},n=t[this.expando];if(!n){n=i.uid++;try{e[this.expando]={value:n},Object.defineProperties(t,e)}catch(r){e[this.expando]=n,oe.extend(t,e)}}return this.cache[n]||(this.cache[n]={}),n},set:function(t,e,n){var r,i=this.key(t),o=this.cache[i];if("string"==typeof e)o[e]=n;else if(oe.isEmptyObject(o))this.cache[i]=e;else for(r in e)o[r]=e[r]},get:function(t,n){var r=this.cache[this.key(t)];return n===e?r:r[n]},access:function(t,n,r){return n===e||n&&"string"==typeof n&&r===e?this.get(t,n):(this.set(t,n,r),r!==e?r:n)},remove:function(t,n){var r,i,o=this.key(t),s=this.cache[o];if(n===e)this.cache[o]={};else{oe.isArray(n)?i=n.concat(n.map(oe.camelCase)):n in s?i=[n]:(i=oe.camelCase(n),i=i in s?[i]:i.match(ae)||[]),r=i.length;for(;r--;)delete s[i[r]]}},hasData:function(t){return!oe.isEmptyObject(this.cache[t[this.expando]]||{})},discard:function(t){delete this.cache[this.key(t)]}},ge=new i,me=new i,oe.extend({acceptData:i.accepts,hasData:function(t){return ge.hasData(t)||me.hasData(t)},data:function(t,e,n){return ge.access(t,e,n)},removeData:function(t,e){ge.remove(t,e)},_data:function(t,e,n){return me.access(t,e,n)},_removeData:function(t,e){me.remove(t,e)}}),oe.fn.extend({data:function(t,n){var r,i,s=this[0],a=0,l=null;if(t===e){if(this.length&&(l=ge.get(s),1===s.nodeType&&!me.get(s,"hasDataAttrs"))){for(r=s.attributes;a<r.length;a++)i=r[a].name,0===i.indexOf("data-")&&(i=oe.camelCase(i.substring(5)),o(s,i,l[i]));me.set(s,"hasDataAttrs",!0)}return l}return"object"==typeof t?this.each(function(){ge.set(this,t)}):oe.access(this,function(n){var r,i=oe.camelCase(t);if(s&&n===e){if(r=ge.get(s,t),r!==e)return r;if(r=ge.get(s,i),r!==e)return r;if(r=o(s,i,e),r!==e)return r}else this.each(function(){var r=ge.get(this,i);ge.set(this,i,n),-1!==t.indexOf("-")&&r!==e&&ge.set(this,t,n)})},null,n,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){ge.remove(this,t)})}}),oe.extend({queue:function(t,e,n){var r;return t?(e=(e||"fx")+"queue",r=me.get(t,e),n&&(!r||oe.isArray(n)?r=me.access(t,e,oe.makeArray(n)):r.push(n)),r||[]):void 0},dequeue:function(t,e){e=e||"fx";var n=oe.queue(t,e),r=n.length,i=n.shift(),o=oe._queueHooks(t,e),s=function(){oe.dequeue(t,e)};"inprogress"===i&&(i=n.shift(),r--),o.cur=i,i&&("fx"===e&&n.unshift("inprogress"),delete o.stop,i.call(t,s,o)),!r&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return me.get(t,n)||me.access(t,n,{empty:oe.Callbacks("once memory").add(function(){me.remove(t,[e+"queue",n])})})}}),oe.fn.extend({queue:function(t,n){var r=2;return"string"!=typeof t&&(n=t,t="fx",r--),arguments.length<r?oe.queue(this[0],t):n===e?this:this.each(function(){var e=oe.queue(this,t,n);oe._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&oe.dequeue(this,t)})},dequeue:function(t){return this.each(function(){oe.dequeue(this,t)})},delay:function(t,e){return t=oe.fx?oe.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,n){var r=setTimeout(e,t);n.stop=function(){clearTimeout(r)}})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,n){var r,i=1,o=oe.Deferred(),s=this,a=this.length,l=function(){--i||o.resolveWith(s,[s])};for("string"!=typeof t&&(n=t,t=e),t=t||"fx";a--;)r=me.get(s[a],t+"queueHooks"),r&&r.empty&&(i++,r.empty.add(l));return l(),o.promise(n)}});var be,_e,we=/[\t\r\n]/g,xe=/\r/g,ke=/^(?:input|select|textarea|button)$/i;oe.fn.extend({attr:function(t,e){return oe.access(this,oe.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){oe.removeAttr(this,t)})},prop:function(t,e){return oe.access(this,oe.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[oe.propFix[t]||t]})},addClass:function(t){var e,n,r,i,o,s=0,a=this.length,l="string"==typeof t&&t;if(oe.isFunction(t))return this.each(function(e){oe(this).addClass(t.call(this,e,this.className))});if(l)for(e=(t||"").match(ae)||[];a>s;s++)if(n=this[s],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(we," "):" ")){for(o=0;i=e[o++];)r.indexOf(" "+i+" ")<0&&(r+=i+" ");n.className=oe.trim(r)}return this},removeClass:function(t){var e,n,r,i,o,s=0,a=this.length,l=0===arguments.length||"string"==typeof t&&t;if(oe.isFunction(t))return this.each(function(e){oe(this).removeClass(t.call(this,e,this.className))});if(l)for(e=(t||"").match(ae)||[];a>s;s++)if(n=this[s],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(we," "):"")){for(o=0;i=e[o++];)for(;r.indexOf(" "+i+" ")>=0;)r=r.replace(" "+i+" "," ");n.className=t?oe.trim(r):""}return this},toggleClass:function(t,e){var n=typeof t,r="boolean"==typeof e;return this.each(oe.isFunction(t)?function(n){oe(this).toggleClass(t.call(this,n,this.className,e),e)}:function(){if("string"===n)for(var i,o=0,s=oe(this),a=e,l=t.match(ae)||[];i=l[o++];)a=r?a:!s.hasClass(i),s[a?"addClass":"removeClass"](i);else(n===W||"boolean"===n)&&(this.className&&me.set(this,"__className__",this.className),this.className=this.className||t===!1?"":me.get(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",n=0,r=this.length;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(we," ").indexOf(e)>=0)return!0;return!1},val:function(t){var n,r,i,o=this[0];{if(arguments.length)return i=oe.isFunction(t),this.each(function(r){var o,s=oe(this);1===this.nodeType&&(o=i?t.call(this,r,s.val()):t,null==o?o="":"number"==typeof o?o+="":oe.isArray(o)&&(o=oe.map(o,function(t){return null==t?"":t+""})),n=oe.valHooks[this.type]||oe.valHooks[this.nodeName.toLowerCase()],n&&"set"in n&&n.set(this,o,"value")!==e||(this.value=o))});if(o)return n=oe.valHooks[o.type]||oe.valHooks[o.nodeName.toLowerCase()],n&&"get"in n&&(r=n.get(o,"value"))!==e?r:(r=o.value,"string"==typeof r?r.replace(xe,""):null==r?"":r)}}}),oe.extend({valHooks:{option:{get:function(t){var e=t.attributes.value;return!e||e.specified?t.value:t.text}},select:{get:function(t){for(var e,n,r=t.options,i=t.selectedIndex,o="select-one"===t.type||0>i,s=o?null:[],a=o?i+1:r.length,l=0>i?a:o?i:0;a>l;l++)if(n=r[l],!(!n.selected&&l!==i||(oe.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&oe.nodeName(n.parentNode,"optgroup"))){if(e=oe(n).val(),o)return e;s.push(e)}return s},set:function(t,e){for(var n,r,i=t.options,o=oe.makeArray(e),s=i.length;s--;)r=i[s],(r.selected=oe.inArray(oe(r).val(),o)>=0)&&(n=!0);return n||(t.selectedIndex=-1),o}}},attr:function(t,n,r){var i,o,s=t.nodeType;if(t&&3!==s&&8!==s&&2!==s)return typeof t.getAttribute===W?oe.prop(t,n,r):(1===s&&oe.isXMLDoc(t)||(n=n.toLowerCase(),i=oe.attrHooks[n]||(oe.expr.match["boolean"].test(n)?_e:be)),r===e?i&&"get"in i&&null!==(o=i.get(t,n))?o:(o=oe.find.attr(t,n),null==o?e:o):null!==r?i&&"set"in i&&(o=i.set(t,r,n))!==e?o:(t.setAttribute(n,r+""),r):void oe.removeAttr(t,n))},removeAttr:function(t,e){var n,r,i=0,o=e&&e.match(ae);if(o&&1===t.nodeType)for(;n=o[i++];)r=oe.propFix[n]||n,oe.expr.match["boolean"].test(n)&&(t[r]=!1),t.removeAttribute(n)},attrHooks:{type:{set:function(t,e){if(!oe.support.radioValue&&"radio"===e&&oe.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(t,n,r){var i,o,s,a=t.nodeType;if(t&&3!==a&&8!==a&&2!==a)return s=1!==a||!oe.isXMLDoc(t),s&&(n=oe.propFix[n]||n,o=oe.propHooks[n]),r!==e?o&&"set"in o&&(i=o.set(t,r,n))!==e?i:t[n]=r:o&&"get"in o&&null!==(i=o.get(t,n))?i:t[n]},propHooks:{tabIndex:{get:function(t){return t.hasAttribute("tabindex")||ke.test(t.nodeName)||t.href?t.tabIndex:-1}}}}),_e={set:function(t,e,n){return e===!1?oe.removeAttr(t,n):t.setAttribute(n,n),n}},oe.each(oe.expr.match["boolean"].source.match(/\w+/g),function(t,n){var r=oe.expr.attrHandle[n]||oe.find.attr;oe.expr.attrHandle[n]=function(t,n,i){var o=oe.expr.attrHandle[n],s=i?e:(oe.expr.attrHandle[n]=e)!=r(t,n,i)?n.toLowerCase():null;return oe.expr.attrHandle[n]=o,s}}),oe.support.optSelected||(oe.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null}}),oe.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){oe.propFix[this.toLowerCase()]=this}),oe.each(["radio","checkbox"],function(){oe.valHooks[this]={set:function(t,e){return oe.isArray(e)?t.checked=oe.inArray(oe(t).val(),e)>=0:void 0}},oe.support.checkOn||(oe.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var Ce=/^key/,je=/^(?:mouse|contextmenu)|click/,Me=/^(?:focusinfocus|focusoutblur)$/,Se=/^([^.]*)(?:\.(.+)|)$/;oe.event={global:{},add:function(t,n,r,i,o){var s,a,l,u,c,d,p,h,f,g,m,v=me.get(t);if(v){for(r.handler&&(s=r,r=s.handler,o=s.selector),r.guid||(r.guid=oe.guid++),(u=v.events)||(u=v.events={}),(a=v.handle)||(a=v.handle=function(t){return typeof oe===W||t&&oe.event.triggered===t.type?e:oe.event.dispatch.apply(a.elem,arguments)},a.elem=t),n=(n||"").match(ae)||[""],c=n.length;c--;)l=Se.exec(n[c])||[],f=m=l[1],g=(l[2]||"").split(".").sort(),f&&(p=oe.event.special[f]||{},f=(o?p.delegateType:p.bindType)||f,p=oe.event.special[f]||{},d=oe.extend({type:f,origType:m,data:i,handler:r,guid:r.guid,selector:o,needsContext:o&&oe.expr.match.needsContext.test(o),namespace:g.join(".")},s),(h=u[f])||(h=u[f]=[],h.delegateCount=0,p.setup&&p.setup.call(t,i,g,a)!==!1||t.addEventListener&&t.addEventListener(f,a,!1)),p.add&&(p.add.call(t,d),d.handler.guid||(d.handler.guid=r.guid)),o?h.splice(h.delegateCount++,0,d):h.push(d),oe.event.global[f]=!0);t=null}},remove:function(t,e,n,r,i){var o,s,a,l,u,c,d,p,h,f,g,m=me.hasData(t)&&me.get(t);if(m&&(l=m.events)){for(e=(e||"").match(ae)||[""],u=e.length;u--;)if(a=Se.exec(e[u])||[],h=g=a[1],f=(a[2]||"").split(".").sort(),h){for(d=oe.event.special[h]||{},h=(r?d.delegateType:d.bindType)||h,p=l[h]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=p.length;o--;)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||a&&!a.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,d.remove&&d.remove.call(t,c));s&&!p.length&&(d.teardown&&d.teardown.call(t,f,m.handle)!==!1||oe.removeEvent(t,h,m.handle),delete l[h])}else for(h in l)oe.event.remove(t,h+e[u],n,r,!0);oe.isEmptyObject(l)&&(delete m.handle,me.remove(t,"events"))}},trigger:function(n,r,i,o){var s,a,l,u,c,d,p,h=[i||B],f=re.call(n,"type")?n.type:n,g=re.call(n,"namespace")?n.namespace.split("."):[];if(a=l=i=i||B,3!==i.nodeType&&8!==i.nodeType&&!Me.test(f+oe.event.triggered)&&(f.indexOf(".")>=0&&(g=f.split("."),f=g.shift(),g.sort()),c=f.indexOf(":")<0&&"on"+f,n=n[oe.expando]?n:new oe.Event(f,"object"==typeof n&&n),n.isTrigger=o?2:3,n.namespace=g.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=e,n.target||(n.target=i),r=null==r?[n]:oe.makeArray(r,[n]),p=oe.event.special[f]||{},o||!p.trigger||p.trigger.apply(i,r)!==!1)){if(!o&&!p.noBubble&&!oe.isWindow(i)){for(u=p.delegateType||f,Me.test(u+f)||(a=a.parentNode);a;a=a.parentNode)h.push(a),l=a;l===(i.ownerDocument||B)&&h.push(l.defaultView||l.parentWindow||t)}for(s=0;(a=h[s++])&&!n.isPropagationStopped();)n.type=s>1?u:p.bindType||f,d=(me.get(a,"events")||{})[n.type]&&me.get(a,"handle"),d&&d.apply(a,r),d=c&&a[c],d&&oe.acceptData(a)&&d.apply&&d.apply(a,r)===!1&&n.preventDefault();return n.type=f,o||n.isDefaultPrevented()||p._default&&p._default.apply(h.pop(),r)!==!1||!oe.acceptData(i)||c&&oe.isFunction(i[f])&&!oe.isWindow(i)&&(l=i[c],l&&(i[c]=null),oe.event.triggered=f,i[f](),oe.event.triggered=e,l&&(i[c]=l)),n.result}},dispatch:function(t){t=oe.event.fix(t);var n,r,i,o,s,a=[],l=te.call(arguments),u=(me.get(this,"events")||{})[t.type]||[],c=oe.event.special[t.type]||{};if(l[0]=t,t.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,t)!==!1){for(a=oe.event.handlers.call(this,t,u),n=0;(o=a[n++])&&!t.isPropagationStopped();)for(t.currentTarget=o.elem,r=0;(s=o.handlers[r++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(s.namespace))&&(t.handleObj=s,t.data=s.data,i=((oe.event.special[s.origType]||{}).handle||s.handler).apply(o.elem,l),i!==e&&(t.result=i)===!1&&(t.preventDefault(),t.stopPropagation()));
return c.postDispatch&&c.postDispatch.call(this,t),t.result}},handlers:function(t,n){var r,i,o,s,a=[],l=n.delegateCount,u=t.target;if(l&&u.nodeType&&(!t.button||"click"!==t.type))for(;u!==this;u=u.parentNode||this)if(u.disabled!==!0||"click"!==t.type){for(i=[],r=0;l>r;r++)s=n[r],o=s.selector+" ",i[o]===e&&(i[o]=s.needsContext?oe(o,this).index(u)>=0:oe.find(o,this,null,[u]).length),i[o]&&i.push(s);i.length&&a.push({elem:u,handlers:i})}return l<n.length&&a.push({elem:this,handlers:n.slice(l)}),a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,n){var r,i,o,s=n.button;return null==t.pageX&&null!=n.clientX&&(r=t.target.ownerDocument||B,i=r.documentElement,o=r.body,t.pageX=n.clientX+(i&&i.scrollLeft||o&&o.scrollLeft||0)-(i&&i.clientLeft||o&&o.clientLeft||0),t.pageY=n.clientY+(i&&i.scrollTop||o&&o.scrollTop||0)-(i&&i.clientTop||o&&o.clientTop||0)),t.which||s===e||(t.which=1&s?1:2&s?3:4&s?2:0),t}},fix:function(t){if(t[oe.expando])return t;var e,n,r,i=t.type,o=t,s=this.fixHooks[i];for(s||(this.fixHooks[i]=s=je.test(i)?this.mouseHooks:Ce.test(i)?this.keyHooks:{}),r=s.props?this.props.concat(s.props):this.props,t=new oe.Event(o),e=r.length;e--;)n=r[e],t[n]=o[n];return 3===t.target.nodeType&&(t.target=t.target.parentNode),s.filter?s.filter(t,o):t},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==l()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===l()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&oe.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(t){return oe.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){t.result!==e&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,n,r){var i=oe.extend(new oe.Event,n,{type:t,isSimulated:!0,originalEvent:{}});r?oe.event.trigger(i,null,e):oe.event.dispatch.call(e,i),i.isDefaultPrevented()&&n.preventDefault()}},oe.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n,!1)},oe.Event=function(t,e){return this instanceof oe.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||t.getPreventDefault&&t.getPreventDefault()?s:a):this.type=t,e&&oe.extend(this,e),this.timeStamp=t&&t.timeStamp||oe.now(),void(this[oe.expando]=!0)):new oe.Event(t,e)},oe.Event.prototype={isDefaultPrevented:a,isPropagationStopped:a,isImmediatePropagationStopped:a,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=s,t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=s,t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=s,this.stopPropagation()}},oe.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(t,e){oe.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,r=this,i=t.relatedTarget,o=t.handleObj;return(!i||i!==r&&!oe.contains(r,i))&&(t.type=o.origType,n=o.handler.apply(this,arguments),t.type=e),n}}}),oe.support.focusinBubbles||oe.each({focus:"focusin",blur:"focusout"},function(t,e){var n=0,r=function(t){oe.event.simulate(e,t.target,oe.event.fix(t),!0)};oe.event.special[e]={setup:function(){0===n++&&B.addEventListener(t,r,!0)},teardown:function(){0===--n&&B.removeEventListener(t,r,!0)}}}),oe.fn.extend({on:function(t,n,r,i,o){var s,l;if("object"==typeof t){"string"!=typeof n&&(r=r||n,n=e);for(l in t)this.on(l,n,r,t[l],o);return this}if(null==r&&null==i?(i=n,r=n=e):null==i&&("string"==typeof n?(i=r,r=e):(i=r,r=n,n=e)),i===!1)i=a;else if(!i)return this;return 1===o&&(s=i,i=function(t){return oe().off(t),s.apply(this,arguments)},i.guid=s.guid||(s.guid=oe.guid++)),this.each(function(){oe.event.add(this,t,i,r,n)})},one:function(t,e,n,r){return this.on(t,e,n,r,1)},off:function(t,n,r){var i,o;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,oe(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(o in t)this.off(o,n,t[o]);return this}return(n===!1||"function"==typeof n)&&(r=n,n=e),r===!1&&(r=a),this.each(function(){oe.event.remove(this,t,r,n)})},trigger:function(t,e){return this.each(function(){oe.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];return n?oe.event.trigger(t,e,n,!0):void 0}});var De=/^.[^:#\[\.,]*$/,ze=oe.expr.match.needsContext,Ne={children:!0,contents:!0,next:!0,prev:!0};oe.fn.extend({find:function(t){var e,n,r,i=this.length;if("string"!=typeof t)return e=this,this.pushStack(oe(t).filter(function(){for(r=0;i>r;r++)if(oe.contains(e[r],this))return!0}));for(n=[],r=0;i>r;r++)oe.find(t,this[r],n);return n=this.pushStack(i>1?oe.unique(n):n),n.selector=(this.selector?this.selector+" ":"")+t,n},has:function(t){var e=oe(t,this),n=e.length;return this.filter(function(){for(var t=0;n>t;t++)if(oe.contains(this,e[t]))return!0})},not:function(t){return this.pushStack(c(this,t||[],!0))},filter:function(t){return this.pushStack(c(this,t||[],!1))},is:function(t){return!!t&&("string"==typeof t?ze.test(t)?oe(t,this.context).index(this[0])>=0:oe.filter(t,this).length>0:this.filter(t).length>0)},closest:function(t,e){for(var n,r=0,i=this.length,o=[],s=ze.test(t)||"string"!=typeof t?oe(t,e||this.context):0;i>r;r++)for(n=this[r];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&oe.find.matchesSelector(n,t))){n=o.push(n);break}return this.pushStack(o.length>1?oe.unique(o):o)},index:function(t){return t?"string"==typeof t?ee.call(oe(t),this[0]):ee.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){var n="string"==typeof t?oe(t,e):oe.makeArray(t&&t.nodeType?[t]:t),r=oe.merge(this.get(),n);return this.pushStack(oe.unique(r))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),oe.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return oe.dir(t,"parentNode")},parentsUntil:function(t,e,n){return oe.dir(t,"parentNode",n)},next:function(t){return u(t,"nextSibling")},prev:function(t){return u(t,"previousSibling")},nextAll:function(t){return oe.dir(t,"nextSibling")},prevAll:function(t){return oe.dir(t,"previousSibling")},nextUntil:function(t,e,n){return oe.dir(t,"nextSibling",n)},prevUntil:function(t,e,n){return oe.dir(t,"previousSibling",n)},siblings:function(t){return oe.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return oe.sibling(t.firstChild)},contents:function(t){return oe.nodeName(t,"iframe")?t.contentDocument||t.contentWindow.document:oe.merge([],t.childNodes)}},function(t,e){oe.fn[t]=function(n,r){var i=oe.map(this,e,n);return"Until"!==t.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=oe.filter(r,i)),this.length>1&&(Ne[t]||oe.unique(i),"p"===t[0]&&i.reverse()),this.pushStack(i)}}),oe.extend({filter:function(t,e,n){var r=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===r.nodeType?oe.find.matchesSelector(r,t)?[r]:[]:oe.find.matches(t,oe.grep(e,function(t){return 1===t.nodeType}))},dir:function(t,n,r){for(var i=[],o=r!==e;(t=t[n])&&9!==t.nodeType;)if(1===t.nodeType){if(o&&oe(t).is(r))break;i.push(t)}return i},sibling:function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n}});var Te=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Pe=/<([\w:]+)/,Le=/<|&#?\w+;/,Ee=/<(?:script|style|link)/i,Ae=/^(?:checkbox|radio)$/i,Oe=/checked\s*(?:[^=]|=\s*.checked.)/i,Ie=/^$|\/(?:java|ecma)script/i,Re=/^true\/(.*)/,$e=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Fe={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Fe.optgroup=Fe.option,Fe.tbody=Fe.tfoot=Fe.colgroup=Fe.caption=Fe.col=Fe.thead,Fe.th=Fe.td,oe.fn.extend({text:function(t){return oe.access(this,function(t){return t===e?oe.text(this):this.empty().append((this[0]&&this[0].ownerDocument||B).createTextNode(t))},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=d(this,t);e.appendChild(t)}})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=d(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var n,r=t?oe.filter(t,this):this,i=0;null!=(n=r[i]);i++)e||1!==n.nodeType||oe.cleanData(m(n)),n.parentNode&&(e&&oe.contains(n.ownerDocument,n)&&f(m(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(oe.cleanData(m(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return oe.clone(this,t,e)})},html:function(t){return oe.access(this,function(t){var n=this[0]||{},r=0,i=this.length;if(t===e&&1===n.nodeType)return n.innerHTML;if("string"==typeof t&&!Ee.test(t)&&!Fe[(Pe.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(Te,"<$1></$2>");try{for(;i>r;r++)n=this[r]||{},1===n.nodeType&&(oe.cleanData(m(n,!1)),n.innerHTML=t);n=0}catch(o){}}n&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=oe.map(this,function(t){return[t.nextSibling,t.parentNode]}),e=0;return this.domManip(arguments,function(n){var r=t[e++],i=t[e++];i&&(oe(this).remove(),i.insertBefore(n,r))},!0),e?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e,n){t=J.apply([],t);var r,i,o,s,a,l,u=0,c=this.length,d=this,f=c-1,g=t[0],v=oe.isFunction(g);if(v||!(1>=c||"string"!=typeof g||oe.support.checkClone)&&Oe.test(g))return this.each(function(r){var i=d.eq(r);v&&(t[0]=g.call(this,r,i.html())),i.domManip(t,e,n)});if(c&&(r=oe.buildFragment(t,this[0].ownerDocument,!1,!n&&this),i=r.firstChild,1===r.childNodes.length&&(r=i),i)){for(o=oe.map(m(r,"script"),p),s=o.length;c>u;u++)a=r,u!==f&&(a=oe.clone(a,!0,!0),s&&oe.merge(o,m(a,"script"))),e.call(this[u],a,u);if(s)for(l=o[o.length-1].ownerDocument,oe.map(o,h),u=0;s>u;u++)a=o[u],Ie.test(a.type||"")&&!me.access(a,"globalEval")&&oe.contains(l,a)&&(a.src?oe._evalUrl(a.src):oe.globalEval(a.textContent.replace($e,"")))}return this}}),oe.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){oe.fn[t]=function(t){for(var n,r=[],i=oe(t),o=i.length-1,s=0;o>=s;s++)n=s===o?this:this.clone(!0),oe(i[s])[e](n),K.apply(r,n.get());return this.pushStack(r)}}),oe.extend({clone:function(t,e,n){var r,i,o,s,a=t.cloneNode(!0),l=oe.contains(t.ownerDocument,t);if(!(oe.support.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||oe.isXMLDoc(t)))for(s=m(a),o=m(t),r=0,i=o.length;i>r;r++)v(o[r],s[r]);if(e)if(n)for(o=o||m(t),s=s||m(a),r=0,i=o.length;i>r;r++)g(o[r],s[r]);else g(t,a);return s=m(a,"script"),s.length>0&&f(s,!l&&m(t,"script")),a},buildFragment:function(t,e,n,r){for(var i,o,s,a,l,u,c=0,d=t.length,p=e.createDocumentFragment(),h=[];d>c;c++)if(i=t[c],i||0===i)if("object"===oe.type(i))oe.merge(h,i.nodeType?[i]:i);else if(Le.test(i)){for(o=o||p.appendChild(e.createElement("div")),s=(Pe.exec(i)||["",""])[1].toLowerCase(),a=Fe[s]||Fe._default,o.innerHTML=a[1]+i.replace(Te,"<$1></$2>")+a[2],u=a[0];u--;)o=o.firstChild;oe.merge(h,o.childNodes),o=p.firstChild,o.textContent=""}else h.push(e.createTextNode(i));for(p.textContent="",c=0;i=h[c++];)if((!r||-1===oe.inArray(i,r))&&(l=oe.contains(i.ownerDocument,i),o=m(p.appendChild(i),"script"),l&&f(o),n))for(u=0;i=o[u++];)Ie.test(i.type||"")&&n.push(i);return p},cleanData:function(t){for(var e,n,r,i=t.length,o=0,s=oe.event.special;i>o;o++){if(n=t[o],oe.acceptData(n)&&(e=me.access(n)))for(r in e.events)s[r]?oe.event.remove(n,r):oe.removeEvent(n,r,e.handle);ge.discard(n),me.discard(n)}},_evalUrl:function(t){return oe.ajax({url:t,type:"GET",dataType:"text",async:!1,global:!1,success:oe.globalEval})}}),oe.fn.extend({wrapAll:function(t){var e;return oe.isFunction(t)?this.each(function(e){oe(this).wrapAll(t.call(this,e))}):(this[0]&&(e=oe(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this)},wrapInner:function(t){return this.each(oe.isFunction(t)?function(e){oe(this).wrapInner(t.call(this,e))}:function(){var e=oe(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=oe.isFunction(t);return this.each(function(n){oe(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(){return this.parent().each(function(){oe.nodeName(this,"body")||oe(this).replaceWith(this.childNodes)}).end()}});var qe,He,We=/^(none|table(?!-c[ea]).+)/,Ve=/^margin/,Be=new RegExp("^("+se+")(.*)$","i"),Ye=new RegExp("^("+se+")(?!px)[a-z%]+$","i"),Ue=new RegExp("^([+-])=("+se+")","i"),Qe={BODY:"block"},Ge={position:"absolute",visibility:"hidden",display:"block"},Xe={letterSpacing:0,fontWeight:400},Ze=["Top","Right","Bottom","Left"],Je=["Webkit","O","Moz","ms"];oe.fn.extend({css:function(t,n){return oe.access(this,function(t,n,r){var i,o,s={},a=0;if(oe.isArray(n)){for(i=_(t),o=n.length;o>a;a++)s[n[a]]=oe.css(t,n[a],!1,i);return s}return r!==e?oe.style(t,n,r):oe.css(t,n)},t,n,arguments.length>1)},show:function(){return w(this,!0)},hide:function(){return w(this)},toggle:function(t){var e="boolean"==typeof t;return this.each(function(){(e?t:b(this))?oe(this).show():oe(this).hide()})}}),oe.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=qe(t,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(t,n,r,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var o,s,a,l=oe.camelCase(n),u=t.style;return n=oe.cssProps[l]||(oe.cssProps[l]=y(u,l)),a=oe.cssHooks[n]||oe.cssHooks[l],r===e?a&&"get"in a&&(o=a.get(t,!1,i))!==e?o:u[n]:(s=typeof r,"string"===s&&(o=Ue.exec(r))&&(r=(o[1]+1)*o[2]+parseFloat(oe.css(t,n)),s="number"),null==r||"number"===s&&isNaN(r)||("number"!==s||oe.cssNumber[l]||(r+="px"),oe.support.clearCloneStyle||""!==r||0!==n.indexOf("background")||(u[n]="inherit"),a&&"set"in a&&(r=a.set(t,r,i))===e||(u[n]=r)),void 0)}},css:function(t,n,r,i){var o,s,a,l=oe.camelCase(n);return n=oe.cssProps[l]||(oe.cssProps[l]=y(t.style,l)),a=oe.cssHooks[n]||oe.cssHooks[l],a&&"get"in a&&(o=a.get(t,!0,r)),o===e&&(o=qe(t,n,i)),"normal"===o&&n in Xe&&(o=Xe[n]),""===r||r?(s=parseFloat(o),r===!0||oe.isNumeric(s)?s||0:o):o}}),qe=function(t,n,r){var i,o,s,a=r||_(t),l=a?a.getPropertyValue(n)||a[n]:e,u=t.style;return a&&(""!==l||oe.contains(t.ownerDocument,t)||(l=oe.style(t,n)),Ye.test(l)&&Ve.test(n)&&(i=u.width,o=u.minWidth,s=u.maxWidth,u.minWidth=u.maxWidth=u.width=l,l=a.width,u.width=i,u.minWidth=o,u.maxWidth=s)),l},oe.each(["height","width"],function(t,e){oe.cssHooks[e]={get:function(t,n,r){return n?0===t.offsetWidth&&We.test(oe.css(t,"display"))?oe.swap(t,Ge,function(){return C(t,e,r)}):C(t,e,r):void 0},set:function(t,n,r){var i=r&&_(t);return x(t,n,r?k(t,e,r,oe.support.boxSizing&&"border-box"===oe.css(t,"boxSizing",!1,i),i):0)}}}),oe(function(){oe.support.reliableMarginRight||(oe.cssHooks.marginRight={get:function(t,e){return e?oe.swap(t,{display:"inline-block"},qe,[t,"marginRight"]):void 0}}),!oe.support.pixelPosition&&oe.fn.position&&oe.each(["top","left"],function(t,e){oe.cssHooks[e]={get:function(t,n){return n?(n=qe(t,e),Ye.test(n)?oe(t).position()[e]+"px":n):void 0}}})}),oe.expr&&oe.expr.filters&&(oe.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0},oe.expr.filters.visible=function(t){return!oe.expr.filters.hidden(t)}),oe.each({margin:"",padding:"",border:"Width"},function(t,e){oe.cssHooks[t+e]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];4>r;r++)i[t+Ze[r]+e]=o[r]||o[r-2]||o[0];return i}},Ve.test(t)||(oe.cssHooks[t+e].set=x)});var Ke=/%20/g,tn=/\[\]$/,en=/\r?\n/g,nn=/^(?:submit|button|image|reset|file)$/i,rn=/^(?:input|select|textarea|keygen)/i;oe.fn.extend({serialize:function(){return oe.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=oe.prop(this,"elements");return t?oe.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!oe(this).is(":disabled")&&rn.test(this.nodeName)&&!nn.test(t)&&(this.checked||!Ae.test(t))}).map(function(t,e){var n=oe(this).val();return null==n?null:oe.isArray(n)?oe.map(n,function(t){return{name:e.name,value:t.replace(en,"\r\n")}}):{name:e.name,value:n.replace(en,"\r\n")}}).get()}}),oe.param=function(t,n){var r,i=[],o=function(t,e){e=oe.isFunction(e)?e():null==e?"":e,i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(n===e&&(n=oe.ajaxSettings&&oe.ajaxSettings.traditional),oe.isArray(t)||t.jquery&&!oe.isPlainObject(t))oe.each(t,function(){o(this.name,this.value)});else for(r in t)S(r,t[r],n,o);return i.join("&").replace(Ke,"+")},oe.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){oe.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),oe.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,r){return this.on(e,t,n,r)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}});var on,sn,an=oe.now(),ln=/\?/,un=/#.*$/,cn=/([?&])_=[^&]*/,dn=/^(.*?):[ \t]*([^\r\n]*)$/gm,pn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,hn=/^(?:GET|HEAD)$/,fn=/^\/\//,gn=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,mn=oe.fn.load,vn={},yn={},bn="*/".concat("*");try{sn=V.href}catch(_n){sn=B.createElement("a"),sn.href="",sn=sn.href}on=gn.exec(sn.toLowerCase())||[],oe.fn.load=function(t,n,r){if("string"!=typeof t&&mn)return mn.apply(this,arguments);var i,o,s,a=this,l=t.indexOf(" ");return l>=0&&(i=t.slice(l),t=t.slice(0,l)),oe.isFunction(n)?(r=n,n=e):n&&"object"==typeof n&&(o="POST"),a.length>0&&oe.ajax({url:t,type:o,dataType:"html",data:n}).done(function(t){s=arguments,a.html(i?oe("<div>").append(oe.parseHTML(t)).find(i):t)}).complete(r&&function(t,e){a.each(r,s||[t.responseText,e,t])}),this},oe.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){oe.fn[e]=function(t){return this.on(e,t)}}),oe.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:sn,type:"GET",isLocal:pn.test(on[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":bn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":oe.parseJSON,"text xml":oe.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?N(N(t,oe.ajaxSettings),e):N(oe.ajaxSettings,t)},ajaxPrefilter:D(vn),ajaxTransport:D(yn),ajax:function(t,n){function r(t,n,r,a){var u,d,y,b,w,k=n;2!==_&&(_=2,l&&clearTimeout(l),i=e,s=a||"",x.readyState=t>0?4:0,u=t>=200&&300>t||304===t,r&&(b=T(p,x,r)),b=P(p,b,x,u),u?(p.ifModified&&(w=x.getResponseHeader("Last-Modified"),w&&(oe.lastModified[o]=w),w=x.getResponseHeader("etag"),w&&(oe.etag[o]=w)),204===t?k="nocontent":304===t?k="notmodified":(k=b.state,d=b.data,y=b.error,u=!y)):(y=k,(t||!k)&&(k="error",0>t&&(t=0))),x.status=t,x.statusText=(n||k)+"",u?g.resolveWith(h,[d,k,x]):g.rejectWith(h,[x,k,y]),x.statusCode(v),v=e,c&&f.trigger(u?"ajaxSuccess":"ajaxError",[x,p,u?d:y]),m.fireWith(h,[x,k]),c&&(f.trigger("ajaxComplete",[x,p]),--oe.active||oe.event.trigger("ajaxStop")))}"object"==typeof t&&(n=t,t=e),n=n||{};var i,o,s,a,l,u,c,d,p=oe.ajaxSetup({},n),h=p.context||p,f=p.context&&(h.nodeType||h.jquery)?oe(h):oe.event,g=oe.Deferred(),m=oe.Callbacks("once memory"),v=p.statusCode||{},y={},b={},_=0,w="canceled",x={readyState:0,getResponseHeader:function(t){var e;if(2===_){if(!a)for(a={};e=dn.exec(s);)a[e[1].toLowerCase()]=e[2];e=a[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===_?s:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return _||(t=b[n]=b[n]||t,y[t]=e),this},overrideMimeType:function(t){return _||(p.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>_)for(e in t)v[e]=[v[e],t[e]];else x.always(t[x.status]);return this},abort:function(t){var e=t||w;return i&&i.abort(e),r(0,e),this}};if(g.promise(x).complete=m.add,x.success=x.done,x.error=x.fail,p.url=((t||p.url||sn)+"").replace(un,"").replace(fn,on[1]+"//"),p.type=n.method||n.type||p.method||p.type,p.dataTypes=oe.trim(p.dataType||"*").toLowerCase().match(ae)||[""],null==p.crossDomain&&(u=gn.exec(p.url.toLowerCase()),p.crossDomain=!(!u||u[1]===on[1]&&u[2]===on[2]&&(u[3]||("http:"===u[1]?"80":"443"))===(on[3]||("http:"===on[1]?"80":"443")))),p.data&&p.processData&&"string"!=typeof p.data&&(p.data=oe.param(p.data,p.traditional)),z(vn,p,n,x),2===_)return x;c=p.global,c&&0===oe.active++&&oe.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!hn.test(p.type),o=p.url,p.hasContent||(p.data&&(o=p.url+=(ln.test(o)?"&":"?")+p.data,delete p.data),p.cache===!1&&(p.url=cn.test(o)?o.replace(cn,"$1_="+an++):o+(ln.test(o)?"&":"?")+"_="+an++)),p.ifModified&&(oe.lastModified[o]&&x.setRequestHeader("If-Modified-Since",oe.lastModified[o]),oe.etag[o]&&x.setRequestHeader("If-None-Match",oe.etag[o])),(p.data&&p.hasContent&&p.contentType!==!1||n.contentType)&&x.setRequestHeader("Content-Type",p.contentType),x.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+bn+"; q=0.01":""):p.accepts["*"]);for(d in p.headers)x.setRequestHeader(d,p.headers[d]);if(p.beforeSend&&(p.beforeSend.call(h,x,p)===!1||2===_))return x.abort();w="abort";for(d in{success:1,error:1,complete:1})x[d](p[d]);if(i=z(yn,p,n,x)){x.readyState=1,c&&f.trigger("ajaxSend",[x,p]),p.async&&p.timeout>0&&(l=setTimeout(function(){x.abort("timeout")},p.timeout));try{_=1,i.send(y,r)}catch(k){if(!(2>_))throw k;r(-1,k)}}else r(-1,"No Transport");return x},getJSON:function(t,e,n){return oe.get(t,e,n,"json")},getScript:function(t,n){return oe.get(t,e,n,"script")}}),oe.each(["get","post"],function(t,n){oe[n]=function(t,r,i,o){return oe.isFunction(r)&&(o=o||i,i=r,r=e),oe.ajax({url:t,type:n,dataType:o,data:r,success:i})}}),oe.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return oe.globalEval(t),t}}}),oe.ajaxPrefilter("script",function(t){t.cache===e&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),oe.ajaxTransport("script",function(t){if(t.crossDomain){var e,n;return{send:function(r,i){e=oe("<script>").prop({async:!0,charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&i("error"===t.type?404:200,t.type)}),B.head.appendChild(e[0])},abort:function(){n&&n()}}}});var wn=[],xn=/(=)\?(?=&|$)|\?\?/;oe.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=wn.pop()||oe.expando+"_"+an++;return this[t]=!0,t}}),oe.ajaxPrefilter("json jsonp",function(n,r,i){var o,s,a,l=n.jsonp!==!1&&(xn.test(n.url)?"url":"string"==typeof n.data&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&xn.test(n.data)&&"data");return l||"jsonp"===n.dataTypes[0]?(o=n.jsonpCallback=oe.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,l?n[l]=n[l].replace(xn,"$1"+o):n.jsonp!==!1&&(n.url+=(ln.test(n.url)?"&":"?")+n.jsonp+"="+o),n.converters["script json"]=function(){return a||oe.error(o+" was not called"),a[0]},n.dataTypes[0]="json",s=t[o],t[o]=function(){a=arguments},i.always(function(){t[o]=s,n[o]&&(n.jsonpCallback=r.jsonpCallback,wn.push(o)),a&&oe.isFunction(s)&&s(a[0]),a=s=e}),"script"):void 0}),oe.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(t){}};var kn=oe.ajaxSettings.xhr(),Cn={0:200,1223:204},jn=0,Mn={};t.ActiveXObject&&oe(t).on("unload",function(){for(var t in Mn)Mn[t]();Mn=e}),oe.support.cors=!!kn&&"withCredentials"in kn,oe.support.ajax=kn=!!kn,oe.ajaxTransport(function(t){var n;return oe.support.cors||kn&&!t.crossDomain?{send:function(r,i){var o,s,a=t.xhr();if(a.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(o in t.xhrFields)a[o]=t.xhrFields[o];t.mimeType&&a.overrideMimeType&&a.overrideMimeType(t.mimeType),t.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest");for(o in r)a.setRequestHeader(o,r[o]);n=function(t){return function(){n&&(delete Mn[s],n=a.onload=a.onerror=null,"abort"===t?a.abort():"error"===t?i(a.status||404,a.statusText):i(Cn[a.status]||a.status,a.statusText,"string"==typeof a.responseText?{text:a.responseText}:e,a.getAllResponseHeaders()))}},a.onload=n(),a.onerror=n("error"),n=Mn[s=jn++]=n("abort"),a.send(t.hasContent&&t.data||null)},abort:function(){n&&n()}}:void 0});var Sn,Dn,zn=/^(?:toggle|show|hide)$/,Nn=new RegExp("^(?:([+-])=|)("+se+")([a-z%]*)$","i"),Tn=/queueHooks$/,Pn=[I],Ln={"*":[function(t,e){var n,r,i=this.createTween(t,e),o=Nn.exec(e),s=i.cur(),a=+s||0,l=1,u=20;if(o){if(n=+o[2],r=o[3]||(oe.cssNumber[t]?"":"px"),"px"!==r&&a){a=oe.css(i.elem,t,!0)||n||1;do l=l||".5",a/=l,oe.style(i.elem,t,a+r);while(l!==(l=i.cur()/s)&&1!==l&&--u)}i.unit=r,i.start=a,i.end=o[1]?a+(o[1]+1)*n:n}return i}]};oe.Animation=oe.extend(A,{tweener:function(t,e){oe.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var n,r=0,i=t.length;i>r;r++)n=t[r],Ln[n]=Ln[n]||[],Ln[n].unshift(e)},prefilter:function(t,e){e?Pn.unshift(t):Pn.push(t)}}),oe.Tween=R,R.prototype={constructor:R,init:function(t,e,n,r,i,o){this.elem=t,this.prop=n,this.easing=i||"swing",this.options=e,this.start=this.now=this.cur(),this.end=r,this.unit=o||(oe.cssNumber[n]?"":"px")},cur:function(){var t=R.propHooks[this.prop];return t&&t.get?t.get(this):R.propHooks._default.get(this)},run:function(t){var e,n=R.propHooks[this.prop];return this.pos=e=this.options.duration?oe.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):R.propHooks._default.set(this),this}},R.prototype.init.prototype=R.prototype,R.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=oe.css(t.elem,t.prop,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){oe.fx.step[t.prop]?oe.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[oe.cssProps[t.prop]]||oe.cssHooks[t.prop])?oe.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},R.propHooks.scrollTop=R.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},oe.each(["toggle","show","hide"],function(t,e){var n=oe.fn[e];oe.fn[e]=function(t,r,i){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate($(e,!0),t,r,i)}}),oe.fn.extend({fadeTo:function(t,e,n,r){return this.filter(b).css("opacity",0).show().end().animate({opacity:e},t,n,r)},animate:function(t,e,n,r){var i=oe.isEmptyObject(t),o=oe.speed(e,n,r),s=function(){var e=A(this,oe.extend({},t),o);s.finish=function(){e.stop(!0)},(i||me.get(this,"finish"))&&e.stop(!0)};return s.finish=s,i||o.queue===!1?this.each(s):this.queue(o.queue,s)},stop:function(t,n,r){var i=function(t){var e=t.stop;delete t.stop,e(r)};return"string"!=typeof t&&(r=n,n=t,t=e),n&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,n=null!=t&&t+"queueHooks",o=oe.timers,s=me.get(this);if(n)s[n]&&s[n].stop&&i(s[n]);else for(n in s)s[n]&&s[n].stop&&Tn.test(n)&&i(s[n]);for(n=o.length;n--;)o[n].elem!==this||null!=t&&o[n].queue!==t||(o[n].anim.stop(r),e=!1,o.splice(n,1));(e||!r)&&oe.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,n=me.get(this),r=n[t+"queue"],i=n[t+"queueHooks"],o=oe.timers,s=r?r.length:0;for(n.finish=!0,oe.queue(this,t,[]),i&&i.cur&&i.cur.finish&&i.cur.finish.call(this),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;s>e;e++)r[e]&&r[e].finish&&r[e].finish.call(this);delete n.finish})}}),oe.each({slideDown:$("show"),slideUp:$("hide"),slideToggle:$("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){oe.fn[t]=function(t,n,r){return this.animate(e,t,n,r)}}),oe.speed=function(t,e,n){var r=t&&"object"==typeof t?oe.extend({},t):{complete:n||!n&&e||oe.isFunction(t)&&t,duration:t,easing:n&&e||e&&!oe.isFunction(e)&&e};return r.duration=oe.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in oe.fx.speeds?oe.fx.speeds[r.duration]:oe.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){oe.isFunction(r.old)&&r.old.call(this),r.queue&&oe.dequeue(this,r.queue)},r},oe.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},oe.timers=[],oe.fx=R.prototype.init,oe.fx.tick=function(){var t,n=oe.timers,r=0;for(Sn=oe.now();r<n.length;r++)t=n[r],t()||n[r]!==t||n.splice(r--,1);n.length||oe.fx.stop(),Sn=e},oe.fx.timer=function(t){t()&&oe.timers.push(t)&&oe.fx.start()},oe.fx.interval=13,oe.fx.start=function(){Dn||(Dn=setInterval(oe.fx.tick,oe.fx.interval))},oe.fx.stop=function(){clearInterval(Dn),Dn=null},oe.fx.speeds={slow:600,fast:200,_default:400},oe.fx.step={},oe.expr&&oe.expr.filters&&(oe.expr.filters.animated=function(t){return oe.grep(oe.timers,function(e){return t===e.elem}).length}),oe.fn.offset=function(t){if(arguments.length)return t===e?this:this.each(function(e){oe.offset.setOffset(this,t,e)});var n,r,i=this[0],o={top:0,left:0},s=i&&i.ownerDocument;if(s)return n=s.documentElement,oe.contains(n,i)?(typeof i.getBoundingClientRect!==W&&(o=i.getBoundingClientRect()),r=F(s),{top:o.top+r.pageYOffset-n.clientTop,left:o.left+r.pageXOffset-n.clientLeft}):o},oe.offset={setOffset:function(t,e,n){var r,i,o,s,a,l,u,c=oe.css(t,"position"),d=oe(t),p={};"static"===c&&(t.style.position="relative"),a=d.offset(),o=oe.css(t,"top"),l=oe.css(t,"left"),u=("absolute"===c||"fixed"===c)&&(o+l).indexOf("auto")>-1,u?(r=d.position(),s=r.top,i=r.left):(s=parseFloat(o)||0,i=parseFloat(l)||0),oe.isFunction(e)&&(e=e.call(t,n,a)),null!=e.top&&(p.top=e.top-a.top+s),null!=e.left&&(p.left=e.left-a.left+i),"using"in e?e.using.call(t,p):d.css(p)}},oe.fn.extend({position:function(){if(this[0]){var t,e,n=this[0],r={top:0,left:0};return"fixed"===oe.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),oe.nodeName(t[0],"html")||(r=t.offset()),r.top+=oe.css(t[0],"borderTopWidth",!0),r.left+=oe.css(t[0],"borderLeftWidth",!0)),{top:e.top-r.top-oe.css(n,"marginTop",!0),left:e.left-r.left-oe.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||Y;t&&!oe.nodeName(t,"html")&&"static"===oe.css(t,"position");)t=t.offsetParent;return t||Y})}}),oe.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(n,r){var i="pageYOffset"===r;
oe.fn[n]=function(o){return oe.access(this,function(n,o,s){var a=F(n);return s===e?a?a[r]:n[o]:void(a?a.scrollTo(i?t.pageXOffset:s,i?s:t.pageYOffset):n[o]=s)},n,o,arguments.length,null)}}),oe.each({Height:"height",Width:"width"},function(t,n){oe.each({padding:"inner"+t,content:n,"":"outer"+t},function(r,i){oe.fn[i]=function(i,o){var s=arguments.length&&(r||"boolean"!=typeof i),a=r||(i===!0||o===!0?"margin":"border");return oe.access(this,function(n,r,i){var o;return oe.isWindow(n)?n.document.documentElement["client"+t]:9===n.nodeType?(o=n.documentElement,Math.max(n.body["scroll"+t],o["scroll"+t],n.body["offset"+t],o["offset"+t],o["client"+t])):i===e?oe.css(n,r,a):oe.style(n,r,i,a)},n,s?i:e,s,null)}})}),oe.fn.size=function(){return this.length},oe.fn.andSelf=oe.fn.addBack,"object"==typeof module&&"object"==typeof module.exports?module.exports=oe:"function"==typeof define&&define.amd&&define("jquery",[],function(){return oe}),"object"==typeof t&&"object"==typeof t.document&&(t.jQuery=t.$=oe)}(window),function(){var t=this,e=t._,n={},r=Array.prototype,i=Object.prototype,o=Function.prototype,s=r.push,a=r.slice,l=r.concat,u=i.toString,c=i.hasOwnProperty,d=r.forEach,p=r.map,h=r.reduce,f=r.reduceRight,g=r.filter,m=r.every,v=r.some,y=r.indexOf,b=r.lastIndexOf,_=Array.isArray,w=Object.keys,x=o.bind,k=function(t){return t instanceof k?t:this instanceof k?void(this._wrapped=t):new k(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=k),exports._=k):t._=k,k.VERSION="1.6.0";var C=k.each=k.forEach=function(t,e,r){if(null==t)return t;if(d&&t.forEach===d)t.forEach(e,r);else if(t.length===+t.length){for(var i=0,o=t.length;o>i;i++)if(e.call(r,t[i],i,t)===n)return}else for(var s=k.keys(t),i=0,o=s.length;o>i;i++)if(e.call(r,t[s[i]],s[i],t)===n)return;return t};k.map=k.collect=function(t,e,n){var r=[];return null==t?r:p&&t.map===p?t.map(e,n):(C(t,function(t,i,o){r.push(e.call(n,t,i,o))}),r)};var j="Reduce of empty array with no initial value";k.reduce=k.foldl=k.inject=function(t,e,n,r){var i=arguments.length>2;if(null==t&&(t=[]),h&&t.reduce===h)return r&&(e=k.bind(e,r)),i?t.reduce(e,n):t.reduce(e);if(C(t,function(t,o,s){i?n=e.call(r,n,t,o,s):(n=t,i=!0)}),!i)throw new TypeError(j);return n},k.reduceRight=k.foldr=function(t,e,n,r){var i=arguments.length>2;if(null==t&&(t=[]),f&&t.reduceRight===f)return r&&(e=k.bind(e,r)),i?t.reduceRight(e,n):t.reduceRight(e);var o=t.length;if(o!==+o){var s=k.keys(t);o=s.length}if(C(t,function(a,l,u){l=s?s[--o]:--o,i?n=e.call(r,n,t[l],l,u):(n=t[l],i=!0)}),!i)throw new TypeError(j);return n},k.find=k.detect=function(t,e,n){var r;return M(t,function(t,i,o){return e.call(n,t,i,o)?(r=t,!0):void 0}),r},k.filter=k.select=function(t,e,n){var r=[];return null==t?r:g&&t.filter===g?t.filter(e,n):(C(t,function(t,i,o){e.call(n,t,i,o)&&r.push(t)}),r)},k.reject=function(t,e,n){return k.filter(t,function(t,r,i){return!e.call(n,t,r,i)},n)},k.every=k.all=function(t,e,r){e||(e=k.identity);var i=!0;return null==t?i:m&&t.every===m?t.every(e,r):(C(t,function(t,o,s){return(i=i&&e.call(r,t,o,s))?void 0:n}),!!i)};var M=k.some=k.any=function(t,e,r){e||(e=k.identity);var i=!1;return null==t?i:v&&t.some===v?t.some(e,r):(C(t,function(t,o,s){return i||(i=e.call(r,t,o,s))?n:void 0}),!!i)};k.contains=k.include=function(t,e){return null==t?!1:y&&t.indexOf===y?-1!=t.indexOf(e):M(t,function(t){return t===e})},k.invoke=function(t,e){var n=a.call(arguments,2),r=k.isFunction(e);return k.map(t,function(t){return(r?e:t[e]).apply(t,n)})},k.pluck=function(t,e){return k.map(t,k.property(e))},k.where=function(t,e){return k.filter(t,k.matches(e))},k.findWhere=function(t,e){return k.find(t,k.matches(e))},k.max=function(t,e,n){if(!e&&k.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);var r=-1/0,i=-1/0;return C(t,function(t,o,s){var a=e?e.call(n,t,o,s):t;a>i&&(r=t,i=a)}),r},k.min=function(t,e,n){if(!e&&k.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);var r=1/0,i=1/0;return C(t,function(t,o,s){var a=e?e.call(n,t,o,s):t;i>a&&(r=t,i=a)}),r},k.shuffle=function(t){var e,n=0,r=[];return C(t,function(t){e=k.random(n++),r[n-1]=r[e],r[e]=t}),r},k.sample=function(t,e,n){return null==e||n?(t.length!==+t.length&&(t=k.values(t)),t[k.random(t.length-1)]):k.shuffle(t).slice(0,Math.max(0,e))};var S=function(t){return null==t?k.identity:k.isFunction(t)?t:k.property(t)};k.sortBy=function(t,e,n){return e=S(e),k.pluck(k.map(t,function(t,r,i){return{value:t,index:r,criteria:e.call(n,t,r,i)}}).sort(function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(r>n||void 0===r)return-1}return t.index-e.index}),"value")};var D=function(t){return function(e,n,r){var i={};return n=S(n),C(e,function(o,s){var a=n.call(r,o,s,e);t(i,a,o)}),i}};k.groupBy=D(function(t,e,n){k.has(t,e)?t[e].push(n):t[e]=[n]}),k.indexBy=D(function(t,e,n){t[e]=n}),k.countBy=D(function(t,e){k.has(t,e)?t[e]++:t[e]=1}),k.sortedIndex=function(t,e,n,r){n=S(n);for(var i=n.call(r,e),o=0,s=t.length;s>o;){var a=o+s>>>1;n.call(r,t[a])<i?o=a+1:s=a}return o},k.toArray=function(t){return t?k.isArray(t)?a.call(t):t.length===+t.length?k.map(t,k.identity):k.values(t):[]},k.size=function(t){return null==t?0:t.length===+t.length?t.length:k.keys(t).length},k.first=k.head=k.take=function(t,e,n){return null==t?void 0:null==e||n?t[0]:0>e?[]:a.call(t,0,e)},k.initial=function(t,e,n){return a.call(t,0,t.length-(null==e||n?1:e))},k.last=function(t,e,n){return null==t?void 0:null==e||n?t[t.length-1]:a.call(t,Math.max(t.length-e,0))},k.rest=k.tail=k.drop=function(t,e,n){return a.call(t,null==e||n?1:e)},k.compact=function(t){return k.filter(t,k.identity)};var z=function(t,e,n){return e&&k.every(t,k.isArray)?l.apply(n,t):(C(t,function(t){k.isArray(t)||k.isArguments(t)?e?s.apply(n,t):z(t,e,n):n.push(t)}),n)};k.flatten=function(t,e){return z(t,e,[])},k.without=function(t){return k.difference(t,a.call(arguments,1))},k.partition=function(t,e){var n=[],r=[];return C(t,function(t){(e(t)?n:r).push(t)}),[n,r]},k.uniq=k.unique=function(t,e,n,r){k.isFunction(e)&&(r=n,n=e,e=!1);var i=n?k.map(t,n,r):t,o=[],s=[];return C(i,function(n,r){(e?r&&s[s.length-1]===n:k.contains(s,n))||(s.push(n),o.push(t[r]))}),o},k.union=function(){return k.uniq(k.flatten(arguments,!0))},k.intersection=function(t){var e=a.call(arguments,1);return k.filter(k.uniq(t),function(t){return k.every(e,function(e){return k.contains(e,t)})})},k.difference=function(t){var e=l.apply(r,a.call(arguments,1));return k.filter(t,function(t){return!k.contains(e,t)})},k.zip=function(){for(var t=k.max(k.pluck(arguments,"length").concat(0)),e=new Array(t),n=0;t>n;n++)e[n]=k.pluck(arguments,""+n);return e},k.object=function(t,e){if(null==t)return{};for(var n={},r=0,i=t.length;i>r;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n},k.indexOf=function(t,e,n){if(null==t)return-1;var r=0,i=t.length;if(n){if("number"!=typeof n)return r=k.sortedIndex(t,e),t[r]===e?r:-1;r=0>n?Math.max(0,i+n):n}if(y&&t.indexOf===y)return t.indexOf(e,n);for(;i>r;r++)if(t[r]===e)return r;return-1},k.lastIndexOf=function(t,e,n){if(null==t)return-1;var r=null!=n;if(b&&t.lastIndexOf===b)return r?t.lastIndexOf(e,n):t.lastIndexOf(e);for(var i=r?n:t.length;i--;)if(t[i]===e)return i;return-1},k.range=function(t,e,n){arguments.length<=1&&(e=t||0,t=0),n=arguments[2]||1;for(var r=Math.max(Math.ceil((e-t)/n),0),i=0,o=new Array(r);r>i;)o[i++]=t,t+=n;return o};var N=function(){};k.bind=function(t,e){var n,r;if(x&&t.bind===x)return x.apply(t,a.call(arguments,1));if(!k.isFunction(t))throw new TypeError;return n=a.call(arguments,2),r=function(){if(!(this instanceof r))return t.apply(e,n.concat(a.call(arguments)));N.prototype=t.prototype;var i=new N;N.prototype=null;var o=t.apply(i,n.concat(a.call(arguments)));return Object(o)===o?o:i}},k.partial=function(t){var e=a.call(arguments,1);return function(){for(var n=0,r=e.slice(),i=0,o=r.length;o>i;i++)r[i]===k&&(r[i]=arguments[n++]);for(;n<arguments.length;)r.push(arguments[n++]);return t.apply(this,r)}},k.bindAll=function(t){var e=a.call(arguments,1);if(0===e.length)throw new Error("bindAll must be passed function names");return C(e,function(e){t[e]=k.bind(t[e],t)}),t},k.memoize=function(t,e){var n={};return e||(e=k.identity),function(){var r=e.apply(this,arguments);return k.has(n,r)?n[r]:n[r]=t.apply(this,arguments)}},k.delay=function(t,e){var n=a.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},k.defer=function(t){return k.delay.apply(k,[t,1].concat(a.call(arguments,1)))},k.throttle=function(t,e,n){var r,i,o,s=null,a=0;n||(n={});var l=function(){a=n.leading===!1?0:k.now(),s=null,o=t.apply(r,i),r=i=null};return function(){var u=k.now();a||n.leading!==!1||(a=u);var c=e-(u-a);return r=this,i=arguments,0>=c?(clearTimeout(s),s=null,a=u,o=t.apply(r,i),r=i=null):s||n.trailing===!1||(s=setTimeout(l,c)),o}},k.debounce=function(t,e,n){var r,i,o,s,a,l=function(){var u=k.now()-s;e>u?r=setTimeout(l,e-u):(r=null,n||(a=t.apply(o,i),o=i=null))};return function(){o=this,i=arguments,s=k.now();var u=n&&!r;return r||(r=setTimeout(l,e)),u&&(a=t.apply(o,i),o=i=null),a}},k.once=function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}},k.wrap=function(t,e){return k.partial(e,t)},k.compose=function(){var t=arguments;return function(){for(var e=arguments,n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},k.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},k.keys=function(t){if(!k.isObject(t))return[];if(w)return w(t);var e=[];for(var n in t)k.has(t,n)&&e.push(n);return e},k.values=function(t){for(var e=k.keys(t),n=e.length,r=new Array(n),i=0;n>i;i++)r[i]=t[e[i]];return r},k.pairs=function(t){for(var e=k.keys(t),n=e.length,r=new Array(n),i=0;n>i;i++)r[i]=[e[i],t[e[i]]];return r},k.invert=function(t){for(var e={},n=k.keys(t),r=0,i=n.length;i>r;r++)e[t[n[r]]]=n[r];return e},k.functions=k.methods=function(t){var e=[];for(var n in t)k.isFunction(t[n])&&e.push(n);return e.sort()},k.extend=function(t){return C(a.call(arguments,1),function(e){if(e)for(var n in e)t[n]=e[n]}),t},k.pick=function(t){var e={},n=l.apply(r,a.call(arguments,1));return C(n,function(n){n in t&&(e[n]=t[n])}),e},k.omit=function(t){var e={},n=l.apply(r,a.call(arguments,1));for(var i in t)k.contains(n,i)||(e[i]=t[i]);return e},k.defaults=function(t){return C(a.call(arguments,1),function(e){if(e)for(var n in e)void 0===t[n]&&(t[n]=e[n])}),t},k.clone=function(t){return k.isObject(t)?k.isArray(t)?t.slice():k.extend({},t):t},k.tap=function(t,e){return e(t),t};var T=function(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof k&&(t=t._wrapped),e instanceof k&&(e=e._wrapped);var i=u.call(t);if(i!=u.call(e))return!1;switch(i){case"[object String]":return t==String(e);case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var o=n.length;o--;)if(n[o]==t)return r[o]==e;var s=t.constructor,a=e.constructor;if(s!==a&&!(k.isFunction(s)&&s instanceof s&&k.isFunction(a)&&a instanceof a)&&"constructor"in t&&"constructor"in e)return!1;n.push(t),r.push(e);var l=0,c=!0;if("[object Array]"==i){if(l=t.length,c=l==e.length)for(;l--&&(c=T(t[l],e[l],n,r)););}else{for(var d in t)if(k.has(t,d)&&(l++,!(c=k.has(e,d)&&T(t[d],e[d],n,r))))break;if(c){for(d in e)if(k.has(e,d)&&!l--)break;c=!l}}return n.pop(),r.pop(),c};k.isEqual=function(t,e){return T(t,e,[],[])},k.isEmpty=function(t){if(null==t)return!0;if(k.isArray(t)||k.isString(t))return 0===t.length;for(var e in t)if(k.has(t,e))return!1;return!0},k.isElement=function(t){return!(!t||1!==t.nodeType)},k.isArray=_||function(t){return"[object Array]"==u.call(t)},k.isObject=function(t){return t===Object(t)},C(["Arguments","Function","String","Number","Date","RegExp"],function(t){k["is"+t]=function(e){return u.call(e)=="[object "+t+"]"}}),k.isArguments(arguments)||(k.isArguments=function(t){return!(!t||!k.has(t,"callee"))}),"function"!=typeof/./&&(k.isFunction=function(t){return"function"==typeof t}),k.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},k.isNaN=function(t){return k.isNumber(t)&&t!=+t},k.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==u.call(t)},k.isNull=function(t){return null===t},k.isUndefined=function(t){return void 0===t},k.has=function(t,e){return c.call(t,e)},k.noConflict=function(){return t._=e,this},k.identity=function(t){return t},k.constant=function(t){return function(){return t}},k.property=function(t){return function(e){return e[t]}},k.matches=function(t){return function(e){if(e===t)return!0;for(var n in t)if(t[n]!==e[n])return!1;return!0}},k.times=function(t,e,n){for(var r=Array(Math.max(0,t)),i=0;t>i;i++)r[i]=e.call(n,i);return r},k.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},k.now=Date.now||function(){return(new Date).getTime()};var P={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};P.unescape=k.invert(P.escape);var L={escape:new RegExp("["+k.keys(P.escape).join("")+"]","g"),unescape:new RegExp("("+k.keys(P.unescape).join("|")+")","g")};k.each(["escape","unescape"],function(t){k[t]=function(e){return null==e?"":(""+e).replace(L[t],function(e){return P[t][e]})}}),k.result=function(t,e){if(null==t)return void 0;var n=t[e];return k.isFunction(n)?n.call(t):n},k.mixin=function(t){C(k.functions(t),function(e){var n=k[e]=t[e];k.prototype[e]=function(){var t=[this._wrapped];return s.apply(t,arguments),R.call(this,n.apply(k,t))}})};var E=0;k.uniqueId=function(t){var e=++E+"";return t?t+e:e},k.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var A=/(.)^/,O={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},I=/\\|'|\r|\n|\t|\u2028|\u2029/g;k.template=function(t,e,n){var r;n=k.defaults({},n,k.templateSettings);var i=new RegExp([(n.escape||A).source,(n.interpolate||A).source,(n.evaluate||A).source].join("|")+"|$","g"),o=0,s="__p+='";t.replace(i,function(e,n,r,i,a){return s+=t.slice(o,a).replace(I,function(t){return"\\"+O[t]}),n&&(s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(s+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(s+="';\n"+i+"\n__p+='"),o=a+e.length,e}),s+="';\n",n.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{r=new Function(n.variable||"obj","_",s)}catch(a){throw a.source=s,a}if(e)return r(e,k);var l=function(t){return r.call(this,t,k)};return l.source="function("+(n.variable||"obj")+"){\n"+s+"}",l},k.chain=function(t){return k(t).chain()};var R=function(t){return this._chain?k(t).chain():t};k.mixin(k),C(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=r[t];k.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!=t&&"splice"!=t||0!==n.length||delete n[0],R.call(this,n)}}),C(["concat","join","slice"],function(t){var e=r[t];k.prototype[t]=function(){return R.call(this,e.apply(this._wrapped,arguments))}}),k.extend(k.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return k})}.call(this),function(){define("config",["require","underscore"],function(t){var e,n;if(e=t("underscore"),e.isObject(null!=(n=window.Chef)?n.config:void 0))return window.Chef.config;throw new Error("Missing expected object window.Chef.config!")})}.call(this),function(){var t,e=this,n=e.Backbone,r=[],i=r.push,o=r.slice,s=r.splice;t="undefined"!=typeof exports?exports:e.Backbone={},t.VERSION="1.0.0";var a=e._;a||"undefined"==typeof require||(a=require("underscore")),t.$=e.jQuery||e.Zepto||e.ender||e.$,t.noConflict=function(){return e.Backbone=n,this},t.emulateHTTP=!1,t.emulateJSON=!1;var l=t.Events={on:function(t,e,n){if(!c(this,"on",t,[e,n])||!e)return this;this._events||(this._events={});var r=this._events[t]||(this._events[t]=[]);return r.push({callback:e,context:n,ctx:n||this}),this},once:function(t,e,n){if(!c(this,"once",t,[e,n])||!e)return this;var r=this,i=a.once(function(){r.off(t,i),e.apply(this,arguments)});return i._callback=e,this.on(t,i,n)},off:function(t,e,n){var r,i,o,s,l,u,d,p;if(!this._events||!c(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events={},this;for(s=t?[t]:a.keys(this._events),l=0,u=s.length;u>l;l++)if(t=s[l],o=this._events[t]){if(this._events[t]=r=[],e||n)for(d=0,p=o.length;p>d;d++)i=o[d],(e&&e!==i.callback&&e!==i.callback._callback||n&&n!==i.context)&&r.push(i);r.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=o.call(arguments,1);if(!c(this,"trigger",t,e))return this;var n=this._events[t],r=this._events.all;return n&&d(n,e),r&&d(r,arguments),this},stopListening:function(t,e,n){var r=this._listeners;if(!r)return this;var i=!e&&!n;"object"==typeof e&&(n=this),t&&((r={})[t._listenerId]=t);for(var o in r)r[o].off(e,n,this),i&&delete this._listeners[o];return this}},u=/\s+/,c=function(t,e,n,r){if(!n)return!0;if("object"==typeof n){for(var i in n)t[e].apply(t,[i,n[i]].concat(r));return!1}if(u.test(n)){for(var o=n.split(u),s=0,a=o.length;a>s;s++)t[e].apply(t,[o[s]].concat(r));return!1}return!0},d=function(t,e){var n,r=-1,i=t.length,o=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;++r<i;)(n=t[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o);return;case 2:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o,s);return;case 3:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o,s,a);return;default:for(;++r<i;)(n=t[r]).callback.apply(n.ctx,e)}},p={listenTo:"on",listenToOnce:"once"};a.each(p,function(t,e){l[e]=function(e,n,r){var i=this._listeners||(this._listeners={}),o=e._listenerId||(e._listenerId=a.uniqueId("l"));return i[o]=e,"object"==typeof n&&(r=this),e[t](n,r,this),this}}),l.bind=l.on,l.unbind=l.off,a.extend(t,l);var h=t.Model=function(t,e){var n,r=t||{};e||(e={}),this.cid=a.uniqueId("c"),this.attributes={},a.extend(this,a.pick(e,f)),e.parse&&(r=this.parse(r,e)||{}),(n=a.result(this,"defaults"))&&(r=a.defaults({},r,n)),this.set(r,e),this.changed={},this.initialize.apply(this,arguments)},f=["url","urlRoot","collection"];a.extend(h.prototype,l,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return a.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return a.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,n){var r,i,o,s,l,u,c,d;if(null==t)return this;if("object"==typeof t?(i=t,n=e):(i={})[t]=e,n||(n={}),!this._validate(i,n))return!1;o=n.unset,l=n.silent,s=[],u=this._changing,this._changing=!0,u||(this._previousAttributes=a.clone(this.attributes),this.changed={}),d=this.attributes,c=this._previousAttributes,this.idAttribute in i&&(this.id=i[this.idAttribute]);for(r in i)e=i[r],a.isEqual(d[r],e)||s.push(r),a.isEqual(c[r],e)?delete this.changed[r]:this.changed[r]=e,o?delete d[r]:d[r]=e;if(!l){s.length&&(this._pending=!0);for(var p=0,h=s.length;h>p;p++)this.trigger("change:"+s[p],this,d[s[p]],n)}if(u)return this;if(!l)for(;this._pending;)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,a.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var n in this.attributes)e[n]=void 0;return this.set(e,a.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!a.isEmpty(this.changed):a.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?a.clone(this.changed):!1;var e,n=!1,r=this._changing?this._previousAttributes:this.attributes;for(var i in t)a.isEqual(r[i],e=t[i])||((n||(n={}))[i]=e);return n},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return a.clone(this._previousAttributes)},fetch:function(t){t=t?a.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=this,n=t.success;return t.success=function(r){return e.set(e.parse(r,t),t)?(n&&n(e,r,t),void e.trigger("sync",e,r,t)):!1},I(this,t),this.sync("read",this,t)},save:function(t,e,n){var r,i,o,s=this.attributes;if(null==t||"object"==typeof t?(r=t,n=e):(r={})[t]=e,!(!r||n&&n.wait||this.set(r,n)))return!1;if(n=a.extend({validate:!0},n),!this._validate(r,n))return!1;r&&n.wait&&(this.attributes=a.extend({},s,r)),void 0===n.parse&&(n.parse=!0);var l=this,u=n.success;return n.success=function(t){l.attributes=s;var e=l.parse(t,n);return n.wait&&(e=a.extend(r||{},e)),a.isObject(e)&&!l.set(e,n)?!1:(u&&u(l,t,n),void l.trigger("sync",l,t,n))},I(this,n),i=this.isNew()?"create":n.patch?"patch":"update","patch"===i&&(n.attrs=r),o=this.sync(i,this,n),r&&n.wait&&(this.attributes=s),o},destroy:function(t){t=t?a.clone(t):{};var e=this,n=t.success,r=function(){e.trigger("destroy",e,e.collection,t)};if(t.success=function(i){(t.wait||e.isNew())&&r(),n&&n(e,i,t),e.isNew()||e.trigger("sync",e,i,t)},this.isNew())return t.success(),!1;I(this,t);var i=this.sync("delete",this,t);return t.wait||r(),i},url:function(){var t=a.result(this,"urlRoot")||a.result(this.collection,"url")||O();return this.isNew()?t:t+("/"===t.charAt(t.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(t){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(t){return this._validate({},a.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=a.extend({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return n?(this.trigger("invalid",this,n,a.extend(e||{},{validationError:n})),!1):!0}});var g=["keys","values","pairs","invert","pick","omit"];a.each(g,function(t){h.prototype[t]=function(){var e=o.call(arguments);return e.unshift(this.attributes),a[t].apply(a,e)}});var m=t.Collection=function(t,e){e||(e={}),e.url&&(this.url=e.url),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,a.extend({silent:!0},e))},v={add:!0,remove:!0,merge:!0},y={add:!0,merge:!1,remove:!1};a.extend(m.prototype,l,{model:h,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return t.sync.apply(this,arguments)},add:function(t,e){return this.set(t,a.defaults(e||{},y))},remove:function(t,e){t=a.isArray(t)?t.slice():[t],e||(e={});var n,r,i,o;for(n=0,r=t.length;r>n;n++)o=this.get(t[n]),o&&(delete this._byId[o.id],delete this._byId[o.cid],i=this.indexOf(o),this.models.splice(i,1),this.length--,e.silent||(e.index=i,o.trigger("remove",o,this,e)),this._removeReference(o));return this},set:function(t,e){e=a.defaults(e||{},v),e.parse&&(t=this.parse(t,e)),a.isArray(t)||(t=t?[t]:[]);var n,r,o,l,u,c=e.at,d=this.comparator&&null==c&&e.sort!==!1,p=a.isString(this.comparator)?this.comparator:null,h=[],f=[],g={};for(n=0,r=t.length;r>n;n++)(o=this._prepareModel(t[n],e))&&((l=this.get(o))?(e.remove&&(g[l.cid]=!0),e.merge&&(l.set(o.attributes,e),d&&!u&&l.hasChanged(p)&&(u=!0))):e.add&&(h.push(o),o.on("all",this._onModelEvent,this),this._byId[o.cid]=o,null!=o.id&&(this._byId[o.id]=o)));if(e.remove){for(n=0,r=this.length;r>n;++n)g[(o=this.models[n]).cid]||f.push(o);f.length&&this.remove(f,e)}if(h.length&&(d&&(u=!0),this.length+=h.length,null!=c?s.apply(this.models,[c,0].concat(h)):i.apply(this.models,h)),u&&this.sort({silent:!0}),e.silent)return this;for(n=0,r=h.length;r>n;n++)(o=h[n]).trigger("add",o,this,e);return u&&this.trigger("sort",this,e),this},reset:function(t,e){e||(e={});for(var n=0,r=this.models.length;r>n;n++)this._removeReference(this.models[n]);return e.previousModels=this.models,this._reset(),this.add(t,a.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),this},push:function(t,e){return t=this._prepareModel(t,e),this.add(t,a.extend({at:this.length},e)),t},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return t=this._prepareModel(t,e),this.add(t,a.extend({at:0},e)),t},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(t,e){return this.models.slice(t,e)},get:function(t){return null==t?void 0:this._byId[null!=t.id?t.id:t.cid||t]},at:function(t){return this.models[t]},where:function(t,e){return a.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var n in t)if(t[n]!==e.get(n))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),a.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(a.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},sortedIndex:function(t,e,n){e||(e=this.comparator);var r=a.isFunction(e)?e:function(t){return t.get(e)};return a.sortedIndex(this.models,t,r,n)},pluck:function(t){return a.invoke(this.models,"get",t)},fetch:function(t){t=t?a.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=t.success,n=this;return t.success=function(r){var i=t.reset?"reset":"set";n[i](r,t),e&&e(n,r,t),n.trigger("sync",n,r,t)},I(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?a.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var n=this,r=e.success;return e.success=function(i){e.wait&&n.add(t,e),r&&r(t,i,e)},t.save(null,e),t},parse:function(t){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof h)return t.collection||(t.collection=this),t;e||(e={}),e.collection=this;var n=new this.model(t,e);return n._validate(t,e)?n:(this.trigger("invalid",this,t,e),!1)},_removeReference:function(t){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,r){("add"!==t&&"remove"!==t||n===this)&&("destroy"===t&&this.remove(e,r),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});var b=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];a.each(b,function(t){m.prototype[t]=function(){var e=o.call(arguments);return e.unshift(this.models),a[t].apply(a,e)}});var _=["groupBy","countBy","sortBy"];a.each(_,function(t){m.prototype[t]=function(e,n){var r=a.isFunction(e)?e:function(t){return t.get(e)};return a[t](this.models,r,n)}});var w=t.View=function(t){this.cid=a.uniqueId("view"),this._configure(t||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},x=/^(\S+)\s*(.*)$/,k=["model","collection","el","id","attributes","className","tagName","events"];a.extend(w.prototype,l,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,n){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=a.result(this,"events")))return this;this.undelegateEvents();for(var e in t){var n=t[e];if(a.isFunction(n)||(n=this[t[e]]),n){var r=e.match(x),i=r[1],o=r[2];n=a.bind(n,this),i+=".delegateEvents"+this.cid,""===o?this.$el.on(i,n):this.$el.on(i,o,n)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(t){this.options&&(t=a.extend({},a.result(this,"options"),t)),a.extend(this,a.pick(t,k)),this.options=t},_ensureElement:function(){if(this.el)this.setElement(a.result(this,"el"),!1);else{var e=a.extend({},a.result(this,"attributes"));this.id&&(e.id=a.result(this,"id")),this.className&&(e["class"]=a.result(this,"className"));var n=t.$("<"+a.result(this,"tagName")+">").attr(e);this.setElement(n,!1)}}}),t.sync=function(e,n,r){var i=C[e];a.defaults(r||(r={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var o={type:i,dataType:"json"};if(r.url||(o.url=a.result(n,"url")||O()),null!=r.data||!n||"create"!==e&&"update"!==e&&"patch"!==e||(o.contentType="application/json",o.data=JSON.stringify(r.attrs||n.toJSON(r))),r.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{}),r.emulateHTTP&&("PUT"===i||"DELETE"===i||"PATCH"===i)){o.type="POST",r.emulateJSON&&(o.data._method=i);var s=r.beforeSend;r.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override",i),s?s.apply(this,arguments):void 0}}"GET"===o.type||r.emulateJSON||(o.processData=!1),"PATCH"!==o.type||!window.ActiveXObject||window.external&&window.external.msActiveXFilteringEnabled||(o.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var l=r.xhr=t.ajax(a.extend(o,r));return n.trigger("request",n,l,r),l};var C={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var j=t.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},M=/\((.*?)\)/g,S=/(\(\?)?:\w+/g,D=/\*\w+/g,z=/[\-{}\[\]+?.,\\\^$|#\s]/g;a.extend(j.prototype,l,{initialize:function(){},route:function(e,n,r){a.isRegExp(e)||(e=this._routeToRegExp(e)),a.isFunction(n)&&(r=n,n=""),r||(r=this[n]);var i=this;return t.history.route(e,function(o){var s=i._extractParameters(e,o);r&&r.apply(i,s),i.trigger.apply(i,["route:"+n].concat(s)),i.trigger("route",n,s),t.history.trigger("route",i,n,s)}),this},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(this.routes){this.routes=a.result(this,"routes");for(var t,e=a.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(z,"\\$&").replace(M,"(?:$1)?").replace(S,function(t,e){return e?t:"([^/]+)"}).replace(D,"(.*?)"),new RegExp("^"+t+"$")},_extractParameters:function(t,e){var n=t.exec(e).slice(1);return a.map(n,function(t){return t?decodeURIComponent(t):null})}});var N=t.History=function(){this.handlers=[],a.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},T=/^[#\/]|\s+$/g,P=/^\/+|\/+$/g,L=/msie [\w.]+/,E=/\/$/;N.started=!1,a.extend(N.prototype,l,{interval:50,getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=this.location.pathname;var n=this.root.replace(E,"");t.indexOf(n)||(t=t.substr(n.length))}else t=this.getHash();return t.replace(T,"")},start:function(e){if(N.started)throw new Error("Backbone.history has already been started");N.started=!0,this.options=a.extend({},{root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var n=this.getFragment(),r=document.documentMode,i=L.exec(navigator.userAgent.toLowerCase())&&(!r||7>=r);this.root=("/"+this.root+"/").replace(P,"/"),i&&this._wantsHashChange&&(this.iframe=t.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(n)),this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!i?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=n;
var o=this.location,s=o.pathname.replace(/[^\/]$/,"$&/")===this.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!s?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&s&&o.hash&&(this.fragment=this.getHash().replace(T,""),this.history.replaceState({},document.title,this.root+this.fragment+o.search)),this.options.silent?void 0:this.loadUrl())},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),N.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(){var t=this.getFragment();return t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe))),t===this.fragment?!1:(this.iframe&&this.navigate(t),void(this.loadUrl()||this.loadUrl(this.getHash())))},loadUrl:function(t){var e=this.fragment=this.getFragment(t),n=a.any(this.handlers,function(t){return t.route.test(e)?(t.callback(e),!0):void 0});return n},navigate:function(t,e){if(!N.started)return!1;if(e&&e!==!0||(e={trigger:e}),t=this.getFragment(t||""),this.fragment!==t){this.fragment=t;var n=this.root+t;if(this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}e.trigger&&this.loadUrl(t)}},_updateHash:function(t,e,n){if(n){var r=t.href.replace(/(javascript:|#).*$/,"");t.replace(r+"#"+e)}else t.hash="#"+e}}),t.history=new N;var A=function(t,e){var n,r=this;n=t&&a.has(t,"constructor")?t.constructor:function(){return r.apply(this,arguments)},a.extend(n,r,e);var i=function(){this.constructor=n};return i.prototype=r.prototype,n.prototype=new i,t&&a.extend(n.prototype,t),n.__super__=r.prototype,n};h.extend=m.extend=j.extend=w.extend=N.extend=A;var O=function(){throw new Error('A "url" property or function must be specified')},I=function(t,e){var n=e.error;e.error=function(r){n&&n(t,r,e),t.trigger("error",t,r,e)}}}.call(this),define("backbone",["underscore","jquery"],function(t){return function(){var e;return e||t.Backbone}}(this)),function(t,e){function n(e,n){var r=e.split("&");t.each(r,function(t){var e=t.split("=");e.length>1&&n(e[0],e[1])})}"undefined"!=typeof require&&(t=t||require("underscore"),e=e||require("backbone"));var r=/^\?(.*)/,i=/\((.*?)\)/g,o=/(\(\?)?:\w+/g,s=/\*\w+/g,a=/[\-{}\[\]+?.,\\\^$|#\s]/g,l=/(\?.*)$/,u=/^([^\?]*)/,c=/(\?)[\w-]+=/i,d=/[\:\*]([^\:\?\/]+)/g,p=/^[#\/]|\s+$/g,h=/\/$/;e.Router.arrayValueSplit="|";var f=function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=this.location.pathname;var n=this.root.replace(h,""),r=this.location.search;t.indexOf(n)||(t=t.substr(n.length)),r&&(t+=r)}else t=this.getHash();return t.replace(p,"")};t.extend(e.History.prototype,{getFragment:function(t){var e=this._wantsHashChange&&this._wantsPushState&&!this._hasPushState,n=f.apply(this,arguments);return null!=t||c.test(n)?e&&(n=n.replace(l,"")):n+=this.location.search,n},getQueryParameters:function(e){e=f.apply(this,arguments);var i=e.replace(u,""),o=i.match(r);if(o){i=o[1];var s={};return n(i,function(e,n){n=decodeURIComponent(n),s[e]?t.isString(s[e])?s[e]=[s[e],n]:s[e].push(n):s[e]=n}),s}return{}}}),t.extend(e.Router.prototype,{initialize:function(t){this.encodedSplatParts=t&&t.encodedSplatParts},getFragment:function(t,e,n){return t=f.apply(this,arguments),n&&(t=t.replace(l,"")),t},_routeToRegExp:function(e){var n=s.exec(e)||{index:-1},r=o.exec(e)||{index:-1},l=e.match(d)||[];e=e.replace(a,"\\$&").replace(i,"(?:$1)?").replace(o,function(t,e){return e?t:"([^\\/\\?]+)"}).replace(s,"([^?]*?)"),e+="([?]{1}.*)?";var u=new RegExp("^"+e+"$");return n.index>=0&&(u.splatMatch=r>=0?n.index-r.index:-1),u.paramNames=t.map(l,function(t){return t.substring(1)}),u.namedParameters=this.namedParameters,u},_extractParameters:function(i,o){var s=i.exec(o).slice(1),a={};s.length>0&&t.isUndefined(s[s.length-1])&&s.splice(s.length-1,1);var l=s.length&&s[s.length-1]&&s[s.length-1].match(r);if(l){var u=l[1],c={};if(u){var d=this;n(u,function(t,e){d._setParamValue(t,e,c)})}s[s.length-1]=c,t.extend(a,c)}var p=s.length;if(i.splatMatch&&this.encodedSplatParts){if(i.splatMatch<0)return s;p-=1}for(var h=0;p>h;h++)t.isString(s[h])&&(s[h]=decodeURIComponent(s[h]),i.paramNames&&i.paramNames.length>=h-1&&(a[i.paramNames[h]]=s[h]));return e.Router.namedParameters||i.namedParameters?[a]:s},_setParamValue:function(t,e,n){for(var r=t.split("."),i=n,o=0;o<r.length;o++){var s=r[o];o===r.length-1?i[s]=this._decodeParamValue(e,i[s]):i=i[s]=i[s]||{}}},_decodeParamValue:function(n,r){var i=e.Router.arrayValueSplit;if(i&&n.indexOf(i)>=0){for(var o=n.split(i),s=o.length-1;s>=0;s--)o[s]?o[s]=decodeURIComponent(o[s]):o.splice(s,1);return o}return n=decodeURIComponent(n),r?t.isArray(r)?(r.push(n),r):[r,n]:n},toFragment:function(e,n){return n&&(t.isString(n)||(n=this._toQueryString(n)),n&&(e+="?"+n)),e},_toQueryString:function(n,r){function i(t){return String(t).replace(o,encodeURIComponent(o))}var o=e.Router.arrayValueSplit;if(!n)return"";r=r||"";var s="";for(var a in n){var l=n[a];if(t.isString(l)||t.isNumber(l)||t.isBoolean(l)||t.isDate(l))l=this._toQueryParam(l),(t.isBoolean(l)||t.isNumber(l)||l)&&(s+=(s?"&":"")+this._toQueryParamName(a,r)+"="+i(encodeURIComponent(l)));else if(t.isArray(l)){for(var u="",c=0;c<l.length;c++){var d=this._toQueryParam(l[c]);(t.isBoolean(d)||d)&&(u+=o+i(d))}u&&(s+=(s?"&":"")+this._toQueryParamName(a,r)+"="+u)}else{var p=this._toQueryString(l,this._toQueryParamName(a,r,!0));p&&(s+=(s?"&":"")+p)}}return s},_toQueryParamName:function(t,e,n){return e+t+(n?".":"")},_toQueryParam:function(e){return t.isNull(e)||t.isUndefined(e)?null:e}})}("undefined"==typeof _?null:_,"undefined"==typeof Backbone?null:Backbone),define("backbone.queryparams",["backbone","underscore"],function(t){return function(){var e;return e||t.Backbone}}(this)),function(t){var e,n=t.Backbone,r=t._,i=n.$,o=t.console&&t.console.warn,s=t.console&&t.console.trace,a=n.View.prototype._configure,l=(n.View.prototype.render,Array.prototype.push),u=Array.prototype.concat,c=Array.prototype.splice,d=n.View.extend({constructor:function(t){t=t||{},d.setupView(this,t),n.View.call(this,t)},insertView:function(t,e){return e?this.setView(t,e,!0):this.setView(t,!0)},insertViews:function(t){return r.isArray(t)?this.setViews({"":t}):(r.each(t,function(e,n){t[n]=r.isArray(e)?e:[e]}),this.setViews(t))},getView:function(t){return null==t&&(t=arguments[1]),this.getViews(t).first().value()},getViews:function(t){var e;return"string"==typeof t?(e=this.views[t]||[],r.chain([].concat(e))):(e=r.chain(this.views).map(function(t){return r.isArray(t)?t:[t]},this).flatten(),"object"==typeof t?e.where(t):"function"==typeof t?e.filter(t):e)},removeView:function(t){return this.getViews(t).each(function(t){t.remove()})},setView:function(t,e,n){var i,o,s,a=this;if("string"!=typeof t&&(n=e,e=t,t=""),this.views=this.views||{},i=e.__manager__,o=this.views[t],!i)throw new Error("Please set `View#manage` property with selector '"+t+"' to `true`.");return s=e.getAllOptions(),i.parent=a,i.selector=t,e.on("all",function(t){"beforeRender"!==t&&"afterRender"!==t&&a.trigger.apply(a,arguments)},e),n?(this.views[t]=u.call([],o||[],e),i.insert=!0,e):(i.hasRendered&&s.partial(a.$el,e.$el,a.__manager__,i),o&&r.each(u.call([],o),function(t){t.remove()}),this.views[t]=e)},setViews:function(t){return r.each(t,function(t,e){return r.isArray(t)?r.each(t,function(t){this.insertView(e,t)},this):void this.setView(e,t)},this),this},render:function(){function e(){function e(){var e=a.afterRender;e&&e.call(i,i),i.trigger("afterRender",i),u.noel&&i.$el.length>1&&o&&!a.suppressWarnings&&(t.console.warn("Using `el: false` with multiple top level elements is not supported."),s&&t.console.trace())}var n;return c&&(a.contains(c.el,i.el)||a.partial(c.$el,i.$el,p,u)),i.delegateEvents(),u.hasRendered=!0,(n=u.queue.shift())?n():delete u.queue,p&&p.queue?c.once("afterRender",e):e(),h.resolveWith(i,[i])}function n(){{var t=i.getAllOptions(),n=i.__manager__,o=n.parent;o&&o.__manager__}i._render(d._viewRender,t).done(function(){if(!r.keys(i.views).length)return e();var n=r.map(i.views,function(t){var e=r.isArray(t);return e&&t.length?r.reduce(t.slice(1),function(t,e){return t.then(function(){return e.render()})},t[0].render()):e?t:t.render()});t.when(n).done(e)})}var i=this,a=i.getAllOptions(),u=i.__manager__,c=u.parent,p=c&&c.__manager__,h=a.deferred();return u.queue?l.call(u.queue,n):(u.queue=[],n(i,h)),h.view=i,h},remove:function(){return d._removeView(this,!0),this._remove.apply(this,arguments)},getAllOptions:function(){return r.extend({},this,d.prototype.options,this.options)}},{_cache:{},_makeAsync:function(t,e){var n=t.deferred();return n.async=function(){return n._isAsync=!0,e},n},_viewRender:function(t,e){function n(n){r.isString(n)&&(c.noel?(n=i.trim(n),u=i(n),t.$el.slice(1).remove(),t.$el.replaceWith(u),t.setElement(u,!1)):e.html(t.$el,n)),l.resolveWith(t,[t])}function o(t,r){var i,o=d._makeAsync(e,function(t){n(t)});d.cache(s,r),r&&(i=e.render.call(o,r,t)),o._isAsync||n(i)}var s,a,l,u,c=t.__manager__;return{render:function(){var n=t.serialize||e.serialize,i=t.template||e.template;return r.isFunction(n)&&(n=n.call(t)),l=d._makeAsync(e,function(t){o(n,t)}),"string"==typeof i&&(s=e.prefix+i),(a=d.cache(s))?(o(n,a,s),l):("string"==typeof i?a=e.fetch.call(l,e.prefix+i):"function"==typeof i?a=i:null!=i&&(a=e.fetch.call(l,i)),l._isAsync||o(n,a),l)}}},_removeViews:function(t,e){"boolean"==typeof t&&(e=t,t=this),t=t||this,t.getViews().each(function(t){(t.__manager__.hasRendered||e)&&d._removeView(t,e)})},_removeView:function(t,e){var n,i=t.__manager__,o="boolean"==typeof t.keep?t.keep:t.options.keep;if(!o&&i.insert===!0||e){if(d.cleanViews(t),t._removeViews(!0),t.$el.remove(),!i.parent)return;if(n=i.parent.views[i.selector],r.isArray(n))return r.each(r.clone(n),function(t,e){t&&t.__manager__===i&&c.call(n,e,1)});delete i.parent.views[i.selector]}},cache:function(t,e){return t in this._cache&&null==e?this._cache[t]:null!=t&&null!=e?this._cache[t]=e:void 0},cleanViews:function(t){r.each(u.call([],t),function(t){var e;t.unbind(),t.model instanceof n.Model&&t.model.off(null,null,t),t.collection instanceof n.Collection&&t.collection.off(null,null,t),t.stopListening(),e=t.getAllOptions().cleanup,r.isFunction(e)&&e.call(t)})},configure:function(t){r.extend(d.prototype.options,t),t.manage&&(n.View.prototype.manage=!0),t.el===!1&&(n.View.prototype.el=!1),t.suppressWarnings===!0&&(n.View.prototype.suppressWarnings=!0)},setupView:function(t,i){r.each(u.call([],t),function(t){if(!t.__manager__){var o,s,a,l=d.prototype,c=r.pick(t,e);r.defaults(t,{views:{},__manager__:{},_removeViews:d._removeViews,_removeView:d._removeView},d.prototype),i=t.options=r.defaults(i||{},t.options,l.options),a=r.pick(i,u.call(["events"],r.values(i.events))),r.extend(t,a),(c.render===d.prototype.render||c.render===n.View.prototype.render)&&delete c.render,r.extend(i,c),t._remove=n.View.prototype.remove,t._render=function(t,e){var n=this,r=n.__manager__,i=e.beforeRender;return r.hasRendered&&this._removeViews(),i&&i.call(this,this),this.trigger("beforeRender",this),t(this,e).render()},t.render=d.prototype.render,t.remove!==l.remove&&(t._remove=t.remove,t.remove=l.remove),o=i.views||t.views,r.keys(o).length&&(s=o,t.views={},t.setViews(s)),t.options.template?t.options.template=i.template:t.template&&(i.template=t.template)}})}});n.Layout=d,d.VERSION="0.8.8",n.View.prototype._configure=function(t){var e,n;return("el"in t?t.el===!1:this.el===!1)&&(e=!0),n=a.apply(this,arguments),(t.manage||this.manage)&&d.setupView(this),this.__manager__&&(this.__manager__.noel=e,this.__manager__.suppressWarnings=t.suppressWarnings),n},d.prototype.options={prefix:"",deferred:function(){return i.Deferred()},fetch:function(t){return r.template(i(t).html())},partial:function(t,e,n,r){if(r.selector)if(n.noel){var i=t.filter(r.selector);t=i.length?i:t.find(r.selector)}else t=t.find(r.selector);r.insert?this.insert(t,e):this.html(t,e)},html:function(t,e){t.html(e)},insert:function(t,e){t.append(e)},when:function(t){return i.when.apply(null,t)},render:function(t,e){return t(e)},contains:function(t,e){return i.contains(t,e)}},e=r.keys(d.prototype.options)}("object"==typeof global?global:this),define("backbone.layoutmanager",["backbone"],function(t){return function(){var e;return e||t.Backbone.Layout}}(this)),function(t,e){function n(t){return d.PF.compile(t||"nplurals=2; plural=(n != 1);")}function r(t,e){this._key=t,this._i18n=e}var i=Array.prototype,o=Object.prototype,s=i.slice,a=o.hasOwnProperty,l=i.forEach,u={},c={forEach:function(t,e,n){var r,i,o;if(null!==t)if(l&&t.forEach===l)t.forEach(e,n);else if(t.length===+t.length){for(r=0,i=t.length;i>r;r++)if(r in t&&e.call(n,t[r],r,t)===u)return}else for(o in t)if(a.call(t,o)&&e.call(n,t[o],o,t)===u)return},extend:function(t){return this.forEach(s.call(arguments,1),function(e){for(var n in e)t[n]=e[n]}),t}},d=function(t){if(this.defaults={locale_data:{messages:{"":{domain:"messages",lang:"en",plural_forms:"nplurals=2; plural=(n != 1);"}}},domain:"messages"},this.options=c.extend({},this.defaults,t),this.textdomain(this.options.domain),this.options.domain&&!this.options.locale_data[this.options.domain])throw new Error("Text domain set to non-existent domain: `"+this.options.domain+"`")};d.context_delimiter=String.fromCharCode(4),c.extend(r.prototype,{onDomain:function(t){return this._domain=t,this},withContext:function(t){return this._context=t,this},ifPlural:function(t,e){return this._val=t,this._pkey=e,this},fetch:function(t){return"[object Array]"!={}.toString.call(t)&&(t=[].slice.call(arguments)),(t&&t.length?d.sprintf:function(t){return t})(this._i18n.dcnpgettext(this._domain,this._context,this._key,this._pkey,this._val),t)}}),c.extend(d.prototype,{translate:function(t){return new r(t,this)},textdomain:function(t){return t?void(this._textdomain=t):this._textdomain},gettext:function(t){return this.dcnpgettext.call(this,e,e,t)},dgettext:function(t,n){return this.dcnpgettext.call(this,t,e,n)},dcgettext:function(t,n){return this.dcnpgettext.call(this,t,e,n)},ngettext:function(t,n,r){return this.dcnpgettext.call(this,e,e,t,n,r)},dngettext:function(t,n,r,i){return this.dcnpgettext.call(this,t,e,n,r,i)},dcngettext:function(t,n,r,i){return this.dcnpgettext.call(this,t,e,n,r,i)},pgettext:function(t,n){return this.dcnpgettext.call(this,e,t,n)},dpgettext:function(t,e,n){return this.dcnpgettext.call(this,t,e,n)},dcpgettext:function(t,e,n){return this.dcnpgettext.call(this,t,e,n)},npgettext:function(t,n,r,i){return this.dcnpgettext.call(this,e,t,n,r,i)},dnpgettext:function(t,e,n,r,i){return this.dcnpgettext.call(this,t,e,n,r,i)},dcnpgettext:function(t,e,r,i,o){i=i||r,t=t||this._textdomain,o="undefined"==typeof o?1:o;var s;if(!this.options)return s=new d,s.dcnpgettext.call(s,void 0,void 0,r,i,o);if(!this.options.locale_data)throw new Error("No locale data provided.");if(!this.options.locale_data[t])throw new Error("Domain `"+t+"` was not found.");if(!this.options.locale_data[t][""])throw new Error("No locale meta information provided.");if(!r)throw new Error("No translation key found.");if("number"!=typeof o&&(o=parseInt(o,10),isNaN(o)))throw new Error("The number that was passed in is not a number.");var a,l,u=e?e+d.context_delimiter+r:r,c=this.options.locale_data,p=c[t],h=p[""].plural_forms||(c.messages||this.defaults.locale_data.messages)[""].plural_forms,f=n(h)(o)+1;if(!p)throw new Error("No domain named `"+t+"` could be found.");return a=p[u],!a||f>=a.length?(l=[null,r,i],l[n(h)(o)+1]):(l=a[f],l?l:(l=[null,r,i],l[n(h)(o)+1]))}});var p=function(){function t(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}function e(t,e){for(var n=[];e>0;n[--e]=t);return n.join("")}var n=function(){return n.cache.hasOwnProperty(arguments[0])||(n.cache[arguments[0]]=n.parse(arguments[0])),n.format.call(null,n.cache[arguments[0]],arguments)};return n.format=function(n,r){var i,o,s,a,l,u,c,d=1,h=n.length,f="",g=[];for(o=0;h>o;o++)if(f=t(n[o]),"string"===f)g.push(n[o]);else if("array"===f){if(a=n[o],a[2])for(i=r[d],s=0;s<a[2].length;s++){if(!i.hasOwnProperty(a[2][s]))throw p('[sprintf] property "%s" does not exist',a[2][s]);i=i[a[2][s]]}else i=a[1]?r[a[1]]:r[d++];if(/[^s]/.test(a[8])&&"number"!=t(i))throw p("[sprintf] expecting number but found %s",t(i));switch(("undefined"==typeof i||null===i)&&(i=""),a[8]){case"b":i=i.toString(2);break;case"c":i=String.fromCharCode(i);break;case"d":i=parseInt(i,10);break;case"e":i=a[7]?i.toExponential(a[7]):i.toExponential();break;case"f":i=a[7]?parseFloat(i).toFixed(a[7]):parseFloat(i);break;case"o":i=i.toString(8);break;case"s":i=(i=String(i))&&a[7]?i.substring(0,a[7]):i;break;case"u":i=Math.abs(i);break;case"x":i=i.toString(16);break;case"X":i=i.toString(16).toUpperCase()}i=/[def]/.test(a[8])&&a[3]&&i>=0?"+"+i:i,u=a[4]?"0"==a[4]?"0":a[4].charAt(1):" ",c=a[6]-String(i).length,l=a[6]?e(u,c):"",g.push(a[5]?i+l:l+i)}return g.join("")},n.cache={},n.parse=function(t){for(var e=t,n=[],r=[],i=0;e;){if(null!==(n=/^[^\x25]+/.exec(e)))r.push(n[0]);else if(null!==(n=/^\x25{2}/.exec(e)))r.push("%");else{if(null===(n=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(e)))throw"[sprintf] huh?";if(n[2]){i|=1;var o=[],s=n[2],a=[];if(null===(a=/^([a-z_][a-z_\d]*)/i.exec(s)))throw"[sprintf] huh?";for(o.push(a[1]);""!==(s=s.substring(a[0].length));)if(null!==(a=/^\.([a-z_][a-z_\d]*)/i.exec(s)))o.push(a[1]);else{if(null===(a=/^\[(\d+)\]/.exec(s)))throw"[sprintf] huh?";o.push(a[1])}n[2]=o}else i|=2;if(3===i)throw"[sprintf] mixing positional and named placeholders is not (yet) supported";r.push(n)}e=e.substring(n[0].length)}return r},n}(),h=function(t,e){return e.unshift(t),p.apply(null,e)};d.parse_plural=function(t,e){return t=t.replace(/n/g,e),d.parse_expression(t)},d.sprintf=function(t,e){return"[object Array]"=={}.toString.call(e)?h(t,[].slice.call(e)):p.apply(this,[].slice.call(arguments))},d.prototype.sprintf=function(){return d.sprintf.apply(this,arguments)},d.PF={},d.PF.parse=function(t){var e=d.PF.extractPluralExpr(t);return d.PF.parser.parse.call(d.PF.parser,e)},d.PF.compile=function(t){function e(t){return t===!0?1:t?t:0}var n=d.PF.parse(t);return function(t){return e(d.PF.interpreter(n)(t))}},d.PF.interpreter=function(t){return function(e){switch(t.type){case"GROUP":return d.PF.interpreter(t.expr)(e);case"TERNARY":return d.PF.interpreter(t.expr)(e)?d.PF.interpreter(t.truthy)(e):d.PF.interpreter(t.falsey)(e);case"OR":return d.PF.interpreter(t.left)(e)||d.PF.interpreter(t.right)(e);case"AND":return d.PF.interpreter(t.left)(e)&&d.PF.interpreter(t.right)(e);case"LT":return d.PF.interpreter(t.left)(e)<d.PF.interpreter(t.right)(e);case"GT":return d.PF.interpreter(t.left)(e)>d.PF.interpreter(t.right)(e);case"LTE":return d.PF.interpreter(t.left)(e)<=d.PF.interpreter(t.right)(e);case"GTE":return d.PF.interpreter(t.left)(e)>=d.PF.interpreter(t.right)(e);case"EQ":return d.PF.interpreter(t.left)(e)==d.PF.interpreter(t.right)(e);case"NEQ":return d.PF.interpreter(t.left)(e)!=d.PF.interpreter(t.right)(e);case"MOD":return d.PF.interpreter(t.left)(e)%d.PF.interpreter(t.right)(e);case"VAR":return e;case"NUM":return t.val;default:throw new Error("Invalid Token found.")}}},d.PF.extractPluralExpr=function(t){t=t.replace(/^\s\s*/,"").replace(/\s\s*$/,""),/;\s*$/.test(t)||(t=t.concat(";"));var e,n=/nplurals\=(\d+);/,r=/plural\=(.*);/,i=t.match(n),o={};if(!(i.length>1))throw new Error("nplurals not found in plural_forms string: "+t);if(o.nplurals=i[1],t=t.replace(n,""),e=t.match(r),!(e&&e.length>1))throw new Error("`plural` expression not found: "+t);return e[1]},d.PF.parser=function(){var t={trace:function(){},yy:{},symbols_:{error:2,expressions:3,e:4,EOF:5,"?":6,":":7,"||":8,"&&":9,"<":10,"<=":11,">":12,">=":13,"!=":14,"==":15,"%":16,"(":17,")":18,n:19,NUMBER:20,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",6:"?",7:":",8:"||",9:"&&",10:"<",11:"<=",12:">",13:">=",14:"!=",15:"==",16:"%",17:"(",18:")",19:"n",20:"NUMBER"},productions_:[0,[3,2],[4,5],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,1],[4,1]],performAction:function(t,e,n,r,i,o){var s=o.length-1;switch(i){case 1:return{type:"GROUP",expr:o[s-1]};case 2:this.$={type:"TERNARY",expr:o[s-4],truthy:o[s-2],falsey:o[s]};break;case 3:this.$={type:"OR",left:o[s-2],right:o[s]};break;case 4:this.$={type:"AND",left:o[s-2],right:o[s]};break;case 5:this.$={type:"LT",left:o[s-2],right:o[s]};break;case 6:this.$={type:"LTE",left:o[s-2],right:o[s]};break;case 7:this.$={type:"GT",left:o[s-2],right:o[s]};break;case 8:this.$={type:"GTE",left:o[s-2],right:o[s]};break;case 9:this.$={type:"NEQ",left:o[s-2],right:o[s]};break;case 10:this.$={type:"EQ",left:o[s-2],right:o[s]};break;case 11:this.$={type:"MOD",left:o[s-2],right:o[s]};break;case 12:this.$={type:"GROUP",expr:o[s-1]};break;case 13:this.$={type:"VAR"};break;case 14:this.$={type:"NUM",val:Number(t)}}},table:[{3:1,4:2,17:[1,3],19:[1,4],20:[1,5]},{1:[3]},{5:[1,6],6:[1,7],8:[1,8],9:[1,9],10:[1,10],11:[1,11],12:[1,12],13:[1,13],14:[1,14],15:[1,15],16:[1,16]},{4:17,17:[1,3],19:[1,4],20:[1,5]},{5:[2,13],6:[2,13],7:[2,13],8:[2,13],9:[2,13],10:[2,13],11:[2,13],12:[2,13],13:[2,13],14:[2,13],15:[2,13],16:[2,13],18:[2,13]},{5:[2,14],6:[2,14],7:[2,14],8:[2,14],9:[2,14],10:[2,14],11:[2,14],12:[2,14],13:[2,14],14:[2,14],15:[2,14],16:[2,14],18:[2,14]},{1:[2,1]},{4:18,17:[1,3],19:[1,4],20:[1,5]},{4:19,17:[1,3],19:[1,4],20:[1,5]},{4:20,17:[1,3],19:[1,4],20:[1,5]},{4:21,17:[1,3],19:[1,4],20:[1,5]},{4:22,17:[1,3],19:[1,4],20:[1,5]},{4:23,17:[1,3],19:[1,4],20:[1,5]},{4:24,17:[1,3],19:[1,4],20:[1,5]},{4:25,17:[1,3],19:[1,4],20:[1,5]},{4:26,17:[1,3],19:[1,4],20:[1,5]},{4:27,17:[1,3],19:[1,4],20:[1,5]},{6:[1,7],8:[1,8],9:[1,9],10:[1,10],11:[1,11],12:[1,12],13:[1,13],14:[1,14],15:[1,15],16:[1,16],18:[1,28]},{6:[1,7],7:[1,29],8:[1,8],9:[1,9],10:[1,10],11:[1,11],12:[1,12],13:[1,13],14:[1,14],15:[1,15],16:[1,16]},{5:[2,3],6:[2,3],7:[2,3],8:[2,3],9:[1,9],10:[1,10],11:[1,11],12:[1,12],13:[1,13],14:[1,14],15:[1,15],16:[1,16],18:[2,3]},{5:[2,4],6:[2,4],7:[2,4],8:[2,4],9:[2,4],10:[1,10],11:[1,11],12:[1,12],13:[1,13],14:[1,14],15:[1,15],16:[1,16],18:[2,4]},{5:[2,5],6:[2,5],7:[2,5],8:[2,5],9:[2,5],10:[2,5],11:[2,5],12:[2,5],13:[2,5],14:[2,5],15:[2,5],16:[1,16],18:[2,5]},{5:[2,6],6:[2,6],7:[2,6],8:[2,6],9:[2,6],10:[2,6],11:[2,6],12:[2,6],13:[2,6],14:[2,6],15:[2,6],16:[1,16],18:[2,6]},{5:[2,7],6:[2,7],7:[2,7],8:[2,7],9:[2,7],10:[2,7],11:[2,7],12:[2,7],13:[2,7],14:[2,7],15:[2,7],16:[1,16],18:[2,7]},{5:[2,8],6:[2,8],7:[2,8],8:[2,8],9:[2,8],10:[2,8],11:[2,8],12:[2,8],13:[2,8],14:[2,8],15:[2,8],16:[1,16],18:[2,8]},{5:[2,9],6:[2,9],7:[2,9],8:[2,9],9:[2,9],10:[2,9],11:[2,9],12:[2,9],13:[2,9],14:[2,9],15:[2,9],16:[1,16],18:[2,9]},{5:[2,10],6:[2,10],7:[2,10],8:[2,10],9:[2,10],10:[2,10],11:[2,10],12:[2,10],13:[2,10],14:[2,10],15:[2,10],16:[1,16],18:[2,10]},{5:[2,11],6:[2,11],7:[2,11],8:[2,11],9:[2,11],10:[2,11],11:[2,11],12:[2,11],13:[2,11],14:[2,11],15:[2,11],16:[2,11],18:[2,11]},{5:[2,12],6:[2,12],7:[2,12],8:[2,12],9:[2,12],10:[2,12],11:[2,12],12:[2,12],13:[2,12],14:[2,12],15:[2,12],16:[2,12],18:[2,12]},{4:30,17:[1,3],19:[1,4],20:[1,5]},{5:[2,2],6:[1,7],7:[2,2],8:[1,8],9:[1,9],10:[1,10],11:[1,11],12:[1,12],13:[1,13],14:[1,14],15:[1,15],16:[1,16],18:[2,2]}],defaultActions:{6:[2,1]},parseError:function(t){throw new Error(t)},parse:function(t){function e(t){i.length=i.length-2*t,o.length=o.length-t,s.length=s.length-t}function n(){var t;return t=r.lexer.lex()||1,"number"!=typeof t&&(t=r.symbols_[t]||t),t}var r=this,i=[0],o=[null],s=[],a=this.table,l="",u=0,c=0,d=0,p=2,h=1;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var f=this.lexer.yylloc;s.push(f),"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var g,m,v,y,b,_,w,x,k,C={};;){if(v=i[i.length-1],this.defaultActions[v]?y=this.defaultActions[v]:(null==g&&(g=n()),y=a[v]&&a[v][g]),"undefined"==typeof y||!y.length||!y[0]){if(!d){k=[];for(_ in a[v])this.terminals_[_]&&_>2&&k.push("'"+this.terminals_[_]+"'");var j="";j=this.lexer.showPosition?"Parse error on line "+(u+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+k.join(", ")+", got '"+this.terminals_[g]+"'":"Parse error on line "+(u+1)+": Unexpected "+(1==g?"end of input":"'"+(this.terminals_[g]||g)+"'"),this.parseError(j,{text:this.lexer.match,token:this.terminals_[g]||g,line:this.lexer.yylineno,loc:f,expected:k})}if(3==d){if(g==h)throw new Error(j||"Parsing halted.");c=this.lexer.yyleng,l=this.lexer.yytext,u=this.lexer.yylineno,f=this.lexer.yylloc,g=n()}for(;;){if(p.toString()in a[v])break;if(0==v)throw new Error(j||"Parsing halted.");e(1),v=i[i.length-1]}m=g,g=p,v=i[i.length-1],y=a[v]&&a[v][p],d=3}if(y[0]instanceof Array&&y.length>1)throw new Error("Parse Error: multiple actions possible at state: "+v+", token: "+g);switch(y[0]){case 1:i.push(g),o.push(this.lexer.yytext),s.push(this.lexer.yylloc),i.push(y[1]),g=null,m?(g=m,m=null):(c=this.lexer.yyleng,l=this.lexer.yytext,u=this.lexer.yylineno,f=this.lexer.yylloc,d>0&&d--);break;case 2:if(w=this.productions_[y[1]][1],C.$=o[o.length-w],C._$={first_line:s[s.length-(w||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(w||1)].first_column,last_column:s[s.length-1].last_column},b=this.performAction.call(C,l,c,u,this.yy,y[1],o,s),"undefined"!=typeof b)return b;w&&(i=i.slice(0,-1*w*2),o=o.slice(0,-1*w),s=s.slice(0,-1*w)),i.push(this.productions_[y[1]][0]),o.push(C.$),s.push(C._$),x=a[i[i.length-2]][i[i.length-1]],i.push(x);break;case 3:return!0}}return!0}},e=function(){var t={EOF:1,parseError:function(t,e){if(!this.yy.parseError)throw new Error(t);this.yy.parseError(t,e)},setInput:function(t){return this._input=t,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this},input:function(){var t=this._input[0];this.yytext+=t,this.yyleng++,this.match+=t,this.matched+=t;var e=t.match(/\n/);return e&&this.yylineno++,this._input=this._input.slice(1),t},unput:function(t){return this._input=t+this._input,this},more:function(){return this._more=!0,this},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var t,e,n;this._more||(this.yytext="",this.match="");for(var r=this._currentRules(),i=0;i<r.length;i++)if(e=this._input.match(this.rules[r[i]]))return n=e[0].match(/\n.*/g),n&&(this.yylineno+=n.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:n?n[n.length-1].length-1:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this._more=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],t=this.performAction.call(this,this.yy,this,r[i],this.conditionStack[this.conditionStack.length-1]),t?t:void 0;return""===this._input?this.EOF:void this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return"undefined"!=typeof t?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)}};return t.performAction=function(t,e,n,r){switch(n){case 0:break;case 1:return 20;case 2:return 19;case 3:return 8;case 4:return 9;case 5:return 6;case 6:return 7;case 7:return 11;case 8:return 13;case 9:return 10;case 10:return 12;case 11:return 14;case 12:return 15;case 13:return 16;case 14:return 17;case 15:return 18;case 16:return 5;case 17:return"INVALID"}},t.rules=[/^\s+/,/^[0-9]+(\.[0-9]+)?\b/,/^n\b/,/^\|\|/,/^&&/,/^\?/,/^:/,/^<=/,/^>=/,/^</,/^>/,/^!=/,/^==/,/^%/,/^\(/,/^\)/,/^$/,/^./],t.conditions={INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17],inclusive:!0}},t}();return t.lexer=e,t}(),"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=d),exports.Jed=d):("function"==typeof define&&define.amd&&define("jed",[],function(){return d}),t.Jed=d)}(this),function(){define("utils/i18n",["require","jed"],function(t){var e;return new(e=t("jed"))({locale_data:{messages:{"":{domain:"messages",lang:"en"}}}})})}.call(this),function(){define("j",["require"],function(){return{load:function(t,e,n){return e(["templates/"+t],function(t){return n(t)})}}})}.call(this),define("jade/runtime",[],function(){var t=function(t){function e(t){return null!=t}return Array.isArray||(Array.isArray=function(t){return"[object Array]"==Object.prototype.toString.call(t)}),Object.keys||(Object.keys=function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e}),t.merge=function(t,n){var r=t["class"],i=n["class"];(r||i)&&(r=r||[],i=i||[],Array.isArray(r)||(r=[r]),Array.isArray(i)||(i=[i]),r=r.filter(e),i=i.filter(e),t["class"]=r.concat(i).join(" "));for(var o in n)"class"!=o&&(t[o]=n[o]);return t},t.attrs=function(e,n){var r=[],i=e.terse;delete e.terse;var o=Object.keys(e),s=o.length;if(s){r.push("");for(var a=0;s>a;++a){var l=o[a],u=e[l];"boolean"==typeof u||null==u?u&&r.push(i?l:l+'="'+l+'"'):r.push(0==l.indexOf("data")&&"string"!=typeof u?l+"='"+JSON.stringify(u)+"'":"class"==l&&Array.isArray(u)?l+'="'+t.escape(u.join(" "))+'"':n&&n[l]?l+'="'+t.escape(u)+'"':l+'="'+u+'"')}}return r.join(" ")},t.escape=function(t){return String(t).replace(/&(?!(\w+|\#\d+);)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},t.rethrow=function(t,e,n){if(!e)throw t;var r=3,i=require("fs").readFileSync(e,"utf8"),o=i.split("\n"),s=Math.max(n-r,0),a=Math.min(o.length,n+r),r=o.slice(s,a).map(function(t,e){var r=e+s+1;return(r==n?"  > ":"    ")+r+"| "+t}).join("\n");throw t.path=e,t.message=(e||"Jade")+":"+n+"\n"+r+"\n\n"+t.message,t},t}({});return t}),define("templates/application/logo",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push("<svg"),buf.push(attrs({style:style,width:300,height:300,viewBox:"-200 -200 400 400",xmlns:"http://www.w3.org/2000/svg","class":"logo "+classes},{"class":!0,style:!0,width:!0,height:!0,viewBox:!0,xmlns:!0})),buf.push('><g display="inline" class="ring ring-odd ring-3">\n <title>ring-3</title>\n <path id="svg_6" d="m-159.0006,47.62601c-0.5723,-1.87601 -1.1114,-3.76001 -1.61731,-5.67001c-0.0265,-0.11899 -0.05989,-0.23299 -0.0865,-0.35199c-0.46581,-1.76401 -0.89828,-3.528 -1.3042,-5.311c-0.08,-0.366 -0.1532,-0.726 -0.2397,-1.08501c-0.3394,-1.53099 -0.6588,-3.06799 -0.95169,-4.612c-0.1331,-0.67899 -0.24611,-1.37099 -0.3727,-2.04999c-0.2128,-1.244 -0.4259,-2.46901 -0.6255,-3.70601c-0.1597,-1.052 -0.2995,-2.11699 -0.43932,-3.181c-0.97159,-7.228 -1.49728,-14.56799 -1.49069,-22.022l-33.8606,0c-0.01318,8.11301 0.49918,16.132 1.45073,24.03801l0,0c0.0201,0.166 0.04665,0.339 0.07326,0.51199c0.26628,2.15001 0.55896,4.3 0.89851,6.436c0.09302,0.592 0.19963,1.17799 0.29268,1.763c0.28615,1.757 0.59242,3.50099 0.93176,5.245c0.17303,0.931 0.37941,1.85001 0.56561,2.76801c0.28616,1.39099 0.57906,2.77499 0.8985,4.153c0.27951,1.211 0.57904,2.416 0.88512,3.62c0.27292,1.07201 0.53897,2.15601 0.82515,3.228c0.38612,1.42401 0.79208,2.83501 1.20456,4.246c0.17303,0.599 0.32616,1.198 0.50591,1.77701l0.01991,0c2.3425,7.73898 5.1111,15.28601 8.3253,22.60001l31.0392,-13.64902c-2.6821,-6.06299 -4.9848,-12.32599 -6.92799,-18.74799l0,0z" class="dark" fill="#F38B00"/>\n <path class="dark" id="svg_7" d="m-0.332,165.44699c-45.70599,0 -87.141,-18.61398 -117.1613,-48.642l-23.9912,23.992c36.13,36.13 86.02249,58.504 141.1525,58.504c101.815,0 185.815,-76.21298 198.10001,-174.70099l-34.18701,0c-12.07199,79.62698 -80.978,140.84698 -163.91299,140.84698z" fill="#F38B00"/>\n <path class="dark" id="svg_8" d="m-0.332,-166.146c37.13499,0 71.44199,12.27849 99.11301,32.9823l20.29199,-27.1924c-33.302,-24.89641 -74.623,-39.64391 -119.39799,-39.64391c-84.718,0 -157.1051,52.77429 -186.09419,127.237l31.5981,12.29201c24.10429,-61.7785 84.25909,-105.675 154.48909,-105.675z" fill="#F38B00"/>\n <path id="svg_9" d="m163.57501,-25.299l34.18597,0c-3.66699,-29.382 -13.71597,-56.78101 -28.70898,-80.7655l-28.78299,17.9615c11.746,18.761 19.858,40.024 23.306,62.804z" fill="#FFFFFF"/>\n</g>\n<g display="inline" class="ring ring-even ring-2">\n <title>ring-2</title>\n <path class="dark" id="svg_10" d="m125.06866,-25.29926l34.29993,0c-8.95764,-57.50595 -48.33536,-105.05605 -101.10297,-125.65996l-12.25186,31.49818c40.14304,15.66591 70.4899,51.02397 79.0549,94.16177z" fill="#F38B00"/>\n <path id="svg_13" d="m-0.33176,127.50653l0,33.77417c80.63214,0 147.66809,-59.35608 159.707,-136.67401l-34.29993,0c-11.64627,58.60403 -63.44888,102.89984 -125.40707,102.89984z" fill="#FFFFFF"/>\n <path id="svg_12" d="m-128.19452,-0.34961l0,0l-33.77434,0l0,0c0,67.92108 42.12637,126.15909 101.60889,150.03726l12.53804,-31.34509c-47.05094,-18.89362 -80.37259,-64.95958 -80.37259,-118.69217z" fill="#FFFFFF"/>\n <path id="svg_11" d="m-0.33176,-128.20572l0,0l0,-33.7742c0,0 0,0 0,0c-68.46011,0 -127.10408,42.79174 -150.62285,103.02628l31.4715,12.24522c18.60076,-47.65655 64.99286,-81.4973 119.15135,-81.4973z" fill="#FFFFFF"/>\n</g>\n<g display="inline" class="ring ring-odd ring-1">\n <title>ring-1</title>\n <path id="svg_1" d="m-0.33176,89.57959c-49.5865,0 -89.92253,-40.3427 -89.92253,-89.9292c0,-49.5865 40.34268,-89.92253 89.92253,-89.92253c40.92169,0 75.52774,27.4852 86.37543,64.96623l34.79904,0c-11.56641,-56.2881 -61.50562,-98.74708 -121.1678,-98.74708c-68.20724,0 -123.69674,55.48949 -123.69674,123.69672s55.48949,123.7034 123.69674,123.7034c59.66219,0 109.60139,-42.45898 121.1678,-98.7471l-34.79904,0c-10.85434,37.4877 -45.45374,64.97955 -86.37543,64.97955z" fill="#FFFFFF"/>\n</g>\n<g display="inline" class="ring ring-even ring-0">\n <title>ring-0</title>\n <path id="svg_2" d="m-60.952,60.26401c15.526,15.53299 36.968,25.14999 60.614,25.14999l0,-35.858c-13.783,0 -26.261,-5.59 -35.299,-14.614l-25.315,25.32201z" fill="#FFFFFF"/>\n <path id="svg_3" d="m-86.102,-0.35001c0,12.27901 2.616,23.95201 7.27399,34.52l32.80301,-14.42799c-2.709,-6.14301 -4.21901,-12.931 -4.21901,-20.09201c0,-27.56499 22.341,-49.91199 49.912,-49.91199l0,-35.85101c-47.28999,0 -85.77,38.473 -85.77,85.76299z" class="dark" fill="#F38B00"/>\n <path id="svg_4" d="m30.75999,-80.27l-13.00299,33.42199c10.621,4.13901 19.47899,11.78601 25.12199,21.54201l38.832,0c-7.66599,-25.16901 -26.62599,-45.467 -50.951,-54.964z" fill="#FFFFFF"/>\n <path id="svg_5" d="m17.763,46.149l13.004,33.42101c24.311,-9.496 43.27802,-29.79401 50.944,-54.97l-38.832,0c-5.64301,9.763 -14.50099,17.40999 -25.116,21.549z" class="dark" fill="#F38B00"/>\n</g></svg>')
}return buf.join("")}}),function(){define("utils/logo",["j!application/logo","underscore"],function(t,e){return function(n,r,i){var o;return i||(i=r,r=null),n||(n=55),r||(r=1.149606299*n),i||(i="logo-gray logo-animate"),e.isArray(i)&&(i=i.join(" ")),o="width: "+n+"px; height: "+r+"px;",t({style:o,classes:i})}})}.call(this),function(t){function e(t,e){return function(n){return l(t.call(this,n),e)}}function n(t,e){return function(n){return this.lang().ordinal(t.call(this,n),e)}}function r(){}function i(t){s(this,t)}function o(t){var e=t.years||t.year||t.y||0,n=t.months||t.month||t.M||0,r=t.weeks||t.week||t.w||0,i=t.days||t.day||t.d||0,o=t.hours||t.hour||t.h||0,s=t.minutes||t.minute||t.m||0,a=t.seconds||t.second||t.s||0,l=t.milliseconds||t.millisecond||t.ms||0;this._input=t,this._milliseconds=l+1e3*a+6e4*s+36e5*o,this._days=i+7*r,this._months=n+12*e,this._data={},this._bubble()}function s(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function a(t){return 0>t?Math.ceil(t):Math.floor(t)}function l(t,e){for(var n=t+"";n.length<e;)n="0"+n;return n}function u(t,e,n,r){var i,o,s=e._milliseconds,a=e._days,l=e._months;s&&t._d.setTime(+t._d+s*n),(a||l)&&(i=t.minute(),o=t.hour()),a&&t.date(t.date()+a*n),l&&t.month(t.month()+l*n),s&&!r&&L.updateOffset(t),(a||l)&&(t.minute(i),t.hour(o))}function c(t){return"[object Array]"===Object.prototype.toString.call(t)}function d(t,e){var n,r=Math.min(t.length,e.length),i=Math.abs(t.length-e.length),o=0;for(n=0;r>n;n++)~~t[n]!==~~e[n]&&o++;return o+i}function p(t){return t?ie[t]||t.toLowerCase().replace(/(.)s$/,"$1"):t}function h(t,e){return e.abbr=t,I[t]||(I[t]=new r),I[t].set(e),I[t]}function f(t){if(!t)return L.fn._lang;if(!I[t]&&R)try{require("./lang/"+t)}catch(e){return L.fn._lang}return I[t]}function g(t){return t.match(/\[.*\]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function m(t){var e,n,r=t.match(q);for(e=0,n=r.length;n>e;e++)r[e]=le[r[e]]?le[r[e]]:g(r[e]);return function(i){var o="";for(e=0;n>e;e++)o+=r[e]instanceof Function?r[e].call(i,t):r[e];return o}}function v(t,e){function n(e){return t.lang().longDateFormat(e)||e}for(var r=5;r--&&H.test(e);)e=e.replace(H,n);return oe[e]||(oe[e]=m(e)),oe[e](t)}function y(t,e){switch(t){case"DDDD":return B;case"YYYY":return Y;case"YYYYY":return U;case"S":case"SS":case"SSS":case"DDD":return V;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Q;case"a":case"A":return f(e._l)._meridiemParse;case"X":return Z;case"Z":case"ZZ":return G;case"T":return X;case"MM":case"DD":case"YY":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":return W;default:return new RegExp(t.replace("\\",""))}}function b(t){var e=(G.exec(t)||[])[0],n=(e+"").match(ee)||["-",0,0],r=+(60*n[1])+~~n[2];return"+"===n[0]?-r:r}function _(t,e,n){var r,i=n._a;switch(t){case"M":case"MM":i[1]=null==e?0:~~e-1;break;case"MMM":case"MMMM":r=f(n._l).monthsParse(e),null!=r?i[1]=r:n._isValid=!1;break;case"D":case"DD":case"DDD":case"DDDD":null!=e&&(i[2]=~~e);break;case"YY":i[0]=~~e+(~~e>68?1900:2e3);break;case"YYYY":case"YYYYY":i[0]=~~e;break;case"a":case"A":n._isPm=f(n._l).isPM(e);break;case"H":case"HH":case"h":case"hh":i[3]=~~e;break;case"m":case"mm":i[4]=~~e;break;case"s":case"ss":i[5]=~~e;break;case"S":case"SS":case"SSS":i[6]=~~(1e3*("0."+e));break;case"X":n._d=new Date(1e3*parseFloat(e));break;case"Z":case"ZZ":n._useUTC=!0,n._tzm=b(e)}null==e&&(n._isValid=!1)}function w(t){var e,n,r=[];if(!t._d){for(e=0;7>e;e++)t._a[e]=r[e]=null==t._a[e]?2===e?1:0:t._a[e];r[3]+=~~((t._tzm||0)/60),r[4]+=~~((t._tzm||0)%60),n=new Date(0),t._useUTC?(n.setUTCFullYear(r[0],r[1],r[2]),n.setUTCHours(r[3],r[4],r[5],r[6])):(n.setFullYear(r[0],r[1],r[2]),n.setHours(r[3],r[4],r[5],r[6])),t._d=n}}function x(t){var e,n,r=t._f.match(q),i=t._i;for(t._a=[],e=0;e<r.length;e++)n=(y(r[e],t).exec(i)||[])[0],n&&(i=i.slice(i.indexOf(n)+n.length)),le[r[e]]&&_(r[e],n,t);i&&(t._il=i),t._isPm&&t._a[3]<12&&(t._a[3]+=12),t._isPm===!1&&12===t._a[3]&&(t._a[3]=0),w(t)}function k(t){var e,n,r,o,a,l=99;for(o=0;o<t._f.length;o++)e=s({},t),e._f=t._f[o],x(e),n=new i(e),a=d(e._a,n.toArray()),n._il&&(a+=n._il.length),l>a&&(l=a,r=n);s(t,r)}function C(t){var e,n=t._i,r=J.exec(n);if(r){for(t._f="YYYY-MM-DD"+(r[2]||" "),e=0;4>e;e++)if(te[e][1].exec(n)){t._f+=te[e][0];break}G.exec(n)&&(t._f+=" Z"),x(t)}else t._d=new Date(n)}function j(e){var n=e._i,r=$.exec(n);n===t?e._d=new Date:r?e._d=new Date(+r[1]):"string"==typeof n?C(e):c(n)?(e._a=n.slice(0),w(e)):e._d=new Date(n instanceof Date?+n:n)}function M(t,e,n,r,i){return i.relativeTime(e||1,!!n,t,r)}function S(t,e,n){var r=O(Math.abs(t)/1e3),i=O(r/60),o=O(i/60),s=O(o/24),a=O(s/365),l=45>r&&["s",r]||1===i&&["m"]||45>i&&["mm",i]||1===o&&["h"]||22>o&&["hh",o]||1===s&&["d"]||25>=s&&["dd",s]||45>=s&&["M"]||345>s&&["MM",O(s/30)]||1===a&&["y"]||["yy",a];return l[2]=e,l[3]=t>0,l[4]=n,M.apply({},l)}function D(t,e,n){var r,i=n-e,o=n-t.day();return o>i&&(o-=7),i-7>o&&(o+=7),r=L(t).add("d",o),{week:Math.ceil(r.dayOfYear()/7),year:r.year()}}function z(t){var e=t._i,n=t._f;return null===e||""===e?null:("string"==typeof e&&(t._i=e=f().preparse(e)),L.isMoment(e)?(t=s({},e),t._d=new Date(+e._d)):n?c(n)?k(t):x(t):j(t),new i(t))}function N(t,e){L.fn[t]=L.fn[t+"s"]=function(t){var n=this._isUTC?"UTC":"";return null!=t?(this._d["set"+n+e](t),L.updateOffset(this),this):this._d["get"+n+e]()}}function T(t){L.duration.fn[t]=function(){return this._data[t]}}function P(t,e){L.duration.fn["as"+t]=function(){return+this/e}}for(var L,E,A="2.1.0",O=Math.round,I={},R="undefined"!=typeof module&&module.exports,$=/^\/?Date\((\-?\d+)/i,F=/(\-)?(\d*)?\.?(\d+)\:(\d+)\:(\d+)\.?(\d{3})?/,q=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|SS?S?|X|zz?|ZZ?|.)/g,H=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,W=/\d\d?/,V=/\d{1,3}/,B=/\d{3}/,Y=/\d{1,4}/,U=/[+\-]?\d{1,6}/,Q=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,G=/Z|[\+\-]\d\d:?\d\d/i,X=/T/i,Z=/[\+\-]?\d+(\.\d{1,3})?/,J=/^\s*\d{4}-\d\d-\d\d((T| )(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,K="YYYY-MM-DDTHH:mm:ssZ",te=[["HH:mm:ss.S",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],ee=/([\+\-]|\d\d)/gi,ne="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),re={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},ie={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",w:"week",M:"month",y:"year"},oe={},se="DDD w W M D d".split(" "),ae="M D H h m s w W".split(" "),le={M:function(){return this.month()+1},MMM:function(t){return this.lang().monthsShort(this,t)},MMMM:function(t){return this.lang().months(this,t)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(t){return this.lang().weekdaysMin(this,t)},ddd:function(t){return this.lang().weekdaysShort(this,t)},dddd:function(t){return this.lang().weekdays(this,t)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return l(this.year()%100,2)},YYYY:function(){return l(this.year(),4)},YYYYY:function(){return l(this.year(),5)},gg:function(){return l(this.weekYear()%100,2)},gggg:function(){return this.weekYear()},ggggg:function(){return l(this.weekYear(),5)},GG:function(){return l(this.isoWeekYear()%100,2)},GGGG:function(){return this.isoWeekYear()},GGGGG:function(){return l(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return~~(this.milliseconds()/100)},SS:function(){return l(~~(this.milliseconds()/10),2)},SSS:function(){return l(this.milliseconds(),3)},Z:function(){var t=-this.zone(),e="+";return 0>t&&(t=-t,e="-"),e+l(~~(t/60),2)+":"+l(~~t%60,2)},ZZ:function(){var t=-this.zone(),e="+";return 0>t&&(t=-t,e="-"),e+l(~~(10*t/6),4)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()}};se.length;)E=se.pop(),le[E+"o"]=n(le[E],E);for(;ae.length;)E=ae.pop(),le[E+E]=e(le[E],2);for(le.DDDD=e(le.DDD,3),r.prototype={set:function(t){var e,n;for(n in t)e=t[n],"function"==typeof e?this[n]=e:this["_"+n]=e},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(t){return this._months[t.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(t){return this._monthsShort[t.month()]},monthsParse:function(t){var e,n,r;for(this._monthsParse||(this._monthsParse=[]),e=0;12>e;e++)if(this._monthsParse[e]||(n=L([2e3,e]),r="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[e]=new RegExp(r.replace(".",""),"i")),this._monthsParse[e].test(t))return e},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(t){return this._weekdays[t.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(t){return this._weekdaysShort[t.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(t){return this._weekdaysMin[t.day()]},weekdaysParse:function(t){var e,n,r;for(this._weekdaysParse||(this._weekdaysParse=[]),e=0;7>e;e++)if(this._weekdaysParse[e]||(n=L([2e3,1]).day(e),r="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[e]=new RegExp(r.replace(".",""),"i")),this._weekdaysParse[e].test(t))return e},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(t){var e=this._longDateFormat[t];return!e&&this._longDateFormat[t.toUpperCase()]&&(e=this._longDateFormat[t.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t]=e),e},isPM:function(t){return"p"===(t+"").toLowerCase()[0]},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(t,e){var n=this._calendar[t];return"function"==typeof n?n.apply(e):n},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(t,e,n,r){var i=this._relativeTime[n];return"function"==typeof i?i(t,e,n,r):i.replace(/%d/i,t)},pastFuture:function(t,e){var n=this._relativeTime[t>0?"future":"past"];return"function"==typeof n?n(e):n.replace(/%s/i,e)},ordinal:function(t){return this._ordinal.replace("%d",t)},_ordinal:"%d",preparse:function(t){return t},postformat:function(t){return t},week:function(t){return D(t,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6}},L=function(t,e,n){return z({_i:t,_f:e,_l:n,_isUTC:!1})},L.utc=function(t,e,n){return z({_useUTC:!0,_isUTC:!0,_l:n,_i:t,_f:e})},L.unix=function(t){return L(1e3*t)},L.duration=function(t,e){var n,r,i=L.isDuration(t),s="number"==typeof t,a=i?t._input:s?{}:t,l=F.exec(t);return s?e?a[e]=t:a.milliseconds=t:l&&(n="-"===l[1]?-1:1,a={y:0,d:~~l[2]*n,h:~~l[3]*n,m:~~l[4]*n,s:~~l[5]*n,ms:~~l[6]*n}),r=new o(a),i&&t.hasOwnProperty("_lang")&&(r._lang=t._lang),r},L.version=A,L.defaultFormat=K,L.updateOffset=function(){},L.lang=function(t,e){return t?(e?h(t,e):I[t]||f(t),void(L.duration.fn._lang=L.fn._lang=f(t))):L.fn._lang._abbr},L.langData=function(t){return t&&t._lang&&t._lang._abbr&&(t=t._lang._abbr),f(t)},L.isMoment=function(t){return t instanceof i},L.isDuration=function(t){return t instanceof o},L.fn=i.prototype={clone:function(){return L(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){return v(L(this).utc(),"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var t=this;return[t.year(),t.month(),t.date(),t.hours(),t.minutes(),t.seconds(),t.milliseconds()]},isValid:function(){return null==this._isValid&&(this._isValid=this._a?!d(this._a,(this._isUTC?L.utc(this._a):L(this._a)).toArray()):!isNaN(this._d.getTime())),!!this._isValid},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(t){var e=v(this,t||L.defaultFormat);return this.lang().postformat(e)},add:function(t,e){var n;return n="string"==typeof t?L.duration(+e,t):L.duration(t,e),u(this,n,1),this},subtract:function(t,e){var n;return n="string"==typeof t?L.duration(+e,t):L.duration(t,e),u(this,n,-1),this},diff:function(t,e,n){var r,i,o=this._isUTC?L(t).zone(this._offset||0):L(t).local(),s=6e4*(this.zone()-o.zone());return e=p(e),"year"===e||"month"===e?(r=432e5*(this.daysInMonth()+o.daysInMonth()),i=12*(this.year()-o.year())+(this.month()-o.month()),i+=(this-L(this).startOf("month")-(o-L(o).startOf("month")))/r,i-=6e4*(this.zone()-L(this).startOf("month").zone()-(o.zone()-L(o).startOf("month").zone()))/r,"year"===e&&(i/=12)):(r=this-o,i="second"===e?r/1e3:"minute"===e?r/6e4:"hour"===e?r/36e5:"day"===e?(r-s)/864e5:"week"===e?(r-s)/6048e5:r),n?i:a(i)},from:function(t,e){return L.duration(this.diff(t)).lang(this.lang()._abbr).humanize(!e)},fromNow:function(t){return this.from(L(),t)},calendar:function(){var t=this.diff(L().startOf("day"),"days",!0),e=-6>t?"sameElse":-1>t?"lastWeek":0>t?"lastDay":1>t?"sameDay":2>t?"nextDay":7>t?"nextWeek":"sameElse";return this.format(this.lang().calendar(e,this))},isLeapYear:function(){var t=this.year();return t%4===0&&t%100!==0||t%400===0},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(t){var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?"string"==typeof t&&(t=this.lang().weekdaysParse(t),"number"!=typeof t)?this:this.add({d:t-e}):e},month:function(t){var e,n=this._isUTC?"UTC":"";return null!=t?"string"==typeof t&&(t=this.lang().monthsParse(t),"number"!=typeof t)?this:(e=this.date(),this.date(1),this._d["set"+n+"Month"](t),this.date(Math.min(e,this.daysInMonth())),L.updateOffset(this),this):this._d["get"+n+"Month"]()},startOf:function(t){switch(t=p(t)){case"year":this.month(0);case"month":this.date(1);case"week":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t&&this.weekday(0),this},endOf:function(t){return this.startOf(t).add(t,1).subtract("ms",1)},isAfter:function(t,e){return e="undefined"!=typeof e?e:"millisecond",+this.clone().startOf(e)>+L(t).startOf(e)},isBefore:function(t,e){return e="undefined"!=typeof e?e:"millisecond",+this.clone().startOf(e)<+L(t).startOf(e)},isSame:function(t,e){return e="undefined"!=typeof e?e:"millisecond",+this.clone().startOf(e)===+L(t).startOf(e)},min:function(t){return t=L.apply(null,arguments),this>t?this:t},max:function(t){return t=L.apply(null,arguments),t>this?this:t},zone:function(t){var e=this._offset||0;return null==t?this._isUTC?e:this._d.getTimezoneOffset():("string"==typeof t&&(t=b(t)),Math.abs(t)<16&&(t=60*t),this._offset=t,this._isUTC=!0,e!==t&&u(this,L.duration(e-t,"m"),1,!0),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},daysInMonth:function(){return L.utc([this.year(),this.month()+1,0]).date()},dayOfYear:function(t){var e=O((L(this).startOf("day")-L(this).startOf("year"))/864e5)+1;return null==t?e:this.add("d",t-e)},weekYear:function(t){var e=D(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==t?e:this.add("y",t-e)},isoWeekYear:function(t){var e=D(this,1,4).year;return null==t?e:this.add("y",t-e)},week:function(t){var e=this.lang().week(this);return null==t?e:this.add("d",7*(t-e))},isoWeek:function(t){var e=D(this,1,4).week;return null==t?e:this.add("d",7*(t-e))},weekday:function(t){var e=(this._d.getDay()+7-this.lang()._week.dow)%7;return null==t?e:this.add("d",t-e)},isoWeekday:function(t){return null==t?this.day()||7:this.day(this.day()%7?t:t-7)},lang:function(e){return e===t?this._lang:(this._lang=f(e),this)}},E=0;E<ne.length;E++)N(ne[E].toLowerCase().replace(/s$/,""),ne[E]);N("year","FullYear"),L.fn.days=L.fn.day,L.fn.months=L.fn.month,L.fn.weeks=L.fn.week,L.fn.isoWeeks=L.fn.isoWeek,L.fn.toJSON=L.fn.toISOString,L.duration.fn=o.prototype={_bubble:function(){var t,e,n,r,i=this._milliseconds,o=this._days,s=this._months,l=this._data;l.milliseconds=i%1e3,t=a(i/1e3),l.seconds=t%60,e=a(t/60),l.minutes=e%60,n=a(e/60),l.hours=n%24,o+=a(n/24),l.days=o%30,s+=a(o/30),l.months=s%12,r=a(s/12),l.years=r},weeks:function(){return a(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*~~(this._months/12)},humanize:function(t){var e=+this,n=S(e,!t,this.lang());return t&&(n=this.lang().pastFuture(e,n)),this.lang().postformat(n)},add:function(t,e){var n=L.duration(t,e);return this._milliseconds+=n._milliseconds,this._days+=n._days,this._months+=n._months,this._bubble(),this},subtract:function(t,e){var n=L.duration(t,e);return this._milliseconds-=n._milliseconds,this._days-=n._days,this._months-=n._months,this._bubble(),this},get:function(t){return t=p(t),this[t.toLowerCase()+"s"]()},as:function(t){return t=p(t),this["as"+t.charAt(0).toUpperCase()+t.slice(1)+"s"]()},lang:L.fn.lang};for(E in re)re.hasOwnProperty(E)&&(P(E,re[E]),T(E.toLowerCase()));P("Weeks",6048e5),L.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},L.lang("en",{ordinal:function(t){var e=t%10,n=1===~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th";return t+n}}),R&&(module.exports=L),"undefined"==typeof ender&&(this.moment=L),"function"==typeof define&&define.amd&&define("moment",[],function(){return L})}.call(this),function(){define("backbone_config/layout_manager",["require","backbone.layoutmanager","utils/i18n","utils/logo","moment"],function(t){var e,n,r,i;return e=t("backbone.layoutmanager"),n=t("utils/i18n"),r=t("utils/logo"),i=t("moment"),e.configure({fetch:function(t){return t},render:function(t,e){return null==e&&(e={}),e.i18n=n,e.moment=i,e.logo=r,t(e)}})})}.call(this),function(t){Backbone.Stickit={_handlers:[],addHandler:function(t){t=_.map(_.flatten([t]),function(t){return _.extend({updateModel:!0,updateView:!0,updateMethod:"text"},t)}),this._handlers=this._handlers.concat(t)}},_.extend(Backbone.View.prototype,{_modelBindings:null,unstickit:function(t){_.each(this._modelBindings,_.bind(function(e,n){return t&&e.model!==t?!1:(e.model.off(e.event,e.fn),void delete this._modelBindings[n])},this)),this._modelBindings=_.compact(this._modelBindings),this.$el.off(".stickit"+(t?"."+t.cid:""))},stickit:function(t,e){var r=this,p=t||this.model,h=".stickit."+p.cid,f=e||this.bindings||{};this._modelBindings||(this._modelBindings=[]),this.unstickit(p),_.each(_.keys(f),function(t){var e,g,m,v,y=f[t]||{},b=_.uniqueId();":el"!=t?e=r.$(t):(e=r.$el,t=""),e.length&&(_.isString(y)&&(y={observe:y}),v=l(e,y),m=v.observe,g=_.extend({bindKey:b},v.setOptions||{}),u(r,e,v,p,m),c(r,e,v,p,m),m&&(_.each(v.events||[],function(n){var o=n+h,a=function(t){var n=v.getVal.call(r,e,t,v);i(r,v.updateModel,n,v)&&s(p,m,n,g,r,v)};""===t?r.$el.on(o,a):r.$el.on(o,t,a)}),_.each(_.flatten([m]),function(t){o(p,r,"change:"+t,function(t,n,i){(null==i||i.bindKey!=b)&&d(r,e,v,a(t,m,v,r),t)})}),d(r,e,v,a(p,m,v,r),p,!0)),n(r,v.initialize,e,p,v))}),this.remove=_.wrap(this.remove,function(t){r.unstickit(),t&&t.call(r)})}});var e=function(t,e){var n=(e||"").split("."),r=_.reduce(n,function(t,e){return t[e]},t);return null==r?t:r},n=function(t,e){return e?(_.isString(e)?t[e]:e).apply(t,_.toArray(arguments).slice(2)):void 0},r=function(t){return t.find("option").not(function(){return!this.selected})},i=function(t,e){return _.isBoolean(e)?e:_.isFunction(e)||_.isString(e)?n.apply(this,_.toArray(arguments)):!1},o=function(t,e,n,r){t.on(n,r,e),e._modelBindings.push({model:t,event:n,fn:r})},s=function(t,e,r,i,o,s){s.onSet&&(r=n(o,s.onSet,r,s)),t.set(e,r,i)},a=function(t,e,r,i){var o,s=function(e){var n=r.escape?t.escape(e):t.get(e);return _.isUndefined(n)?"":n};return o=_.isArray(e)?_.map(e,s):s(e),r.onGet?n(i,r.onGet,o,r):o},l=function(t,e){var n=[{updateModel:!1,updateView:!0,updateMethod:"text",update:function(t,e,n,r){t[r.updateMethod](e)},getVal:function(t,e,n){return t[n.updateMethod]()}}];_.each(Backbone.Stickit._handlers,function(e){t.is(e.selector)&&n.push(e)}),n.push(e);var r=_.extend.apply(_,n);return delete r.selector,r},u=function(t,e,n,r,i){var s=["autofocus","autoplay","async","checked","controls","defer","disabled","hidden","loop","multiple","open","readonly","required","scoped","selected"];_.each(n.attributes||[],function(n){var l="",u=n.observe||(n.observe=i),c=function(){var i=_.indexOf(s,n.name,!0)>-1?"prop":"attr",o=a(r,u,n,t);"class"==n.name?(e.removeClass(l).addClass(o),l=o):e[i](n.name,o)};_.each(_.flatten([u]),function(e){o(r,t,"change:"+e,c)}),c()})},c=function(t,e,r,i,s){if(null!=r.visible){var l=function(){var o=r.visible,l=r.visibleFn,u=a(i,s,r,t),c=!!u;(_.isFunction(o)||_.isString(o))&&(c=n(t,o,u,r)),l?n(t,l,e,c,r):c?e.show():e.hide()};_.each(_.flatten([s]),function(e){o(i,t,"change:"+e,l)}),l()}},d=function(t,e,r,o,s,a){i(t,r.updateView,o,r)&&(r.update.call(t,e,o,s,r),a||n(t,r.afterUpdate,e,o,r))};Backbone.Stickit.addHandler([{selector:'[contenteditable="true"]',updateMethod:"html",events:["keyup","change","paste","cut"]},{selector:"input",events:["keyup","change","paste","cut"],update:function(t,e){t.val(e)},getVal:function(t){var e=t.val();return t.is('[type="number"]')?null==e?e:Number(e):e}},{selector:"textarea",events:["keyup","change","paste","cut"],update:function(t,e){t.val(e)},getVal:function(t){return t.val()}},{selector:'input[type="radio"]',events:["change"],update:function(t,e){t.filter('[value="'+e+'"]').prop("checked",!0)},getVal:function(t){return t.filter(":checked").val()}},{selector:'input[type="checkbox"]',events:["change"],update:function(e,n){e.length>1?(n||(n=[]),_.each(e,function(e){_.indexOf(n,t(e).val())>-1?t(e).prop("checked",!0):t(e).prop("checked",!1)})):_.isBoolean(n)?e.prop("checked",n):e.prop("checked",n==e.val())},getVal:function(e){var n;if(e.length>1)n=_.reduce(e,function(e,n){return t(n).prop("checked")&&e.push(t(n).val()),e},[]);else{n=e.prop("checked");var r=e.val();"on"!=r&&null!=r&&(n=n?e.val():null)}return n}},{selector:"select",events:["change"],update:function(r,i,o,s){var a,l=s.selectOptions,u=l&&l.collection||void 0,c=r.prop("multiple");if(!l){l={};var d=function(t){return t.find("option").map(function(){return{value:this.value,label:this.text}}).get()};r.find("optgroup").length?(u={opt_labels:[]},_.each(r.find("optgroup"),function(e){var n=t(e).attr("label");u.opt_labels.push(n),u[n]=d(t(e))})):u=d(r)}l.valuePath=l.valuePath||"value",l.labelPath=l.labelPath||"label";var p=function(n,r,i){l.defaultOption&&(n=_.clone(n),n.unshift("__default__")),_.each(n,function(n){var o=t("<option/>"),s=n,a=function(t,e){o.text(t),s=e,o.data("stickit_bind_val",s),_.isArray(s)||_.isObject(s)||o.val(s)};"__default__"===n?a(l.defaultOption.label,l.defaultOption.value):a(e(n,l.labelPath),e(n,l.valuePath)),!c&&null!=s&&null!=i&&s==i||_.isObject(i)&&_.isEqual(s,i)?o.prop("selected",!0):c&&_.isArray(i)&&_.each(i,function(t){_.isObject(t)&&(t=e(t,l.valuePath)),(t==s||_.isObject(t)&&_.isEqual(s,t))&&o.prop("selected",!0)}),r.append(o)})};r.html("");var h=function(t,n){var r=window;return 0===n.indexOf("this.")&&(r=t),n=n.replace(/^[a-z]*\.(.+)$/,"$1"),e(r,n)};a=_.isString(u)?h(this,u):_.isFunction(u)?n(this,u,r,s):u,a instanceof Backbone.Collection&&(a=a.toJSON()),_.isArray(a)?p(a,r,i):_.each(a.opt_labels,function(e){var n=t("<optgroup/>").attr("label",e);p(a[e],n,i),r.append(n)})},getVal:function(e){var n;return n=e.prop("multiple")?t(r(e).map(function(){return t(this).data("stickit_bind_val")})).get():r(e).data("stickit_bind_val")}}])}(window.jQuery||window.Zepto),define("backbone.stickit",["backbone","underscore","jquery"],function(t){return function(){var e;return e||t.Backbone.Stickit}}(this)),function(){define("backbone_config/stickit",["require","backbone.stickit"],function(t){var e;return e=t("backbone.stickit"),e.addHandler({selector:"*",initialize:function(t,e,n){return e.validation?(null==e.reverseBindings&&(e.reverseBindings={}),e.reverseBindings[n.observe]=t):void 0}}),e.addHandler({selector:"input,textarea,select:not(#signup-job-title)",updateView:function(){return null!=this.initializing?!this.initializing:!0}})})}.call(this),function(){var t=[].slice;define("utils/backbone_validation",["backbone","underscore","jquery"],function(e,n,r){var i,o,s,a,l,u,c,d,p,h,f,g,m,v,y;return u={formatLabel:function(t,e){return i.labelFormatters[i.options.labelFormatter](t,e)},format:function(){var e,n;return n=arguments[0],e=2<=arguments.length?t.call(arguments,1):[],n.replace(/\{(\d+)\}/g,function(t,n){var r;return null!=(r=e[n])?r:t})}},l=function(t,e,n){var r,i;e=e||{},n=n||"";for(r in t)i=t[r],t.hasOwnProperty(r)&&(i&&"object"==typeof i&&!(i instanceof Date||i instanceof RegExp)?l(i,e,n+r+"."):e[n+r]=i);return e},g=String.prototype.trim?function(t){return null===t?"":String.prototype.trim.call(t)}:function(t){return null===t?"":t.toString().replace(/^\s+|\s+$/g,"")},h=function(t){return n.isNumber(t)||n.isString(t)&&t.match(i.patterns.number)},p=function(t){return null!=t&&""!==g(t)},c=function(t){var e,n;e={};for(n in t.validation||{})e[n]=void 0;return e},d=function(t,e){var r,o,s,a,l,u,c,d;for(o=null!=(l=null!=(u=t.validation)?u[e]:void 0)?l:{},(n.isFunction(o)||n.isString(o))&&(o={fn:o}),n.isArray(o)||(o=[o]),d=[],s=0,a=o.length;a>s;s++){r=o[s];for(c in r)"msg"!==c&&d.push({fn:i.validators[c],val:r[c],msg:r.msg})}return d},v=function(t,e,o,s){var a,l,c,p,h,f,g;for(l=[],h=d(t,e),c=0,p=h.length;p>c;c++){if(g=h[c],a=n.extend({},u,i.validators),f=g.fn.call(a,o,e,g.val,t,s),f===!1)return r.when(!1);l.push(!f||n.isFunction(f.promise)?f:new r.Deferred(function(t){return t.reject(g.msg||f)}))}return r.when.apply(r,l)},y=function(t,e){var i,o,s,a,u;o={},a=l(e);for(i in a)u=a[i],o[i]=v(t,i,u,e);return s=r.when.apply(r,n.values(o)),s.attributes=o,s},f=function(t,e){return{preValidate:function(t,e){return v(this,t,e,n.extend({},this.attributes))},isValid:function(t){var e,i,o;return o=l(this.attributes),n.isString(t)?v(this,t,o[t],n.extend({},this.attributes)):n.isArray(t)?(i=function(){var r,i,s;for(s=[],r=0,i=t.length;i>r;r++)e=t[r],s.push(v(this,e,o[e],n.extend({},this.attributes)));return s}.call(this),r.when.apply(r,i)):(t===!0&&this.validate(),this.validation?this._isValid:!0)},validate:function(r,i){var o,s,a,u,d,p,h,f,g,m,v;if(null!=i?i.validate:void 0)throw"Do not use validate:true with .set()/.save()";p=this,m=!r,h=n.extend({},e,i),v=c(p),o=n.extend({},v,p.attributes,r),a=l(r||o),f=y(p,o),p._isValid=f,d=function(e){return u.done(function(){return h.valid.call(p,t,e,h.selector)}),m||a.hasOwnProperty(e)?u.fail(function(n){return h.invalid.call(p,t,e,n,h.selector)}):void 0};for(s in v)g=v[s],u=f.attributes[s],"pending"===u.state()&&h.validating.call(p,t,s,h.selector),d(s,g);return n.defer(function(){return f.done(function(){return p.trigger("validated",p,f,!0),p.trigger("validated:valid",p,f)}).fail(function(){return p.trigger("validated",p,f,!1),p.trigger("validated:invalid",p,f)})}),f}}},o=function(t,e,r){return n.extend(e,f(t,r))},m=function(t){return delete t.validate,delete t.preValidate,delete t.isValid},s=function(t){return o(this.view,t,this.options)},a=function(t){return m(t)},i=e.Validation={version:"0.7.1",options:{forceUpdate:!1,selector:"name",labelFormatter:"sentenceCase",invalid:Function.prototype,valid:Function.prototype,validating:Function.prototype,configure:function(t){return n.extend(i.options,t)}},bind:function(t,e){var r,l,u,c,d;if(c=t.model,r=t.collection,e=n.extend({},i.options,i.callbacks,e),!(null!=c?c:r))throw"Before you execute the binding your view must have a model or a collection.\nSee http://thedersen.com/projects/backbone-validation/#using-form-model-validation for more information.";if(c)return o(t,c,e);if(r){for(d=r.models,l=0,u=d.length;u>l;l++)c=d[l],o(t,c,e);return r.bind("add",s,{view:t,options:e}),r.bind("remove",a)}},unbind:function(t){var e,n,r,i,o;if(i=t.model,e=t.collection,i&&m(i),e){for(o=e.models,n=0,r=o.length;r>n;n++)i=o[n],m(i);return e.unbind("add",s),e.unbind("remove",a)}},mixin:function(){return f(null,i.options)},callbacks:{validating:function(){},valid:function(t,e,n){return t.$("["+n+'~="'+e+'"]').removeClass("invalid").removeAttr("data-error")},invalid:function(t,e,n,r){return t.$("["+r+'~="'+e+'"]').addClass("invalid").attr("data-error",n)}},patterns:{digits:/^\d+$/,number:/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/,email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,url:/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i},messages:{required:"{0} is required",acceptance:"{0} must be accepted",min:"{0} must be greater than or equal to {1}",max:"{0} must be less than or equal to {1}",range:"{0} must be between {1} and {2}",length:"{0} must be {1} characters",minLength:"{0} must be at least {1} characters",maxLength:"{0} must be at most {1} characters",rangeLength:"{0} must be between {1} and {2} characters",oneOf:"{0} must be one of: {1}",equalTo:"{0} must be the same as {1}",pattern:"{0} must be a valid {1}"},labelFormatters:{none:function(t){return t},sentenceCase:function(t){return t.replace(/(?:^\w|[A-Z]|\b\w)/g,function(t,e){return 0===e?t.toUpperCase():" "+t.toLowerCase()
}).replace("_"," ")},label:function(t,e){return e.labels&&e.labels[t]||i.labelFormatters.sentenceCase(t,e)}},validators:{fn:function(t,e,r,i,o){return n.isString(r)&&(r=i[r]),r.call(i,t,e,o)},required:function(t,e,r,o,s){var a;return a=n.isFunction(r)?r.call(o,t,e,s):r,a||p(t)?a&&!p(t)?this.format(i.messages.required,this.formatLabel(e,o)):void 0:!1},acceptance:function(t,e,r,o){return"true"===t||n.isBoolean(t)&&t!==!1?void 0:this.format(i.messages.acceptance,this.formatLabel(e,o))},min:function(t,e,n,r){return!h(t)||n>t?this.format(i.messages.min,this.formatLabel(e,r),n):void 0},max:function(t,e,n,r){return!h(t)||t>n?this.format(i.messages.max,this.formatLabel(e,r),n):void 0},range:function(t,e,n,r){return!h(t)||t<n[0]||t>n[1]?this.format(i.messages.range,this.formatLabel(e,r),n[0],n[1]):void 0},length:function(t,e,n,r){return p(t)&&g(t).length===n?void 0:this.format(i.messages.length,this.formatLabel(e,r),n)},minLength:function(t,e,n,r){return!p(t)||g(t).length<n?this.format(i.messages.minLength,this.formatLabel(e,r),n):void 0},maxLength:function(t,e,n,r){return!p(t)||g(t).length>n?this.format(i.messages.maxLength,this.formatLabel(e,r),n):void 0},rangeLength:function(t,e,n,r){return!p(t)||g(t).length<n[0]||g(t).length>n[1]?this.format(i.messages.rangeLength,this.formatLabel(e,r),n[0],n[1]):void 0},oneOf:function(t,e,r,o){return n.include(r,t)?void 0:this.format(i.messages.oneOf,this.formatLabel(e,o),r.join(", "))},equalTo:function(t,e,n,r,o){return t!==o[n]?this.format(i.messages.equalTo,this.formatLabel(e,r),this.formatLabel(n,r)):void 0},pattern:function(t,e,n,r){return p(t)&&t.toString().match(i.patterns[n]||n)?void 0:this.format(i.messages.pattern,this.formatLabel(e,r),n)}}}})}.call(this),function(){define("backbone_config/validation",["require","backbone","underscore","utils/backbone_validation"],function(t){var e,n,r;return e=t("backbone"),n=t("underscore"),t("utils/backbone_validation"),r=function(t){var e,n,r,i;return i=t.is(":checkbox")?"block":"inline",r=t.parents("label"),e=r.length?r:t,n=e.nextAll(".help-"+i),n.length||(n=e.after('<span class="help-'+i+'"></span>').nextAll(".help-"+i)),n},n.extend(e.Validation.callbacks,{validating:function(t,e){var n,i;return n=this.reverseBindings[e],i=r(n),i.find(".icon-spinner").length?void 0:i.prepend('<i class="icon-spinner icon-spin icon-large"></i>')},valid:function(t,e){var n,i;return(n=this.reverseBindings[e])?(i=r(n),i.find(".icon-spinner,.error-message").remove(),n.parents(".control-group").removeClass("error")):void 0},invalid:function(t,e,n){var i,o,s;return i=this.reverseBindings[e],o=r(i),o.find(".icon-spinner").remove(),s=o.find(".error-message"),s.length||(s=o.prepend('<span class="error-message"></span>').find(".error-message")),s.text(n),i.parents(".control-group").addClass("error")}}),e.View.prototype.bindValidation=function(){var t,r,i,o;if(null==(t=this.model).validation&&(t.validation=this.validation),this.initializing=!0,this.stickit(),this.initializing=!1,e.Validation.bind(this),r={},o=function(t){var e,n;t.validate(r),n=[];for(e in r)n.push(delete r[e]);return n},o=n.debounce(o,200),i=function(t){return n.extend(r,t.changed),o(t)},this.model.on("change",i,this),!this.bindings)throw Error("The view must have a bindings object property to bind validation");return this.$(n.keys(this.bindings).join(",")).change()}})}.call(this),function(){define("b",["require","backbone","backbone.queryparams","backbone_config/layout_manager","backbone_config/stickit","backbone_config/validation","utils/backbone_validation"],function(t){var e;return e=t("backbone"),t("backbone.queryparams"),t("backbone_config/layout_manager"),t("backbone_config/stickit"),t("backbone_config/validation"),t("utils/backbone_validation"),e})}.call(this),function(){define("utils/i18n.gettext",["utils/i18n","underscore"],function(t,e){return e.bind(t.gettext,t)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty,n=[].slice;define("router",["require","b"],function(e){var r,i;return r=e("b"),new(i=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype.initialize=function(){return r.__super__.initialize.apply(this,arguments),this.handlers=[],this.handlersByName={}},r.prototype.navigate=function(){return this.trigger.apply(this,["navigate"].concat(n.call(arguments))),r.__super__.navigate.apply(this,arguments)},r.prototype.route=function(t,e){var n;return _.isRegExp(t)?n=null:(n=t,t=this._routeToRegExp(t)),this.handlers.unshift({name:e,raw:n,route:t}),this.handlersByName[e]=n,r.__super__.route.apply(this,arguments)},r}(r.Router))})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("models/state",["require","b"],function(e){var n,r;return n=e("b"),r=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n}(n.Model)})}.call(this),function(){define("state",["require","models/state"],function(t){var e;return new(e=t("models/state"))})}.call(this),define("templates/controls/modals/base",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<div class="modal-header">'),"started"!==state&&buf.push('<i data-dismiss="modal" aria-hidden="true" class="icon-remove"></i>'),buf.push('<h3 id="modal-label">');var __val__=title;if(buf.push(escape(null==__val__?"":__val__)),buf.push('</h3></div><div class="modal-subheader"></div><div class="modal-body">'),"finished"===state)buf.push("Success!");else if("error"===state){buf.push('<div class="alert alert-error alert-block"><h4><i class="icon-exclamation-sign"></i>&nbsp;Server Error</h4>');var __val__=message;buf.push(null==__val__?"":__val__),buf.push("</div>")}else if("queued"===state||"started"===state){var __val__=logo();buf.push(null==__val__?"":__val__)}else{var __val__=message;buf.push(null==__val__?"":__val__)}buf.push('</div><div class="modal-list"></div><div class="modal-footer"><button'),buf.push(attrs({"data-dismiss":"modal","aria-hidden":"true",disabled:"started"===state,"class":"btn btn-close"},{"data-dismiss":!0,"aria-hidden":!0,disabled:!0})),buf.push(">");var __val__=closeButtonText;buf.push(escape(null==__val__?"":__val__)),buf.push("</button></div>")}return buf.join("")}}),!function(t){"use strict";t(function(){t.support.transition=function(){var t=function(){var t,e=document.createElement("bootstrap"),n={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(t in n)if(void 0!==e.style[t])return n[t]}();return t&&{end:t}}()})}(window.jQuery),define("bootstrap-transition",["jquery"],function(t){return function(){var e;return e||t.jQuery.support.transition}}(this)),!function(t){"use strict";var e=function(e,n){this.options=n,this.$element=t(e).delegate('[data-dismiss="modal"]',"click.dismiss.modal",t.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};e.prototype={constructor:e,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var e=this,n=t.Event("show");this.$element.trigger(n),this.isShown||n.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.backdrop(function(){var n=t.support.transition&&e.$element.hasClass("fade");e.$element.parent().length||e.$element.appendTo(document.body),e.$element.show(),n&&e.$element[0].offsetWidth,e.$element.addClass("in").attr("aria-hidden",!1),e.enforceFocus(),n?e.$element.one(t.support.transition.end,function(){e.$element.focus().trigger("shown")}):e.$element.focus().trigger("shown")}))},hide:function(e){e&&e.preventDefault();e=t.Event("hide"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),t(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),t.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var e=this;t(document).on("focusin.modal",function(t){e.$element[0]===t.target||e.$element.has(t.target).length||e.$element.focus()})},escape:function(){var t=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(e){27==e.which&&t.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var e=this,n=setTimeout(function(){e.$element.off(t.support.transition.end),e.hideModal()},500);this.$element.one(t.support.transition.end,function(){clearTimeout(n),e.hideModal()})},hideModal:function(){var t=this;this.$element.hide(),this.backdrop(function(){t.removeBackdrop(),t.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},backdrop:function(e){var n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var r=t.support.transition&&n;if(this.$backdrop=t('<div class="modal-backdrop '+n+'" />').appendTo(document.body),this.$backdrop.click("static"==this.options.backdrop?t.proxy(this.$element[0].focus,this.$element[0]):t.proxy(this.hide,this)),r&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;r?this.$backdrop.one(t.support.transition.end,e):e()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(t.support.transition.end,e):e()):e&&e()}};var n=t.fn.modal;t.fn.modal=function(n){return this.each(function(){var r=t(this),i=r.data("modal"),o=t.extend({},t.fn.modal.defaults,r.data(),"object"==typeof n&&n);i||r.data("modal",i=new e(this,o)),"string"==typeof n?i[n]():o.show&&i.show()})},t.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},t.fn.modal.Constructor=e,t.fn.modal.noConflict=function(){return t.fn.modal=n,this},t(document).on("click.modal.data-api",'[data-toggle="modal"]',function(e){var n=t(this),r=n.attr("href"),i=t(n.attr("data-target")||r&&r.replace(/.*(?=#[^\s]+$)/,"")),o=i.data("modal")?"toggle":t.extend({remote:!/#/.test(r)&&r},i.data(),n.data());e.preventDefault(),i.modal(o).one("hide",function(){n.focus()})})}(window.jQuery),define("bootstrap-modal",["jquery","bootstrap-transition"],function(t){return function(){var e;return e||t.jQuery.fn.modal}}(this)),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function r(){this.constructor=t}for(var i in e)n.call(e,i)&&(t[i]=e[i]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},n={}.hasOwnProperty,r=[].slice;define("views/controls/modals/base",["require","b","utils/i18n.gettext","underscore","router","state","j!controls/modals/base","bootstrap-modal"],function(n){var i,o,s,a,l,u,c;return i=n("b"),s=n("utils/i18n.gettext"),a=n("underscore"),u=n("router"),l=n("state"),c=n("j!controls/modals/base"),n("bootstrap-modal"),o=function(n){function i(){return this.onSaved=t(this.onSaved,this),i.__super__.constructor.apply(this,arguments)}return e(i,n),i.prototype.className="modal",i.prototype.closeButtonText=s("Cancel"),i.prototype.attributes={role:"dialog","aria-labelledby":"modal-label"},i.prototype.template=c,i.prototype.title=s("Dialog"),i.prototype.autoActionScope=!0,i.prototype.autoActionObjects=!0,i.prototype.closeOnRun=!0,i.prototype.modalOptions={},i.prototype.initialize=function(){var t;return this.app=this.options.app,u.on("all",this.remove,this),null!=this.options.closeButtonText&&(this.closeButtonText=this.options.closeButtonText),this.controller=this.options.controller,null!=this.options.title&&(this.title=this.options.title),this.message=null!=(t=this.options.message)?t:"Something went wrong. Please try again later.",this.render()},i.prototype.serialize=function(){var t;return{closeButtonText:this.closeButtonText,collection:this.collection,controller:this.controller,message:this.message,model:this.model,state:null!=(t=this.action)?t.get("state"):void 0,title:this.title,T:s}},i.prototype.cleanup=function(){var t;return this.$el.modal("removeBackdrop"),u.off(null,null,this),t=l.get("currentModal"),t&&l.unset("currentModal"),this.action&&this.action.off(null,null,this),this.open=!1},i.prototype.beforeRender=function(){var t;return t=l.get("currentModal"),t&&t.remove(),l.set("currentModal",this)},i.prototype.afterRender=function(){return this.open?void 0:(this.$el.modal(this.modalOptions).on("hidden",a.bind(this.remove,this)),this.open=!0)},i.prototype.queueAction=function(){var t,e,n;return t=arguments[0],e=2<=arguments.length?r.call(arguments,1):[],-1===t.indexOf("/")&&this.autoActionScope&&(t=this.controller.id+"/"+t),this.autoActionObjects&&(n=this.collection?this.collection.map(function(t){return t.id}):this.model?this.model.id:null,e.unshift(n)),this.app.organizations.last().actions.create({action_id:t,arguments:JSON.stringify(e)},{wait:!0,success:a.bind(this.actionQueued,this)})},i.prototype.actionQueued=function(t){return this.action&&this.action.off(null,null,this),this.action=t,this.action.on("change",this.actionChanged,this)},i.prototype.actionChanged=function(){return this.closeOnRun?void 0:this.render()},i.prototype.onSaved=function(){return this.model.collection.add(this.model,{at:0}),this.model.collection.trigger("user_added"),this.remove(),u.navigate(this.model.url(),{trigger:!0})},i}(i.Layout)})}.call(this),define("templates/controls/modals/about",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){if(buf.push('<div class="modal-header">'),"started"!==state&&buf.push('<i data-dismiss="modal" aria-hidden="true" class="icon-remove"></i>'),buf.push('<h3 id="modal-label">About Chef Manage</h3></div><div class="modal-subheader"></div><div class="modal-body">'),"finished"===state)buf.push("Success!");else if("error"===state){buf.push('<div class="alert alert-error alert-block"><h4><i class="icon-exclamation-sign"></i>&nbsp;Server Error</h4>');var __val__=message;buf.push(null==__val__?"":__val__),buf.push("</div>")}else if("queued"===state||"started"===state){var __val__=logo();buf.push(null==__val__?"":__val__)}else buf.push('<div class="center-div"><div class="about-header">Thank you for using Chef Manage</div></div><div class="center-div"><a'),buf.push(attrs({href:chef_documentation_url,target:"_blank"},{href:!0,target:!0})),buf.push('>Documentation</a></div><div class="center-div"><a'),buf.push(attrs({href:chef_www_url+"/terms-of-service/",target:"_blank"},{href:!0,target:!0})),buf.push('>Terms and Conditions of Use</a></div><div class="center-div"><a'),buf.push(attrs({href:chef_www_url+"/privacy-policy/",target:"_blank"},{href:!0,target:!0})),buf.push('>Privacy Policy</a></div><div class="center-div"><a'),buf.push(attrs({href:chef_www_url+"/online-master-agreement/",target:"_blank"},{href:!0,target:!0})),buf.push('>Online Master License and Services Agreement</a></div><div class="center-div"><a'),buf.push(attrs({href:chef_www_url+"/service-level-agreement/",target:"_blank"},{href:!0,target:!0})),buf.push(">Service Level Agreement</a></div>");buf.push('</div><div class="modal-list"></div><div class="modal-footer"><button'),buf.push(attrs({"data-dismiss":"modal","aria-hidden":"true",disabled:"started"===state,"class":"btn btn-close"},{"data-dismiss":!0,"aria-hidden":!0,disabled:!0})),buf.push(">");var __val__=closeButtonText;buf.push(escape(null==__val__?"":__val__)),buf.push("</button></div>")}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/controls/modals/about",["require","config","b","views/controls/modals/base","utils/i18n.gettext","j!controls/modals/about"],function(e){var n,r,i,o,s;return s=e("config"),r=e("b"),i=e("views/controls/modals/base"),o=e("utils/i18n.gettext"),n=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.template=e("j!controls/modals/about"),r.prototype.className=r.prototype.className+" modal-about",r.prototype.closeButtonText=o("Close"),r.prototype.events={"click .btn-small":"clickClose"},r.prototype.serialize=function(){return _.extend({chef_documentation_url:s.chef_documentation_url,chef_www_url:s.chef_www_url},r.__super__.serialize.call(this))},r.prototype.clickClose=function(t){return t.preventDefault(),this.remove()},r}(i)})}.call(this),!function(t){"use strict";var e=function(e,n){this.$element=t(e),this.options=t.extend({},t.fn.collapse.defaults,n),this.options.parent&&(this.$parent=t(this.options.parent)),this.options.toggle&&this.toggle()};e.prototype={constructor:e,dimension:function(){var t=this.$element.hasClass("width");return t?"width":"height"},show:function(){var e,n,r,i;if(!this.transitioning&&!this.$element.hasClass("in")){if(e=this.dimension(),n=t.camelCase(["scroll",e].join("-")),r=this.$parent&&this.$parent.find("> .accordion-group > .in"),r&&r.length){if(i=r.data("collapse"),i&&i.transitioning)return;r.collapse("hide"),i||r.data("collapse",null)}this.$element[e](0),this.transition("addClass",t.Event("show"),"shown"),t.support.transition&&this.$element[e](this.$element[0][n])}},hide:function(){var e;!this.transitioning&&this.$element.hasClass("in")&&(e=this.dimension(),this.reset(this.$element[e]()),this.transition("removeClass",t.Event("hide"),"hidden"),this.$element[e](0))},reset:function(t){var e=this.dimension();return this.$element.removeClass("collapse")[e](t||"auto")[0].offsetWidth,this.$element[null!==t?"addClass":"removeClass"]("collapse"),this},transition:function(e,n,r){var i=this,o=function(){"show"==n.type&&i.reset(),i.transitioning=0,i.$element.trigger(r)};this.$element.trigger(n),n.isDefaultPrevented()||(this.transitioning=1,this.$element[e]("in"),t.support.transition&&this.$element.hasClass("collapse")?this.$element.one(t.support.transition.end,o):o())},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};var n=t.fn.collapse;t.fn.collapse=function(n){return this.each(function(){var r=t(this),i=r.data("collapse"),o=t.extend({},t.fn.collapse.defaults,r.data(),"object"==typeof n&&n);i||r.data("collapse",i=new e(this,o)),"string"==typeof n&&i[n]()})},t.fn.collapse.defaults={toggle:!0},t.fn.collapse.Constructor=e,t.fn.collapse.noConflict=function(){return t.fn.collapse=n,this},t(document).on("click.collapse.data-api","[data-toggle=collapse]",function(e){var n,r=t(this),i=r.attr("data-target")||e.preventDefault()||(n=r.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""),o=t(i).data("collapse")?"toggle":r.data();r[t(i).hasClass("in")?"addClass":"removeClass"]("collapsed"),t(i).collapse(o)})}(window.jQuery),define("bootstrap-collapse",["jquery","bootstrap-transition"],function(t){return function(){var e;return e||t.jQuery.fn.collapse}}(this)),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/controls/accordion",["backbone","backbone.layoutmanager","bootstrap-collapse"],function(e){var n;return n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.events={"click .accordion-toggle":"clickHeading"},n.prototype.initialize=function(){var t,e,n,r;return null==this.multi&&(this.multi=null!=(t=this.options.multi)?t:!1),this.sections=null!=(e=this.options.sections)?e:[],this.parent=null!=(n=this.options.parent)?n:!0,this.allowNone=null!=(r=this.options.allowNone)?r:!0},n.prototype.beforeRender=function(){var t,e,n,r,i;for(n=this.sections,r=[],t=0,e=n.length;e>t;t++)i=n[t],r.push(this.insertView(i));return r},n.prototype.openThisAndCloseAllOthers=function(t,e){return this.multi?t.find(".collapse").collapse("toggle"):t.find(".accordion-toggle").hasClass("active")||(this.$(".active").removeClass("active"),t.find(".accordion-toggle").addClass("active"),this.$(".in").parents(".accordion-group").find(".accordion-toggle").not(".active").parents(".accordion-group").find(".accordion-body").collapse("hide"),t.find(".collapse").hasClass("in")||t.find(".collapse").collapse("show")),this.triggerSectionEvents(t,e)},n.prototype.triggerSectionEvents=function(t,e){var n;return n=t.data("section"),n&&!(null!=e?e.silent:void 0)?(n.trigger("toggle"),this.trigger("toggle:"+n.name)):void 0},n.prototype.clickHeading=function(t){return t.preventDefault(),this.openThisAndCloseAllOthers($(t.currentTarget).parents(".accordion-group"))},n}(e.Layout)})}.call(this),define("templates/controls/modals/confirmation",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<div class="modal-header">'),"started"!==state&&buf.push('<i data-dismiss="modal" aria-hidden="true" class="icon-remove"></i>'),buf.push('<h3 id="modal-label"><i class="icon-remove-sign"></i>&nbsp;');var __val__=title;if(buf.push(escape(null==__val__?"":__val__)),buf.push('</h3></div><div class="modal-subheader"></div><div class="modal-body">'),"finished"===state)buf.push("Success!");else if("error"===state){buf.push('<div class="alert alert-error alert-block"><h4><i class="icon-exclamation-sign"></i>&nbsp;Server Error</h4>');var __val__=message;buf.push(null==__val__?"":__val__),buf.push("</div>")}else if("queued"===state||"started"===state){var __val__=logo();buf.push(null==__val__?"":__val__)}else{var __val__=message;buf.push(null==__val__?"":__val__)}buf.push('</div><div class="modal-list"></div><div class="modal-footer"><button'),buf.push(attrs({"data-dismiss":"modal","aria-hidden":"true",disabled:"started"===state,"class":"btn btn-close"},{"data-dismiss":!0,"aria-hidden":!0,disabled:!0})),buf.push(">");var __val__=closeButtonText;buf.push(escape(null==__val__?"":__val__)),buf.push('</button><button class="btn btn-yes btn-danger"><i class="icon-remove-sign">&nbsp;</i>');var __val__=yesButtonText;buf.push(escape(null==__val__?"":__val__)),buf.push("</button></div>")}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/controls/modals/confirmation",["require","views/controls/modals/base","j!controls/modals/confirmation","utils/i18n.gettext"],function(e){var n,r,i,o;return r=e("views/controls/modals/base"),o=e("j!controls/modals/confirmation"),i=e("utils/i18n.gettext"),n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.className=n.prototype.className+" modal-confirmation",n.prototype.template=o,n.prototype.yesButtonText=i("Proceed"),n.prototype.events={"click .btn-yes":"clickYes","click [data-dismiss=modal]":"clickNo"},n.prototype.initialize=function(){var t,e,r;return null==(t=this.options).title&&(t.title=i("Are you certain?")),null==(e=this.options).message&&(e.message=i("Are you certain you want to continue?")),null==this.yesButtonText&&(this.yesButtonText=null!=(r=this.options.yesButtonText)?r:this.prototype.yesButtonText),n.__super__.initialize.apply(this,arguments),this.yesFn=this.options.yes,this.noFn=this.options.no},n.prototype.serialize=function(){return _.extend(n.__super__.serialize.apply(this,arguments),{yesButtonText:this.yesButtonText})},n.prototype.clickYes=function(t){return t.preventDefault(),this.yesFn&&this.yesFn(),this.remove()},n.prototype.clickNo=function(t){return t.preventDefault(),this.noFn?this.noFn():void 0},n}(r)})}.call(this),define("templates/controls/alerts/error_line",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<div class="alert alert-error"><i class="icon-exclamation-sign"></i>&nbsp');var __val__=body;buf.push(null==__val__?"":__val__),buf.push("</div>")}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/controls/alerts/error_line",["require","b","j!controls/alerts/error_line"],function(e){var n,r,i;return n=e("b"),i=e("j!controls/alerts/error_line"),r=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.template=i,n.prototype.initialize=function(){var t;return null!=this.body?this.body:this.body=null!=(t=this.options.body)?t:"An error occurred, please try again."},n.prototype.serialize=function(){return{body:this.body}},n}(n.Layout)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("services/job_queue",["require","b"],function(e){var n,r;return n=e("b"),r=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.initialize=function(t){return this.requestArray=null!=(null!=t?t.requestArray:void 0)?t.requestArray:[],this.storeErrorQueue=null!=(null!=t?t.storeErrorQueue:void 0)?t.storeErrorQueue:!1,this._processingJobs=!1,this._errorArray=[],this._sendToBackground=!1},n.prototype.processQueue=function(){var t;return 0!==this.requestArray.length?(this._processingJobs=!0,this._sendToBackground?this._terminateAndSendToOtherQueue():(t=this.requestArray.splice(0,1)[0],this._sendNextRequest(t))):(this._processingJobs=!1,this.trigger("all_requests_sent"))},n.prototype.sendRemainingToDifferentQueue=function(t){return this.otherJobQueue=t,this._processingJobs?this._sendToBackground=!0:this._terminateAndSendToOtherQueue()},n.prototype.removeIndex=function(t){if(this._processingJobs===!0)throw new Error("You cannot remove a specific index while the queue is being processed.");return this.requestArray.splice(t,1)[0]},n.prototype.queueRequest=function(t){return this.requestArray.push(t),this.trigger("queue_extended")},n.prototype.length=function(){return this.requestArray.length},n.prototype.generateErrorQueue=function(){if(this.storeErrorQueue)return new n({requestArray:this._errorArray});throw new Error("You did not elect to store errors in this queue. To store them, set @storeErrorQueue to true on initialization.")},n.prototype.numberOfErrors=function(){if(this.storeErrorQueue)return this._errorArray.length;throw new Error("You did not elect to store errors in this queue. To store them, set @storeErrorQueue to true on initialization.")},n.prototype._terminateAndSendToOtherQueue=function(){return this.otherJobQueue._extendQueue(this),this.requestArray=[],this.otherJobQueue._processingJobs||this.otherJobQueue.processQueue(),this.trigger("all_requests_sent")},n.prototype._extendQueue=function(t){return this.requestArray.push.apply(this.requestArray,t.requestArray),this.trigger("queue_extended")},n.prototype._sendNextRequest=function(t){return $.ajax({type:t.type,url:t.url,data:t.data,success:function(e){return function(n,r,i){return null!=t.successEvent&&t.successEvent(n,r,i,t.model),e.trigger("success",n,r,i,t.model),e.processQueue()}}(this),error:function(e){return function(n,r,i){return null!=t.errorEvent&&t.errorEvent(n,r,i,t.model),e.storeErrorQueue&&(t.originalError={xhr:n,status:r,error:i},e._errorArray.push(t)),e.trigger("error",n,r,i,t.model),e.processQueue()}}(this)})},n}(n.Model)})}.call(this),define("templates/controls/queue_view",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<div class="queue_body"><div class="status"></div><div class="total_processed"></div><div class="progress_parent"><div class="progress_bar"></div></div><div class="error"></div></div>')}return buf.join("")}}),define("templates/controls/alerts/success_line",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<div class="alert alert-success"><i class="icon-check-sign"></i>&nbsp');var __val__=body;buf.push(null==__val__?"":__val__),buf.push("</div>")}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/controls/alerts/success_line",["require","b","j!controls/alerts/success_line"],function(e){var n,r,i;return n=e("b"),i=e("j!controls/alerts/success_line"),r=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.template=i,n.prototype.initialize=function(){var t;return null!=this.body?this.body:this.body=null!=(t=this.options.body)?t:"Success"},n.prototype.serialize=function(){return{body:this.body}},n}(n.Layout)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/controls/queue_view",["require","j!controls/queue_view","views/controls/alerts/success_line","views/controls/alerts/error_line","b","jquery"],function(e){var n,r,i,o,s,a;return a=e("j!controls/queue_view"),s=e("views/controls/alerts/success_line"),i=e("views/controls/alerts/error_line"),r=e("b"),n=e("jquery"),o=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.template=a,n.prototype.initialize=function(){return this.jobQueue=this.options.jobQueue,this.masterQueue=null!=this.options.masterQueue?this.options.masterQueue:null,this.originalSize=this.jobQueue.length(),this.totalErrors=0,this.jobQueue.on("success",this.setCurrentProgress,this),this.jobQueue.on("error",this.setCurrentProgress,this),this.jobQueue.on("error",this.displayError,this),this.jobQueue.on("all_requests_sent",this.setCurrentProgress,this)},n.prototype.serialize=function(){return{requestArray:this.requestArray}},n.prototype.cleanup=function(){return null!=this.masterQueue?this.jobQueue.sendRemainingToDifferentQueue(this.masterQueue):void 0},n.prototype.setCurrentProgress=function(){var t;return t=(this.originalSize-this.jobQueue.length())/this.originalSize*100+"%",this.$(".progress_bar").animate({width:t},50),this.$(".total_processed").html("Sent "+this.numberRequestsProcessed()+" of "+this.originalSize+" requests.")},n.prototype.allRequestsFinished=function(){return this.totalErrors>0?this.setView(".status",new i({body:"All "+this.originalSize+" requests finished with "+this.totalErrors+" errors."})).render():this.setView(".status",new s({body:"All "+this.originalSize+" requests finished!"})).render()},n.prototype.numberRequestsProcessed=function(){return this.originalSize-this.jobQueue.length()},n.prototype.displayError=function(t,e,n,r){var o,s,a;return this.totalErrors+=1,s=null!=(null!=r?r.id:void 0)?r.id:"request-"+this.numberRequestsProcessed(),a=document.createElement("div"),o="queue_view-"+s,a.className=o,403===t.status?(this.$(".error").append(a),this.setView("."+o,new i({body:"You did not have permission to perform requested action on "+s+"!"})).render()):(this.$(".error").append(a),this.setView("."+o,new i({body:"Request for "+s+" failed! Please try again."})).render())
},n}(r.Layout)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/controls/spinner",["require","jquery","b","utils/logo"],function(e){var n,r,i,o;return n=e("jquery"),r=e("b"),o=e("utils/logo"),i=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.afterRender=function(){return this.$el.html(o())},n.prototype.cleanup=function(){return this.$el.html("")},n}(r.Layout)})}.call(this),define("templates/controls/modals/delete",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<div class="modal-header">'),"started"!==state&&buf.push('<i data-dismiss="modal" aria-hidden="true" class="icon-remove"></i>'),buf.push('<h3 id="modal-label"><i class="icon-remove-sign"></i>&nbsp;');var __val__=title;if(buf.push(escape(null==__val__?"":__val__)),buf.push('</h3></div><div class="modal-subheader">'),collection.length>1){var __val__=messages.selectMulti(collection.length);buf.push(escape(null==__val__?"":__val__))}else{var __val__=collection.at(0).id;buf.push(escape(null==__val__?"":__val__))}if(buf.push('</div><div class="modal-body">'),"finished"===state)buf.push("Success!");else if("error"===state){buf.push('<div class="alert alert-error alert-block"><h4><i class="icon-exclamation-sign"></i>&nbsp;Server Error</h4>');var __val__=message;buf.push(null==__val__?"":__val__),buf.push("</div>")}else if("queued"===state||"started"===state){var __val__=logo();buf.push(null==__val__?"":__val__)}else{buf.push("<p>");var __val__=i18n.sprintf(messages.deleteLong(collection.length),collection.length);buf.push(escape(null==__val__?"":__val__)),buf.push("</p><ul>"),function(){if("number"==typeof collection.models.length)for(var t=0,e=collection.models.length;e>t;t++){var n=collection.models[t];buf.push("<li>");var r=n.id;buf.push(escape(null==r?"":r)),buf.push("</li>")}else for(var t in collection.models){var n=collection.models[t];buf.push("<li>");var r=n.id;buf.push(escape(null==r?"":r)),buf.push("</li>")}}.call(this),buf.push("</ul><p>This action is irreversible. Are you sure?</p>")}buf.push('</div><div class="modal-list"></div><div class="modal-footer"><button'),buf.push(attrs({"data-dismiss":"modal","aria-hidden":"true",disabled:"started"===state,"class":"btn btn-close"},{"data-dismiss":!0,"aria-hidden":!0,disabled:!0})),buf.push(">");var __val__=closeButtonText;buf.push(escape(null==__val__?"":__val__)),buf.push('</button><button class="btn btn-yes btn-danger"><i class="icon-remove-sign">&nbsp;</i>');var __val__=yesButtonText;buf.push(escape(null==__val__?"":__val__)),buf.push("</button></div>")}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/controls/modals/delete",["require","jquery","views/controls/modals/confirmation","views/controls/alerts/error_line","services/job_queue","views/controls/queue_view","views/controls/spinner","views/controls/alerts/success_line","underscore","utils/i18n","router","j!controls/modals/delete"],function(e){var n,r,i,o,s,a,l,u,c,d,p,h;return n=e("jquery"),r=e("views/controls/modals/confirmation"),o=e("views/controls/alerts/error_line"),s=e("services/job_queue"),a=e("views/controls/queue_view"),l=e("views/controls/spinner"),u=e("views/controls/alerts/success_line"),c=e("underscore"),d=e("utils/i18n"),p=e("router"),h=e("j!controls/modals/delete"),i=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype.template=h,r.prototype.yesButtonText=d.gettext("Delete"),r.prototype.initialize=function(){var t;return this.collection_type=this.options.collection_type,this.messages=this.options.messages,null==(t=this.options).title&&(t.title=this.messages["delete"](this.collection.length)),this.collectionUrl=this.collection.at(0).collection.url(),this.modelWasDeleted=!1,r.__super__.initialize.apply(this,arguments)},r.prototype.serialize=function(){return c.extend(r.__super__.serialize.apply(this,arguments),{messages:this.messages})},r.prototype.clickYes=function(t){var e,r,i,c,d,p,h;if(t.preventDefault(),this.$(".btn-danger").remove(),1===this.collection.length)return this.setView(".modal-body",new l).render(),c=this.collection.at(0),n.ajax({type:"DELETE",url:c.url(),success:function(t){return function(){return t.modelWasDeleted=!0,c.collection.remove(c),t.setView(".modal-body",new u({body:c.id+" was successfully deleted!"})).render(),t.$(".btn-danger").remove(),t.$(".btn-close").html("Close")}}(this),error:function(t){return function(e){var n;return n=403===e.status?"You do not have permission to delete <code>"+c.id+"</code>. Contact an administrator for additional privileges.":"Something went wrong and <code>"+c.id+"</code> was not deleted. Please try again later.",t.setView(".modal-body",new o({body:n})).render(),t.$(".btn-danger").remove(),t.$(".btn-close").html("Close")}}(this)});for(this.$(".btn-close").html("Process in Background"),h=[],p=this.collection.models,e=0,i=p.length;i>e;e++)c=p[e],h.push({type:"DELETE",url:c.url(),data:null,model:c,actionVerb:"delete",successEvent:function(t,e,n,r){return r.collection.remove(r)}});return this.modelWasDeleted=!0,r=new s({requestArray:h}),d=new a({jobQueue:r,masterQueue:this.app.masterQueue}),this.setView(".modal-body",d).render(),r.processQueue(),r.on("all_requests_sent",this.requestsFinished,this)},r.prototype.requestsFinished=function(){return this.$(".btn-close").html("Close")},r.prototype.cleanup=function(){return r.__super__.cleanup.apply(this,arguments),this.modelWasDeleted?p.navigate(this.collectionUrl,{trigger:!0}):void 0},r}(r)})}.call(this),define("templates/controls/tabs",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<ul class="nav nav-tabs">'),function(){if("number"==typeof tabs.length)for(var t=0,e=tabs.length;e>t;t++){var n=tabs[t];buf.push("<li"),buf.push(attrs({"data-tab":n.id,"class":currentTabId==n.id?"active":""},{"class":!0,"data-tab":!0})),buf.push("><a"),buf.push(attrs({href:urlBase+"/"+n.id+queryParams},{href:!0})),buf.push(">");var r=n.label;buf.push(escape(null==r?"":r)),buf.push("</a></li>")}else for(var t in tabs){var n=tabs[t];buf.push("<li"),buf.push(attrs({"data-tab":n.id,"class":currentTabId==n.id?"active":""},{"class":!0,"data-tab":!0})),buf.push("><a"),buf.push(attrs({href:urlBase+"/"+n.id+queryParams},{href:!0})),buf.push(">");var r=n.label;buf.push(escape(null==r?"":r)),buf.push("</a></li>")}}.call(this),buf.push('</ul><div class="tab-content container-fluid"></div>')}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/controls/tabs",["require","b","underscore","j!controls/tabs"],function(){var e,n,r,i;return e=require("b"),r=require("underscore"),i=require("j!controls/tabs"),n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.template=i,n.prototype.initialize=function(t){var e,n,r;return this.options=null!=t?t:{},this.tabs=null!=(e=this.options.tabs)?e:[],this.currentTabId=null!=(n=this.options.currentTabId)?n:null!=(r=this.tabs[0])?r.id:void 0},n.prototype.beforeRender=function(){var t;return(t=this.getTab(this.currentTabId))?(this.currentView=this.tabView(t),this.setView(".tab-content",this.currentView)):void 0},n.prototype.serialize=function(){return{currentTabId:this.currentTabId,queryParams:this.queryParams(),tabs:this.tabs,urlBase:this.urlBase()}},n.prototype.events={"click ul.nav li":"changeTab"},n.prototype.changeTab=function(t){var e;return t.preventDefault(),e=$(t.target).parents("li"),this.currentTabId=e.data("tab"),this.render()},n.prototype.getTab=function(t){return r.findWhere(this.tabs,{id:t})},n.prototype.queryParams=function(){var t,e,n,r;return t=null!=(e=null!=(n=this.options.queryParams)?n:(null!=(r=this.options.urlBase)?r:"").split("?")[1])?e:"",t&&-1===t.indexOf("?")?"?"+t:t},n.prototype.tabView=function(t){return t.view},n.prototype.urlBase=function(){var t;return(null!=(t=this.options.urlBase)?t:"").split("?")[0]},n}(e.Layout)})}.call(this),define("templates/application/object_tabs",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<div class="object-label"><span class="object-type">');var __val__=label+":";if(buf.push(escape(null==__val__?"":__val__)),buf.push('</span>&nbsp;<span class="object-id">'),"function"==typeof model.analyticsEnabled&&model.analyticsEnabled(app.currentOrg)){buf.push("<a"),buf.push(attrs({target:"_blank",href:""+model.analyticsUrl(app.currentOrg)},{target:!0,href:!0})),buf.push(">");var __val__=model.id;buf.push(escape(null==__val__?"":__val__)),buf.push("</a>")}else{var __val__=model.id;buf.push(escape(null==__val__?"":__val__))}buf.push('</span></div><ul class="nav nav-tabs">'),function(){if("number"==typeof tabs.length)for(var t=0,e=tabs.length;e>t;t++){var n=tabs[t];buf.push("<li"),buf.push(attrs({"data-tab":n.id,"class":currentTabId==n.id?"active":""},{"class":!0,"data-tab":!0})),buf.push("><a"),buf.push(attrs({href:urlBase+"/"+n.id+queryParams},{href:!0})),buf.push(">");var r=n.label;buf.push(escape(null==r?"":r)),buf.push("</a></li>")}else for(var t in tabs){var n=tabs[t];buf.push("<li"),buf.push(attrs({"data-tab":n.id,"class":currentTabId==n.id?"active":""},{"class":!0,"data-tab":!0})),buf.push("><a"),buf.push(attrs({href:urlBase+"/"+n.id+queryParams},{href:!0})),buf.push(">");var r=n.label;buf.push(escape(null==r?"":r)),buf.push("</a></li>")}}.call(this),buf.push('</ul><div class="tab-content container-fluid"></div>')}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/application/object_tabs",["require","b","views/controls/tabs","underscore","config","router","j!application/object_tabs"],function(e){var n,r,i,o,s,a,l;return n=e("b"),i=e("views/controls/tabs"),o=e("underscore"),s=e("config"),a=e("router"),l=e("j!application/object_tabs"),r=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype.template=l,r.prototype.initialize=function(t){var e,i;return this.options=null!=t?t:{},r.__super__.initialize.apply(this,arguments),this.app=this.options.app,this.label=null!=(e=this.options.label)?e:"",this.model=null!=(i=this.options.model)?i:new n.Model},r.prototype.tabView=function(t){var e;return e={model:this.model,app:this.app},t.viewArgs&&o.extend(e,o.isFunction(t.viewArgs)?t.viewArgs.apply(this):t.viewArgs),new t.viewClass(e)},r.prototype.serialize=function(){return o.extend(r.__super__.serialize.apply(this,arguments),{label:this.label,model:this.model})},r.prototype.afterRender=function(){return this.resize()},r.prototype.changeTab=function(t){var e;return e=$(t.currentTarget).find("a").attr("href"),a.navigate(e),r.__super__.changeTab.apply(this,arguments)},r.prototype.resize=function(){var t,e,n,r,i,o;return t=this.$el.parent(),0!==t.length?(e=this.$(".tab-content"),r=e.offset().top-t.offset().top+t.scrollTop(),i=e.outerHeight()-e.height(),n=t.height()-r-i,e.css("min-height",n+"px"),null!=(o=this.currentView)&&"function"==typeof o.onResize?o.onResize():void 0):void 0},r.prototype.urlBase=function(){var t;try{return this.model.url().split("?")[0]}catch(e){return t=e,""}},r}(i)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/controls/accordion_section",["backbone","backbone.layoutmanager"],function(e){var n;return n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.className="accordion-group",n.prototype.initialize=function(){return this.name=this.options.name},n.prototype.beforeRender=function(){return null==this.open?this.open=!!this.$(".in").length:void 0},n.prototype.afterRender=function(){return this.$el.data("section",this),this.open&&this.$(".collapse").addClass("in"),this.open=void 0,this.parent?this.$(".collapse").collapse({toggle:!1,parent:this.parent}):void 0},n}(e.Layout)})}.call(this),define("templates/application/sidebar/actions",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){(function(){if("number"==typeof actions.length)for(var t=0,e=actions.length;e>t;t++){var n=actions[t];classes=[actionsEnabled[n.id]?"":"disabled",n.id],buf.push("<a"),buf.push(attrs({"data-action":n.id,"data-toggle":n.disabled_message?"tooltip":"",title:n.disabled_message&&"function"==typeof n.disabled_when&&n.disabled_when()?n.disabled_message:"Please select an item from the list to enable actions","class":classes.join(" ")},{"class":!0,"data-action":!0,"data-toggle":!0,title:!0})),buf.push(">");var r=n.label;buf.push(escape(null==r?"":r)),buf.push("</a>")}else for(var t in actions){var n=actions[t];classes=[actionsEnabled[n.id]?"":"disabled",n.id],buf.push("<a"),buf.push(attrs({"data-action":n.id,"data-toggle":n.disabled_message?"tooltip":"",title:n.disabled_message&&"function"==typeof n.disabled_when&&n.disabled_when()?n.disabled_message:"Please select an item from the list to enable actions","class":classes.join(" ")},{"class":!0,"data-action":!0,"data-toggle":!0,title:!0})),buf.push(">");var r=n.label;buf.push(escape(null==r?"":r)),buf.push("</a>")}}).call(this)}return buf.join("")}}),!function(t){"use strict";var e=function(t,e){this.init("tooltip",t,e)};e.prototype={constructor:e,init:function(e,n,r){var i,o,s,a,l;for(this.type=e,this.$element=t(n),this.options=this.getOptions(r),this.enabled=!0,s=this.options.trigger.split(" "),l=s.length;l--;)a=s[l],"click"==a?this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this)):"manual"!=a&&(i="hover"==a?"mouseenter":"focus",o="hover"==a?"mouseleave":"blur",this.$element.on(i+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(o+"."+this.type,this.options.selector,t.proxy(this.leave,this)));this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(e){return e=t.extend({},t.fn[this.type].defaults,this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},enter:function(e){var n,r=t.fn[this.type].defaults,i={};return this._options&&t.each(this._options,function(t,e){r[t]!=e&&(i[t]=e)},this),n=t(e.currentTarget)[this.type](i).data(this.type),n.options.delay&&n.options.delay.show?(clearTimeout(this.timeout),n.hoverState="in",void(this.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show))):n.show()},leave:function(e){var n=t(e.currentTarget)[this.type](this._options).data(this.type);return this.timeout&&clearTimeout(this.timeout),n.options.delay&&n.options.delay.hide?(n.hoverState="out",void(this.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide))):n.hide()},show:function(){var e,n,r,i,o,s,a=t.Event("show");if(this.hasContent()&&this.enabled){if(this.$element.trigger(a),a.isDefaultPrevented())return;switch(e=this.tip(),this.setContent(),this.options.animation&&e.addClass("fade"),o="function"==typeof this.options.placement?this.options.placement.call(this,e[0],this.$element[0]):this.options.placement,e.detach().css({top:0,left:0,display:"block"}),this.options.container?e.appendTo(this.options.container):e.insertAfter(this.$element),n=this.getPosition(),r=e[0].offsetWidth,i=e[0].offsetHeight,o){case"bottom":s={top:n.top+n.height,left:n.left+n.width/2-r/2};break;case"top":s={top:n.top-i,left:n.left+n.width/2-r/2};break;case"left":s={top:n.top+n.height/2-i/2,left:n.left-r};break;case"right":s={top:n.top+n.height/2-i/2,left:n.left+n.width}}this.applyPlacement(s,o),this.$element.trigger("shown")}},applyPlacement:function(t,e){var n,r,i,o,s=this.tip(),a=s[0].offsetWidth,l=s[0].offsetHeight;s.offset(t).addClass(e).addClass("in"),n=s[0].offsetWidth,r=s[0].offsetHeight,"top"==e&&r!=l&&(t.top=t.top+l-r,o=!0),"bottom"==e||"top"==e?(i=0,t.left<0&&(i=-2*t.left,t.left=0,s.offset(t),n=s[0].offsetWidth,r=s[0].offsetHeight),this.replaceArrow(i-a+n,n,"left")):this.replaceArrow(r-l,r,"top"),o&&s.offset(t)},replaceArrow:function(t,e,n){this.arrow().css(n,t?50*(1-t/e)+"%":"")},setContent:function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},hide:function(){function e(){var e=setTimeout(function(){n.off(t.support.transition.end).detach()},500);n.one(t.support.transition.end,function(){clearTimeout(e),n.detach()})}var n=this.tip(),r=t.Event("hide");return this.$element.trigger(r),r.isDefaultPrevented()?void 0:(n.removeClass("in"),t.support.transition&&this.$tip.hasClass("fade")?e():n.detach(),this.$element.trigger("hidden"),this)},fixTitle:function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var e=this.$element[0];return t.extend({},"function"==typeof e.getBoundingClientRect?e.getBoundingClientRect():{width:e.offsetWidth,height:e.offsetHeight},this.$element.offset())},getTitle:function(){var t,e=this.$element,n=this.options;return t=e.attr("data-original-title")||("function"==typeof n.title?n.title.call(e[0]):n.title)},tip:function(){return this.$tip=this.$tip||t(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(e){var n=e?t(e.currentTarget)[this.type](this._options).data(this.type):this;n.tip().hasClass("in")?n.hide():n.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var n=t.fn.tooltip;t.fn.tooltip=function(n){return this.each(function(){var r=t(this),i=r.data("tooltip"),o="object"==typeof n&&n;i||r.data("tooltip",i=new e(this,o)),"string"==typeof n&&i[n]()})},t.fn.tooltip.Constructor=e,t.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},t.fn.tooltip.noConflict=function(){return t.fn.tooltip=n,this}}(window.jQuery),define("bootstrap-tooltip",["jquery","bootstrap-transition"],function(t){return function(){var e;return e||t.jQuery.fn.tooltip}}(this)),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/application/sidebar/actions",["require","b","j!application/sidebar/actions","bootstrap-tooltip"],function(e){var n,r,i;return n=e("b"),i=e("j!application/sidebar/actions"),e("bootstrap-tooltip"),r=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.template=i,n.prototype.className="sidebar-actions",n.prototype.events={"click a":"clickAction"},n.prototype.initialize=function(){return this.selection=this.options.selection,this.actions=this.options.actions,this.controller=this.options.controller,this.resetBound=!1},n.prototype.beforeRender=function(){return this.resetBound?void 0:(this.selection.on("reset",this.render,this),this.resetBound=!0)},n.prototype.afterRender=function(){return this.$("a.disabled").tooltip({placement:"bottom",container:"body"})},n.prototype.cleanup=function(){return this.selection.off(null,null,this),this.resetBound=!1},n.prototype.serialize=function(){var t,e,n,r,i;for(e={},i=this.actions,n=0,r=i.length;r>n;n++)t=i[n],e[t.id]=this.isActionEnabled(t);return{actions:this.actions,actionsEnabled:e}},n.prototype.clickAction=function(t){var e,n;return e=$(t.currentTarget),!e.hasClass("disabled")&&(n=e.data("action"),this.trigger("action:"+n),this.trigger("action",n),this.controller)?this.controller.dispatchAction(n):void 0},n.prototype.isActionEnabled=function(t){var e,n,r,i,o;if(t.always)return!0;if(!this.selection||0===this.selection.length)return!1;if(!t.multi&&1!==this.selection.length)return!1;if("function"==typeof t.disabled_when)return!t.disabled_when();if(t.access)for(i=this.selection.models,e=0,n=i.length;n>e;e++)return r=i[e],(null!=(o=r.get("access"))?o[t.access]:void 0)?!0:!1;return!0},n}(n.Layout)})}.call(this),define("templates/application/sidebar/section",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<div class="accordion-heading"><a'),buf.push(attrs({href:href||"#","class":"accordion-toggle"},{href:!0})),buf.push('><i class="icon-chevron-right"></i>');var __val__=label;buf.push(escape(null==__val__?"":__val__)),buf.push("</a></div>"),hasActions&&buf.push('<div class="accordion-body collapse"></div>')}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/application/sidebar/section",["require","views/controls/accordion_section","b","views/application/sidebar/actions","router","j!application/sidebar/section"],function(e){var n,r,i,o,s,a;return n=e("views/controls/accordion_section"),r=e("b"),i=e("views/application/sidebar/actions"),s=e("router"),a=e("j!application/sidebar/section"),o=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.SidebarActions=i,n.prototype.template=a,n.prototype.actionsViewClass=i,n.prototype.initialize=function(){var t,e,i,o;return n.__super__.initialize.apply(this,arguments),this.app=this.options.app,this.label=null!=(t=this.options.label)?t:"",this.controller=this.options.controller,this.href=this.options.href,this.currentOrg=null!=(e=this.app)?e.organizations.last():void 0,this.actions=null!=(i=this.options.actions)?i:[],this.actionsView=new this.actionsViewClass({selection:null!=(o=this.options.selection)?o:new r.Collection,actions:this.actions,controller:this.controller})},n.prototype.beforeRender=function(){return n.__super__.beforeRender.apply(this,arguments),this.off("toggle",null,this),this.on("toggle",this.onToggle,this),this.app&&(this.app.off("change:org",null,this),this.app.on("change:org",this.updateOrg,this)),this.setView(".accordion-body",this.actionsView)},n.prototype.serialize=function(){return{hasActions:this.actions.length>0,label:this.label,href:this.url()}},n.prototype.url=function(){return this.href||this.controller.url(this.currentOrg)},n.prototype.onToggle=function(){var t;return t=this.url(),t?s.navigate(t,{trigger:!0}):void 0},n.prototype.updateOrg=function(t){return this.currentOrg=t,this.render()},n}(n)})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function r(){this.constructor=t}for(var i in e)n.call(e,i)&&(t[i]=e[i]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},n={}.hasOwnProperty,r=[].slice;define("controllers/base",["require","views/controls/accordion","b","views/controls/modals/delete","views/application/object_tabs","views/application/sidebar/section","underscore","utils/i18n","router"],function(n){var i,o,s,a,l,u,c,d,p;return i=n("views/controls/accordion"),o=n("b"),a=n("views/controls/modals/delete"),l=n("views/application/object_tabs"),u=n("views/application/sidebar/section"),c=n("underscore"),d=n("utils/i18n"),p=n("router"),s=function(n){function s(){return this.url=t(this.url,this),s.__super__.constructor.apply(this,arguments)}return e(s,n),s.prototype.endpoint="base",s.prototype.collection_type="base",s.prototype.sidebarSectionClass=u,s.prototype.sidebarViewClass=i,s.prototype.listViewClass=o.LayoutView,s.prototype.objectViewClass=l,s.prototype.deleteModalClass=a,s.prototype.messages={label:function(t){return d.ngettext("Object","Objects",null!=t?t:1)},selectEmpty:function(){return d.gettext("Please select an object")},selectMulti:function(){return d.gettext("%d objects selected")},searchMessage:d.gettext("Search Objects"),showingNObjects:function(t){return d.sprintf(d.ngettext("Showing <strong>%d object</strong>","Showing <strong>%d objects</strong>",null!=t?t:1),t)},showingAllObjects:function(){return T("Showing <strong>All Objects</strong>")},searchingObjects:function(){return T("Searching objects...")}},s.prototype.actions=[],s.prototype.split_pane=!0,s.prototype.children=[],s.prototype.wrapRoutes=!0,s.wrapRoute=function(t){return function(e){return e.wrapRoutes=t,e}},s.prototype.initialize=function(){var t,e,n;return this.app=this.options.app,this.selection=(null!=(n=this.app)?n.selection:void 0)||[],this.parentController=this.options.parentController,e=c.clone(this.options),e.parentController=this,this.childrenInstances=function(){var n,r,i,o;for(i=this.children,o=[],n=0,r=i.length;r>n;n++)t=i[n],o.push(new t(e));return o}.call(this),this.bindRoutes(),this.sidebarView=c.once(this.sidebarView)},s.prototype.sidebarView=function(){var t,e;return null!=this.options.parentController?this.options.parentController.sidebarView():(e=function(){var e,n,r,i;for(r=this.childrenInstances,i=[],e=0,n=r.length;n>e;e++)t=r[e],("function"!=typeof t.checkAccess||t.checkAccess())&&i.push(new t.sidebarSectionClass({selection:this.selection,label:t.messages.label(2),actions:t.actions,controller:t,app:this.app}));return i}.call(this),new this.sidebarViewClass({sections:e}))},s.prototype.getCollection=function(t){var e;return null!=(e=t[this.id])?e:new o.Collection},s.prototype.url=function(t){var e,n,r,i,o,s,a;if(this.childrenInstances.length>0){for(o=this.childrenInstances,r=0,i=o.length;i>r;r++)if(e=o[r],e.checkAccess(t))return e.url(t);return t.url()}if(t||(t=null!=(s=this.app)&&null!=(a=s.organizations)?a.last():void 0),n=this.getCollection(t),"function"!=typeof n.url)throw Error(n.constructor.name+" collection has no url method");return this.getCollection(t).url()},s.prototype.checkAccess=function(t){var e,n,r;return t||(t=null!=(n=this.app)&&null!=(r=n.organizations)?r.last():void 0),this.childrenInstances.length>0?c.any(this.childrenInstances,function(e){return e.checkAccess(t)}):t?(e=this.getCollection(t),(null!=e?e.chefUrl:void 0)?t.get("access")[e.chefUrl].read:!0):!1},s.prototype.dispatchAction=function(t){var e;return this.app.tracking.trackEvent(this.id,t),e=this["action_"+t],e?e.call(this):void 0},s.prototype.bindRoutes=function(){var t,e,n,i,o,s,a;e=c.result(this,"routes"),i=[];for(o in e)t=e[o],a=this.id+":"+t,s=this["route_"+t.split(".",1)[0]],null==s?i.push(p.route(o,a)):((null!=(n=s.wrapRoutes)?n:this.wrapRoutes)&&(s=function(t){return function(){var e,n,i,o,s,a;return o=arguments[0],e=3<=arguments.length?r.call(arguments,1,n=arguments.length-1):(n=1,[]),s=arguments[n++],s||(s={}),i=this.app.organizations.getCurrent(o),this.checkAccess(i)?(this.collection=this.getCollection(i,s),this.collection.params=s,this.selection.reset(null!=(a=t.apply(this,arguments))?a:[],{silent:!0}),this.app.applyController(this),this.selection.trigger("reset navigate")):this.app.rootRoute()}}(s)),i.push(p.route(o,a,c.bind(s,this))));return i},s.prototype.route_index=function(){return[]},s.prototype.route_show=function(t,e,n){var r;return this.currentTabId=n,r=this.collection.get(e),null!=r?[r]:[]},s.prototype.action_delete=function(){return new this.deleteModalClass({collection:this.selection,app:this.app,messages:this.messages,controller:this,endpoint:this.endpoint,collection_type:this.collection_type})},s}(o.Layout)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("collections/actions",["b","underscore"],function(e){var n;return n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.initialize=function(t,e){return this.organization=e.organization},n.prototype.url=function(){return this.organization.url()+"/actions"},n}(e.Collection)})}.call(this),function(t){function e(){var t=!1,e=!1;this.stopPropagation=function(){t=!0},this.isPropagationStopped=function(){return t},this.stopImmediatePropagation=function(){e=!0},this.isImmediatePropagationStopped=function(){return e}}function n(){var t=[];this.subscribe=function(e){t.push(e)},this.unsubscribe=function(e){for(var n=t.length-1;n>=0;n--)t[n]===e&&t.splice(n,1)},this.notify=function(n,r,i){r=r||new e,i=i||this;for(var o,s=0;s<t.length&&!r.isPropagationStopped()&&!r.isImmediatePropagationStopped();s++)o=t[s].call(i,r,n);return o}}function r(){var t=[];this.subscribe=function(e,n){return t.push({event:e,handler:n}),e.subscribe(n),this},this.unsubscribe=function(e,n){for(var r=t.length;r--;)if(t[r].event===e&&t[r].handler===n)return t.splice(r,1),void e.unsubscribe(n);return this},this.unsubscribeAll=function(){for(var e=t.length;e--;)t[e].event.unsubscribe(t[e].handler);return t=[],this}}function i(t,e,n,r){void 0===n&&void 0===r&&(n=t,r=e),this.fromRow=Math.min(t,n),this.fromCell=Math.min(e,r),this.toRow=Math.max(t,n),this.toCell=Math.max(e,r),this.isSingleRow=function(){return this.fromRow==this.toRow},this.isSingleCell=function(){return this.fromRow==this.toRow&&this.fromCell==this.toCell},this.contains=function(t,e){return t>=this.fromRow&&t<=this.toRow&&e>=this.fromCell&&e<=this.toCell},this.toString=function(){return this.isSingleCell()?"("+this.fromRow+":"+this.fromCell+")":"("+this.fromRow+":"+this.fromCell+" - "+this.toRow+":"+this.toCell+")"}}function o(){this.__nonDataRow=!0}function s(){this.__group=!0,this.level=0,this.count=0,this.value=null,this.title=null,this.collapsed=!1,this.totals=null,this.rows=[],this.groups=null,this.groupingKey=null}function a(){this.__groupTotals=!0,this.group=null}function l(){var t=null;this.isActive=function(e){return e?t===e:null!==t},this.activate=function(e){if(e!==t){if(null!==t)throw"SlickGrid.EditorLock.activate: an editController is still active, can't activate another editController";if(!e.commitCurrentEdit)throw"SlickGrid.EditorLock.activate: editController must implement .commitCurrentEdit()";if(!e.cancelCurrentEdit)throw"SlickGrid.EditorLock.activate: editController must implement .cancelCurrentEdit()";t=e}},this.deactivate=function(e){if(t!==e)throw"SlickGrid.EditorLock.deactivate: specified editController is not the currently active one";t=null},this.commitCurrentEdit=function(){return t?t.commitCurrentEdit():!0},this.cancelCurrentEdit=function(){return t?t.cancelCurrentEdit():!0
}}t.extend(!0,window,{Slick:{Event:n,EventData:e,EventHandler:r,Range:i,NonDataRow:o,Group:s,GroupTotals:a,EditorLock:l,GlobalEditorLock:new l}}),s.prototype=new o,s.prototype.equals=function(t){return this.value===t.value&&this.count===t.count&&this.collapsed===t.collapsed},a.prototype=new o}(jQuery),define("slickgrid/core",["jquery"],function(t){return function(){var e;return e||t.Slick}}(this)),function(){"use strict";function t(t){if("function"==typeof require&&t.module){var e,n=t.module,r=t.member||t.symbol;try{e=require(n)}catch(i){}if(void 0!==e)return r?e[r]:e}}function e(e,n){for(var r={},i=0,o=n.length;o>i;i++){var s=n[i],a=s.symbol,l=e&&e[a];void 0===l&&(l=t(s)),void 0!==l&&(r[a]=l)}return r}var n="undefined"==typeof global?this:global,r="undefined"==typeof exports?this.Slickback={}:exports,i=e(n,[{symbol:"_",module:"underscore"}]),o=i._,s=r;o.extend(s,{Slickback:s,VERSION:"0.3.0",use:e})}.call(this),function(){"use strict";function t(e,n){return!this instanceof t?new t(e,n):(this.model=e,this.dataOptions=n||{},this)}var e="undefined"==typeof global?this:global,n="undefined"==typeof exports?this:exports,r=n.Slickback||e.Slickback||require("../slickback"),i=r.use,o=i(e,[{symbol:"_",module:"underscore"}]),s=o._,a=r,l=function(t){var e=this.makeFetchOptions(t);return s.isUndefined(this.model.fetchWithoutScope)?this.model.fetch(e):this.model.fetchWithoutScope(e)},u=function(t){t||(t={});var e=s.extend({},this.dataOptions,t.data),n=s.clone(t);return s.isEqual({},e)||(n.data=e),n},c=function(t){s.extend(this.dataOptions,t)},d=function(e){var n=s.extend({},this.dataOptions,e);return new t(this.model,n)};s.extend(t.prototype,{fetch:l,makeFetchOptions:u,extend:c,scoped:d}),a.Scope=t}.call(this),function(){"use strict";var t="undefined"==typeof global?this:global,e="undefined"==typeof exports?this:exports,n=e.Slickback||t.Slickback||require("../slickback"),r=n.Scope,i=n,o=function(){return this.defaultScope||(this.defaultScope=new r(this))},s=function(t){var e=this.scope();e.extend(t)},a=function(){this.defaultScope=new r(this)},l=function(t){return this.fetch(t)},u=function(t){return this.scope().fetch(t)},c=function(t){var e=this.scope();return e.scoped(t)},d=function(){this.defaultScopeEnabled||(this.defaultScopeEnabled=!0,this.fetchWithoutScope=this.fetch,this.fetch=this.fetchWithScope)};i.ScopedModelMixin={scope:o,extendScope:s,clearScope:a,fetchWithoutScope:l,fetchWithScope:u,scoped:c,defaultScopeEnabled:!1,installScopedModelDefaults:d}}.call(this),function(){"use strict";var t="undefined"==typeof global?this:global,e="undefined"==typeof exports?this:exports,n=e.Slickback||t.Slickback||require("../slickback"),r=n.use,i=r(t,[{symbol:"_",module:"underscore"}]),o=(i._,t.Slick);"undefined"==typeof o&&console.log("Failed to load SlickGrid.");var s=n,a=function(){this.onRowCountChanged=new o.Event,this.onRowsChanged=new o.Event,this.onPagingInfoChanged=new o.Event};s.CollectionEventsMixin={installDataViewEventHandlers:a}}.call(this),function(){"use strict";var t="undefined"==typeof global?this:global,e="undefined"==typeof exports?this:exports,n=e.Slickback||t.Slickback||require("../slickback"),r=n.use,i=n.ScopedModelMixin,o=r(t,[{symbol:"_",module:"underscore"}]),s=o._,a=n,l=function(){return this.scoped({page:this.currentPage,per_page:this.perPage})},u=function(t,e){return this.parse(t,e)},c=function(t){var e=t.entries||t;return e.currentPage=t.currentPage,e.perPage=t.perPage,e.totalEntries=t.totalEntries,e},d=function(t,e){return this.add(t,e)},p=function(t,e){return this.currentPage=t.currentPage||1,this.perPage=t.perPage||t.length,this.totalEntries=t.totalEntries,this.addWithoutPagination(t,e)},h=function(t){return this.fetch(t)},f=function(t){return this.paginatedScope().fetch(t)},g=function(){this.defaultPaginationEnabled||(this.defaultPaginationEnabled=!0,this.parseWithoutPagination=this.parse,this.parse=this.parseWithPagination,this.addWithoutPagination=this.add,this.add=this.addWithPagination)};a.PaginatedCollectionMixin=s.extend({},i,{paginatedScope:l,fetchWithPagination:f,fetchWithoutPagination:h,parseWithPagination:c,parseWithoutPagination:u,addWithPagination:p,addWithoutPagination:d,defaultPaginationEnabled:!1,installPaginatedIngestors:g})}.call(this),function(){"use strict";var t="undefined"==typeof global?this:global,e="undefined"==typeof exports?this:exports,n=e.Slickback||t.Slickback||require("../slickback"),r=n.use,i=r(t,[{symbol:"_",module:"underscore"}]),o=i._,s=n,a=function(){return{pageNum:(this.currentPage||1)-1,pageSize:this.perPage,totalRows:this.totalEntries}},l=function(t){if(o.isUndefined(t.pageSize)||(this.perPage=t.pageSize),!o.isUndefined(t.pageNum))if(o.isNumber(this.totalEntries)&&o.isNumber(this.perPage)&&this.perPage>0){var e=Math.max(1,Math.ceil(this.totalEntries/this.perPage));this.currentPage=Math.min(t.pageNum+1,e)}else this.currentPage=t.pageNum+1;this.onPagingInfoChanged.notify(this.getPagingInfo()),this.fetchWithPagination()};s.PagerAdaptorMixin={getPagingInfo:a,setPagingOptions:l}}.call(this),function(){"use strict";var t="undefined"==typeof global?this:global,e="undefined"==typeof exports?this:exports,n=e.Slickback||t.Slickback||require("../slickback"),r=n,i=function(){this.getPagingInfo&&this.onPagingInfoChanged.notify(this.getPagingInfo()),this.onRowCountChanged.notify(),this.onRowsChanged.notify()},o=function(){this.bind("reset",i),this.bind("add",i),this.bind("remove",i)};r.EventTranslationMixin={bindCollectionEventTranslations:o}}.call(this),function(){"use strict";var t="undefined"==typeof global?this:global,e="undefined"==typeof exports?this:exports,n=e.Slickback||t.Slickback||require("../slickback"),r=n,i=function(){return this.models.length},o=function(t){return this.models[t]};r.CollectionAdaptorMixin={getLength:i,getItem:o}}.call(this),function(){"use strict";var t="undefined"==typeof global?this:global,e="undefined"==typeof exports?this:exports,n=e.Slickback||t.Slickback||require("../slickback"),r=n.use,i=n.CollectionEventsMixin,o=n.EventTranslationMixin,s=n.CollectionAdaptorMixin,a=r(t,[{symbol:"_",module:"underscore"},{symbol:"Backbone",module:"backbone"}]),l=a._,u=a.Backbone,c=n,d=function(){this.installDataViewEventHandlers(),this.bindCollectionEventTranslations()},p=l.extend({initialize:d},i,o,s);c.Collection=u.Collection.extend(p)}.call(this),function(){"use strict";var t="undefined"==typeof global?this:global,e="undefined"==typeof exports?this:exports,n=e.Slickback||t.Slickback||require("../slickback"),r=n.use,i=n.Collection,o=n.ScopedModelMixin,s=r(t,[{symbol:"_",module:"underscore"},{symbol:"Backbone",module:"backbone"}]),a=s._,l=(s.Backbone,n),u=function(){this.installDataViewEventHandlers(),this.bindCollectionEventTranslations(),this.installScopedModelDefaults()},c=a.extend({initialize:u},o);l.ScopedCollection=i.extend(c)}.call(this),function(){"use strict";var t="undefined"==typeof global?this:global,e="undefined"==typeof exports?this:exports,n=e.Slickback||t.Slickback||require("../slickback"),r=n.use,i=n.Collection,o=n.PaginatedCollectionMixin,s=n.PagerAdaptorMixin,a=r(t,[{symbol:"_",module:"underscore"}]),l=a._,u=n,c=function(){this.installDataViewEventHandlers(),this.installPaginatedIngestors(),this.bindCollectionEventTranslations()},d=l.extend({initialize:c},o,s);u.PaginatedCollection=i.extend(d)}.call(this),function(){"use strict";function t(t,e){var n=String(t),r=n.split("."),i=r[0],o=r[1],s=i.replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1"+e);return o&&(s+="."+o),s}function e(t){return"string"==typeof t.separated?t.separated:","}function n(n,r,i,o,s){var a=s.get(o.field);if(!a||""===a){if(o.allowNull)return null;a=0}var l;if(o.precision?(l="number"==typeof a?a:parseFloat(a),l=l.toFixed(o.precision)):l="number"==typeof a?a.toFixed(0):parseFloat(a).toFixed(0),o.separated){var u=e(o);return t(l,u)}return String(l)}var r="undefined"==typeof global?this:global,i="undefined"==typeof exports?this:exports,o=i.Slickback||r.Slickback||require("../slickback"),s=o;n.unformat=function(t,n){if("string"==typeof t&&n.separated){var r=e(n),i=r.replace(/[.]/g,"\\$&"),o=new RegExp(i,"g");return t.replace(o,"")}return t},s.NumberFormatter=n}.call(this),function(){"use strict";function t(t,e,n,r,i){var o=i.get(r.field),a=s.find(r.choices,function(t){return t==o||t&&t.value==o});return a?a.label||a:"string"==typeof r.includeBlank?r.includeBlank:""}var e="undefined"==typeof global?this:global,n="undefined"==typeof exports?this:exports,r=n.Slickback||e.Slickback||require("../slickback"),i=r.use,o=i(e,[{symbol:"_",module:"underscore"}]),s=o._,a=r;a.ChoiceFormatter=t}.call(this),function(){"use strict";var t="undefined"==typeof global?this:global,e="undefined"==typeof exports?this:exports,n=e.Slickback||t.Slickback||require("../slickback"),r=n.use,i=r(t,[{symbol:"$",module:"jquery"}]),o=i.$,s=n,a=function(){this.$input.remove()},l=function(){this.$input.focus()},u=function(t){return t.get(this.column.field)},c=function(t){var e=this.column;return e.formatter?e.formatter(null,null,null,e,t):t.get(e.field)},d=function(t,e){return e.formatter&&e.formatter.unformat?e.formatter.unformat(t,e):t},p=function(){var t=this.$input.val();return d(t,this.column)},h=function(t){var e=this.formattedModelValue(t);this.defaultValue=e,this.$input.val(e),this.$input[0].defaultValue=e,this.$input.select()},f=function(t,e){var n=this.column,r=d(e,n),i={};i[n.field]=r,t.set(i)},g=function(){return!(null==this.$input.val()&&null==this.defaultValue)&&this.$input.val()!=this.defaultValue},m=function(){var t=o('<input type="text" class="editor-text" />');return t.bind("keydown.nav",function(t){(t.keyCode===o.ui.keyCode.LEFT||t.keyCode===o.ui.keyCode.RIGHT)&&t.stopImmediatePropagation()}),t.appendTo(this.container),t.focus().select(),t},v=function(t,e,n){var r=o(t);return e&&r.attr(e),n&&r.html(n),r},y=function(){var t=v("<select>",this.column.attributes);if(this.column.includeBlank){var e=_.isString(this.column.includeBlank)?v("<option>",{value:null},this.column.includeBlank):v("<option>",{value:null});t.append(e)}return _.each(this.column.choices,function(e){var n=e.value||e,r=e.label||n,i=v("<option>",{value:n},r);t.append(i)}),t.appendTo(this.container),t.focus(),t},b={createTextInputElement:m,createSelectElement:y,destroy:a,focus:l,loadValue:h,applyValue:f,isValueChanged:g,unformattedModelValue:u,formattedModelValue:c,unformattedInputValue:p};s.EditorMixin=b}.call(this),function(){"use strict";function t(t){this.container=t.container,this.column=t.column,this.defaultValue=null,this.$input=this.createTextInputElement()}var e="undefined"==typeof global?this:global,n="undefined"==typeof exports?this:exports,r=n.Slickback||e.Slickback||require("../slickback"),i=r.use,o=r.EditorMixin,s=i(e,[{symbol:"_",module:"underscore"}]),a=s._,l=r,u=function(){return this.$input.val()},c=function(){var t=this.column;return t.validator?t.validator(this.$input.val()):{valid:!0,msg:null}};a.extend(t.prototype,o,{serializeValue:u,validate:c}),l.TextCellEditor=t}.call(this),function(){"use strict";function t(t){this.container=t.container,this.column=t.column,this.defaultValue=null,this.$input=this.createTextInputElement()}var e="undefined"==typeof global?this:global,n="undefined"==typeof exports?this:exports,r=n.Slickback||e.Slickback||require("../slickback"),i=r.use,o=r.EditorMixin,s=i(e,[{symbol:"_",module:"underscore"}]),a=s._,l=r,u=function(){var t=this.unformattedInputValue();return parseInt(t,10)||0},c=function(){return isNaN(this.unformattedInputValue())?{valid:!1,msg:"Please enter a valid integer"}:{valid:!0,msg:null}};a.extend(t.prototype,o,{serializeValue:u,validate:c}),l.IntegerCellEditor=t}.call(this),function(){"use strict";function t(t){this.container=t.container,this.column=t.column,this.defaultValue=null,this.$input=this.createTextInputElement()}var e="undefined"==typeof global?this:global,n="undefined"==typeof exports?this:exports,r=n.Slickback||e.Slickback||require("../slickback"),i=r.use,o=r.EditorMixin,s=i(e,[{symbol:"_",module:"underscore"}]),a=s._,l=r,u=function(){var t=this.unformattedInputValue(),e=this.column.precision;return parseFloat(t).toFixed(e?e:0)},c=function(){return isNaN(this.unformattedInputValue())?{valid:!1,msg:"Please enter a valid number"}:{valid:!0,msg:null}};a.extend(t.prototype,o,{serializeValue:u,validate:c}),l.NumberCellEditor=t}.call(this),function(){"use strict";function t(t){this.container=t.container,this.column=t.column,this.defaultValue=null,this.$input=this.createSelectElement()}var e="undefined"==typeof global?this:global,n="undefined"==typeof exports?this:exports,r=n.Slickback||e.Slickback||require("../slickback"),i=r.use,o=r.EditorMixin,s=i(e,[{symbol:"_",module:"underscore"}]),a=s._,l=r,u=function(t){var e=this.unformattedModelValue(t);this.defaultValue=e,this.$input.val(e),this.$input[0].defaultValue=e,this.$input.select()},c=function(){return this.$input.val()},d=function(){return{valid:!0,msg:null}};a.extend(t.prototype,o,{loadValue:u,serializeValue:c,validate:d}),l.DropdownCellEditor=t}.call(this),function(){"use strict";var t="undefined"==typeof global?this:global,e="undefined"==typeof exports?this:exports,n=e.Slickback||t.Slickback||require("../slickback"),r=n,i=function(){return function(t,e,n,r,i){return i.get(r.field)}};r.BackboneModelFormatterFactory={getFormatter:i}}.call(this),define("slickback",["slickgrid/core","backbone","underscore"],function(t){return function(){var e;return e||t.Slickback}}(this)),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("collections/acl",["require","slickback"],function(e){var n,r;return r=e("slickback"),n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.initialize=function(t,e){var n;return this.object=e.object,this.collection=null!=(n=this.object.collection)?n:this.object,this.actions=0},n.prototype.aclObject=function(){return null!=this.object.id?(this.collection.chefUrl||this.collection.webuiUrl)+"/"+this.object.id:"containers/"+(this.collection.chefUrl||this.collection.webuiUrl)},n.prototype.url=function(){return this.collection.organization.url()+"/acls/"+this.aclObject()},n}(r.Collection)})}.call(this),function(){define("helpers/acl",["collections/acl"],function(t){return{acl:function(){return this._acl||(this._acl=new t([],{object:this}),this._acl.fetch({error:function(t,e){return t.error=e.responseJSON,t.status=e.status},success:function(t,e){return t.status=e.status}})),this._acl}}})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("models/base",["require","helpers/acl","b","underscore","utils/backbone_validation"],function(e){var n,r,i,o,s;return n=e("helpers/acl"),r=e("b"),o=e("underscore"),s=e("utils/backbone_validation"),i=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,e),o.extend(r.prototype,n),o.extend(r.prototype,s.mixin()),r.prototype.idAttribute="name",r.prototype.initialize=function(){var t;return r.__super__.initialize.apply(this,arguments),this.updateIdField(),null!=(t=this.collection)&&t.on("sync",this.updateIdField,this),this.on("sync",this.updateIdField,this)},r.prototype.updateIdField=function(){var t;return!(null!=(t=this.id)?t.length:void 0)>0&&null!=this.get("_id")?(this.id=this.get("_id"),this.set(this.idAttribute,this.id)):void 0},r}(r.Model)})}.call(this),function(){define("helpers/rekey",["require"],function(){return{rekey:function(){var t;return this.set({private_key:!0},{silent:!0}),t=this.sync("update",this),t.then(this.fetch.bind(this)),t.always(function(t){return function(){return t.unset("private_key",{silent:!0})}}(this)),t}}})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("models/client",["require","models/base","helpers/rekey"],function(e){var n,r,i;return n=e("models/base"),i=e("helpers/rekey"),r=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),_.extend(n.prototype,i),n.prototype.idAttribute="name",n}(n)})}.call(this),Backbone.Paginator=function(t,e,n){"use strict";var r=e.map(t.VERSION.split("."),function(t){return parseInt(t,10)}),i={};i.version="<%= pkg.version %>",i.clientPager=t.Collection.extend({useDiacriticsPlugin:!0,useLevenshteinPlugin:!0,sortColumn:"",sortDirection:"desc",lastSortColumn:"",fieldFilterRules:[],lastFieldFilterRules:[],filterFields:"",filterExpression:"",lastFilterExpression:"",defaults_ui:{firstPage:0,currentPage:1,perPage:5,totalPages:10,pagesInRange:4},initialize:function(){this.on("add",this.addModel,this),this.on("remove",this.removeModel,this),this.setDefaults()},setDefaults:function(){var t=e.defaults(this.paginator_ui,this.defaults_ui);e.defaults(this,t)},addModel:function(t){this.origModels.push(t)},removeModel:function(t){var n=e.indexOf(this.origModels,t);this.origModels.splice(n,1)},sync:function(i,o,s){var a=this;this.setDefaults();var l={};e.each(e.result(a,"server_api"),function(t,n){e.isFunction(t)&&(t=e.bind(t,a),t=t()),l[n]=t});var u=e.clone(a.paginator_core);e.each(u,function(t,n){e.isFunction(t)&&(t=e.bind(t,a),t=t()),u[n]=t}),u=e.defaults(u,{timeout:25e3,cache:!1,type:"GET",dataType:"jsonp"}),u=e.extend(u,{data:decodeURIComponent(n.param(l)),processData:!1,url:e.result(u,"url")},s);var c=!(0===r[0]&&9===r[1]&&10===r[2]),d=u.success;u.success=function(t,e,n){d&&(c?d(t,e,n):d(o,t,u)),o&&o.trigger&&o.trigger("sync",o,t,u)};var p=u.error;u.error=function(t){p&&p(o,t,u),o&&o.trigger&&o.trigger("error",o,t,u)};var h=u.xhr=t.ajax(u);return o&&o.trigger&&o.trigger("request",o,h,u),h},nextPage:function(t){this.currentPage<this.information.totalPages&&(this.currentPage=++this.currentPage,this.pager(t))},previousPage:function(t){this.currentPage>1&&(this.currentPage=--this.currentPage,this.pager(t))},goTo:function(t,e){void 0!==t&&(this.currentPage=parseInt(t,10),this.pager(e))},howManyPer:function(t){if(void 0!==t){var e=this.perPage;this.perPage=parseInt(t,10),this.currentPage=Math.ceil((e*(this.currentPage-1)+1)/t),this.pager()}},setSort:function(t,e){void 0!==t&&void 0!==e&&(this.lastSortColumn=this.sortColumn,this.sortColumn=t,this.sortDirection=e,this.pager(),this.info())},setFieldFilter:function(t){e.isEmpty(t)?(this.lastFieldFilterRules=this.fieldFilterRules,this.fieldFilterRules="",this.pager(),this.info()):(this.lastFieldFilterRules=this.fieldFilterRules,this.fieldFilterRules=t,this.pager(),this.info())},doFakeFieldFilter:function(t){if(!e.isEmpty(t)){var n=this.origModels;return void 0===n&&(n=this.models),n=this._fieldFilter(n,t),""!==this.filterExpression&&(n=this._filter(n,this.filterFields,this.filterExpression)),n.length}},setFilter:function(t,e){void 0!==t&&void 0!==e&&(this.filterFields=t,this.lastFilterExpression=this.filterExpression,this.filterExpression=e,this.pager(),this.info())},doFakeFilter:function(t,n){if(void 0!==t&&void 0!==n){var r=this.origModels;return void 0===r&&(r=this.models),e.isEmpty(this.fieldFilterRules)||(r=this._fieldFilter(r,this.fieldFilterRules)),r=this._filter(r,t,n),r.length}},pager:function(t){var n=this,r=this.perPage,i=(n.currentPage-1)*r,o=i+r;void 0===n.origModels&&(n.origModels=n.models),n.models=n.origModels.slice(),""!==this.sortColumn&&(n.models=n._sort(n.models,this.sortColumn,this.sortDirection)),e.isEmpty(this.fieldFilterRules)||(n.models=n._fieldFilter(n.models,this.fieldFilterRules)),""!==this.filterExpression&&(n.models=n._filter(n.models,this.filterFields,this.filterExpression)),this.lastSortColumn===this.sortColumn&&this.lastFilterExpression===this.filterExpression&&e.isEqual(this.fieldFilterRules,this.lastFieldFilterRules)||(i=0,o=i+r,n.currentPage=1,this.lastSortColumn=this.sortColumn,this.lastFieldFilterRules=this.fieldFilterRules,this.lastFilterExpression=this.filterExpression),n.sortedAndFilteredModels=n.models.slice(),n.info(),n.reset(n.models.slice(i,o)),e.result(t,"success")},_sort:function(t,n,r){return t=t.sort(function(t,i){var o=t.get(n),s=i.get(n);if(e.isUndefined(o)||e.isUndefined(s)||null===o||null===s)return 0;if(o=o.toString().toLowerCase(),s=s.toString().toLowerCase(),"desc"===r)if(!o.match(/[^\-\d\.]/)&&o.match(/-?[\d\.]+/)&&!s.match(/[^\-\d\.]/)&&s.match(/-?[\d\.]+/)){if(s-0>o-0)return 1;if(o-0>s-0)return-1}else{if(s>o)return 1;if(o>s)return-1}else if(!o.match(/[^\-\d\.]/)&&o.match(/-?[\d\.]+/)&&!s.match(/[^\-\d\.]/)&&s.match(/-?[\d\.]+/)){if(s-0>o-0)return-1;if(o-0>s-0)return 1}else{if(s>o)return-1;if(o>s)return 1}if(t.cid&&i.cid){var a=t.cid,l=i.cid;if(l>a)return-1;if(a>l)return 1}return 0})},_fieldFilter:function(t,n){if(e.isEmpty(n))return t;var r=[];return e.each(t,function(t){var i=!0;e.each(n,function(n){if(!i)return!1;if(i=!1,"function"===n.type){var r=e.wrap(n.value,function(e){return e(t.get(n.field))});r()&&(i=!0)}else"required"===n.type?e.isEmpty(t.get(n.field).toString())||(i=!0):"min"===n.type?!e.isNaN(Number(t.get(n.field)))&&!e.isNaN(Number(n.value))&&Number(t.get(n.field))>=Number(n.value)&&(i=!0):"max"===n.type?!e.isNaN(Number(t.get(n.field)))&&!e.isNaN(Number(n.value))&&Number(t.get(n.field))<=Number(n.value)&&(i=!0):"range"===n.type?!e.isNaN(Number(t.get(n.field)))&&e.isObject(n.value)&&!e.isNaN(Number(n.value.min))&&!e.isNaN(Number(n.value.max))&&Number(t.get(n.field))>=Number(n.value.min)&&Number(t.get(n.field))<=Number(n.value.max)&&(i=!0):"minLength"===n.type?t.get(n.field).toString().length>=n.value&&(i=!0):"maxLength"===n.type?t.get(n.field).toString().length<=n.value&&(i=!0):"rangeLength"===n.type?e.isObject(n.value)&&!e.isNaN(Number(n.value.min))&&!e.isNaN(Number(n.value.max))&&t.get(n.field).toString().length>=n.value.min&&t.get(n.field).toString().length<=n.value.max&&(i=!0):"oneOf"===n.type?e.isArray(n.value)&&e.include(n.value,t.get(n.field))&&(i=!0):"equalTo"===n.type?n.value===t.get(n.field)&&(i=!0):"containsAllOf"===n.type?e.isArray(n.value)&&e.isArray(t.get(n.field))&&e.intersection(n.value,t.get(n.field)).length===n.value.length&&(i=!0):"pattern"===n.type?t.get(n.field).toString().match(n.value)&&(i=!0):i=!1}),i&&r.push(t)}),r},_filter:function(n,r,i){var o=this,s={};if(e.isString(r)?s[r]={cmp_method:"regexp"}:e.isArray(r)?e.each(r,function(t){s[t]={cmp_method:"regexp"}}):e.each(r,function(t,n){s[n]=e.defaults(t,{cmp_method:"regexp"})}),r=s,e.has(t.Paginator,"removeDiacritics")&&o.useDiacriticsPlugin&&(i=t.Paginator.removeDiacritics(i)),""===i||!e.isString(i))return n;var a=e.map(i.match(/\w+/gi),function(t){return t.toLowerCase()}),l="("+e.uniq(a).join("|")+")",u=new RegExp(l,"igm"),c=[];return e.each(n,function(n){var s=[];e.each(r,function(r,l){var c=n.get(l);if(c){var d=[];if(c=e.has(t.Paginator,"removeDiacritics")&&o.useDiacriticsPlugin?t.Paginator.removeDiacritics(c.toString()):c.toString(),"levenshtein"===r.cmp_method&&e.has(t.Paginator,"levenshtein")&&o.useLevenshteinPlugin){var p=t.Paginator.levenshtein(c,i);e.defaults(r,{max_distance:0}),p<=r.max_distance&&(d=e.uniq(a))}else d=c.match(u);d=e.map(d,function(t){return t.toString().toLowerCase()}),e.each(d,function(t){s.push(t)})}}),s=e.uniq(e.without(s,"")),e.isEmpty(e.difference(a,s))&&c.push(n)}),c},info:function(){var t=this,e={},n=t.sortedAndFilteredModels?t.sortedAndFilteredModels.length:t.length,r=Math.ceil(n/t.perPage);return e={totalUnfilteredRecords:t.origModels.length,totalRecords:n,currentPage:t.currentPage,perPage:this.perPage,totalPages:r,lastPage:r,previous:!1,next:!1,startRecord:0===n?0:(t.currentPage-1)*this.perPage+1,endRecord:Math.min(n,t.currentPage*this.perPage)},t.currentPage>1&&(e.previous=t.currentPage-1),t.currentPage<e.totalPages&&(e.next=t.currentPage+1),e.pageSet=t.setPagination(e),t.information=e,e},setPagination:function(t){var e=[],n=0,r=0,i=2*this.pagesInRange,o=Math.ceil(t.totalRecords/t.perPage);if(o>1)if(1+i>=o)for(n=1,r=o;r>=n;n++)e.push(n);else if(t.currentPage<=this.pagesInRange+1)for(n=1,r=2+i;r>n;n++)e.push(n);else if(o-this.pagesInRange>t.currentPage&&t.currentPage>this.pagesInRange)for(n=t.currentPage-this.pagesInRange;n<=t.currentPage+this.pagesInRange;n++)e.push(n);else for(n=o-i;o>=n;n++)e.push(n);return e},bootstrap:function(t){return e.extend(this,t),this.goTo(1),this.info(),this}}),i.clientPager.prototype.prevPage=i.clientPager.prototype.previousPage;var o=function(){var t=new n.Deferred;return t.reject(),t.promise()};return i.requestPager=t.Collection.extend({sync:function(i,o,s){var a=this;a.setDefaults();var l={};e.each(e.result(a,"server_api"),function(t,n){e.isFunction(t)&&(t=e.bind(t,a),t=t()),l[n]=t});var u=e.clone(a.paginator_core);e.each(u,function(t,n){e.isFunction(t)&&(t=e.bind(t,a),t=t()),u[n]=t}),u=e.defaults(u,{timeout:25e3,cache:!1,type:"GET",dataType:"jsonp"}),s.data=decodeURIComponent(s.data?n.param(e.extend(l,s.data)):n.param(l)),u=e.extend(u,{data:decodeURIComponent(n.param(l)),processData:!1,url:e.result(u,"url")},s);var c=!(0===r[0]&&9===r[1]&&10===r[2]),d=u.success;u.success=function(t,e,n){d&&(c?d(t,e,n):d(o,t,u)),r[0]<1&&o&&o.trigger&&o.trigger("sync",o,t,u)};var p=u.error;u.error=function(t){p&&p(o,t,u),o&&o.trigger&&o.trigger("error",o,t,u)};var h=u.xhr=t.ajax(u);return o&&o.trigger&&o.trigger("request",o,h,u),h},setDefaults:function(){var t=this;e.defaults(t.paginator_ui,{firstPage:0,currentPage:1,perPage:5,totalPages:10,pagesInRange:4}),e.each(t.paginator_ui,function(n,r){e.isUndefined(t[r])&&(t[r]=t.paginator_ui[r])})},requestNextPage:function(t){return void 0!==this.currentPage?(this.currentPage+=1,this.pager(t)):o()},requestPreviousPage:function(t){return void 0!==this.currentPage?(this.currentPage-=1,this.pager(t)):o()},updateOrder:function(t,e){return void 0!==t?(this.sortField=t,this.pager(e)):o()},goTo:function(t,e){return void 0!==t?(this.currentPage=parseInt(t,10),this.pager(e)):o()},howManyPer:function(t,e){return void 0!==t?(this.currentPage=this.firstPage,this.perPage=t,this.pager(e)):o()},info:function(){var t={totalRecords:this.totalRecords||0,currentPage:this.currentPage,firstPage:this.firstPage,totalPages:Math.ceil(this.totalRecords/this.perPage),lastPage:this.totalPages,perPage:this.perPage,previous:!1,next:!1};return this.currentPage>1&&(t.previous=this.currentPage-1),this.currentPage<t.totalPages&&(t.next=this.currentPage+1),t.hasNext=t.next,t.hasPrevious=t.next,t.pageSet=this.setPagination(t),this.information=t,t},setPagination:function(t){var e=[],n=0,r=0,i=2*this.pagesInRange,o=Math.ceil(t.totalRecords/t.perPage);if(o>1)if(1+i>=o)for(n=1,r=o;r>=n;n++)e.push(n);else if(t.currentPage<=this.pagesInRange+1)for(n=1,r=2+i;r>n;n++)e.push(n);else if(o-this.pagesInRange>t.currentPage&&t.currentPage>this.pagesInRange)for(n=t.currentPage-this.pagesInRange;n<=t.currentPage+this.pagesInRange;n++)e.push(n);else for(n=o-i;o>=n;n++)e.push(n);return e},pager:function(t){return e.isObject(t)||(t={}),this.fetch(t)},url:function(){return void 0!==this.paginator_core&&void 0!==this.paginator_core.url?this.paginator_core.url:null},bootstrap:function(t){return e.extend(this,t),this.setDefaults(),this.info(),this}}),i.requestPager.prototype.nextPage=i.requestPager.prototype.requestNextPage,i.requestPager.prototype.prevPage=i.requestPager.prototype.requestPreviousPage,i}(Backbone,_,jQuery),define("backbone.paginator",["jquery","backbone","underscore"],function(t){return function(){var e;return e||t.Backbone.Paginator}}(this)),function(){define("collections/mixin/urls",["require"],function(){return{url:function(){if(!this.webuiUrl)throw Error("No webuiUrl defined");return this.organization.url()+"/"+this.webuiUrl}}})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("collections/base",["require","b","backbone.paginator","slickback","underscore","helpers/acl","config","collections/mixin/urls"],function(e){var n,r,i,o,s,a,l,u;return n=e("b"),i=e("backbone.paginator"),o=e("slickback"),s=e("underscore"),a=e("helpers/acl"),l=e("config"),u=e("collections/mixin/urls"),r=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),s.extend(n.prototype,o.Collection.prototype),s.extend(n.prototype,a),s.extend(n.prototype,u),n.prototype.searchFilter="*:*",n.prototype.searchSortOrder=null,n.prototype.reachedEnd=!1,n.prototype.paginator_ui={firstPage:0,currentPage:0,perPage:20},n.prototype.paginator_core={timeout:l.backbone_paginator_timeout||12e4,dataType:"json",url:function(){return this.url()}},n.prototype.server_api={page:function(){return this.currentPage},count:function(){return this.perPage},filter:function(){return this.searchFilter},sort:function(){return this.searchSortOrder}},n.prototype.initialize=function(t,e){return o.Collection.prototype.initialize.call(this,arguments),i.requestPager.prototype.initialize.call(this,arguments),this.organization=null!=e?e.organization:void 0,null==this.chefUrl&&(this.chefUrl=this.webuiUrl),this.queryStatus={resting:!0,initQuery:!1,queryingPageDown:!1,queryinyPageUp:!1}},n.prototype.sync=function(t,e,r){var i,o;return this.queryStatus.resting=!1,0===this.length?(r.queryInitial=!0,this.queryStatus.initQuery=!0):(r.queryDown=!0,this.queryStatus.queryingPageDown=!0),o=r.success,r.success=function(t){return function(){return t.queryStatus.resting=!0,t.queryStatus.initQuery=!1,t.queryStatus.queryingPageDown=!1,t.queryStatus.queryinyPageUp=!1,"function"==typeof o?o.apply(null,arguments):void 0}}(this),i=r.error,r.error=function(t){return function(){return t.queryStatus.resting=!0,t.queryStatus.initQuery=!1,t.queryStatus.queryingPageDown=!1,t.queryStatus.queryinyPageUp=!1,"function"==typeof i?i.apply(null,arguments):void 0}}(this),n.__super__.sync.call(this,t,e,r)},n.prototype.parse=function(t){return this.totalPages=Math.floor(t.total/this.perPage),this.totalRecords=t.results.length<this.paginator_ui.perPage&&t.total!==t.results.length?t.results.length:t.total,t.results},n.prototype.urlWithQueryParams=function(){return"*:*"!==this.searchFilter?this.url()+"?filter="+encodeURIComponent(this.searchFilter):this.url()},n.prototype.getItemMetadata=function(t){var e;return e=this.at(t),e.get("isSpinner")?{columns:{0:{colspan:"*",formatter:function(){return""},selectable:!1}},cssClasses:"slick-spinner-row",selectable:!1,focusable:!1}:e.get("forbidden")?{selectable:!1,focusable:!1,cssClasses:"forbidden-row muted"}:null},n}(i.requestPager)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("collections/clients",["require","collections/base","models/client"],function(e){var n,r,i;return n=e("collections/base"),r=e("models/client"),i=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.isSolrSearchable=!0,n.prototype.model=r,n.prototype.webuiUrl="clients",n}(n)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("models/container",["require","b"],function(e){var n,r;return n=e("b"),r=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.acl=function(){return this.get("collection").acl()},n}(n.Model)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("collections/containers",["require","models/container","slickback","utils/i18n.gettext"],function(e){var n,r,i,o;
return n=e("models/container"),i=e("slickback"),o=e("utils/i18n.gettext"),r=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype.model=n,r.prototype.initialize=function(t,e){var n,i,s;if(t)throw"Do not initialize Containers with any models";return r.__super__.initialize.apply(this,arguments),this.org=e.organization,n=this.org.get("access")||{},s=[{id:"nodes",label:o("Nodes"),collection:this.org.nodes,access:n.nodes},{id:"cookbooks",label:o("Cookbooks"),collection:this.org.cookbooks,access:n.cookbooks},{id:"roles",label:o("Roles"),collection:this.org.roles,access:n.roles},{id:"data_bags",label:o("Data Bags"),collection:this.org.databags,access:n.data},{id:"environments",label:o("Environments"),collection:this.org.environments,access:n.environments},{id:"groups",label:o("Groups"),collection:this.org.groups,access:n.groups}],this.reset(function(){var t,e,n,r;for(r=[],t=0,e=s.length;e>t;t++)i=s[t],(null!=(n=i.access)?n.grant:void 0)&&r.push(i);return r}())},r.prototype.sync=function(){},r.prototype.url=function(){return this.org.url()+"/global_permissions"},r}(i.Collection)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("models/cookbook_version",["require","b"],function(e){var n,r;return n=e("b"),r=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.idAttribute="version",n.prototype.defaults={metadata:{}},n.prototype.url=function(){return this.get("cookbook").url()+"/"+this.get("version")},n}(n.Model)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("models/cookbook",["require","models/base","models/cookbook_version"],function(e){var n,r,i;return n=e("models/base"),i=e("models/cookbook_version"),r=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.defaults={versions:[]},n.prototype.initialize=function(){return n.__super__.initialize.apply(this,arguments),this.cookbookVersions={},this.set("displayVersion",this.get("current_version"))},n.prototype.getCookbookVersion=function(t){var e;return t||(t=this.get("current_version")),(e=this.cookbookVersions)[t]||(e[t]=new i({version:t,cookbook:this}))},n.prototype.currentVersionUrl=function(){return this.url()+"/"+this.get("current_version")},n.prototype.displayVersionModel=function(){return this.getCookbookVersion(this.get("displayVersion"))},n}(n)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("collections/cookbooks",["require","b","models/cookbook","slickback","underscore","helpers/acl","collections/mixin/urls"],function(e){var n,r,i,o,s,a,l;return n=e("b"),r=e("models/cookbook"),o=e("slickback"),s=e("underscore"),a=e("helpers/acl"),l=e("collections/mixin/urls"),i=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),s.extend(n.prototype,o.Collection.prototype),s.extend(n.prototype,a),s.extend(n.prototype,l),n.prototype.model=r,n.prototype.webuiUrl="cookbooks",n.prototype.initialize=function(t,e){return this.models=null!=t?t:[],this.options=null!=e?e:{},this.organization=this.options.organization},n}(n.Collection)})}.call(this),function(){define("helpers/validation/id",["require","underscore","utils/i18n.gettext"],function(t){var e,n,r;return n=t("underscore"),e=t("utils/i18n.gettext"),r=function(t,n){var r,i,o,s,a;return i=t.idAttribute,r=t.constructor,s=null!=(o=null!=n?n.title:void 0)?o:i,a={},a[i]=[{required:!0,msg:e(s+" is required")},{pattern:/^[a-z0-9\-_]+$/,msg:e(s+" can only contain lowercase letters, numbers, hyphens, and underscores")},{fn:"validateObjectExists"}],{validation:a,validateObjectExists:function(t,n){var i,o,a;return a=e(s+" is already in use"),o=new $.Deferred,this.collection.get(this.id)?o.reject(a):(i={},i[n]=t,new r(i,{collection:this.collection}).fetch().done(function(){return o.reject(a)}).fail(function(t){return 404===t.status?o.resolve(!0):o.reject(400===t.status?e(s+" is not a valid format"):a)})),o}}},function(t,e){var i,o,s;return i=r(t,e),s=i.validation,o=i.validateObjectExists,t.validateObjectExists=o,null==t.validation&&(t.validation={}),n.extend(t.validation,s)}})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("models/databag_item",["require","models/base","underscore","helpers/validation/id"],function(e){var n,r,i,o;return n=e("models/base"),i=e("underscore"),o=e("helpers/validation/id"),r=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.defaults={id:"",data:{}},n.prototype.idAttribute="id",n.prototype.initialize=function(){return n.__super__.initialize.apply(this,arguments),this.on("sync",this.afterSync)},n.prototype.afterSync=function(){return this.isNew()?(this.collection.add(this),this.set({data:i.extend(this.get("data"),{id:this.id})})):void 0},o(n.prototype),n}(n)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("collections/databag_items",["collections/base","models/databag_item"],function(e,n){var r;return r=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype.isSolrSearchable=!0,r.prototype.model=n,r.prototype.initialize=function(t,e){return this.databag=null!=e?e.databag:void 0,r.__super__.initialize.apply(this,arguments)},r.prototype.url=function(){return this.databag.url()+"/items"},r}(e)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("models/databag",["require","models/base","collections/databag_items","utils/i18n.gettext","helpers/validation/id"],function(e){var n,r,i,o,s;return n=e("models/base"),i=e("collections/databag_items"),o=e("utils/i18n.gettext"),s=e("helpers/validation/id"),r=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.defaults={name:""},n.prototype.initialize=function(){return this.items=new i([],{databag:this}),n.__super__.initialize.apply(this,arguments)},s(n.prototype),n.prototype.toJSON=function(){return _(n.__super__.toJSON.call(this)).extend({items:this.items.toJSON()})},n}(n)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("collections/databags",["collections/base","models/databag"],function(e,n){var r;return r=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype.model=n,r.prototype.webuiUrl="data_bags",r.prototype.chefUrl="data",r}(e)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("models/environment",["require","b","models/base","underscore","helpers/validation/id"],function(e){var n,r,i,o,s;return n=e("b"),r=e("models/base"),o=e("underscore"),s=e("helpers/validation/id"),i=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,e),s(r.prototype),r.prototype.defaults={name:"",cookbook_versions:{}},r.prototype.initialize=function(){return r.__super__.initialize.apply(this,arguments),this.constraints=new n.Collection(null,{model:n.Model}),this.parseConstraints(this.get("cookbook_versions")),this.constraints.on("add remove change",this.onConstraintsChange,this)},r.prototype.parseConstraints=function(t){return o(t).forEach(function(t){return function(e,n){var r,i;return r=e.substring(0,2).trim(),parseInt(r,10)>=0&&(r="="),i=e.replace(r,""),t.constraints.add({name:n,operator:r,version:i})}}(this))},r.prototype.onConstraintsChange=function(){var t;return t=this.constraints.toJSON().reduce(function(t,e){var n;return t[e.name]=[e.operator,null!=(n=e.version)?n.trim():void 0].join(" "),t},{}),this.set("cookbook_versions",t)},r}(r)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("collections/environments",["collections/base","models/environment"],function(e,n){var r;return r=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype.isSolrSearchable=!0,r.prototype.model=n,r.prototype.webuiUrl="environments",r.prototype.paginator_ui={firstPage:0,currentPage:0,perPage:1e3},r}(e)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("models/user",["require","models/base","helpers/rekey"],function(e){var n,r,i;return n=e("models/base"),i=e("helpers/rekey"),r=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),_.extend(n.prototype,i),n.prototype.idAttribute="username",n.prototype.defaults={username:"",email:"",first_name:"",last_name:""},n.prototype.validation={email:{required:!0,pattern:"email"}},n.prototype.fullName=function(){return this.get("first_name")+" "+this.get("last_name")},n}(n)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("collections/users",["require","collections/base","models/user","slickback"],function(e){var n,r,i,o;return n=e("collections/base"),i=e("models/user"),r=e("slickback"),o=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.model=i,n.prototype.webuiUrl="users",n.prototype.getThinSlickBackCollection=function(){var t,e,n,i,o;for(o=new r.Collection,i=this.models,t=0,e=i.length;e>t;t++)n=i[t],o.add({id:n.id,url:n.url()});return o},n}(n)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("models/group",["require","models/base","slickback","helpers/validation/id","collections/users"],function(e){var n,r,i,o,s;return n=e("models/base"),i=e("slickback"),s=e("helpers/validation/id"),o=e("collections/users"),r=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.idAttribute="groupname",n.prototype.defaults={groupname:"",clients:[],groups:[],users:[]},n.prototype.initialize=function(){return n.__super__.initialize.apply(this,arguments),this.userCollection=new o(null,{organization:this.collection.organization})},n.prototype.getMembersCollection=function(){var t,e,n,r,o,s,a,l,u,c,d,p,h;for(u=new i.Collection,c=this.get("users"),e=n=0,s=c.length;s>n;e=++n)h=c[e],u.add({name:h,type:"User"});for(d=this.get("groups"),e=r=0,a=d.length;a>r;e=++r)t=d[e],u.add({name:t,type:"Group"});for(p=this.get("clients"),e=o=0,l=p.length;l>o;e=++o)t=p[e],u.add({name:t,type:"Client"});return u},s(n.prototype,{title:"name"}),n.prototype.removeMember=function(t,e){var n,r,i;if(i={},r=_.reject(this.get(e),function(e){return e===t}),i[e]=r,n=this.get("groupname"),"admins"!==n&&"billing-admins"!==n||0!==i[e].length)return this.save(i,{validate:!1,error:function(n){return function(i,o,s){return r.push(t),n.set(e,r),n.trigger("remove_error",[i,o,s])}}(this)});throw Error("Sorry, "+n+" cannot be emptied")},n.prototype.addMember=function(t){return this.userCollection.fetch({data:{fetch_all:!0},processData:!0}).then(function(e){return function(){var n,r,i,o;if(i=_.flatten([e.get("users"),e.get("groups")]),o=_.flatten([e.userCollection.pluck("username")||[],e.collection.pluck("name")]),o=_.without(o,e.get("groupname")),_.contains(i,t))return e.trigger("currently_member");if(_.contains(o,t)){switch(r=e.getMemberType(t),i=e.get(r),i.push(t),r){case"users":n={users:i};break;case"groups":n={groups:i}}return e.save(n,{validate:!1,error:function(t,n,o){return i.pop(),e.set(r,i),e.trigger("update_error",[t,n,o])},success:function(){return e.trigger("member_valid")}})}return e.trigger("invalid_member_name")}}(this))},n.prototype.getMemberType=function(t){if(_.contains(this.collection.pluck("name"),t))return"groups";if(_.contains(this.userCollection.pluck("username"),t))return"users";throw Error("Member does not appear to have a type")},n}(n)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("collections/groups",["require","b","models/group","slickback","underscore","helpers/acl","collections/mixin/urls"],function(e){var n,r,i,o,s,a,l;return n=e("b"),r=e("models/group"),o=e("slickback"),s=e("underscore"),a=e("helpers/acl"),l=e("collections/mixin/urls"),i=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),s.extend(n.prototype,o.Collection.prototype),s.extend(n.prototype,a),s.extend(n.prototype,l),n.prototype.model=r,n.prototype.webuiUrl="groups",n.prototype.initialize=function(t,e){return this.models=null!=t?t:[],this.options=null!=e?e:{},this.organization=this.options.organization},n}(n.Collection)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("collections/run_lists",["require","b"],function(e){var n,r;return n=e("b"),r=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype.initialize=function(t,e){var r;return this.object=null!=(r=null!=e?e.object:void 0)?r:new n.Model},r.prototype.url=function(){return this.object.url()+"/run_lists"},r}(n.Collection)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("models/run_list_parent",["require","models/base","collections/run_lists"],function(e){var n,r,i;return n=e("models/base"),i=e("collections/run_lists"),r=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.parse=function(){return this.run_lists().length>0&&this.run_lists().fetch(),n.__super__.parse.apply(this,arguments)},n.prototype.run_lists=function(){return null!=this.run_lists_instance?this.run_lists_instance:this.run_lists_instance=new i([],{object:this})},n}(n)})}.call(this),function(){var t=[].slice;define("utils/deep_merge",["underscore"],function(e){var n,r;return n=function(t,e){return this.dest=t,this.src=e,this},r=function(t){return"object"==typeof t&&!e.isArray(t)},function(){var e,i,o,s,a,l,u,c,d,p;for(u=1<=arguments.length?t.call(arguments,0):[],s={},d=function(){var t,e,r;for(r=[],t=0,e=u.length;e>t;t++)l=u[t],r.push(new n(s,l));return r}();d.length;){e=d.shift(),i=e.dest,o=e.src,c=e.src;for(a in c)p=c[a],null!=i[a]&&r(p)&&r(i[a])?d.push(new n(i[a],p)):i[a]=p}return s}})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("models/node",["require","models/run_list_parent","utils/deep_merge"],function(e){var n,r,i;return r=e("models/run_list_parent"),i=e("utils/deep_merge"),n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.initialize=function(){return n.__super__.initialize.apply(this,arguments),this.mergeAttributes(),this.on("change:default change:normal change:override change:automatic",this.mergeAttributes,this)},n.prototype.mergeAttributes=function(){var t,e,n,r;return this.set({attributes:i(null!=(t=this.get("default"))?t:{},null!=(e=this.get("normal"))?e:{},null!=(n=this.get("override"))?n:{},null!=(r=this.get("automatic"))?r:{})})},n}(r)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("collections/nodes",["collections/base","models/node"],function(e,n){var r;return r=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype.isSolrSearchable=!0,r.prototype.model=n,r.prototype.webuiUrl="nodes",r}(e)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("models/role",["require","underscore","models/run_list_parent","utils/i18n.gettext","helpers/validation/id"],function(n){var r,i,o,s,a;return s=n("underscore"),i=n("models/run_list_parent"),o=n("utils/i18n.gettext"),a=n("helpers/validation/id"),r=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.defaults={name:""},r.prototype.initialize=function(){return r.__super__.initialize.apply(this,arguments),this.setEnvironments()},r.prototype.setEnvironments=function(){var t,n,r,i;this.environments=[],(null!=(n=this.get("run_list"))?n.length:void 0)>0&&this.environments.push("_default"),r=this.get("env_run_lists");for(t in r)e.call(r,t)&&(i=r[t],this.environments.push(t));return this.environments},a(r.prototype),r}(i)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("collections/roles",["require","collections/base","models/role"],function(e){var n,r,i;return n=e("collections/base"),r=e("models/role"),i=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.idAttribute="name",n.prototype.isSolrSearchable=!0,n.prototype.model=r,n.prototype.webuiUrl="roles",n}(n)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("models/run",["require","config","models/run_list_parent","moment"],function(e){var n,r,i,o;return i=e("config"),r=e("models/run_list_parent"),o=e("moment"),n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.idAttribute="run_id",n.prototype.runSteps=null,n.prototype.initialize=function(){var t,e,r;return n.__super__.initialize.apply(this,arguments),this.set("resource_summary",this.get("updated_res_count")+" / "+this.get("total_res_count")),e=null,r=null,this.get("start_time")&&(e=o(this.get("start_time")),this.set("start_time",e)),this.get("end_time")&&(r=o(this.get("end_time")),this.set("end_time",r)),null!=e&&null!=r?(t=r.from(e,!0),this.set("duration",t)):this.set("duration","")},n.prototype.analyticsEnabled=function(t){return t.isFeatureEnabled("analytics_links")&&!!i.chef_analytics_url},n.prototype.analyticsUrl=function(t){return i.chef_analytics_url+"/organizations/"+t.id+"/actions?types=node&names="+this.get("node_name")+"&before="+this.get("end_time").format("YYYY-MM-DD")},n}(r)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("collections/runs",["require","collections/base","models/run"],function(e){var n,r,i;return n=e("collections/base"),r=e("models/run"),i=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.model=r,n.prototype.webuiUrl="runs",n.prototype.wasInitialized=!1,n.prototype.selection=null,n.prototype.set_time_params=function(t,e){return this.server_api.startTime=t,this.server_api.endTime=e},n.prototype.set_status_param=function(t){return this.server_api.status=t},n.prototype.server_api={page:function(){return this.currentPage},count:function(){return this.perPage},start_row:function(){return this.currentPage*this.perPage},num_rows:function(){return this.perPage}},n.prototype.fetchStarted=function(){return n.__super__.fetchStarted.apply(this,arguments),this.trigger("fetchStarted")},n.prototype.cleanServerApi=function(){return delete this.server_api.startTime,delete this.server_api.endTime,delete this.server_api.status,delete this.server_api.filter,delete this.server_api.env,this.currentPage=0},n.prototype.urlWithQueryParams=function(){var t;return t=this.url()+"?endTime="+encodeURIComponent(this.server_api.endTime)+"&startTime="+encodeURIComponent(this.server_api.startTime),null!=this.server_api.filter&&(t+="&q="+encodeURIComponent(this.server_api.filter)),null!=this.server_api.status&&(t+="&status="+encodeURIComponent(this.server_api.status)),null!=this.server_api.env&&(t+="&env="+encodeURIComponent(this.server_api.env)),t},n}(n)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("models/organization",["require","collections/actions","b","models/client","collections/clients","collections/containers","collections/cookbooks","collections/databags","collections/environments","collections/groups","collections/nodes","collections/roles","collections/runs","utils/i18n.gettext","collections/users","helpers/validation/id","config"],function(e){var n,r,i,o,s,a,l,u,c,d,p,h,f,g,m,v,y;return n=e("collections/actions"),r=e("b"),i=e("models/client"),o=e("collections/clients"),s=e("collections/containers"),a=e("collections/cookbooks"),l=e("collections/databags"),u=e("collections/environments"),c=e("collections/groups"),d=e("collections/nodes"),h=e("collections/roles"),f=e("collections/runs"),g=e("utils/i18n.gettext"),m=e("collections/users"),v=e("helpers/validation/id"),y=e("config"),p=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype.idAttribute="name",r.prototype.defaults={name:"",full_name:"",org_type:"Business"},r.prototype.validation={full_name:{required:!0},name:[{required:!0,msg:g("Short name is required")},{pattern:/^[a-z0-9\-_]+$/,msg:g("Short name can only contain lowercase letters, numbers, hyphens, and underscores")},{fn:"orgIdValidate"}]},r.prototype.orgIdValidate=function(t){var e;if((t||"").toString().trim())return e=new $.Deferred,$.ajax({type:"GET",url:"/organizations/"+t+"/exists",dataType:"json",success:function(){return e.resolve(!0)},error:function(t){return e.reject(409===t.status?g("This short name is already in use"):g("A server error occurred. Please refresh and try again"))}}),e},r.prototype.initialize=function(){return this.app=this.get("app"),this.actions=new n(null,{organization:this,app:this.get("app")}),this.nodes=new d(null,{organization:this}),this.roles=new h(null,{organization:this}),this.databags=new l(null,{organization:this}),this.cookbooks=new a(null,{organization:this}),this.environments=new u(null,{organization:this}),this.users=new m(null,{organization:this}),this.groups=new c(null,{organization:this}),this.runs=new f(null,{organization:this}),this.clients=new o(null,{organization:this}),this.containers=new s(null,{organization:this}),this.validationClient=new i({name:this.id+"-validator"},{collection:this.clients})},r.prototype.isFeatureEnabled=function(t){return!!this.get("darklaunch")[t]},r.prototype.reportingBillingTier=function(){return y.private_chef||!this.isFeatureEnabled("reporting")?void 0:this.isFeatureEnabled("reporting_premium_tier")?"premium":this.isFeatureEnabled("reporting_basic_tier")?"basic":"free"},r}(r.Model)})}.call(this),define("templates/organizations/modals/create",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<div class="modal-header">'),"started"!==state&&buf.push('<i data-dismiss="modal" aria-hidden="true" class="icon-remove"></i>'),buf.push('<h3 id="modal-label"><i class="icon-building"> </i>');var __val__=title;if(buf.push(escape(null==__val__?"":__val__)),buf.push('</h3></div><div class="modal-subheader"></div><div class="modal-body">'),"finished"===state)buf.push("Success!");else if("error"===state){buf.push('<div class="alert alert-error alert-block"><h4><i class="icon-exclamation-sign"></i>&nbsp;Server Error</h4>');var __val__=message;buf.push(null==__val__?"":__val__),buf.push("</div>")}else if("queued"===state||"started"===state){var __val__=logo();buf.push(null==__val__?"":__val__)}else buf.push('<form class="create-organization"><div class="control-group"><label for="create-org-fullname" class="control-label">Full Name <small class="muted">(example: Chef, Inc.)</small></label><div class="controls"><input name="fullname" type="text" autofocus="autofocus" id="create-org-fullname"/><span class="help-inline"></span></div></div><div class="control-group"><label for="create-org-shortname" class="control-label">Short Name <small class="muted">(example: chef)</small></label><div class="controls"><input name="shortname" type="text" id="create-org-shortname"/><span class="help-inline"></span></div></div></form>');buf.push('</div><div class="modal-list"></div><div class="modal-footer"><button'),buf.push(attrs({"data-dismiss":"modal","aria-hidden":"true",disabled:"started"===state,"class":"btn btn-close"},{"data-dismiss":!0,"aria-hidden":!0,disabled:!0})),buf.push(">");var __val__=closeButtonText;buf.push(escape(null==__val__?"":__val__)),buf.push("</button>"),"error"!==state&&buf.push('<button class="btn btn-submit btn-primary"><i class="icon-building"></i>&nbsp;Create Organization</button>'),buf.push("</div>")}return buf.join("")}}),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function r(){this.constructor=t}for(var i in e)n.call(e,i)&&(t[i]=e[i]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},n={}.hasOwnProperty;define("views/organizations/modals/create",["require","models/organization","views/controls/modals/base","j!organizations/modals/create"],function(n){var r,i,o,s;return o=n("models/organization"),i=n("views/controls/modals/base"),s=n("j!organizations/modals/create"),r=function(n){function r(){return this.toggleSubmit=t(this.toggleSubmit,this),this.onError=t(this.onError,this),r.__super__.constructor.apply(this,arguments)}return e(r,n),r.prototype.title="Create Organization",r.prototype.template=s,r.prototype.bindings={'[name="shortname"]':"name",'[name="fullname"]':"full_name"},r.prototype.events={"click .btn-submit":"submit"},r.prototype.initialize=function(){return this.model=new o,r.__super__.initialize.call(this),this.model.collection=this.app.organizations,this.model.on("validated",this.toggleSubmit)},r.prototype.serialize=function(){return _.extend(r.__super__.serialize.call(this),{state:this.state})},r.prototype.afterRender=function(){return this.submitButton=this.$(".btn-submit"),this.bindValidation(),r.__super__.afterRender.call(this)},r.prototype.submit=function(t){return t.preventDefault(),this.state&&"error"!==this.state?void 0:this.model.validate().then(function(t){return function(){return t.state="started",t.render(),t.model.sync("create",t.model,{url:t.model.collection.url(),success:t.onSaved,error:t.onError})}}(this))},r.prototype.onError=function(){return this.state="error",this.render()},r.prototype.toggleSubmit=function(t,e,n){return this.submitButton.prop("disabled",!n||"started"===this.state)},r}(i)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("collections/organization_association_requests",["require","b"],function(e){var n,r;return n=e("b"),r=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.initialize=function(t,e){return this.models=t,this.options=e,this.organization=this.options.organization},n.prototype.url=function(){var t;return(null!=(t=this.organization)?t.url():void 0)+"/association_requests"},n}(n.Collection)})}.call(this),define("templates/controls/modals/invite_user",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<div class="modal-header">'),"started"!==state&&buf.push('<i data-dismiss="modal" aria-hidden="true" class="icon-remove"></i>'),buf.push('<h3 id="modal-label"><i class="icon-envelope"></i>&nbsp;Invite User</h3></div><div class="modal-subheader">');var __val__=model.id;if(buf.push(escape(null==__val__?"":__val__)),buf.push('</div><div class="modal-body">'),"finished"===state)buf.push("Success!");else if("error"===state){buf.push('<div class="alert alert-error alert-block"><h4><i class="icon-exclamation-sign"></i>&nbsp;Server Error</h4>');var __val__=message;buf.push(null==__val__?"":__val__),buf.push("</div>")}else if("queued"===state||"started"===state){var __val__=logo();buf.push(null==__val__?"":__val__)}else buf.push('<form><div class="control-group"><label for="invite-user-name" class="control-label">Chef Username</label><div class="controls"><input type="text" autofocus="autofocus" id="invite-user-name"/></div></div></form><div class="message"></div>');buf.push('</div><div class="modal-list"></div><div class="modal-footer"><button'),buf.push(attrs({"data-dismiss":"modal","aria-hidden":"true",disabled:"started"===state,"class":"btn btn-close"},{"data-dismiss":!0,"aria-hidden":!0,disabled:!0})),buf.push(">");var __val__=closeButtonText;buf.push(escape(null==__val__?"":__val__)),buf.push('</button><button disabled="disabled" class="btn btn-primary"><i class="icon-envelope"></i>&nbsp;Invite</button></div>')}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/controls/modals/invite_user",["require","jquery","views/controls/alerts/error_line","views/controls/modals/base","collections/organization_association_requests","views/controls/spinner","views/controls/alerts/success_line","j!controls/modals/invite_user"],function(e){var n,r,i,o,s,a,l,u;return n=e("jquery"),r=e("views/controls/alerts/error_line"),o=e("views/controls/modals/base"),s=e("collections/organization_association_requests"),a=e("views/controls/spinner"),l=e("views/controls/alerts/success_line"),u=e("j!controls/modals/invite_user"),i=function(e){function i(){return i.__super__.constructor.apply(this,arguments)
}return t(i,e),i.prototype.className=i.prototype.className+" modal-invite-user",i.prototype.template=u,i.prototype.events={"click .btn-primary":"submit","submit form":"submit","keyup input":"keyPressed"},i.prototype.initialize=function(t){return this.options=t,i.__super__.initialize.call(this),this.associationRequests=new s([],{organization:this.model}),this.associationRequest=new Backbone.Model({},{collection:this.assocationRequests}),this.listenTo(this.associationRequest,"error",this.showError),this.listenTo(this.associationRequest,"request",this.showSpinner),this.listenTo(this.associationRequest,"sync",this.showSuccess)},i.prototype.showError=function(t,e){var n,i;return 403===e.status?n="You do not have permission to invite users to <code>"+this.model.id+"</code>. You must be an administrator in this organization.":(n=null!=(i=e.responseJSON)?i.error:void 0,void 0!==n&&(n=_.escape(n))),this.setView(".message",new r({body:n})).render()},i.prototype.showSpinner=function(){return this.setView(".message",new a).render()},i.prototype.showSuccess=function(t,e){var n;return this.$(".btn:eq(0)").html("Close"),n="An invitation has been sent to the user.",null!=e.warning&&(n+="<br>"+e.warning),this.setView(".message",new l({body:n})).render()},i.prototype.keyPressed=function(t){return t.which!==n.ui.keyCode.ENTER&&this.$(".message").html(""),this.$(".btn:eq(0)").html("Cancel"),0===this.$("input").val().trim().length?this.$(".btn-primary").attr("disabled",!0):this.$(".btn-primary").attr("disabled",!1)},i.prototype.submit=function(t){return t.preventDefault(),this.associationRequest.set({user:this.$("input").val().trim()}),this.associationRequests.create(this.associationRequest)},i}(o)})}.call(this),define("templates/controls/alerts/error",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<div class="alert alert-error alert-block"><h4><i class="icon-exclamation-sign"></i>&nbsp;');var __val__=title;buf.push(escape(null==__val__?"":__val__)),buf.push("</h4>");var __val__=body;buf.push(null==__val__?"":__val__),buf.push("</div>")}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/controls/alerts/error",["require","b","j!controls/alerts/error"],function(e){var n,r,i;return n=e("b"),i=e("j!controls/alerts/error"),r=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.template=i,n.prototype.initialize=function(){var t,e;return null==this.title&&(this.title=null!=(t=this.options.title)?t:"Error"),null!=this.body?this.body:this.body=null!=(e=this.options.body)?e:"An error occurred, please try again."},n.prototype.serialize=function(){return{title:this.title,body:this.body}},n}(n.Layout)})}.call(this),define("templates/controls/modals/extreme_warning_modal",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<div class="modal-header">'),"started"!==state&&buf.push('<i data-dismiss="modal" aria-hidden="true" class="icon-remove"></i>'),buf.push('<h3 id="modal-label"><i class="icon-warning-sign"></i>&nbsp;');var __val__=title;buf.push(escape(null==__val__?"":__val__)),buf.push('</h3></div><div class="modal-subheader">');var __val__=subTitle;if(buf.push(null==__val__?"":__val__),buf.push('</div><div class="modal-body">'),"finished"===state)buf.push("Success!");else if("error"===state){buf.push('<div class="alert alert-error alert-block"><h4><i class="icon-exclamation-sign"></i>&nbsp;Server Error</h4>');var __val__=message;buf.push(null==__val__?"":__val__),buf.push("</div>")}else if("queued"===state||"started"===state){var __val__=logo();buf.push(null==__val__?"":__val__)}else{var __val__=bodyText;buf.push(null==__val__?"":__val__)}buf.push('</div><div class="modal-list"></div><div class="modal-footer"><button'),buf.push(attrs({"data-dismiss":"modal","aria-hidden":"true",disabled:"started"===state,"class":"btn btn-close"},{"data-dismiss":!0,"aria-hidden":!0,disabled:!0})),buf.push(">");var __val__=closeButtonText;if(buf.push(escape(null==__val__?"":__val__)),buf.push("</button>"),""!=commandText){buf.push('<button class="btn btn-warning btn-reset"><i class="icon-warning-sign"></i>&nbsp;');var __val__=commandText;buf.push(escape(null==__val__?"":__val__)),buf.push("</button>")}buf.push("</div>")}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/controls/modals/extreme_warning_modal",["require","views/controls/modals/base","utils/i18n.gettext","j!controls/modals/extreme_warning_modal","underscore"],function(e){var n,r,i,o,s;return r=e("views/controls/modals/base"),i=e("utils/i18n.gettext"),s=e("j!controls/modals/extreme_warning_modal"),o=e("underscore"),n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.template=s,n.prototype.initialize=function(){var t,e,r;return null==this.title&&(this.title=null!=(t=this.options.title)?t:"Warning"),null==this.bodyText&&(this.bodyText=null!=(e=this.options.bodyText)?e:"Are you certain you wish to continue?"),null==this.commandText&&(this.commandText=null!=(r=this.options.commandText)?r:"Delete Forever"),n.__super__.initialize.call(this)},n.prototype.serialize=function(){return o.extend(n.__super__.serialize.apply(this,arguments),{title:this.title,subTitle:this.subTitle,bodyText:this.bodyText,commandText:this.commandText})},n}(r)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/organizations/modals/leave",["require","config","jquery","views/controls/alerts/error","views/controls/modals/extreme_warning_modal","views/controls/spinner"],function(e){var n,r,i,o,s,a;return a=e("config"),n=e("jquery"),r=e("views/controls/alerts/error"),i=e("views/controls/modals/extreme_warning_modal"),s=e("views/controls/spinner"),o=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.className=i.prototype.className+" modal-leave-org",i.prototype.title="Leave Organization",i.prototype.initialize=function(){return null==this.title&&(this.title="Leave "+this.model.id),null==this.subTitle&&(this.subTitle=this.model.id),null==this.bodyText&&(this.bodyText=this.body()),null==this.commandText&&(this.commandText="Leave Organization"),i.__super__.initialize.call(this)},i.prototype.body=function(){return"Are you certain you wish to leave the organization <code>"+this.model.id+"</code>? This action cannot be undone by you, as you would need to be re-invited to the organization to get access."},i.prototype.events={"click .btn-warning":"leaveOrg"},i.prototype.ajaxData=function(){return{}},i.prototype.userText=function(){return"You"},i.prototype.ajaxUrl=function(){return this.model.url()+"/leave"},i.prototype.successEvent=function(){return window.location="/organizations"},i.prototype.leaveOrg=function(){return this.setView(".modal-body",new s).render(),n.ajax({url:this.ajaxUrl(),type:"post",data:this.ajaxData(),success:this.successEvent,error:function(t){return function(e){var n,i,o,s,l;return t.$(".btn-warning").prop("disabled",!0),l={},n=null!=(i=e.responseJSON)?i.failure:void 0,"admins"===n||"billing-admins"===n?l.body=t.userText()+" cannot leave this organization because it would\ncause the group <code>"+n+"</code> to be empty. Please contact\n<a target='_blank' href="+a.support_site_url+">Chef\nsupport</a> if you wish to delete this organization altogether or\nadd a new user to the <code>"+n+"</code> group and try again.":(null!=(o=e.responseJSON)?o.error:void 0)&&(l.body=null!=(s=e.responseJSON)?s.error:void 0),t.setView(".modal-body",new r(l||{})).render()}}(this)})},i}(i)})}.call(this),function(t,e){function n(t,e,n){return[parseFloat(t[0])*(h.test(t[0])?e/100:1),parseFloat(t[1])*(h.test(t[1])?n/100:1)]}function r(e,n){return parseInt(t.css(e,n),10)||0}function i(e){var n=e[0];return 9===n.nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:t.isWindow(n)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:n.preventDefault?{width:0,height:0,offset:{top:n.pageY,left:n.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}t.ui=t.ui||{};var o,s=Math.max,a=Math.abs,l=Math.round,u=/left|center|right/,c=/top|center|bottom/,d=/[\+\-]\d+(\.[\d]+)?%?/,p=/^\w+/,h=/%$/,f=t.fn.position;t.position={scrollbarWidth:function(){if(o!==e)return o;var n,r,i=t("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),s=i.children()[0];return t("body").append(i),n=s.offsetWidth,i.css("overflow","scroll"),r=s.offsetWidth,n===r&&(r=i[0].clientWidth),i.remove(),o=n-r},getScrollInfo:function(e){var n=e.isWindow?"":e.element.css("overflow-x"),r=e.isWindow?"":e.element.css("overflow-y"),i="scroll"===n||"auto"===n&&e.width<e.element[0].scrollWidth,o="scroll"===r||"auto"===r&&e.height<e.element[0].scrollHeight;return{width:o?t.position.scrollbarWidth():0,height:i?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var n=t(e||window),r=t.isWindow(n[0]);return{element:n,isWindow:r,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:r?n.width():n.outerWidth(),height:r?n.height():n.outerHeight()}}},t.fn.position=function(e){if(!e||!e.of)return f.apply(this,arguments);e=t.extend({},e);var o,h,g,m,v,y,b=t(e.of),_=t.position.getWithinInfo(e.within),w=t.position.getScrollInfo(_),x=(e.collision||"flip").split(" "),k={};return y=i(b),b[0].preventDefault&&(e.at="left top"),h=y.width,g=y.height,m=y.offset,v=t.extend({},m),t.each(["my","at"],function(){var t,n,r=(e[this]||"").split(" ");1===r.length&&(r=u.test(r[0])?r.concat(["center"]):c.test(r[0])?["center"].concat(r):["center","center"]),r[0]=u.test(r[0])?r[0]:"center",r[1]=c.test(r[1])?r[1]:"center",t=d.exec(r[0]),n=d.exec(r[1]),k[this]=[t?t[0]:0,n?n[0]:0],e[this]=[p.exec(r[0])[0],p.exec(r[1])[0]]}),1===x.length&&(x[1]=x[0]),"right"===e.at[0]?v.left+=h:"center"===e.at[0]&&(v.left+=h/2),"bottom"===e.at[1]?v.top+=g:"center"===e.at[1]&&(v.top+=g/2),o=n(k.at,h,g),v.left+=o[0],v.top+=o[1],this.each(function(){var i,u,c=t(this),d=c.outerWidth(),p=c.outerHeight(),f=r(this,"marginLeft"),y=r(this,"marginTop"),C=d+f+r(this,"marginRight")+w.width,j=p+y+r(this,"marginBottom")+w.height,M=t.extend({},v),S=n(k.my,c.outerWidth(),c.outerHeight());"right"===e.my[0]?M.left-=d:"center"===e.my[0]&&(M.left-=d/2),"bottom"===e.my[1]?M.top-=p:"center"===e.my[1]&&(M.top-=p/2),M.left+=S[0],M.top+=S[1],t.support.offsetFractions||(M.left=l(M.left),M.top=l(M.top)),i={marginLeft:f,marginTop:y},t.each(["left","top"],function(n,r){t.ui.position[x[n]]&&t.ui.position[x[n]][r](M,{targetWidth:h,targetHeight:g,elemWidth:d,elemHeight:p,collisionPosition:i,collisionWidth:C,collisionHeight:j,offset:[o[0]+S[0],o[1]+S[1]],my:e.my,at:e.at,within:_,elem:c})}),e.using&&(u=function(t){var n=m.left-M.left,r=n+h-d,i=m.top-M.top,o=i+g-p,l={target:{element:b,left:m.left,top:m.top,width:h,height:g},element:{element:c,left:M.left,top:M.top,width:d,height:p},horizontal:0>r?"left":n>0?"right":"center",vertical:0>o?"top":i>0?"bottom":"middle"};d>h&&a(n+r)<h&&(l.horizontal="center"),p>g&&a(i+o)<g&&(l.vertical="middle"),l.important=s(a(n),a(r))>s(a(i),a(o))?"horizontal":"vertical",e.using.call(this,t,l)}),c.offset(t.extend(M,{using:u}))})},t.ui.position={fit:{left:function(t,e){var n,r=e.within,i=r.isWindow?r.scrollLeft:r.offset.left,o=r.width,a=t.left-e.collisionPosition.marginLeft,l=i-a,u=a+e.collisionWidth-o-i;e.collisionWidth>o?l>0&&0>=u?(n=t.left+l+e.collisionWidth-o-i,t.left+=l-n):t.left=u>0&&0>=l?i:l>u?i+o-e.collisionWidth:i:l>0?t.left+=l:u>0?t.left-=u:t.left=s(t.left-a,t.left)},top:function(t,e){var n,r=e.within,i=r.isWindow?r.scrollTop:r.offset.top,o=e.within.height,a=t.top-e.collisionPosition.marginTop,l=i-a,u=a+e.collisionHeight-o-i;e.collisionHeight>o?l>0&&0>=u?(n=t.top+l+e.collisionHeight-o-i,t.top+=l-n):t.top=u>0&&0>=l?i:l>u?i+o-e.collisionHeight:i:l>0?t.top+=l:u>0?t.top-=u:t.top=s(t.top-a,t.top)}},flip:{left:function(t,e){var n,r,i=e.within,o=i.offset.left+i.scrollLeft,s=i.width,l=i.isWindow?i.scrollLeft:i.offset.left,u=t.left-e.collisionPosition.marginLeft,c=u-l,d=u+e.collisionWidth-s-l,p="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,h="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,f=-2*e.offset[0];0>c?(n=t.left+p+h+f+e.collisionWidth-s-o,(0>n||n<a(c))&&(t.left+=p+h+f)):d>0&&(r=t.left-e.collisionPosition.marginLeft+p+h+f-l,(r>0||a(r)<d)&&(t.left+=p+h+f))},top:function(t,e){var n,r,i=e.within,o=i.offset.top+i.scrollTop,s=i.height,l=i.isWindow?i.scrollTop:i.offset.top,u=t.top-e.collisionPosition.marginTop,c=u-l,d=u+e.collisionHeight-s-l,p="top"===e.my[1],h=p?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,f="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,g=-2*e.offset[1];0>c?(r=t.top+h+f+g+e.collisionHeight-s-o,t.top+h+f+g>c&&(0>r||r<a(c))&&(t.top+=h+f+g)):d>0&&(n=t.top-e.collisionPosition.marginTop+h+f+g-l,t.top+h+f+g>d&&(n>0||a(n)<d)&&(t.top+=h+f+g))}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}},function(){var e,n,r,i,o,s=document.getElementsByTagName("body")[0],a=document.createElement("div");e=document.createElement(s?"div":"body"),r={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},s&&t.extend(r,{position:"absolute",left:"-1000px",top:"-1000px"});for(o in r)e.style[o]=r[o];e.appendChild(a),n=s||document.documentElement,n.insertBefore(e,n.firstChild),a.style.cssText="position: absolute; left: 10.7432222px;",i=t(a).offset().left,t.support.offsetFractions=i>10&&11>i,e.innerHTML="",n.removeChild(e)}()}(jQuery),define("jquery.ui/position",["jquery"],function(t){return function(){var e;return e||t.jQuery.fn.position}}(this)),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/controls/semimodal",["require","jquery","b","underscore","jquery.ui/position"],function(e){var n,r,i,o;return n=e("jquery"),r=e("b"),o=e("underscore"),e("jquery.ui/position"),i=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype.pulloutClassName="",r.prototype.events={"click .semimodal-toggle":"clickToggle"},r.prototype.initialize=function(){var t;return this.align=null!=(t=this.options.align)?t:"right",this.isOpen=!1,o.bindAll(this,"close","clickPullout"),n(window).on("resize",o.bind(this.setMaxHeight,this))},r.prototype.cleanupEvents=function(){return n(document).off("click.semimodal",this.close),n(window).off("resize",o.bind(this.setMaxHeight,this))},r.prototype.cleanup=function(){var t;return this.cleanupEvents(),null!=(t=this.$pullout)&&t.remove(),this.$pullout=void 0},r.prototype.serialize=function(){return{pulloutClassName:this.pulloutClassName}},r.prototype.afterRender=function(){var t;return(t=this.$(".semimodal-pullout")).length?(this.$pullout=t.data("semimodal",this).appendTo("body").css("top","-1000000px").on("click",this.clickPullout).show(),this.trigger("pullout")):void 0},r.prototype.toggle=function(){return this.trigger("toggle"),this.isOpen?this.close():this.open()},r.prototype.open=function(){return n(".semimodal-pullout").each(function(t,e){var r;return(r=n(e).data("semimodal"))&&r!==this?r.close():void 0}),this.$pullout&&!this.isOpen&&(this.$pullout.show(),this.positionAt(this.$el),n(document).on("click.dropdown",this.close),this.trigger("open"),this.isOpen=!0),this},r.prototype.close=function(){return this.$pullout&&this.isOpen&&(this.$pullout.hide(),this.cleanupEvents(),this.trigger("close"),this.isOpen=!1),this},r.prototype.clickToggle=function(t){return t.stopPropagation(),t.preventDefault(),this.toggle()},r.prototype.clickPullout=function(t){return t.stopPropagation(),t.preventDefault()},r.prototype.positionAt=function(t){return this.$pullout.position({my:this.align+" top",at:this.align+" bottom",of:t,collision:"none"}),this.$pullout.css("top",t.offset().top+t.height()),this.setMaxHeight()},r.prototype.setMaxHeight=function(){var t;return null!=(t=this.$pullout)?t.css("maxHeight",n(window).height()-this.$pullout.offset().top-20+"px"):void 0},r}(r.Layout)})}.call(this),define("templates/controls/dropdown",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<a class="dropdown-toggle">'),labelIcon&&(buf.push("<i"),buf.push(attrs({"class":"dropdown-toggle-icon icon-"+labelIcon},{"class":!0})),buf.push("></i>")),buf.push('<span class="dropdown-toggle-label">');var __val__=label;buf.push(escape(null==__val__?"":__val__)),buf.push('</span><i class="icon-caret-down"></i></a><ul'),buf.push(attrs({role:"menu","class":"dropdown-menu semimodal-pullout "+pulloutClassName},{"class":!0,role:!0})),buf.push(">"),function(){if("number"==typeof items.length)for(var t=0,e=items.length;e>t;t++){var n=items[t];if("divider"==n||"divider"==n.id)buf.push('<li class="divider"></li>');else{buf.push("<li"),buf.push(attrs({"class":n.id},{"class":!0})),buf.push(">");var r="function"==typeof n.disabled_when&&n.disabled_when();buf.push("<a"),buf.push(attrs({tabindex:"-1","data-action":n.id,"class":r?"disabled":""},{tabindex:!0,"data-action":!0,"class":!0})),buf.push(">");var i=n.label;buf.push(escape(null==i?"":i)),buf.push("</a></li>")}}else for(var t in items){var n=items[t];if("divider"==n||"divider"==n.id)buf.push('<li class="divider"></li>');else{buf.push("<li"),buf.push(attrs({"class":n.id},{"class":!0})),buf.push(">");var r="function"==typeof n.disabled_when&&n.disabled_when();buf.push("<a"),buf.push(attrs({tabindex:"-1","data-action":n.id,"class":r?"disabled":""},{tabindex:!0,"data-action":!0,"class":!0})),buf.push(">");var i=n.label;buf.push(escape(null==i?"":i)),buf.push("</a></li>")}}}.call(this),buf.push("</ul>")}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/controls/dropdown",["views/controls/semimodal","jquery","underscore","j!controls/dropdown","jquery.ui/position"],function(e,n,r,i){var o;return o=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.className="dropdown",o.prototype.template=i,o.prototype.events={"click .dropdown-toggle":"clickToggle"},o.prototype.items=[],o.prototype.initialize=function(){var t;return o.__super__.initialize.apply(this,arguments),this.label=this.options.label,this.items=null!=(t=this.options.items)?t:this.items,this.keyboardSelection=null,r.bindAll(this,"triggerEvent","updateKeyboardSelection","clearKeyboardSelection"),this.on("pullout",this.attachPulloutEvents,this),this.on("open",this.attachGlobalEvents,this),this.on("close",this.clearKeyboardSelection,this)},o.prototype.cleanupEvents=function(){return o.__super__.cleanupEvents.apply(this,arguments),n(document).off("keydown",this.updateKeyboardSelection)},o.prototype.serialize=function(){return r.extend(o.__super__.serialize.apply(this,arguments),{label:this.label,labelIcon:this.options.labelIcon,items:this.items})},o.prototype.attachPulloutEvents=function(){return this.$pullout.on("click","a",this.triggerEvent).on("mousemove",this.clearKeyboardSelection)},o.prototype.attachGlobalEvents=function(){return n(document).on("keydown",this.updateKeyboardSelection)},o.prototype.triggerEvent=function(t){var e,r;return t.stopPropagation(),t.preventDefault(),e=n(t.currentTarget),r=e.data("action"),e.hasClass("disabled")?void 0:(this.trigger("action:"+r),this.trigger("action",r),this.close())},o.prototype.updateKeyboardSelection=function(t){var e,n,i,o,s,a,l;if(this.$pullout&&this.isOpen)switch(t.which){case 27:return this.close();case 38:case 40:return s=this.numOptions(),o=38===t.which,l=o?-1:1,null!=this.keyboardSelection?this.keyboardSelection+=l:this.keyboardSelection=(i=this.hoverSelection())?i+l:o?-1:0,this.keyboardSelection%=s,this.keyboardSelection<0&&(this.keyboardSelection+=s),this.$pullout.addClass("keyboard-nav").find("li").removeClass("active").find("a").eq(this.keyboardSelection).parent("li").addClass("active");case 13:case 32:return n=null!=(a=this.keyboardSelection)?a:this.hoverSelection(),null!=n&&(e=r.find(this.items,function(t){return"divider"!==t&&"divider"!==t.id&&(n-=1),0>n}),this.trigger("action:"+e.id),this.trigger("action",e.id)),this.close()}},o.prototype.clearKeyboardSelection=function(){var t;return null!=this.keyboardSelection?(this.keyboardSelection=null,null!=(t=this.$pullout)?t.removeClass("keyboard-nav").find("li.active").removeClass("active"):void 0):void 0},o.prototype.hoverSelection=function(){var t;return t=this._curHover(),t.length?t.prevAll("li").not(".divider").length:void 0},o.prototype.numOptions=function(){var t,e,n,r,i;for(t=0,i=this.items,e=0,r=i.length;r>e;e++)n=i[e],"divider"!==n&&"divider"!==n.id&&(t+=1);return t},o.prototype._curHover=function(){return this.$pullout.find("li:hover")},o}(e)})}.call(this),define("templates/controls/empty",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<div class="alert alert-info empty"><i class="icon-info-sign"></i>&nbsp;There are no items to display.</div>')}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/controls/empty",["require","underscore","b","j!controls/empty"],function(e){var n,r,i,o;return i=e("underscore"),n=e("b"),o=e("j!controls/empty"),r=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.template=o,n}(n.Layout)})}.call(this),function(t){t.fn.drag=function(e,n,r){var i="string"==typeof e?e:"",o=t.isFunction(e)?e:t.isFunction(n)?n:null;return 0!==i.indexOf("drag")&&(i="drag"+i),r=(e==o?n:r)||{},o?this.bind(i,r,o):this.trigger(i)};var e=t.event,n=e.special,r=n.drag={defaults:{which:1,distance:0,not:":input",handle:null,relative:!1,drop:!0,click:!1},datakey:"dragdata",noBubble:!0,add:function(e){var n=t.data(this,r.datakey),i=e.data||{};n.related+=1,t.each(r.defaults,function(t){void 0!==i[t]&&(n[t]=i[t])})},remove:function(){t.data(this,r.datakey).related-=1},setup:function(){if(!t.data(this,r.datakey)){var n=t.extend({related:0},r.defaults);t.data(this,r.datakey,n),e.add(this,"touchstart mousedown",r.init,n),this.attachEvent&&this.attachEvent("ondragstart",r.dontstart)}},teardown:function(){var n=t.data(this,r.datakey)||{};n.related||(t.removeData(this,r.datakey),e.remove(this,"touchstart mousedown",r.init),r.textselect(!0),this.detachEvent&&this.detachEvent("ondragstart",r.dontstart))},init:function(i){if(!r.touched){var o,s=i.data;if(!(0!=i.which&&s.which>0&&i.which!=s.which||t(i.target).is(s.not)||s.handle&&!t(i.target).closest(s.handle,i.currentTarget).length||(r.touched="touchstart"==i.type?this:null,s.propagates=1,s.mousedown=this,s.interactions=[r.interaction(this,s)],s.target=i.target,s.pageX=i.pageX,s.pageY=i.pageY,s.dragging=null,o=r.hijack(i,"draginit",s),!s.propagates)))return o=r.flatten(o),o&&o.length&&(s.interactions=[],t.each(o,function(){s.interactions.push(r.interaction(this,s))})),s.propagates=s.interactions.length,s.drop!==!1&&n.drop&&n.drop.handler(i,s),r.textselect(!1),r.touched?e.add(r.touched,"touchmove touchend",r.handler,s):e.add(document,"mousemove mouseup",r.handler,s),!r.touched||s.live?!1:void 0}},interaction:function(e,n){var i=t(e)[n.relative?"position":"offset"]()||{top:0,left:0};return{drag:e,callback:new r.callback,droppable:[],offset:i}},handler:function(i){var o=i.data;switch(i.type){case!o.dragging&&"touchmove":i.preventDefault();case!o.dragging&&"mousemove":if(Math.pow(i.pageX-o.pageX,2)+Math.pow(i.pageY-o.pageY,2)<Math.pow(o.distance,2))break;i.target=o.target,r.hijack(i,"dragstart",o),o.propagates&&(o.dragging=!0);case"touchmove":i.preventDefault();case"mousemove":if(o.dragging){if(r.hijack(i,"drag",o),o.propagates){o.drop!==!1&&n.drop&&n.drop.handler(i,o);break}i.type="mouseup"}case"touchend":case"mouseup":default:r.touched?e.remove(r.touched,"touchmove touchend",r.handler):e.remove(document,"mousemove mouseup",r.handler),o.dragging&&(o.drop!==!1&&n.drop&&n.drop.handler(i,o),r.hijack(i,"dragend",o)),r.textselect(!0),o.click===!1&&o.dragging&&t.data(o.mousedown,"suppress.click",(new Date).getTime()+5),o.dragging=r.touched=!1}},hijack:function(n,i,o,s,a){if(o){var l,u,c,d={event:n.originalEvent,type:n.type},p=i.indexOf("drop")?"drag":"drop",h=s||0,f=isNaN(s)?o.interactions.length:s;n.type=i,n.originalEvent=null,o.results=[];do if(u=o.interactions[h]){if("dragend"!==i&&u.cancelled)continue;c=r.properties(n,o,u),u.results=[],t(a||u[p]||o.droppable).each(function(s,a){return c.target=a,n.isPropagationStopped=function(){return!1},l=a?e.dispatch.call(a,n,c):null,l===!1?("drag"==p&&(u.cancelled=!0,o.propagates-=1),"drop"==i&&(u[p][s]=null)):"dropinit"==i&&u.droppable.push(r.element(l)||a),"dragstart"==i&&(u.proxy=t(r.element(l)||u.drag)[0]),u.results.push(l),delete n.result,"dropinit"!==i?l:void 0}),o.results[h]=r.flatten(u.results),"dropinit"==i&&(u.droppable=r.flatten(u.droppable)),"dragstart"!=i||u.cancelled||c.update()}while(++h<f);return n.type=d.type,n.originalEvent=d.event,r.flatten(o.results)}},properties:function(t,e,n){var i=n.callback;return i.drag=n.drag,i.proxy=n.proxy||n.drag,i.startX=e.pageX,i.startY=e.pageY,i.deltaX=t.pageX-e.pageX,i.deltaY=t.pageY-e.pageY,i.originalX=n.offset.left,i.originalY=n.offset.top,i.offsetX=i.originalX+i.deltaX,i.offsetY=i.originalY+i.deltaY,i.drop=r.flatten((n.drop||[]).slice()),i.available=r.flatten((n.droppable||[]).slice()),i},element:function(t){return t&&(t.jquery||1==t.nodeType)?t:void 0},flatten:function(e){return t.map(e,function(e){return e&&e.jquery?t.makeArray(e):e&&e.length?r.flatten(e):e})},textselect:function(e){t(document)[e?"unbind":"bind"]("selectstart",r.dontstart).css("MozUserSelect",e?"":"none"),document.unselectable=e?"off":"on"},dontstart:function(){return!1},callback:function(){}};r.callback.prototype={update:function(){n.drop&&this.available.length&&t.each(this.available,function(t){n.drop.locate(this,t)})}};var i=e.dispatch;e.dispatch=function(e){return t.data(this,"suppress."+e.type)-(new Date).getTime()>0?void t.removeData(this,"suppress."+e.type):i.apply(this,arguments)};var o=e.fixHooks.touchstart=e.fixHooks.touchmove=e.fixHooks.touchend=e.fixHooks.touchcancel={props:"clientX clientY pageX pageY screenX screenY".split(" "),filter:function(e,n){if(n){var r=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0]||null;r&&t.each(o.props,function(t,n){e[n]=r[n]})}return e}};n.draginit=n.dragstart=n.dragend=r}(jQuery),define("jquery.event.drag",["jquery"],function(t){return function(){var e;return e||t.jQuery.fn.drag}}(this)),"undefined"==typeof jQuery)throw"SlickGrid requires jquery module to be loaded";if(!jQuery.fn.drag)throw"SlickGrid requires jquery.event.drag module to be loaded";if("undefined"==typeof Slick)throw"slick.core.js not loaded";!function($){function SlickGrid(container,data,columns,options){function init(){if($container=$(container),$container.length<1)throw new Error("SlickGrid requires a valid container, "+container+" does not exist in the DOM.");maxSupportedCssHeight=maxSupportedCssHeight||getMaxSupportedCssHeight(),scrollbarDimensions=scrollbarDimensions||measureScrollbar(),options=$.extend({},defaults,options),validateAndEnforceOptions(),columnDefaults.width=options.defaultColumnWidth,columnsById={};for(var t=0;t<columns.length;t++){var e=columns[t]=$.extend({},columnDefaults,columns[t]);columnsById[e.id]=t,e.minWidth&&e.width<e.minWidth&&(e.width=e.minWidth),e.maxWidth&&e.width>e.maxWidth&&(e.width=e.maxWidth)}if(options.enableColumnReorder&&!$.fn.sortable)throw new Error("SlickGrid's 'enableColumnReorder = true' option requires jquery-ui.sortable module to be loaded");editController={commitCurrentEdit:commitCurrentEdit,cancelCurrentEdit:cancelCurrentEdit},$container.empty().css("overflow","hidden").css("outline",0).addClass(uid).addClass("ui-widget"),/relative|absolute|fixed/.test($container.css("position"))||$container.css("position","relative"),$focusSink=$("<div tabIndex='0' hideFocus style='position:fixed;width:0;height:0;top:0;left:0;outline:0;'></div>").appendTo($container),$headerScroller=$("<div class='slick-header ui-state-default' style='overflow:hidden;position:relative;' />").appendTo($container),$headers=$("<div class='slick-header-columns' style='left:-1000px' />").appendTo($headerScroller),$headers.width(getHeadersWidth()),$headerRowScroller=$("<div class='slick-headerrow ui-state-default' style='overflow:hidden;position:relative;' />").appendTo($container),$headerRow=$("<div class='slick-headerrow-columns' />").appendTo($headerRowScroller),$headerRowSpacer=$("<div style='display:block;height:1px;position:absolute;top:0;left:0;'></div>").css("width",getCanvasWidth()+scrollbarDimensions.width+"px").appendTo($headerRowScroller),$topPanelScroller=$("<div class='slick-top-panel-scroller ui-state-default' style='overflow:hidden;position:relative;' />").appendTo($container),$topPanel=$("<div class='slick-top-panel' style='width:10000px' />").appendTo($topPanelScroller),options.showTopPanel||$topPanelScroller.hide(),options.showHeaderRow||$headerRowScroller.hide(),$viewport=$("<div class='slick-viewport' style='width:100%;overflow:auto;outline:0;position:relative;;'>").appendTo($container),$viewport.css("overflow-y",options.autoHeight?"hidden":"auto"),$canvas=$("<div class='grid-canvas' />").appendTo($viewport),$focusSink2=$focusSink.clone().appendTo($container),options.explicitInitialization||finishInitialization()}function finishInitialization(){initialized||(initialized=!0,viewportW=parseFloat($.css($container[0],"width",!0)),measureCellPaddingAndBorder(),disableSelection($headers),options.enableTextSelectionOnCells||$viewport.bind("selectstart.ui",function(t){return $(t.target).is("input,textarea")}),updateColumnCaches(),createColumnHeaders(),setupColumnSort(),createCssRules(),resizeCanvas(),bindAncestorScrollEvents(),$container.bind("resize.slickgrid",resizeCanvas),$viewport.bind("scroll",handleScroll),$headerScroller.bind("contextmenu",handleHeaderContextMenu).bind("click",handleHeaderClick).delegate(".slick-header-column","mouseenter",handleHeaderMouseEnter).delegate(".slick-header-column","mouseleave",handleHeaderMouseLeave),$headerRowScroller.bind("scroll",handleHeaderRowScroll),$focusSink.add($focusSink2).bind("keydown",handleKeyDown),$canvas.bind("keydown",handleKeyDown).bind("click",handleClick).bind("dblclick",handleDblClick).bind("contextmenu",handleContextMenu).bind("draginit",handleDragInit).bind("dragstart",{distance:3},handleDragStart).bind("drag",handleDrag).bind("dragend",handleDragEnd).delegate(".slick-cell","mouseenter",handleMouseEnter).delegate(".slick-cell","mouseleave",handleMouseLeave))
}function registerPlugin(t){plugins.unshift(t),t.init(self)}function unregisterPlugin(t){for(var e=plugins.length;e>=0;e--)if(plugins[e]===t){plugins[e].destroy&&plugins[e].destroy(),plugins.splice(e,1);break}}function setSelectionModel(t){selectionModel&&(selectionModel.onSelectedRangesChanged.unsubscribe(handleSelectedRangesChanged),selectionModel.destroy&&selectionModel.destroy()),selectionModel=t,selectionModel&&(selectionModel.init(self),selectionModel.onSelectedRangesChanged.subscribe(handleSelectedRangesChanged))}function getSelectionModel(){return selectionModel}function getCanvasNode(){return $canvas[0]}function measureScrollbar(){var t=$("<div style='position:absolute; top:-10000px; left:-10000px; width:100px; height:100px; overflow:scroll;'></div>").appendTo("body"),e={width:t.width()-t[0].clientWidth,height:t.height()-t[0].clientHeight};return t.remove(),e}function getHeadersWidth(){for(var t=0,e=0,n=columns.length;n>e;e++){var r=columns[e].width;t+=r}return t+=scrollbarDimensions.width,Math.max(t,viewportW)+1e3}function getCanvasWidth(){for(var t=viewportHasVScroll?viewportW-scrollbarDimensions.width:viewportW,e=0,n=columns.length;n--;)e+=columns[n].width;return options.fullWidthRows?Math.max(e,t):e}function updateCanvasWidth(t){var e=canvasWidth;canvasWidth=getCanvasWidth(),canvasWidth!=e&&($canvas.width(canvasWidth),$headerRow.width(canvasWidth),$headers.width(getHeadersWidth()),viewportHasHScroll=canvasWidth>viewportW-scrollbarDimensions.width),$headerRowSpacer.width(canvasWidth+(viewportHasVScroll?scrollbarDimensions.width:0)),(canvasWidth!=e||t)&&applyColumnWidths()}function disableSelection(t){t&&t.jquery&&t.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function getMaxSupportedCssHeight(){for(var t=1e6,e=navigator.userAgent.toLowerCase().match(/firefox/)?6e6:1e9,n=$("<div style='display:none' />").appendTo(document.body);;){var r=2*t;if(n.css("height",r),r>e||n.height()!==r)break;t=r}return n.remove(),t}function bindAncestorScrollEvents(){for(var t=$canvas[0];(t=t.parentNode)!=document.body&&null!=t;)if(t==$viewport[0]||t.scrollWidth!=t.clientWidth||t.scrollHeight!=t.clientHeight){var e=$(t);$boundAncestors=$boundAncestors?$boundAncestors.add(e):e,e.bind("scroll."+uid,handleActiveCellPositionChange)}}function unbindAncestorScrollEvents(){$boundAncestors&&($boundAncestors.unbind("scroll."+uid),$boundAncestors=null)}function updateColumnHeader(t,e,n){if(initialized){var r=getColumnIndex(t);if(null!=r){var i=columns[r],o=$headers.children().eq(r);o&&(void 0!==e&&(columns[r].name=e),void 0!==n&&(columns[r].toolTip=n),trigger(self.onBeforeHeaderCellDestroy,{node:o[0],column:i}),o.attr("title",n||"").children().eq(0).html(e),trigger(self.onHeaderCellRendered,{node:o[0],column:i}))}}}function getHeaderRow(){return $headerRow[0]}function getHeaderRowColumn(t){var e=getColumnIndex(t),n=$headerRow.children().eq(e);return n&&n[0]}function createColumnHeaders(){function t(){$(this).addClass("ui-state-hover")}function e(){$(this).removeClass("ui-state-hover")}$headers.find(".slick-header-column").each(function(){var t=$(this).data("column");t&&trigger(self.onBeforeHeaderCellDestroy,{node:this,column:t})}),$headers.empty(),$headers.width(getHeadersWidth()),$headerRow.find(".slick-headerrow-column").each(function(){var t=$(this).data("column");t&&trigger(self.onBeforeHeaderRowCellDestroy,{node:this,column:t})}),$headerRow.empty();for(var n=0;n<columns.length;n++){var r=columns[n],i=$("<div class='ui-state-default slick-header-column' id='"+uid+r.id+"' />").html("<span class='slick-column-name'>"+r.name+"</span>").width(r.width-headerColumnWidthDiff).attr("title",r.toolTip||"").data("column",r).addClass(r.headerCssClass||"").appendTo($headers);if((options.enableColumnReorder||r.sortable)&&i.on("mouseenter",t).on("mouseleave",e),r.sortable&&(i.addClass("slick-header-sortable"),i.append("<span class='slick-sort-indicator' />")),trigger(self.onHeaderCellRendered,{node:i[0],column:r}),options.showHeaderRow){var o=$("<div class='ui-state-default slick-headerrow-column l"+n+" r"+n+"'></div>").data("column",r).appendTo($headerRow);trigger(self.onHeaderRowCellRendered,{node:o[0],column:r})}}setSortColumns(sortColumns),setupColumnResize(),options.enableColumnReorder&&setupColumnReorder()}function setupColumnSort(){$headers.click(function(t){if(t.metaKey=t.metaKey||t.ctrlKey,!$(t.target).hasClass("slick-resizable-handle")){var e=$(t.target).closest(".slick-header-column");if(e.length){var n=e.data("column");if(n.sortable){if(!getEditorLock().commitCurrentEdit())return;for(var r=null,i=0;i<sortColumns.length;i++)if(sortColumns[i].columnId==n.id){r=sortColumns[i],r.sortAsc=!r.sortAsc;break}t.metaKey&&options.multiColumnSort?r&&sortColumns.splice(i,1):((t.shiftKey||t.metaKey)&&options.multiColumnSort||(sortColumns=[]),r?0==sortColumns.length&&sortColumns.push(r):(r={columnId:n.id,sortAsc:n.defaultSortAsc},sortColumns.push(r))),setSortColumns(sortColumns),options.multiColumnSort?trigger(self.onSort,{multiColumnSort:!0,sortCols:$.map(sortColumns,function(t){return{sortCol:columns[getColumnIndex(t.columnId)],sortAsc:t.sortAsc}})},t):trigger(self.onSort,{multiColumnSort:!1,sortCol:n,sortAsc:r.sortAsc},t)}}}})}function setupColumnReorder(){$headers.filter(":ui-sortable").sortable("destroy"),$headers.sortable({containment:"parent",distance:3,axis:"x",cursor:"default",tolerance:"intersection",helper:"clone",placeholder:"slick-sortable-placeholder ui-state-default slick-header-column",forcePlaceholderSize:!0,start:function(t,e){$(e.helper).addClass("slick-header-column-active")},beforeStop:function(t,e){$(e.helper).removeClass("slick-header-column-active")},stop:function(t){if(!getEditorLock().commitCurrentEdit())return void $(this).sortable("cancel");for(var e=$headers.sortable("toArray"),n=[],r=0;r<e.length;r++)n.push(columns[getColumnIndex(e[r].replace(uid,""))]);setColumns(n),trigger(self.onColumnsReordered,{}),t.stopPropagation(),setupColumnResize()}})}function setupColumnResize(){var t,e,n,r,i,o,s,a,l;i=$headers.children(),i.find(".slick-resizable-handle").remove(),i.each(function(t){columns[t].resizable&&(void 0===a&&(a=t),l=t)}),void 0!==a&&i.each(function(u,c){a>u||options.forceFitColumns&&u>=l||(t=$(c),$("<div class='slick-resizable-handle' />").appendTo(c).bind("dragstart",function(t){if(!getEditorLock().commitCurrentEdit())return!1;r=t.pageX,$(this).parent().addClass("slick-header-column-active");var a=null,l=null;if(i.each(function(t,e){columns[t].previousWidth=$(e).outerWidth()}),options.forceFitColumns)for(a=0,l=0,e=u+1;e<i.length;e++)n=columns[e],n.resizable&&(null!==l&&(n.maxWidth?l+=n.maxWidth-n.previousWidth:l=null),a+=n.previousWidth-Math.max(n.minWidth||0,absoluteColumnMinWidth));var c=0,d=0;for(e=0;u>=e;e++)n=columns[e],n.resizable&&(null!==d&&(n.maxWidth?d+=n.maxWidth-n.previousWidth:d=null),c+=n.previousWidth-Math.max(n.minWidth||0,absoluteColumnMinWidth));null===a&&(a=1e5),null===c&&(c=1e5),null===l&&(l=1e5),null===d&&(d=1e5),s=r+Math.min(a,d),o=r-Math.min(c,l)}).bind("drag",function(t){var a,l,c=Math.min(s,Math.max(o,t.pageX))-r;if(0>c){for(l=c,e=u;e>=0;e--)n=columns[e],n.resizable&&(a=Math.max(n.minWidth||0,absoluteColumnMinWidth),l&&n.previousWidth+l<a?(l+=n.previousWidth-a,n.width=a):(n.width=n.previousWidth+l,l=0));if(options.forceFitColumns)for(l=-c,e=u+1;e<i.length;e++)n=columns[e],n.resizable&&(l&&n.maxWidth&&n.maxWidth-n.previousWidth<l?(l-=n.maxWidth-n.previousWidth,n.width=n.maxWidth):(n.width=n.previousWidth+l,l=0))}else{for(l=c,e=u;e>=0;e--)n=columns[e],n.resizable&&(l&&n.maxWidth&&n.maxWidth-n.previousWidth<l?(l-=n.maxWidth-n.previousWidth,n.width=n.maxWidth):(n.width=n.previousWidth+l,l=0));if(options.forceFitColumns)for(l=-c,e=u+1;e<i.length;e++)n=columns[e],n.resizable&&(a=Math.max(n.minWidth||0,absoluteColumnMinWidth),l&&n.previousWidth+l<a?(l+=n.previousWidth-a,n.width=a):(n.width=n.previousWidth+l,l=0))}applyColumnHeaderWidths(),options.syncColumnCellResize&&applyColumnWidths()}).bind("dragend",function(){var t;for($(this).parent().removeClass("slick-header-column-active"),e=0;e<i.length;e++)n=columns[e],t=$(i[e]).outerWidth(),n.previousWidth!==t&&n.rerenderOnResize&&invalidateAllRows();updateCanvasWidth(!0),render(),trigger(self.onColumnsResized,{})}))})}function getVBoxDelta(t){var e=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],n=0;return $.each(e,function(e,r){n+=parseFloat(t.css(r))||0}),n}function measureCellPaddingAndBorder(){var t,e=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],n=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"];t=$("<div class='ui-state-default slick-header-column' style='visibility:hidden'>-</div>").appendTo($headers),headerColumnWidthDiff=headerColumnHeightDiff=0,$.each(e,function(e,n){headerColumnWidthDiff+=parseFloat(t.css(n))||0}),$.each(n,function(e,n){headerColumnHeightDiff+=parseFloat(t.css(n))||0}),t.remove();var r=$("<div class='slick-row' />").appendTo($canvas);t=$("<div class='slick-cell' id='' style='visibility:hidden'>-</div>").appendTo(r),cellWidthDiff=cellHeightDiff=0,$.each(e,function(e,n){cellWidthDiff+=parseFloat(t.css(n))||0}),$.each(n,function(e,n){cellHeightDiff+=parseFloat(t.css(n))||0}),r.remove(),absoluteColumnMinWidth=Math.max(headerColumnWidthDiff,cellWidthDiff)}function createCssRules(){$style=$("<style type='text/css' rel='stylesheet' />").appendTo($("head"));for(var t=options.rowHeight-cellHeightDiff,e=["."+uid+" .slick-header-column { left: 1000px; }","."+uid+" .slick-top-panel { height:"+options.topPanelHeight+"px; }","."+uid+" .slick-headerrow-columns { height:"+options.headerRowHeight+"px; }","."+uid+" .slick-cell { height:"+t+"px; }","."+uid+" .slick-row { height:"+options.rowHeight+"px; }"],n=0;n<columns.length;n++)e.push("."+uid+" .l"+n+" { }"),e.push("."+uid+" .r"+n+" { }");$style[0].styleSheet?$style[0].styleSheet.cssText=e.join(" "):$style[0].appendChild(document.createTextNode(e.join(" ")))}function getColumnCssRules(t){if(!stylesheet){for(var e=document.styleSheets,n=0;n<e.length;n++)if((e[n].ownerNode||e[n].owningElement)==$style[0]){stylesheet=e[n];break}if(!stylesheet)throw new Error("Cannot find stylesheet.");columnCssRulesL=[],columnCssRulesR=[];for(var r,i,o=stylesheet.cssRules||stylesheet.rules,n=0;n<o.length;n++){var s=o[n].selectorText;(r=/\.l\d+/.exec(s))?(i=parseInt(r[0].substr(2,r[0].length-2),10),columnCssRulesL[i]=o[n]):(r=/\.r\d+/.exec(s))&&(i=parseInt(r[0].substr(2,r[0].length-2),10),columnCssRulesR[i]=o[n])}}return{left:columnCssRulesL[t],right:columnCssRulesR[t]}}function removeCssRules(){$style.remove(),stylesheet=null}function destroy(){getEditorLock().cancelCurrentEdit(),trigger(self.onBeforeDestroy,{});for(var t=plugins.length;t--;)unregisterPlugin(plugins[t]);options.enableColumnReorder&&$headers.filter(":ui-sortable").sortable("destroy"),unbindAncestorScrollEvents(),$container.unbind(".slickgrid"),removeCssRules(),$canvas.unbind("draginit dragstart dragend drag"),$container.empty().removeClass(uid)}function trigger(t,e,n){return n=n||new Slick.EventData,e=e||{},e.grid=self,t.notify(e,n,self)}function getEditorLock(){return options.editorLock}function getEditController(){return editController}function getColumnIndex(t){return columnsById[t]}function autosizeColumns(){var t,e,n,r=[],i=0,o=0,s=viewportHasVScroll?viewportW-scrollbarDimensions.width:viewportW;for(t=0;t<columns.length;t++)e=columns[t],r.push(e.width),o+=e.width,e.resizable&&(i+=e.width-Math.max(e.minWidth,absoluteColumnMinWidth));for(n=o;o>s&&i;){var a=(o-s)/i;for(t=0;t<columns.length&&o>s;t++){e=columns[t];var l=r[t];if(!(!e.resizable||l<=e.minWidth||absoluteColumnMinWidth>=l)){var u=Math.max(e.minWidth,absoluteColumnMinWidth),c=Math.floor(a*(l-u))||1;c=Math.min(c,l-u),o-=c,i-=c,r[t]-=c}}if(n==o)break;n=o}for(n=o;s>o;){var d=s/o;for(t=0;t<columns.length&&s>o;t++)if(e=columns[t],e.resizable&&!(e.maxWidth<=e.width)){var p=Math.min(Math.floor(d*e.width)-e.width,e.maxWidth-e.width||1e6)||1;o+=p,r[t]+=p}if(n==o)break;n=o}var h=!1;for(t=0;t<columns.length;t++)columns[t].rerenderOnResize&&columns[t].width!=r[t]&&(h=!0),columns[t].width=r[t];applyColumnHeaderWidths(),updateCanvasWidth(!0),h&&(invalidateAllRows(),render())}function applyColumnHeaderWidths(){if(initialized){for(var t,e=0,n=$headers.children(),r=n.length;r>e;e++)t=$(n[e]),t.width()!==columns[e].width-headerColumnWidthDiff&&t.width(columns[e].width-headerColumnWidthDiff);updateColumnCaches()}}function applyColumnWidths(){for(var t,e,n=0,r=0;r<columns.length;r++)t=columns[r].width,e=getColumnCssRules(r),e.left.style.left=n+"px",e.right.style.right=canvasWidth-n-t+"px",n+=columns[r].width}function setSortColumn(t,e){setSortColumns([{columnId:t,sortAsc:e}])}function setSortColumns(t){sortColumns=t;var e=$headers.children();e.removeClass("slick-header-column-sorted").find(".slick-sort-indicator").removeClass("slick-sort-indicator-asc slick-sort-indicator-desc"),$.each(sortColumns,function(t,n){null==n.sortAsc&&(n.sortAsc=!0);var r=getColumnIndex(n.columnId);null!=r&&e.eq(r).addClass("slick-header-column-sorted").find(".slick-sort-indicator").addClass(n.sortAsc?"slick-sort-indicator-asc":"slick-sort-indicator-desc")})}function getSortColumns(){return sortColumns}function handleSelectedRangesChanged(t,e){selectedRows=[];for(var n={},r=0;r<e.length;r++)for(var i=e[r].fromRow;i<=e[r].toRow;i++){n[i]||(selectedRows.push(i),n[i]={});for(var o=e[r].fromCell;o<=e[r].toCell;o++)canCellBeSelected(i,o)&&(n[i][columns[o].id]=options.selectedCellCssClass)}setCellCssStyles(options.selectedCellCssClass,n),trigger(self.onSelectedRowsChanged,{rows:getSelectedRows()},t)}function getColumns(){return columns}function updateColumnCaches(){columnPosLeft=[],columnPosRight=[];for(var t=0,e=0,n=columns.length;n>e;e++)columnPosLeft[e]=t,columnPosRight[e]=t+columns[e].width,t+=columns[e].width}function setColumns(t){columns=t,columnsById={};for(var e=0;e<columns.length;e++){var n=columns[e]=$.extend({},columnDefaults,columns[e]);columnsById[n.id]=e,n.minWidth&&n.width<n.minWidth&&(n.width=n.minWidth),n.maxWidth&&n.width>n.maxWidth&&(n.width=n.maxWidth)}updateColumnCaches(),initialized&&(invalidateAllRows(),createColumnHeaders(),removeCssRules(),createCssRules(),resizeCanvas(),applyColumnWidths(),handleScroll())}function getOptions(){return options}function setOptions(t){getEditorLock().commitCurrentEdit()&&(makeActiveCellNormal(),options.enableAddRow!==t.enableAddRow&&invalidateRow(getDataLength()),options=$.extend(options,t),validateAndEnforceOptions(),$viewport.css("overflow-y",options.autoHeight?"hidden":"auto"),render())}function validateAndEnforceOptions(){options.autoHeight&&(options.leaveSpaceForNewRows=!1)}function setData(t,e){data=t,invalidateAllRows(),updateRowCount(),e&&scrollTo(0)}function getData(){return data}function getDataLength(){return data.getLength?data.getLength():data.length}function getDataItem(t){return data.getItem?data.getItem(t):data[t]}function getTopPanel(){return $topPanel[0]}function setTopPanelVisibility(t){options.showTopPanel!=t&&(options.showTopPanel=t,t?$topPanelScroller.slideDown("fast",resizeCanvas):$topPanelScroller.slideUp("fast",resizeCanvas))}function setHeaderRowVisibility(t){options.showHeaderRow!=t&&(options.showHeaderRow=t,t?$headerRowScroller.slideDown("fast",resizeCanvas):$headerRowScroller.slideUp("fast",resizeCanvas))}function getRowTop(t){return options.rowHeight*t-offset}function getRowFromPosition(t){return Math.floor((t+offset)/options.rowHeight)}function scrollTo(t){t=Math.max(t,0),t=Math.min(t,th-viewportH+(viewportHasHScroll?scrollbarDimensions.height:0));var e=offset;page=Math.min(n-1,Math.floor(t/ph)),offset=Math.round(page*cj);var r=t-offset;if(offset!=e){var i=getVisibleRange(r);cleanupRows(i),updateRowPositions()}prevScrollTop!=r&&(vScrollDir=r+offset>prevScrollTop+e?1:-1,$viewport[0].scrollTop=lastRenderedScrollTop=scrollTop=prevScrollTop=r,trigger(self.onViewportChanged,{}))}function defaultFormatter(t,e,n){return null==n?"":(n+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function getFormatter(t,e){var n=data.getItemMetadata&&data.getItemMetadata(t),r=n&&n.columns&&(n.columns[e.id]||n.columns[getColumnIndex(e.id)]);return r&&r.formatter||n&&n.formatter||e.formatter||options.formatterFactory&&options.formatterFactory.getFormatter(e)||options.defaultFormatter}function getEditor(t,e){var n=columns[e],r=data.getItemMetadata&&data.getItemMetadata(t),i=r&&r.columns;return i&&i[n.id]&&void 0!==i[n.id].editor?i[n.id].editor:i&&i[e]&&void 0!==i[e].editor?i[e].editor:n.editor||options.editorFactory&&options.editorFactory.getEditor(n)}function getDataItemValueForColumn(t,e){return options.dataItemColumnValueExtractor?options.dataItemColumnValueExtractor(t,e):t[e.field]}function appendRowHtml(t,e,n){var r=getDataItem(e),i=e<getDataLength()&&!r,o="slick-row"+(i?" loading":"")+(e===activeRow?" active":"")+(e%2==1?" odd":" even"),s=data.getItemMetadata&&data.getItemMetadata(e);s&&s.cssClasses&&(o+=" "+s.cssClasses),t.push("<div class='ui-widget-content "+o+"' style='top:"+getRowTop(e)+"px'>");for(var a,l,u=0,c=columns.length;c>u;u++){if(l=columns[u],a=1,s&&s.columns){var d=s.columns[l.id]||s.columns[u];a=d&&d.colspan||1,"*"===a&&(a=c-u)}if(columnPosRight[Math.min(c-1,u+a-1)]>n.leftPx){if(columnPosLeft[u]>n.rightPx)break;appendCellHtml(t,e,u,a)}a>1&&(u+=a-1)}t.push("</div>")}function appendCellHtml(t,e,n,r){var i=columns[n],o=getDataItem(e),s="slick-cell l"+n+" r"+Math.min(columns.length-1,n+r-1)+(i.cssClass?" "+i.cssClass:"");e===activeRow&&n===activeCell&&(s+=" active");for(var a in cellCssClasses)cellCssClasses[a][e]&&cellCssClasses[a][e][i.id]&&(s+=" "+cellCssClasses[a][e][i.id]);if(t.push("<div class='"+s+"'>"),o){var l=getDataItemValueForColumn(o,i);t.push(getFormatter(e,i)(e,n,l,i,o))}t.push("</div>"),rowsCache[e].cellRenderQueue.push(n),rowsCache[e].cellColSpans[n]=r}function cleanupRows(t){for(var e in rowsCache)(e=parseInt(e,10))!==activeRow&&(e<t.top||e>t.bottom)&&removeRowFromCache(e)}function invalidate(){updateRowCount(),invalidateAllRows(),render()}function invalidateAllRows(){currentEditor&&makeActiveCellNormal();for(var t in rowsCache)removeRowFromCache(t)}function removeRowFromCache(t){var e=rowsCache[t];e&&($canvas[0].removeChild(e.rowNode),delete rowsCache[t],delete postProcessedRows[t],renderedRows--,counter_rows_removed++)}function invalidateRows(t){var e,n;if(t&&t.length)for(vScrollDir=0,e=0,n=t.length;n>e;e++)currentEditor&&activeRow===t[e]&&makeActiveCellNormal(),rowsCache[t[e]]&&removeRowFromCache(t[e])}function invalidateRow(t){invalidateRows([t])}function updateCell(t,e){var n=getCellNode(t,e);if(n){var r=columns[e],i=getDataItem(t);currentEditor&&activeRow===t&&activeCell===e?currentEditor.loadValue(i):(n.innerHTML=i?getFormatter(t,r)(t,e,getDataItemValueForColumn(i,r),r,i):"",invalidatePostProcessingResults(t))}}function updateRow(t){var e=rowsCache[t];if(e){ensureCellNodesInRowsCache(t);for(var n in e.cellNodesByColumnIdx)if(e.cellNodesByColumnIdx.hasOwnProperty(n)){n=0|n;var r=columns[n],i=getDataItem(t),o=e.cellNodesByColumnIdx[n];t===activeRow&&n===activeCell&&currentEditor?currentEditor.loadValue(i):o.innerHTML=i?getFormatter(t,r)(t,n,getDataItemValueForColumn(i,r),r,i):""}invalidatePostProcessingResults(t)}}function getViewportHeight(){return parseFloat($.css($container[0],"height",!0))-parseFloat($.css($container[0],"paddingTop",!0))-parseFloat($.css($container[0],"paddingBottom",!0))-parseFloat($.css($headerScroller[0],"height"))-getVBoxDelta($headerScroller)-(options.showTopPanel?options.topPanelHeight+getVBoxDelta($topPanelScroller):0)-(options.showHeaderRow?options.headerRowHeight+getVBoxDelta($headerRowScroller):0)}function resizeCanvas(){initialized&&(viewportH=options.autoHeight?options.rowHeight*(getDataLength()+(options.enableAddRow?1:0)):getViewportHeight(),numVisibleRows=Math.ceil(viewportH/options.rowHeight),viewportW=parseFloat($.css($container[0],"width",!0)),options.autoHeight||$viewport.height(viewportH),options.forceFitColumns&&autosizeColumns(),updateRowCount(),handleScroll(),render())}function updateRowCount(){if(initialized){numberOfRows=getDataLength()+(options.enableAddRow?1:0)+(options.leaveSpaceForNewRows?numVisibleRows-1:0);var t=viewportHasVScroll;viewportHasVScroll=!options.autoHeight&&numberOfRows*options.rowHeight>viewportH;var e=options.enableAddRow?getDataLength():getDataLength()-1;for(var r in rowsCache)r>=e&&removeRowFromCache(r);activeCellNode&&activeRow>e&&resetActiveCell();var i=h;th=Math.max(options.rowHeight*numberOfRows,viewportH-scrollbarDimensions.height),maxSupportedCssHeight>th?(h=ph=th,n=1,cj=0):(h=maxSupportedCssHeight,ph=h/100,n=Math.floor(th/ph),cj=(th-h)/(n-1)),h!==i&&($canvas.css("height",h),scrollTop=$viewport[0].scrollTop);var o=th-viewportH>=scrollTop+offset;0==th||0==scrollTop?page=offset=0:scrollTo(o?scrollTop+offset:th-viewportH),h!=i&&options.autoHeight&&resizeCanvas(),options.forceFitColumns&&t!=viewportHasVScroll&&autosizeColumns(),updateCanvasWidth(!1)}}function getVisibleRange(t,e){return null==t&&(t=scrollTop),null==e&&(e=scrollLeft),{top:getRowFromPosition(t),bottom:getRowFromPosition(t+viewportH)+1,leftPx:e,rightPx:e+viewportW}}function getRenderedRange(t,e){var n=getVisibleRange(t,e),r=Math.round(viewportH/options.rowHeight),i=3;return-1==vScrollDir?(n.top-=r,n.bottom+=i):1==vScrollDir?(n.top-=i,n.bottom+=r):(n.top-=i,n.bottom+=i),n.top=Math.max(0,n.top),n.bottom=Math.min(options.enableAddRow?getDataLength():getDataLength()-1,n.bottom),n.leftPx-=viewportW,n.rightPx+=viewportW,n.leftPx=Math.max(0,n.leftPx),n.rightPx=Math.min(canvasWidth,n.rightPx),n}function ensureCellNodesInRowsCache(t){var e=rowsCache[t];if(e&&e.cellRenderQueue.length)for(var n=e.rowNode.lastChild;e.cellRenderQueue.length;){var r=e.cellRenderQueue.pop();e.cellNodesByColumnIdx[r]=n,n=n.previousSibling}}function cleanUpCells(t,e){var n=0,r=rowsCache[e],i=[];for(var o in r.cellNodesByColumnIdx)if(r.cellNodesByColumnIdx.hasOwnProperty(o)){o=0|o;var s=r.cellColSpans[o];(columnPosLeft[o]>t.rightPx||columnPosRight[Math.min(columns.length-1,o+s-1)]<t.leftPx)&&(e!=activeRow||o!=activeCell)&&i.push(o)}for(var a;null!=(a=i.pop());)r.rowNode.removeChild(r.cellNodesByColumnIdx[a]),delete r.cellColSpans[a],delete r.cellNodesByColumnIdx[a],postProcessedRows[e]&&delete postProcessedRows[e][a],n++}function cleanUpAndRenderCells(t){for(var e,n,r,i=[],o=[],s=0,a=t.top;a<=t.bottom;a++)if(e=rowsCache[a]){ensureCellNodesInRowsCache(a),cleanUpCells(t,a),n=0;var l=data.getItemMetadata&&data.getItemMetadata(a);l=l&&l.columns;for(var u=0,c=columns.length;c>u&&!(columnPosLeft[u]>t.rightPx);u++)if(null==(r=e.cellColSpans[u])){if(r=1,l){var d=l[columns[u].id]||l[u];r=d&&d.colspan||1,"*"===r&&(r=c-u)}columnPosRight[Math.min(c-1,u+r-1)]>t.leftPx&&(appendCellHtml(i,a,u,r),n++),u+=r>1?r-1:0}else u+=r>1?r-1:0;n&&(s+=n,o.push(a))}if(i.length){var p=document.createElement("div");p.innerHTML=i.join("");for(var h,f;null!=(h=o.pop());){e=rowsCache[h];for(var g;null!=(g=e.cellRenderQueue.pop());)f=p.lastChild,e.rowNode.appendChild(f),e.cellNodesByColumnIdx[g]=f}}}function renderRows(t){for(var e=$canvas[0],n=[],r=[],i=!1,o=t.top;o<=t.bottom;o++)rowsCache[o]||(renderedRows++,r.push(o),rowsCache[o]={rowNode:null,cellColSpans:[],cellNodesByColumnIdx:[],cellRenderQueue:[]},appendRowHtml(n,o,t),activeCellNode&&activeRow===o&&(i=!0),counter_rows_rendered++);if(r.length){var s=document.createElement("div");s.innerHTML=n.join("");for(var o=0,a=r.length;a>o;o++)rowsCache[r[o]].rowNode=e.appendChild(s.firstChild);i&&(activeCellNode=getCellNode(activeRow,activeCell))}}function startPostProcessing(){options.enableAsyncPostRender&&(clearTimeout(h_postrender),h_postrender=setTimeout(asyncPostProcessRows,options.asyncPostRenderDelay))}function invalidatePostProcessingResults(t){delete postProcessedRows[t],postProcessFromRow=Math.min(postProcessFromRow,t),postProcessToRow=Math.max(postProcessToRow,t),startPostProcessing()}function updateRowPositions(){for(var t in rowsCache)rowsCache[t].rowNode.style.top=getRowTop(t)+"px"}function render(){if(initialized){var t=getVisibleRange(),e=getRenderedRange();cleanupRows(e),lastRenderedScrollLeft!=scrollLeft&&cleanUpAndRenderCells(e),renderRows(e),postProcessFromRow=t.top,postProcessToRow=Math.min(options.enableAddRow?getDataLength():getDataLength()-1,t.bottom),startPostProcessing(),lastRenderedScrollTop=scrollTop,lastRenderedScrollLeft=scrollLeft,h_render=null}}function handleHeaderRowScroll(){var t=$headerRowScroller[0].scrollLeft;t!=$viewport[0].scrollLeft&&($viewport[0].scrollLeft=t)}function handleScroll(){scrollTop=$viewport[0].scrollTop,scrollLeft=$viewport[0].scrollLeft;var t=Math.abs(scrollTop-prevScrollTop),e=Math.abs(scrollLeft-prevScrollLeft);if(e&&(prevScrollLeft=scrollLeft,$headerScroller[0].scrollLeft=scrollLeft,$topPanelScroller[0].scrollLeft=scrollLeft,$headerRowScroller[0].scrollLeft=scrollLeft),t)if(vScrollDir=scrollTop>prevScrollTop?1:-1,prevScrollTop=scrollTop,viewportH>t)scrollTo(scrollTop+offset);else{var r=offset;page=h==viewportH?0:Math.min(n-1,Math.floor(scrollTop*((th-viewportH)/(h-viewportH))*(1/ph))),offset=Math.round(page*cj),r!=offset&&invalidateAllRows()}(e||t)&&(h_render&&clearTimeout(h_render),(Math.abs(lastRenderedScrollTop-scrollTop)>20||Math.abs(lastRenderedScrollLeft-scrollLeft)>20)&&(options.forceSyncScrolling||Math.abs(lastRenderedScrollTop-scrollTop)<viewportH&&Math.abs(lastRenderedScrollLeft-scrollLeft)<viewportW?render():h_render=setTimeout(render,50),trigger(self.onViewportChanged,{}))),trigger(self.onScroll,{scrollLeft:scrollLeft,scrollTop:scrollTop})}function asyncPostProcessRows(){for(;postProcessToRow>=postProcessFromRow;){var t=vScrollDir>=0?postProcessFromRow++:postProcessToRow--,e=rowsCache[t];if(e&&!(t>=getDataLength())){postProcessedRows[t]||(postProcessedRows[t]={}),ensureCellNodesInRowsCache(t);for(var n in e.cellNodesByColumnIdx)if(e.cellNodesByColumnIdx.hasOwnProperty(n)){n=0|n;var r=columns[n];if(r.asyncPostRender&&!postProcessedRows[t][n]){var i=e.cellNodesByColumnIdx[n];i&&r.asyncPostRender(i,t,getDataItem(t),r),postProcessedRows[t][n]=!0}}return void(h_postrender=setTimeout(asyncPostProcessRows,options.asyncPostRenderDelay))}}}function updateCellCssStylesOnRenderedRows(t,e){var n,r,i,o;for(var s in rowsCache){if(o=e&&e[s],i=t&&t[s],o)for(r in o)i&&o[r]==i[r]||(n=getCellNode(s,getColumnIndex(r)),n&&$(n).removeClass(o[r]));if(i)for(r in i)o&&o[r]==i[r]||(n=getCellNode(s,getColumnIndex(r)),n&&$(n).addClass(i[r]))}}function addCellCssStyles(t,e){if(cellCssClasses[t])throw"addCellCssStyles: cell CSS hash with key '"+t+"' already exists.";cellCssClasses[t]=e,updateCellCssStylesOnRenderedRows(e,null),trigger(self.onCellCssStylesChanged,{key:t,hash:e})}function removeCellCssStyles(t){cellCssClasses[t]&&(updateCellCssStylesOnRenderedRows(null,cellCssClasses[t]),delete cellCssClasses[t],trigger(self.onCellCssStylesChanged,{key:t,hash:null}))}function setCellCssStyles(t,e){var n=cellCssClasses[t];cellCssClasses[t]=e,updateCellCssStylesOnRenderedRows(e,n),trigger(self.onCellCssStylesChanged,{key:t,hash:e})}function getCellCssStyles(t){return cellCssClasses[t]}function flashCell(t,e,n){function r(t){t&&setTimeout(function(){i.queue(function(){i.toggleClass(options.cellFlashingCssClass).dequeue(),r(t-1)})},n)}if(n=n||100,rowsCache[t]){var i=$(getCellNode(t,e));r(4)}}function handleDragInit(t,e){var n=getCellFromEvent(t);if(!n||!cellExists(n.row,n.cell))return!1;var r=trigger(self.onDragInit,e,t);return t.isImmediatePropagationStopped()?r:!1}function handleDragStart(t,e){var n=getCellFromEvent(t);if(!n||!cellExists(n.row,n.cell))return!1;var r=trigger(self.onDragStart,e,t);return t.isImmediatePropagationStopped()?r:!1}function handleDrag(t,e){return trigger(self.onDrag,e,t)}function handleDragEnd(t,e){trigger(self.onDragEnd,e,t)}function handleKeyDown(t){trigger(self.onKeyDown,{row:activeRow,cell:activeCell},t);var e=t.isImmediatePropagationStopped();if(!e)if(t.shiftKey||t.altKey||t.ctrlKey)9!=t.which||!t.shiftKey||t.ctrlKey||t.altKey||(e=navigatePrev());else if(27==t.which){if(!getEditorLock().isActive())return;cancelEditAndSetFocus()}else 37==t.which?e=navigateLeft():39==t.which?e=navigateRight():38==t.which?e=navigateUp():40==t.which?e=navigateDown():9==t.which?e=navigateNext():13==t.which&&(options.editable&&(currentEditor?activeRow===getDataLength()?navigateDown():commitEditAndSetFocus():getEditorLock().commitCurrentEdit()&&makeActiveCellEditable()),e=!0);if(e){t.stopPropagation(),t.preventDefault();try{t.originalEvent.keyCode=0}catch(n){}}}function handleClick(t){currentEditor||t.target!=document.activeElement&&setFocus();var e=getCellFromEvent(t);!e||null!==currentEditor&&activeRow==e.row&&activeCell==e.cell||(trigger(self.onClick,{row:e.row,cell:e.cell},t),t.isImmediatePropagationStopped()||activeCell==e.cell&&activeRow==e.row||!canCellBeActive(e.row,e.cell)||(!getEditorLock().isActive()||getEditorLock().commitCurrentEdit())&&(scrollRowIntoView(e.row,!1),setActiveCellInternal(getCellNode(e.row,e.cell),e.row===getDataLength()||options.autoEdit)))}function handleContextMenu(t){var e=$(t.target).closest(".slick-cell",$canvas);0!==e.length&&(activeCellNode!==e[0]||null===currentEditor)&&trigger(self.onContextMenu,{},t)}function handleDblClick(t){var e=getCellFromEvent(t);!e||null!==currentEditor&&activeRow==e.row&&activeCell==e.cell||(trigger(self.onDblClick,{row:e.row,cell:e.cell},t),t.isImmediatePropagationStopped()||options.editable&&gotoCell(e.row,e.cell,!0))}function handleHeaderMouseEnter(t){trigger(self.onHeaderMouseEnter,{column:$(this).data("column")},t)}function handleHeaderMouseLeave(t){trigger(self.onHeaderMouseLeave,{column:$(this).data("column")},t)}function handleHeaderContextMenu(t){var e=$(t.target).closest(".slick-header-column",".slick-header-columns"),n=e&&e.data("column");trigger(self.onHeaderContextMenu,{column:n},t)}function handleHeaderClick(t){var e=$(t.target).closest(".slick-header-column",".slick-header-columns"),n=e&&e.data("column");n&&trigger(self.onHeaderClick,{column:n},t)}function handleMouseEnter(t){trigger(self.onMouseEnter,{},t)}function handleMouseLeave(t){trigger(self.onMouseLeave,{},t)}function cellExists(t,e){return!(0>t||t>=getDataLength()||0>e||e>=columns.length)}function getCellFromPoint(t,e){for(var n=getRowFromPosition(e),r=0,i=0,o=0;o<columns.length&&t>i;o++)i+=columns[o].width,r++;return 0>r&&(r=0),{row:n,cell:r-1}}function getCellFromNode(t){var e=/l\d+/.exec(t.className);if(!e)throw"getCellFromNode: cannot get cell - "+t.className;return parseInt(e[0].substr(1,e[0].length-1),10)}function getRowFromNode(t){for(var e in rowsCache)if(rowsCache[e].rowNode===t)return 0|e;return null}function getCellFromEvent(t){var e=$(t.target).closest(".slick-cell",$canvas);if(!e.length)return null;var n=getRowFromNode(e[0].parentNode),r=getCellFromNode(e[0]);return null==n||null==r?null:{row:n,cell:r}}function getCellNodeBox(t,e){if(!cellExists(t,e))return null;for(var n=getRowTop(t),r=n+options.rowHeight-1,i=0,o=0;e>o;o++)i+=columns[o].width;var s=i+columns[e].width;return{top:n,left:i,bottom:r,right:s}}function resetActiveCell(){setActiveCellInternal(null,!1)}function setFocus(){-1==tabbingDirection?$focusSink[0].focus():$focusSink2[0].focus()}function scrollCellIntoView(t,e,n){scrollRowIntoView(t,n);var r=getColspan(t,e),i=columnPosLeft[e],o=columnPosRight[e+(r>1?r-1:0)],s=scrollLeft+viewportW;scrollLeft>i?($viewport.scrollLeft(i),handleScroll(),render()):o>s&&($viewport.scrollLeft(Math.min(i,o-$viewport[0].clientWidth)),handleScroll(),render())}function setActiveCellInternal(t,e){null!==activeCellNode&&(makeActiveCellNormal(),$(activeCellNode).removeClass("active"),rowsCache[activeRow]&&$(rowsCache[activeRow].rowNode).removeClass("active"));var n=activeCellNode!==t;activeCellNode=t,null!=activeCellNode?(activeRow=getRowFromNode(activeCellNode.parentNode),activeCell=activePosX=getCellFromNode(activeCellNode),$(activeCellNode).addClass("active"),$(rowsCache[activeRow].rowNode).addClass("active"),options.editable&&e&&isCellPotentiallyEditable(activeRow,activeCell)&&(clearTimeout(h_editorLoader),options.asyncEditorLoading?h_editorLoader=setTimeout(function(){makeActiveCellEditable()
},options.asyncEditorLoadDelay):makeActiveCellEditable())):activeRow=activeCell=null,n&&trigger(self.onActiveCellChanged,getActiveCell())}function clearTextSelection(){if(document.selection&&document.selection.empty)document.selection.empty();else if(window.getSelection){var t=window.getSelection();t&&t.removeAllRanges&&t.removeAllRanges()}}function isCellPotentiallyEditable(t,e){return t<getDataLength()&&!getDataItem(t)?!1:columns[e].cannotTriggerInsert&&t>=getDataLength()?!1:getEditor(t,e)?!0:!1}function makeActiveCellNormal(){if(currentEditor){if(trigger(self.onBeforeCellEditorDestroy,{editor:currentEditor}),currentEditor.destroy(),currentEditor=null,activeCellNode){var t=getDataItem(activeRow);if($(activeCellNode).removeClass("editable invalid"),t){var e=columns[activeCell],n=getFormatter(activeRow,e);activeCellNode.innerHTML=n(activeRow,activeCell,getDataItemValueForColumn(t,e),e,getDataItem(activeRow)),invalidatePostProcessingResults(activeRow)}}navigator.userAgent.toLowerCase().match(/msie/)&&clearTextSelection(),getEditorLock().deactivate(editController)}}function makeActiveCellEditable(t){if(activeCellNode){if(!options.editable)throw"Grid : makeActiveCellEditable : should never get called when options.editable is false";if(clearTimeout(h_editorLoader),isCellPotentiallyEditable(activeRow,activeCell)){var e=columns[activeCell],n=getDataItem(activeRow);if(trigger(self.onBeforeEditCell,{row:activeRow,cell:activeCell,item:n,column:e})===!1)return void setFocus();getEditorLock().activate(editController),$(activeCellNode).addClass("editable"),t||(activeCellNode.innerHTML=""),currentEditor=new(t||getEditor(activeRow,activeCell))({grid:self,gridPosition:absBox($container[0]),position:absBox(activeCellNode),container:activeCellNode,column:e,item:n||{},commitChanges:commitEditAndSetFocus,cancelChanges:cancelEditAndSetFocus}),n&&currentEditor.loadValue(n),serializedEditorValue=currentEditor.serializeValue(),currentEditor.position&&handleActiveCellPositionChange()}}}function commitEditAndSetFocus(){getEditorLock().commitCurrentEdit()&&(setFocus(),options.autoEdit&&navigateDown())}function cancelEditAndSetFocus(){getEditorLock().cancelCurrentEdit()&&setFocus()}function absBox(t){var e={top:t.offsetTop,left:t.offsetLeft,bottom:0,right:0,width:$(t).outerWidth(),height:$(t).outerHeight(),visible:!0};e.bottom=e.top+e.height,e.right=e.left+e.width;for(var n=t.offsetParent;(t=t.parentNode)!=document.body;)e.visible&&t.scrollHeight!=t.offsetHeight&&"visible"!=$(t).css("overflowY")&&(e.visible=e.bottom>t.scrollTop&&e.top<t.scrollTop+t.clientHeight),e.visible&&t.scrollWidth!=t.offsetWidth&&"visible"!=$(t).css("overflowX")&&(e.visible=e.right>t.scrollLeft&&e.left<t.scrollLeft+t.clientWidth),e.left-=t.scrollLeft,e.top-=t.scrollTop,t===n&&(e.left+=t.offsetLeft,e.top+=t.offsetTop,n=t.offsetParent),e.bottom=e.top+e.height,e.right=e.left+e.width;return e}function getActiveCellPosition(){return absBox(activeCellNode)}function getGridPosition(){return absBox($container[0])}function handleActiveCellPositionChange(){if(activeCellNode&&(trigger(self.onActiveCellPositionChanged,{}),currentEditor)){var t=getActiveCellPosition();currentEditor.show&&currentEditor.hide&&(t.visible?currentEditor.show():currentEditor.hide()),currentEditor.position&&currentEditor.position(t)}}function getCellEditor(){return currentEditor}function getActiveCell(){return activeCellNode?{row:activeRow,cell:activeCell}:null}function getActiveCellNode(){return activeCellNode}function scrollRowIntoView(t,e){var n=t*options.rowHeight,r=(t+1)*options.rowHeight-viewportH+(viewportHasHScroll?scrollbarDimensions.height:0);(t+1)*options.rowHeight>scrollTop+viewportH+offset?(scrollTo(e?n:r),render()):t*options.rowHeight<scrollTop+offset&&(scrollTo(e?r:n),render())}function scrollRowToTop(t){scrollTo(t*options.rowHeight),render()}function getColspan(t,e){var n=data.getItemMetadata&&data.getItemMetadata(t);if(!n||!n.columns)return 1;var r=n.columns[columns[e].id]||n.columns[e],i=r&&r.colspan;return i="*"===i?columns.length-e:i||1}function findFirstFocusableCell(t){for(var e=0;e<columns.length;){if(canCellBeActive(t,e))return e;e+=getColspan(t,e)}return null}function findLastFocusableCell(t){for(var e=0,n=null;e<columns.length;)canCellBeActive(t,e)&&(n=e),e+=getColspan(t,e);return n}function gotoRight(t,e){if(e>=columns.length)return null;do e+=getColspan(t,e);while(e<columns.length&&!canCellBeActive(t,e));return e<columns.length?{row:t,cell:e,posX:e}:null}function gotoLeft(t,e){if(0>=e)return null;var n=findFirstFocusableCell(t);if(null===n||n>=e)return null;for(var r,i={row:t,cell:n,posX:n};;){if(r=gotoRight(i.row,i.cell,i.posX),!r)return null;if(r.cell>=e)return i;i=r}}function gotoDown(t,e,n){for(var r;;){if(++t>=getDataLength()+(options.enableAddRow?1:0))return null;for(r=e=0;n>=e;)r=e,e+=getColspan(t,e);if(canCellBeActive(t,r))return{row:t,cell:r,posX:n}}}function gotoUp(t,e,n){for(var r;;){if(--t<0)return null;for(r=e=0;n>=e;)r=e,e+=getColspan(t,e);if(canCellBeActive(t,r))return{row:t,cell:r,posX:n}}}function gotoNext(t,e,n){if(null==t&&null==e&&(t=e=n=0,canCellBeActive(t,e)))return{row:t,cell:e,posX:e};var r=gotoRight(t,e,n);if(r)return r;for(var i=null;++t<getDataLength()+(options.enableAddRow?1:0);)if(i=findFirstFocusableCell(t),null!==i)return{row:t,cell:i,posX:i};return null}function gotoPrev(t,e,n){if(null==t&&null==e&&(t=getDataLength()+(options.enableAddRow?1:0)-1,e=n=columns.length-1,canCellBeActive(t,e)))return{row:t,cell:e,posX:e};for(var r,i;!r&&!(r=gotoLeft(t,e,n));){if(--t<0)return null;e=0,i=findLastFocusableCell(t),null!==i&&(r={row:t,cell:i,posX:i})}return r}function navigateRight(){return navigate("right")}function navigateLeft(){return navigate("left")}function navigateDown(){return navigate("down")}function navigateUp(){return navigate("up")}function navigateNext(){return navigate("next")}function navigatePrev(){return navigate("prev")}function navigate(t){if(!options.enableCellNavigation)return!1;if(!activeCellNode&&"prev"!=t&&"next"!=t)return!1;if(!getEditorLock().commitCurrentEdit())return!0;setFocus();var e={up:-1,down:1,left:-1,right:1,prev:-1,next:1};tabbingDirection=e[t];var n={up:gotoUp,down:gotoDown,left:gotoLeft,right:gotoRight,prev:gotoPrev,next:gotoNext},r=n[t],i=r(activeRow,activeCell,activePosX);if(i){var o=i.row==getDataLength();return scrollCellIntoView(i.row,i.cell,!o),setActiveCellInternal(getCellNode(i.row,i.cell),o||options.autoEdit),activePosX=i.posX,!0}return setActiveCellInternal(getCellNode(activeRow,activeCell),activeRow==getDataLength()||options.autoEdit),!1}function getCellNode(t,e){return rowsCache[t]?(ensureCellNodesInRowsCache(t),rowsCache[t].cellNodesByColumnIdx[e]):null}function setActiveCell(t,e){initialized&&(t>getDataLength()||0>t||e>=columns.length||0>e||options.enableCellNavigation&&(scrollCellIntoView(t,e,!1),setActiveCellInternal(getCellNode(t,e),!1)))}function canCellBeActive(t,e){if(!options.enableCellNavigation||t>=getDataLength()+(options.enableAddRow?1:0)||0>t||e>=columns.length||0>e)return!1;var n=data.getItemMetadata&&data.getItemMetadata(t);if(n&&"boolean"==typeof n.focusable)return n.focusable;var r=n&&n.columns;return r&&r[columns[e].id]&&"boolean"==typeof r[columns[e].id].focusable?r[columns[e].id].focusable:r&&r[e]&&"boolean"==typeof r[e].focusable?r[e].focusable:columns[e].focusable}function canCellBeSelected(t,e){if(t>=getDataLength()||0>t||e>=columns.length||0>e)return!1;var n=data.getItemMetadata&&data.getItemMetadata(t);if(n&&"boolean"==typeof n.selectable)return n.selectable;var r=n&&n.columns&&(n.columns[columns[e].id]||n.columns[e]);return r&&"boolean"==typeof r.selectable?r.selectable:columns[e].selectable}function gotoCell(t,e,n){if(initialized&&canCellBeActive(t,e)&&getEditorLock().commitCurrentEdit()){scrollCellIntoView(t,e,!1);var r=getCellNode(t,e);setActiveCellInternal(r,n||t===getDataLength()||options.autoEdit),currentEditor||setFocus()}}function commitCurrentEdit(){var t=getDataItem(activeRow),e=columns[activeCell];if(currentEditor){if(currentEditor.isValueChanged()){var n=currentEditor.validate();if(n.valid){if(activeRow<getDataLength()){var r={row:activeRow,cell:activeCell,editor:currentEditor,serializedValue:currentEditor.serializeValue(),prevSerializedValue:serializedEditorValue,execute:function(){this.editor.applyValue(t,this.serializedValue),updateRow(this.row)},undo:function(){this.editor.applyValue(t,this.prevSerializedValue),updateRow(this.row)}};options.editCommandHandler?(makeActiveCellNormal(),options.editCommandHandler(t,e,r)):(r.execute(),makeActiveCellNormal()),trigger(self.onCellChange,{row:activeRow,cell:activeCell,item:t})}else{var i={};currentEditor.applyValue(i,currentEditor.serializeValue()),makeActiveCellNormal(),trigger(self.onAddNewRow,{item:i,column:e})}return!getEditorLock().isActive()}return $(activeCellNode).addClass("invalid"),$(activeCellNode).stop(!0,!0).effect("highlight",{color:"red"},300),trigger(self.onValidationError,{editor:currentEditor,cellNode:activeCellNode,validationResults:n,row:activeRow,cell:activeCell,column:e}),currentEditor.focus(),!1}makeActiveCellNormal()}return!0}function cancelCurrentEdit(){return makeActiveCellNormal(),!0}function rowsToRanges(t){for(var e=[],n=columns.length-1,r=0;r<t.length;r++)e.push(new Slick.Range(t[r],0,t[r],n));return e}function getSelectedRows(){if(!selectionModel)throw"Selection model is not set";return selectedRows}function setSelectedRows(t){if(!selectionModel)throw"Selection model is not set";selectionModel.setSelectedRanges(rowsToRanges(t))}var defaults={explicitInitialization:!1,rowHeight:25,defaultColumnWidth:80,enableAddRow:!1,leaveSpaceForNewRows:!1,editable:!1,autoEdit:!0,enableCellNavigation:!0,enableColumnReorder:!0,asyncEditorLoading:!1,asyncEditorLoadDelay:100,forceFitColumns:!1,enableAsyncPostRender:!1,asyncPostRenderDelay:50,autoHeight:!1,editorLock:Slick.GlobalEditorLock,showHeaderRow:!1,headerRowHeight:25,showTopPanel:!1,topPanelHeight:25,formatterFactory:null,editorFactory:null,cellFlashingCssClass:"flashing",selectedCellCssClass:"selected",multiSelect:!0,enableTextSelectionOnCells:!1,dataItemColumnValueExtractor:null,fullWidthRows:!1,multiColumnSort:!1,defaultFormatter:defaultFormatter,forceSyncScrolling:!1},columnDefaults={name:"",resizable:!0,sortable:!1,minWidth:30,rerenderOnResize:!1,headerCssClass:null,defaultSortAsc:!0,focusable:!0,selectable:!0},th,h,ph,n,cj,page=0,offset=0,vScrollDir=1,initialized=!1,$container,uid="slickgrid_"+Math.round(1e6*Math.random()),self=this,$focusSink,$focusSink2,$headerScroller,$headers,$headerRow,$headerRowScroller,$headerRowSpacer,$topPanelScroller,$topPanel,$viewport,$canvas,$style,$boundAncestors,stylesheet,columnCssRulesL,columnCssRulesR,viewportH,viewportW,canvasWidth,viewportHasHScroll,viewportHasVScroll,headerColumnWidthDiff=0,headerColumnHeightDiff=0,cellWidthDiff=0,cellHeightDiff=0,absoluteColumnMinWidth,numberOfRows=0,tabbingDirection=1,activePosX,activeRow,activeCell,activeCellNode=null,currentEditor=null,serializedEditorValue,editController,rowsCache={},renderedRows=0,numVisibleRows,prevScrollTop=0,scrollTop=0,lastRenderedScrollTop=0,lastRenderedScrollLeft=0,prevScrollLeft=0,scrollLeft=0,selectionModel,selectedRows=[],plugins=[],cellCssClasses={},columnsById={},sortColumns=[],columnPosLeft=[],columnPosRight=[],h_editorLoader=null,h_render=null,h_postrender=null,postProcessedRows={},postProcessToRow=null,postProcessFromRow=null,counter_rows_rendered=0,counter_rows_removed=0;this.debug=function(){var t="";t+="\ncounter_rows_rendered:  "+counter_rows_rendered,t+="\ncounter_rows_removed:  "+counter_rows_removed,t+="\nrenderedRows:  "+renderedRows,t+="\nnumVisibleRows:  "+numVisibleRows,t+="\nmaxSupportedCssHeight:  "+maxSupportedCssHeight,t+="\nn(umber of pages):  "+n,t+="\n(current) page:  "+page,t+="\npage height (ph):  "+ph,t+="\nvScrollDir:  "+vScrollDir,alert(t)},this.eval=function(expr){return eval(expr)},$.extend(this,{slickGridVersion:"2.1",onScroll:new Slick.Event,onSort:new Slick.Event,onHeaderMouseEnter:new Slick.Event,onHeaderMouseLeave:new Slick.Event,onHeaderContextMenu:new Slick.Event,onHeaderClick:new Slick.Event,onHeaderCellRendered:new Slick.Event,onBeforeHeaderCellDestroy:new Slick.Event,onHeaderRowCellRendered:new Slick.Event,onBeforeHeaderRowCellDestroy:new Slick.Event,onMouseEnter:new Slick.Event,onMouseLeave:new Slick.Event,onClick:new Slick.Event,onDblClick:new Slick.Event,onContextMenu:new Slick.Event,onKeyDown:new Slick.Event,onAddNewRow:new Slick.Event,onValidationError:new Slick.Event,onViewportChanged:new Slick.Event,onColumnsReordered:new Slick.Event,onColumnsResized:new Slick.Event,onCellChange:new Slick.Event,onBeforeEditCell:new Slick.Event,onBeforeCellEditorDestroy:new Slick.Event,onBeforeDestroy:new Slick.Event,onActiveCellChanged:new Slick.Event,onActiveCellPositionChanged:new Slick.Event,onDragInit:new Slick.Event,onDragStart:new Slick.Event,onDrag:new Slick.Event,onDragEnd:new Slick.Event,onSelectedRowsChanged:new Slick.Event,onCellCssStylesChanged:new Slick.Event,registerPlugin:registerPlugin,unregisterPlugin:unregisterPlugin,getColumns:getColumns,setColumns:setColumns,getColumnIndex:getColumnIndex,updateColumnHeader:updateColumnHeader,setSortColumn:setSortColumn,setSortColumns:setSortColumns,getSortColumns:getSortColumns,autosizeColumns:autosizeColumns,getOptions:getOptions,setOptions:setOptions,getData:getData,getDataLength:getDataLength,getDataItem:getDataItem,setData:setData,getSelectionModel:getSelectionModel,setSelectionModel:setSelectionModel,getSelectedRows:getSelectedRows,setSelectedRows:setSelectedRows,render:render,invalidate:invalidate,invalidateRow:invalidateRow,invalidateRows:invalidateRows,invalidateAllRows:invalidateAllRows,updateCell:updateCell,updateRow:updateRow,getViewport:getVisibleRange,getRenderedRange:getRenderedRange,resizeCanvas:resizeCanvas,updateRowCount:updateRowCount,scrollRowIntoView:scrollRowIntoView,scrollRowToTop:scrollRowToTop,scrollCellIntoView:scrollCellIntoView,getCanvasNode:getCanvasNode,focus:setFocus,getCellFromPoint:getCellFromPoint,getCellFromEvent:getCellFromEvent,getActiveCell:getActiveCell,setActiveCell:setActiveCell,getActiveCellNode:getActiveCellNode,getActiveCellPosition:getActiveCellPosition,resetActiveCell:resetActiveCell,editActiveCell:makeActiveCellEditable,getCellEditor:getCellEditor,getCellNode:getCellNode,getCellNodeBox:getCellNodeBox,canCellBeSelected:canCellBeSelected,canCellBeActive:canCellBeActive,navigatePrev:navigatePrev,navigateNext:navigateNext,navigateUp:navigateUp,navigateDown:navigateDown,navigateLeft:navigateLeft,navigateRight:navigateRight,gotoCell:gotoCell,getTopPanel:getTopPanel,setTopPanelVisibility:setTopPanelVisibility,setHeaderRowVisibility:setHeaderRowVisibility,getHeaderRow:getHeaderRow,getHeaderRowColumn:getHeaderRowColumn,getGridPosition:getGridPosition,flashCell:flashCell,addCellCssStyles:addCellCssStyles,setCellCssStyles:setCellCssStyles,removeCellCssStyles:removeCellCssStyles,getCellCssStyles:getCellCssStyles,init:finishInitialization,destroy:destroy,getEditorLock:getEditorLock,getEditController:getEditController}),init()}$.extend(!0,window,{Slick:{Grid:SlickGrid}});var scrollbarDimensions,maxSupportedCssHeight}(jQuery),define("slickgrid/grid",["jquery","jquery.event.drag","slickgrid/core"],function(t){return function(){var e;return e||t.Slick.Grid}}(this)),function(t){function e(e){function n(n){v=t.extend(!0,{},w,e),g=n,_.subscribe(g.onActiveCellChanged,i(p)),_.subscribe(g.onKeyDown,i(h)),_.subscribe(g.onClick,i(f))}function r(){_.unsubscribeAll()}function i(t){return function(){m||(m=!0,t.apply(this,arguments),m=!1)}}function o(t){for(var e=[],n=0;n<t.length;n++)for(var r=t[n].fromRow;r<=t[n].toRow;r++)e.push(r);return e}function s(t){for(var e=[],n=g.getColumns().length-1,r=0;r<t.length;r++)e.push(new Slick.Range(t[r],0,t[r],n));return e}function a(t,e){var n,r=[];for(n=t;e>=n;n++)r.push(n);for(n=e;t>n;n++)r.push(n);return r}function l(){return o(y)}function u(t){c(s(t))}function c(t){y=t,b.onSelectedRangesChanged.notify(y)}function d(){return y}function p(t,e){v.selectActiveRow&&null!=e.row&&c([new Slick.Range(e.row,0,e.row,g.getColumns().length-1)])}function h(t){var e=g.getActiveCell();if(e&&t.shiftKey&&!t.ctrlKey&&!t.altKey&&!t.metaKey&&(38==t.which||40==t.which)){var n=l();n.sort(function(t,e){return t-e}),n.length||(n=[e.row]);var r,i=n[0],o=n[n.length-1];r=40==t.which?e.row<o||i==o?++o:++i:e.row<o?--o:--i,r>=0&&r<g.getDataLength()&&(g.scrollRowIntoView(r),y=s(a(i,o)),c(y)),t.preventDefault(),t.stopPropagation()}}function f(e){var n=g.getCellFromEvent(e);if(!n||!g.canCellBeActive(n.row,n.cell))return!1;var r=o(y),i=t.inArray(n.row,r);if(!(e.ctrlKey||e.shiftKey||e.metaKey))return!1;if(g.getOptions().multiSelect)if(-1===i&&(e.ctrlKey||e.metaKey))r.push(n.row),g.setActiveCell(n.row,n.cell);else if(-1!==i&&(e.ctrlKey||e.metaKey))r=t.grep(r,function(t){return t!==n.row}),g.setActiveCell(n.row,n.cell);else if(r.length&&e.shiftKey){var a=r.pop(),l=Math.min(n.row,a),u=Math.max(n.row,a);r=[];for(var d=l;u>=d;d++)d!==a&&r.push(d);r.push(a),g.setActiveCell(n.row,n.cell)}return y=s(r),c(y),e.stopImmediatePropagation(),!0}var g,m,v,y=[],b=this,_=new Slick.EventHandler,w={selectActiveRow:!0};t.extend(this,{getSelectedRows:l,setSelectedRows:u,getSelectedRanges:d,setSelectedRanges:c,init:n,destroy:r,onSelectedRangesChanged:new Slick.Event})}t.extend(!0,window,{Slick:{RowSelectionModel:e}})}(jQuery),define("slickgrid/plugins/rowselectionmodel",["jquery","slickgrid/core"],function(t){return function(){var e;return e||t.Slick.RowSelectionModel}}(this)),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function r(){this.constructor=t}for(var i in e)n.call(e,i)&&(t[i]=e[i]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},n={}.hasOwnProperty;define("views/controls/grid",["require","bootstrap-tooltip","b","slickgrid/grid","slickgrid/plugins/rowselectionmodel","underscore"],function(n){var r,i,o,s,a;return n("bootstrap-tooltip"),r=n("b"),s=n("slickgrid/grid"),o=n("slickgrid/plugins/rowselectionmodel"),a=n("underscore"),i=function(n){function i(){return this.forbiddenTooltipHide=t(this.forbiddenTooltipHide,this),this.forbiddenTooltipShow=t(this.forbiddenTooltipShow,this),this.sortHandler=t(this.sortHandler,this),i.__super__.constructor.apply(this,arguments)}return e(i,n),i.prototype.initialize=function(){var t,e;return this.selection=null!=(t=this.options.selection)?t:new r.Collection,this.ignoreSelectionUpdate=!1,this.columns=null!=(e=this.options.columns)?e:[],this.gridOptions=a.defaults(this.options.gridOptions,{enableCellNavigation:!0,enableColumnReorder:!1,forceFitColumns:!0,rowHeight:35,permissionsTooltipMessage:"You do not have the proper permissions to view this item's content",dataItemColumnValueExtractor:function(t,e){return a.isFunction(e.field)?e.field.call(t):t.get(e.field)}}),this.gridOptions.explicitInitialization=!0,this.initialized=!1,this.selection.on("navigate",this.updateHighlight,this),a.bindAll(this,"updateSelection"),this.collection.searchSortOrder=null},i.prototype.afterRender=function(){return this.destroyInstance(),this.$el.css({width:"100%",height:"100%"}),this.instance=new s(this.$el,this.collection,this.columns,this.gridOptions),this.$el.css("overflow",""),this.instance.setSelectionModel(new o),this.instance.onSelectedRowsChanged.subscribe(this.updateSelection),this.collection.on("add remove reset",this.invalidateGrid,this),this.collection.on("user_added",this.scrollToTopAndSelect,this),this.resize(),this.forbiddenTooltipHide(),this.instance.onMouseEnter.subscribe(this.forbiddenTooltipShow),this.instance.onMouseLeave.subscribe(this.forbiddenTooltipHide),this.instance.onScroll.subscribe(this.forbiddenTooltipHide),this.instance.onSort.subscribe(this.sortHandler)},i.prototype.sortHandler=function(t,e){return this.collection.searchSortOrder=(e.sortAsc?"":"-")+e.sortCol.id,this.collection.totalRecords=-1,this.collection.currentPage=0,this.collection.reachedEnd=!1,this.collection.fetch({reset:!0})},i.prototype.forbiddenTooltipShow=function(t){var e;return e=this.$(t.currentTarget).parent(".forbidden-row:eq(0)"),e.length>0?(e.tooltip({placement:"top",trigger:"manual",title:this.gridOptions.permissionsTooltipMessage,container:"body"}),e.tooltip("show")):void 0},i.prototype.forbiddenTooltipHide=function(){return this.$(".forbidden-row").tooltip("destroy")},i.prototype.cleanup=function(){var t,e,n,r;return this.$(".forbidden-row").tooltip("destroy"),this.collection.off(null,null,this),this.selection.off(null,null,this),null!=(t=this.instance)&&t.onSelectedRowsChanged.unsubscribe(this.updateSelection),null!=(e=this.instance)&&e.onMouseEnter.unsubscribe(this.forbiddenTooltipShow),null!=(n=this.instance)&&n.onMouseLeave.unsubscribe(this.forbiddenTooltipHide),null!=(r=this.instance)&&r.onScroll.unsubscribe(this.forbiddenTooltipHide),this.destroyInstance()},i.prototype.resetSelection=function(){return this.instance.getSelectionModel().setSelectedRanges([]),this.instance.resetActiveCell()},i.prototype.initGrid=function(){return this.instance&&!this.initialized?(this.instance.init(),this.doGridInit(),this.initialized=!0,!0):!1},i.prototype.doGridInit=function(){},i.prototype.resize=function(){return this.initGrid()||null==this.instance?void 0:this.instance.resizeCanvas()},i.prototype.destroyInstance=function(){return this.instance&&this.initialized?(this.instance.destroy(),this.initialized=!1):void 0},i.prototype.updateSelection=function(){var t;if(!this.ignoreSelectionUpdate)return t=a.map(this.instance.getSelectedRows(),function(t){return function(e){return t.collection.at(e)}}(this)),this.selection.reset(t),this.selection.trigger("select"),this.trigger("select")},i.prototype.updateHighlight=function(){var t,e,n,r;r=function(){var n,r,i,o;for(i=this.collection.models,o=[],t=n=0,r=i.length;r>n;t=++n)e=i[t],null!=this.selection.get(e)&&o.push(t);return o}.call(this);try{return this.ignoreSelectionUpdate=!0,null!=(n=this.instance)?n.setSelectedRows(r):void 0}finally{this.ignoreSelectionUpdate=!1}},i.prototype.invalidateGrid=function(){return this.$(".forbidden-row").tooltip("destroy"),this.instance.invalidate()},i.prototype.scrollToTopAndSelect=function(){return this.instance.scrollRowToTop(0),this.instance.setSelectedRows([0]),this.updateSelection()},i}(r.Layout)})}.call(this),define("templates/controls/list_header",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<label class="showing"><div class="header-title pull-left">');var __val__=titleMessage;if(buf.push(null==__val__?"":__val__),buf.push("</div>"),isSolrSearchable&&(buf.push('<div class="search-filter input-append pull-right"><input'),buf.push(attrs({id:"solr-search",type:"text",placeholder:searchMessage+"&hellip;",value:filter},{type:!0,placeholder:!0,value:!0})),buf.push('/><button type="button" class="btn"><i class="icon-search"></i></button></div>'),darklaunch.search_dashboard)){buf.push('<br clear="right"/><div>');var link=window.location.href.split("/");link[link.length-1]="search",buf.push("<a"),buf.push(attrs({href:link.join("/"),"class":"pull-right"},{href:!0})),buf.push(">Try experimental new search</a></div>")}buf.push('</label><div class="header-separator clearfix"></div>')}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/controls/list_header",["require","b","router","j!controls/list_header"],function(e){var n,r,i,o;return n=e("b"),i=e("router"),o=e("j!controls/list_header"),r=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.template=o,n.prototype.events={"click .search-filter .btn":"triggerSearch","keypress .search-filter input":"triggerSearchOnEnter"},n.prototype.initialize=function(t){var e;return this.options=null!=t?t:{},this.listView=this.options.listView,this.messages=null!=(e=this.options.messages)?e:{}},n.prototype.serialize=function(){var t,e,n;return this.collection.isSolrSearchable?{filter:this._getFilter(),isSolrSearchable:this.collection.isSolrSearchable,searchMessage:this.messages.searchMessage,titleMessage:this.getTitleMessage(),darklaunch:(null!=(t=this.options.app)&&null!=(e=t.currentOrg)&&null!=(n=e.attributes)?n.darklaunch:void 0)||{}}:{isSolrSearchable:this.collection.isSolrSearchable,titleMessage:this.getTitleMessage()}},n.prototype.getTitleMessage=function(){var t,e,n;return this.collection.isSolrSearchable&&"*:*"!==this.collection.searchFilter?this.collection.totalRecords>=0?"function"==typeof(e=this.messages).showingNObjects?e.showingNObjects(this.collection.totalRecords):void 0:"function"==typeof(n=this.messages).searchingObjects?n.searchingObjects():void 0:"function"==typeof(t=this.messages).showingAllObjects?t.showingAllObjects():void 0},n.prototype.updateTitleText=function(){return this.$(".header-title").html(this.getTitleMessage())},n.prototype._getFilter=function(){return"*:*"===this.collection.searchFilter?"":this.collection.searchFilter},n.prototype.search=function(t){return t.length||(t="*:*"),this.collection.searchFilter=t,this.collection.searchSortOrder=null,this.collection.totalRecords=-1,this.resetListAndCollectionState(),this.trigger("search")},n.prototype.resetListAndCollectionState=function(){return this.collection.reset(),this.listView.resetState(),this.collection.goTo(0)},n.prototype.triggerSearch=function(t){var e;return t.preventDefault(),e=this.$(".search-filter input").val(),this.search(e)},n.prototype.triggerSearchOnEnter=function(t){return 13===t.keyCode?this.triggerSearch(t):void 0},n}(n.Layout)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("collections/organizations",["b","models/organization","slickback","underscore"],function(e,n,r,i){var o;return o=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),i.extend(o.prototype,r.Collection.prototype),o.prototype.model=n,o.prototype.url=function(){return"/organizations"},o.prototype.getCurrent=function(t){return t?(window.localStorage&&localStorage.setItem("last-organization",t),this._lastOrganization=this.get(t),this.trigger("current:changed",this._lastOrganization),this._lastOrganization):this.last()},o.prototype.last=function(){var t;return this._lastOrganization?this._lastOrganization:window.localStorage&&(t=localStorage.getItem("last-organization"))&&(this._lastOrganization=this.get(t))?this._lastOrganization:this._lastOrganization=this.at(0)},o}(e.Collection)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/controls/scroll_grid",["require","views/controls/grid"],function(e){var n,r;return n=e("views/controls/grid"),r=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.initialize=function(){return n.__super__.initialize.apply(this,arguments),this.reachedEnd=!1,_.bindAll(this,"viewportChanged")},n.prototype.cleanup=function(){var t;return n.__super__.cleanup.apply(this,arguments),null!=(t=this.instance)?t.onViewportChanged.unsubscribe(this.viewportChanged):void 0},n.prototype.doGridInit=function(){return this.setupScrolling()},n.prototype.resize=function(){return n.__super__.resize.apply(this,arguments),this.instance?this.viewportChanged():void 0},n.prototype.setupScrolling=function(){return this.instance.onViewportChanged.subscribe(this.viewportChanged),this.viewportChanged()},n.prototype.viewportChanged=function(){var t,e;return e=this.instance.getViewport(),this.collection.length&&e.bottom>=this.collection.length&&!this.collection.reachedEnd&&(null!=(t=this.collection.queryStatus)?t.resting:void 0)&&this.collection.requestNextPage({update:!0,remove:!1,success:function(t){return function(e,n){return n.results.length<t.collection.paginator_ui.perPage&&(t.collection.reachedEnd=!0),setTimeout(function(){return t.viewportChanged()},100)}}(this)}),this.updateSpinners()},n.prototype.updateSpinners=function(){var t,e,n,r,i,o,s;for(o=this.collection.models,s=[],e=n=0,r=o.length;r>n;e=++n)i=o[e],s.push(i.get("isSpinner")&&(t=this.instance.getCellNode(e,0))?this.$(t).html("<i class='icon-spinner icon-spin loading-spinner'></i>"):void 0);return s},n.prototype.resetState=function(){return this.reachedEnd=!1},n}(n)})}.call(this),define("templates/controls/list_action",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<div class="dropdown"><a'),buf.push(attrs({"data-cid":cid,"class":"dropdown-toggle"},{"data-cid":!0})),buf.push('><i class="icon-cog"></i><i class="icon-caret-down"></i></a></div>')}return buf.join("")}}),define("templates/controls/list",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<div class="list-header"></div><div class="list-container"><div class="grid"></div><div class="actions-dropdown"></div></div>')}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/controls/list",["require","b","collections/base","views/controls/dropdown","views/controls/empty","views/controls/alerts/error","views/controls/grid","views/controls/list_header","collections/organizations","views/controls/scroll_grid","views/controls/spinner","utils/i18n.gettext","underscore","j!controls/list_action","router","state","j!controls/list"],function(e){var n,r,i,o,s,a,l,u,c,d,p,h,f,g,m,v,y;return n=e("b"),r=e("collections/base"),i=e("views/controls/dropdown"),o=e("views/controls/empty"),s=e("views/controls/alerts/error"),a=e("views/controls/grid"),l=e("views/controls/list_header"),c=e("collections/organizations"),d=e("views/controls/scroll_grid"),p=e("views/controls/spinner"),h=e("utils/i18n.gettext"),f=e("underscore"),g=e("j!controls/list_action"),m=e("router"),v=e("state"),y=e("j!controls/list"),u=function(e){function u(){return u.__super__.constructor.apply(this,arguments)}return t(u,e),u.prototype.paginated=!0,u.prototype.template=y,u.prototype.columns=[],u.prototype.actionColumn={id:"actions",name:h("Actions"),width:70,resizable:!1,cssClass:"actions",formatter:function(t,e,n,r,i){return g({cid:i.cid})}},u.prototype.gridOptions={},u.prototype.gridClass=a,u.prototype.scrollGridClass=d,u.prototype.headerClass=l,u.prototype.customHeaderClass=".list-header",u.prototype.events={"click .dropdown-toggle":"toggleActionsMenu"},u.prototype.initialize=function(t){var e,i,o,s,a,l,u;return this.options=null!=t?t:{},this.app=this.options.app,this.collection=null!=(s=this.options.collection)?s:new n.Collection,this.controller=this.options.controller,this.gridPadding=5,this.selection=null!=(a=this.options.selection)?a:new n.Collection,o=f.result(this,"gridOptions"),o.explicitInitialization=!0,i=this.collection.paginator_core?this.scrollGridClass:this.gridClass,e=f.result(this,"columns"),this.actionColumn&&(e=e.concat(f.result(this,"actionColumn"))),this.grid=new i({collection:this.collection,selection:this.selection,columns:e,gridOptions:o}),this.listHeader=new this.headerClass({app:this.app,collection:this.collection,listView:this,messages:null!=(l=this.controller)?l.messages:void 0}),this.listHeader.on("search",this.searchEvent,this),this.setViews({".list-header":this.listHeader}),this.paginated&&(this.collection.on("sync error",this.removeSpinner,this),this.collection.on("error",this.showError,this),this.collection.on("request",this.installSpinner,this)),this.collection.on("add",this.renderIfEmpty,this),this.collection.on("delete",this.clearSelection,this),this.collection.on("render",this.renderGrid,this),this.collection instanceof r&&(this.collection.searchFilter=null!=(null!=(u=this.collection.params)?u.filter:void 0)?this.collection.params.filter:"*:*",this.collection.isEmpty())?this.listHeader.resetListAndCollectionState():void 0
},u.prototype.initActionsDropdown=function(t){var e;return e=f.filter(t,function(t){var e;return null!=(e=t.dropdown)?e:!0}),this.actionsDropdown=new i({items:e}),this.actionsDropdown.on("action",this.dispatchAction,this)},u.prototype.clearSelection=function(){return this.selection.reset(),this.updateSelection()},u.prototype.renderIfEmpty=function(){return this.collection.length>0&&this.$(".empty").length>0?this.renderGrid():void 0},u.prototype.beforeRender=function(){return this.selection.on("select",this.updateSelection,this)},u.prototype.afterRender=function(){var t;return this.resizeGrid(),this.paginated&&(null!=(t=this.collection.queryStatus)?t.initQuery:void 0)?this.installSpinner():this.renderGrid()},u.prototype.renderGrid=function(){var t;return this.listHeader.updateTitleText(),0===this.collection.length?void this.setView(".grid",new o).render():(this.getView(".actions-dropdown")||(this.initActionsDropdown(null!=(t=this.options.actions)?t:[]),this.setView(".actions-dropdown",this.actionsDropdown).render()),this.setView(".grid",this.grid).render())},u.prototype.cleanup=function(){return null!=this.collection.searchFilter!=="*:*"&&!this.collection instanceof c&&this.collection.isSolrSearchable&&(this.collection.reset(),this.collection.searchFilter="*:*"),this.selection.off(null,null,this),this.listHeader.off(null,null,this),this.grid.off(null,null,this),this.spinner=void 0},u.prototype.installSpinner=function(){var t,e;return(null!=(t=this.collection.queryStatus)?t.initQuery:void 0)?(this.spinner=new p,this.setView(".grid",this.spinner).render()):(null!=(e=this.collection.queryStatus)?e.queryingPageDown:void 0)?this.collection.push({id:"__backbone_spinner__",isSpinner:!0}):void 0},u.prototype.removeSpinner=function(t,e,n){var r;return n.queryInitial?(null!=(r=this.spinner)&&r.remove(),this.spinner=void 0,this.renderGrid()):n.queryDown?this.collection.remove(this.collection.filter(function(t){return t.get("isSpinner")})):void 0},u.prototype.resizeGrid=function(){var t,e,n;return n=this.$el.parent().height(),e=this.$(this.customHeaderClass).height(),t=this.gridPadding,this.$(".list-container").height(n-(e+t)),this.grid?this.grid.resize():void 0},u.prototype.showError=function(t,e){var n,r,i;return null==(null!=(i=e.responseJSON)?i.verb:void 0)||"GET"===e.responseJSON.verb?(403===e.status?(r=null!=v.get("controller")?v.get("controller").messages.label(2).toLowerCase():"this object type",n=new s({title:"Permissions Error",body:"You do not have list permissions for "+r+". Please ask an administrator for access and try again."})):n=new s,this.setView(".grid",n).render()):void 0},u.prototype.toggleActionsMenu=function(t){var e;return t.stopPropagation(),t.preventDefault(),e=this.collection.get($(t.currentTarget).data("cid")),e!==this.actionsDropdownCurrent?(this.actionsDropdown.open(),this.actionsDropdown.positionAt($(t.currentTarget)),this.actionsDropdownCurrent=e):(this.actionsDropdown.toggle(),this.actionsDropdown.isOpen?this.actionsDropdown.positionAt($(t.currentTarget)):void 0)},u.prototype.updateSelection=function(){var t;return this.selection.length<=1?(this.$el.removeClass("list-multiselect"),t=1===this.selection.length?this.selection.at(0).url():this.collection.urlWithQueryParams(),m.navigate(t)):this.$el.addClass("list-multiselect")},u.prototype.listSelectionUpdated=function(){return this.trigger("select")},u.prototype.resetSelection=function(){return this.grid.resetSelection()},u.prototype.resetState=function(){var t;return null!=(null!=(t=this.grid)?t.resetState:void 0)?this.grid.resetState():void 0},u.prototype.dispatchAction=function(t){var e;return this.trigger("action",t),null!=(e=this.controller)?e.dispatchAction(t):void 0},u.prototype.searchEvent=function(){return this.selection.reset(),this.updateSelection()},u}(n.Layout)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/organizations/list",["views/controls/list","utils/i18n.gettext"],function(e,n){var r;return r=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype.paginated=!1,r.prototype.columns=[{id:"name",name:n("Organization"),field:"name"}],r}(e)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/controls/members/grid",["require","views/controls/scroll_grid"],function(e){var n,r;return r=e("views/controls/scroll_grid"),n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.doGridInit=function(){return n.__super__.doGridInit.apply(this,arguments),this.onResize()},n.prototype.onResize=function(){var t,e;return t=this.$el.parents("#object-pane").height()-(this.options.headerHeight||0),this.$el.parents(".grid").css("height",t),null!=(e=this.instance)?e.resizeCanvas():void 0},n}(r)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/controls/members/list",["require","b","views/controls/list","views/controls/members/grid"],function(e){var n,r,i,o;return n=e("b"),r=e("views/controls/list"),i=e("views/controls/members/grid"),o=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.template=r.prototype.template,n.prototype.gridOptions={},n.prototype.headerHeight=240,n.prototype.gridClass=i,n.prototype.initialize=function(){var t;return t=this.gridOptions,t.explicitInitialization=!0,this.grid=new this.gridClass({collection:this.collection,columns:this.columns,gridOptions:t,splitPane:this.splitPane,headerHeight:this.headerHeight}),this.setView(".grid",this.grid)},n.prototype.onResize=function(){return this.grid.onResize()},n.prototype.renderGrid=function(){return this.setView(".grid",this.grid).render()},n}(n.Layout)})}.call(this),define("templates/controls/members/tab",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<div class="list"></div>')}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/controls/members/tab",["require","b","views/controls/alerts/error","views/controls/members/list","views/controls/spinner","j!controls/members/tab","jquery"],function(e){var n,r,i,o,s,a,l;return r=e("b"),i=e("views/controls/alerts/error"),o=e("views/controls/members/list"),a=e("views/controls/spinner"),l=e("j!controls/members/tab"),n=e("jquery"),s=function(e){function s(){return s.__super__.constructor.apply(this,arguments)}return t(s,e),s.List=o,s.prototype.template=l,s.prototype.collectionClass=r.Collection,s.prototype.listClass=s.List,s.prototype.initialize=function(){return this.collection||(this.collection=new this.collectionClass),this.collection.on("sync",this.fetchSuccessful,this),this.listView=new this.listClass({collection:this.collection}),this.listView.setView(".grid",new a).render(),this.setView(".list",this.listView)},s.prototype.updateFilter=function(t){var e;return e=n(t.target),t.which===n.ui.keyCode.ESCAPE&&e.val(""),this.applyFilter(e.val())},s.prototype.applyFilter=function(){throw"Implement in child class."},s.prototype.serialize=function(){return{model:this.model,total:this.collection.length}},s.prototype.fetchSuccessful=function(){return this.listView.renderGrid(),this.$(".name").css("display","inline"),this.onResize()},s.prototype.afterRender=function(){return null!=this.model.get("forbidden")?this.setView(new i({title:"Permissions Error",body:"You do not have permissions to view the contents of "+this.model.id+"."})).render():this.onResize()},s.prototype.onResize=function(){return this.listView.onResize()},s}(r.Layout)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/organizations/members/list",["require","views/controls/members/tab","utils/i18n.gettext"],function(e){var n,r,i;return n=e("views/controls/members/tab"),i=e("utils/i18n.gettext"),r=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.headerHeight=145,n.prototype.gridOptions={permissionsTooltipMessage:"You do not have permissions to remove this member from the currently selected organization"},n.prototype.columns=[{id:"username",name:i("Name"),field:"username",formatter:function(t,e,n,r,i){return i.id}},{id:"remove",name:i("Remove"),width:70,resizable:!1,formatter:function(t,e,n,r,o){return'<button class="btn btn-mini remove-member"data-id='+o.id+' type="button">'+i("Remove")+"</button>"}}],n}(n.List)})}.call(this),define("templates/controls/alerts/success",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<div class="alert alert-success alert-block"><h4><i class="icon-check-sign"></i>&nbsp;');var __val__=title;buf.push(escape(null==__val__?"":__val__)),buf.push("</h4>");var __val__=body;buf.push(null==__val__?"":__val__),buf.push("</div>")}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/controls/alerts/success",["require","b","j!controls/alerts/success"],function(e){var n,r,i;return n=e("b"),i=e("j!controls/alerts/success"),r=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.template=i,n.prototype.initialize=function(){var t,e;return null==this.title&&(this.title=null!=(t=this.options.title)?t:"Success"),null!=this.body?this.body:this.body=null!=(e=this.options.body)?e:"Your request completed successfully."},n.prototype.serialize=function(){return{title:this.title,body:this.body}},n}(n.Layout)})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function r(){this.constructor=t}for(var i in e)n.call(e,i)&&(t[i]=e[i]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},n={}.hasOwnProperty;define("views/users/modals/remove_user_modal",["require","views/organizations/modals/leave","views/controls/alerts/success"],function(n){var r,i,o;return r=n("views/organizations/modals/leave"),o=n("views/controls/alerts/success"),i=function(n){function r(){return this.successEvent=t(this.successEvent,this),r.__super__.constructor.apply(this,arguments)}return e(r,n),r.prototype.className=r.prototype.className+" modal-remove-user",r.prototype.initialize=function(){return this.user=this.options.user,this.title="Remove User from Organization",this.subTitle=this.user.id,null==this.commandText&&(this.commandText="Remove User"),r.__super__.initialize.call(this)},r.prototype.body=function(){return"Are you certain you wish to remove <code>"+this.user.id+"</code> from the organization <code>"+this.model.id+"</code>? You would need to re-invite "+this.user.id+" to the organization and have "+this.user.id+" accept before he or she could be reinstated."},r.prototype.ajaxData=function(){return{user:this.user.id}},r.prototype.userText=function(){return this.user.id},r.prototype.ajaxUrl=function(){return this.user.url()+"/remove"},r.prototype.successEvent=function(){return this.$(".btn:eq(0)").html("Close"),this.$(".btn-warning").attr("disabled",!0),this.setView(".modal-body",new o({body:"<code>"+this.user.id+"</code> was successfully removed from <code>"+this.model.id+"</code>."})).render(),this.model.users.remove(this.user),this.trigger("remove-success")},r}(r)})}.call(this),define("templates/organizations/members/tab",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<div class="org-members"><div class="toolbar"><div class="pull-right"><div class="input-append"><input type="text" placeholder="Search Members..." class="filter input-medium"/><span class="add-on"><i class="icon-search"></i></span></div></div></div><div class="list"></div></div>')}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/organizations/members/tab",["require","views/organizations/modals/leave","views/controls/members/tab","views/organizations/members/list","views/users/modals/remove_user_modal","collections/users","state","j!organizations/members/tab"],function(e){var n,r,i,o,s,a,l,u;return n=e("views/organizations/modals/leave"),r=e("views/controls/members/tab"),i=e("views/organizations/members/list"),s=e("views/users/modals/remove_user_modal"),a=e("collections/users"),l=e("state"),u=e("j!organizations/members/tab"),o=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype.template=u,r.prototype.collectionClass=a,r.prototype.listClass=i,r.prototype.events={"click .remove-member":"removeUser","keyup input.filter":"updateFilter"},r.prototype.initialize=function(){return this.app=this.options.app,this.originalCollection=new this.collectionClass([],{organization:this.model}),this.originalCollection.fetch(),this.collection=new this.collectionClass([],{organization:this.model}),this.collection.fetch(),r.__super__.initialize.apply(this,arguments)},r.prototype.applyFilter=function(t){var e,n,r;return n=new RegExp("^"+t,"i"),e=this.originalCollection.getThinSlickBackCollection(),r=e.filter(function(t){return t.get("id").match(n)}),this.collection.reset(r)},r.prototype.removeUser=function(t){var e,r,i;return t.preventDefault(),e=t.currentTarget.getAttribute("data-id"),this.deleteModel=this.originalCollection.get(e),(null!=(i=l.get("user"))?i.id:void 0)===this.deleteModel.id?new n({app:this.app,controller:this,model:this.model}):(r=new s({app:this.app,controller:this,model:this.model,user:this.deleteModel}),r.once("remove-success",this.removed,this))},r.prototype.removed=function(){return this.originalCollection.remove(this.deleteModel),this.collection.remove(this.deleteModel),delete this.deleteModel},r}(r)})}.call(this),function(t,e,n){e[t]=e[t]||n(),"undefined"!=typeof module&&module.exports?module.exports=e[t]:"function"==typeof define&&define.amd&&define("promise",[],function(){return e[t]})}("Promise","undefined"!=typeof global?global:this,function(){"use strict";function t(t,e){d.add(t,e),c||(c=h(d.drain))}function e(t){var e,n=typeof t;return null==t||"object"!=n&&"function"!=n||(e=t.then),"function"==typeof e?e:!1}function n(){for(var t=0;t<this.chain.length;t++)r(this,1===this.state?this.chain[t].success:this.chain[t].failure,this.chain[t]);this.chain.length=0}function r(t,n,r){var i,o;try{n===!1?r.reject(t.msg):(i=n===!0?t.msg:n.call(void 0,t.msg),i===r.promise?r.reject(TypeError("Promise-chain cycle")):(o=e(i))?o.call(i,r.resolve,r.reject):r.resolve(i))}catch(s){r.reject(s)}}function i(r){var s,l,u=this;if(!u.triggered){u.triggered=!0,u.def&&(u=u.def);try{(s=e(r))?(l=new a(u),s.call(r,function(){i.apply(l,arguments)},function(){o.apply(l,arguments)})):(u.msg=r,u.state=1,u.chain.length>0&&t(n,u))}catch(c){o.call(l||new a(u),c)}}}function o(e){var r=this;r.triggered||(r.triggered=!0,r.def&&(r=r.def),r.msg=e,r.state=2,r.chain.length>0&&t(n,r))}function s(t,e,n,r){for(var i=0;i<e.length;i++)!function(i){t.resolve(e[i]).then(function(t){n(i,t)},r)}(i)}function a(t){this.def=t,this.triggered=!1}function l(t){this.promise=t,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function u(e){if("function"!=typeof e)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var r=new l(this);this.then=function(e,i){var o={success:"function"==typeof e?e:!0,failure:"function"==typeof i?i:!1};return o.promise=new this.constructor(function(t,e){if("function"!=typeof t||"function"!=typeof e)throw TypeError("Not a function");o.resolve=t,o.reject=e}),r.chain.push(o),0!==r.state&&t(n,r),o.promise},this["catch"]=function(t){return this.then(void 0,t)};try{e.call(void 0,function(t){i.call(r,t)},function(t){o.call(r,t)})}catch(s){o.call(r,s)}}var c,d,p=Object.prototype.toString,h="undefined"!=typeof setImmediate?function(t){return setImmediate(t)}:setTimeout,f=Object.defineProperty?function(t,e,n,r){return Object.defineProperty(t,e,{value:n,writable:!0,configurable:r!==!1})}:function(t,e,n){return t[e]=n,t};d=function(){function t(t,e){this.fn=t,this.self=e,this.next=void 0}var e,n,r;return{add:function(i,o){r=new t(i,o),n?n.next=r:e=r,n=r,r=void 0},drain:function(){var t=e;for(e=n=c=void 0;t;)t.fn.call(t.self),t=t.next}}}();var g=f({},"constructor",u,!1);return f(u,"prototype",g,!1),f(g,"__NPO__",0,!1),f(u,"resolve",function(t){var e=this;return t&&"object"==typeof t&&1===t.__NPO__?t:new e(function(e,n){if("function"!=typeof e||"function"!=typeof n)throw TypeError("Not a function");e(t)})}),f(u,"reject",function(t){return new this(function(e,n){if("function"!=typeof e||"function"!=typeof n)throw TypeError("Not a function");n(t)})}),f(u,"all",function(t){var e=this;return"[object Array]"!=p.call(t)?e.reject(TypeError("Not an array")):0===t.length?e.resolve([]):new e(function(n,r){if("function"!=typeof n||"function"!=typeof r)throw TypeError("Not a function");var i=t.length,o=Array(i),a=0;s(e,t,function(t,e){o[t]=e,++a===i&&n(o)},r)})}),f(u,"race",function(t){var e=this;return"[object Array]"!=p.call(t)?e.reject(TypeError("Not an array")):new e(function(n,r){if("function"!=typeof n||"function"!=typeof r)throw TypeError("Not a function");s(e,t,function(t,e){n(e)},r)})}),u}),function(){define("utils/blob_supported",["require","promise"],function(t){var e;return new(e=t("promise"))(function(t,e){var n,r,i,o,s;try{o=new Blob(["<svg xmlns='http://www.w3.org/2000/svg'></svg>"],{type:"image/svg+xml;charset=utf-8"})}catch(a){n=a,e(!1)}return s=window.webkitURL||window.URL,i=s.createObjectURL(o),null===/^blob:/.exec(i)?e(!1):(r=new Image,r.onload=function(){return t(!0)},r.onerror=function(){return e(!1)},r.src=i)})})}.call(this),window.saveAs=window.saveAs||navigator.msSaveBlob&&navigator.msSaveBlob.bind(navigator)||function(t){"use strict";var e=t.document,n=function(){return t.URL||t.webkitURL||t},r=t.URL||t.webkitURL||t,i=e.createElementNS("http://www.w3.org/1999/xhtml","a"),o="download"in i,s=function(n){var r=e.createEvent("MouseEvents");r.initMouseEvent("click",!0,!1,t,0,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(r)},a=t.webkitRequestFileSystem,l=t.requestFileSystem||a||t.mozRequestFileSystem,u=function(e){(t.setImmediate||t.setTimeout)(function(){throw e},0)},c="application/octet-stream",d=0,p=[],h=function(){for(var t=p.length;t--;){var e=p[t];"string"==typeof e?r.revokeObjectURL(e):e.remove()}p.length=0},f=function(t,e,n){e=[].concat(e);for(var r=e.length;r--;){var i=t["on"+e[r]];if("function"==typeof i)try{i.call(t,n||t)}catch(o){u(o)}}},g=function(e,r){var u,h,g,m=this,v=e.type,y=!1,b=function(){var t=n().createObjectURL(e);return p.push(t),t},_=function(){f(m,"writestart progress write writeend".split(" "))},w=function(){(y||!u)&&(u=b(e)),h?h.location.href=u:window.open(u,"_blank"),m.readyState=m.DONE,_()},x=function(t){return function(){return m.readyState!==m.DONE?t.apply(this,arguments):void 0}},k={create:!0,exclusive:!1};return m.readyState=m.INIT,r||(r="download"),o?(u=b(e),i.href=u,i.download=r,s(i),m.readyState=m.DONE,void _()):(t.chrome&&v&&v!==c&&(g=e.slice||e.webkitSlice,e=g.call(e,0,e.size,c),y=!0),a&&"download"!==r&&(r+=".download"),(v===c||a)&&(h=t),l?(d+=e.size,void l(t.TEMPORARY,d,x(function(t){t.root.getDirectory("saved",k,x(function(t){var n=function(){t.getFile(r,k,x(function(t){t.createWriter(x(function(n){n.onwriteend=function(e){h.location.href=t.toURL(),p.push(t),m.readyState=m.DONE,f(m,"writeend",e)},n.onerror=function(){var t=n.error;t.code!==t.ABORT_ERR&&w()},"writestart progress write abort".split(" ").forEach(function(t){n["on"+t]=m["on"+t]}),n.write(e),m.abort=function(){n.abort(),m.readyState=m.DONE},m.readyState=m.WRITING}),w)}),w)};t.getFile(r,{create:!1},x(function(t){t.remove(),n()}),x(function(t){t.code===t.NOT_FOUND_ERR?n():w()}))}),w)}),w)):void w())},m=g.prototype,v=function(t,e){return new g(t,e)};return m.abort=function(){var t=this;t.readyState=t.DONE,f(t,"abort")},m.readyState=m.INIT=0,m.WRITING=1,m.DONE=2,m.error=m.onwritestart=m.onprogress=m.onwrite=m.onabort=m.onerror=m.onwriteend=null,t.addEventListener("unload",h,!1),v}(self),define("FileSaver",function(t){return function(){var e;return e||t.saveAs}}(this)),define("templates/controls/modals/rekey",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<div class="modal-header">'),"started"!==state&&buf.push('<i data-dismiss="modal" aria-hidden="true" class="icon-remove"></i>'),buf.push('<h3 id="modal-label"><i class="icon-warning-sign"></i>&nbsp;Reset Key</h3></div><div class="modal-subheader">');var __val__=model.id;if(buf.push(escape(null==__val__?"":__val__)),buf.push('</div><div class="modal-body">'),"finished"===state){buf.push('<div class="alert alert-success">The key has been reset. This key is not stored by the Chef server,\nso please make sure to copy or download it somewhere safe.</div><pre>');var __val__=privateKey;buf.push(escape(null==__val__?"":__val__)),buf.push("</pre>")}else if("error"===state){buf.push('<div class="alert alert-error alert-block"><h4><i class="icon-exclamation-sign"></i>&nbsp;Server Error</h4>');var __val__=message;buf.push(null==__val__?"":__val__),buf.push("</div>")}else if("queued"===state||"started"===state){var __val__=logo();buf.push(null==__val__?"":__val__)}else buf.push("Please note that the current key for <code>"+escape(null==(interp=model.id)?"":interp)+"</code> will no longer\nbe accepted after resetting its key. Are you certain you want to continue?");buf.push('</div><div class="modal-list"></div><div class="modal-footer"><button'),buf.push(attrs({"data-dismiss":"modal","aria-hidden":"true",disabled:"started"===state,"class":"btn btn-close"},{"data-dismiss":!0,"aria-hidden":!0,disabled:!0})),buf.push(">");var __val__=closeButtonText;buf.push(escape(null==__val__?"":__val__)),buf.push("</button>"),"finished"===state?blobSupported&&buf.push('<button class="btn btn-primary btn-download"><i class="icon-download-alt"></i>&nbsp;Download</button>'):(buf.push("<button"),buf.push(attrs({disabled:"started"===state,"class":"btn btn-warning btn-reset"},{disabled:!0})),buf.push('><i class="icon-warning-sign"></i>&nbsp;Reset Key</button>')),buf.push("</div>")}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/controls/modals/rekey",["require","b","views/controls/modals/base","utils/i18n.gettext","underscore","utils/blob_supported","FileSaver","j!controls/modals/rekey"],function(e){var n,r,i,o,s,a,l,u;return n=e("b"),r=e("views/controls/modals/base"),o=e("utils/i18n.gettext"),s=e("underscore"),a=e("utils/blob_supported"),l=e("FileSaver"),u=e("j!controls/modals/rekey"),i=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype.className=r.prototype.className+" modal-rekey",r.prototype.template=u,r.prototype.events={"click .btn-reset":"rekey","click .btn-download":"download"},r.prototype.initialize=function(t){return this.options=t,this.state=new n.Model({closeButtonText:this.closeButtonText}),r.__super__.initialize.call(this),this.state.on("change",this.render,this),this.model.on("request",function(t){return function(){return t.state.set({state:"started"})}}(this)),a.then(function(t){return function(e,n){return t.state.set({blobSupported:e||n})}}(this))},r.prototype.serialize=function(){return s.extend(r.__super__.serialize.call(this),{blobSupported:this.state.get("blobSupported"),closeButtonText:this.state.get("closeButtonText"),message:this.state.get("message"),privateKey:this.model.get("private_key"),state:this.state.get("state")})},r.prototype.rekey=function(t){return t.preventDefault(),this.model.rekey().then(function(t){return function(e){return t.model.set(e),t.state.set({state:"finished"})}}(this)).fail(function(t){return function(e){var n;return t.state.set({message:(null!=(n=e.responseJSON)?n.error:void 0)||e.statusText,state:"error"})}}(this)).always(function(t){return function(){return t.state.set({closeButtonText:o("Close")})}}(this))},r.prototype.download=function(t){return t.preventDefault(),this.model.get("private_key")&&this.state.get("blobSupported")?l(new Blob([this.model.get("private_key")]),this.model.id+".pem"):void 0},r}(r)})}.call(this),define("templates/organizations/starter_kit_list",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<div class="starter-kit-list"><h3>Welcome to '+escape(null==(interp=chef_title)?"":interp)+'!</h3><div class="panel span6"><header class="organizations"><h1>Please select an organization you would like to get started with</h1></header><div class="content"><ul>'),function(){if("number"==typeof organizations.models.length)for(var t=0,e=organizations.models.length;e>t;t++){var n=organizations.models[t];buf.push("<li><a"),buf.push(attrs({href:""+n.url()+"/getting_started","class":"organization"},{href:!0})),buf.push(">");var r=n.id;buf.push(escape(null==r?"":r)),buf.push("</a></li>")}else for(var t in organizations.models){var n=organizations.models[t];buf.push("<li><a"),buf.push(attrs({href:""+n.url()+"/getting_started","class":"organization"},{href:!0})),buf.push(">");var r=n.id;buf.push(escape(null==r?"":r)),buf.push("</a></li>")}}.call(this),buf.push("</ul></div></div></div>")}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/organizations/starter_kit_list",["require","b","config","router","j!organizations/starter_kit_list"],function(e){var n,r,i,o,s;return n=e("b"),i=e("config"),o=e("router"),s=e("j!organizations/starter_kit_list"),r=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.template=s,n.prototype.events={"click a":"clickLink"},n.prototype.initialize=function(){return this.organizations=this.options.organizations},n.prototype.serialize=function(){return{chef_title:i.chef_title,organizations:this.organizations}},n.prototype.clickLink=function(t){return t.preventDefault(),o.navigate(this.$(t.currentTarget).attr("href"),{trigger:!0})},n}(n.Layout)})}.call(this),define("templates/organizations/starter_kit",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<div class="starter-kit"><h3>Thank you for choosing '+escape(null==(interp=chef_title)?"":interp)+"!</h3><h4>Follow these steps to be on your way to using "+escape(null==(interp=chef_title)?"":interp)+'</h4><div class="row-fluid steps"><div class="span3"><form'),buf.push(attrs({method:"post",action:starter_kit_path},{method:!0,action:!0})),buf.push("><input"),buf.push(attrs({type:"hidden",name:csrf_param,value:csrf_token},{type:!0,name:!0,value:!0})),buf.push('/><button id="download-kit" class="btn btn-large">Download Starter Kit</button></form></div><div class="span3"><a'),buf.push(attrs({id:"setup-workstation",href:learn_chef_url,target:"_blank","class":"btn btn-large"},{href:!0,target:!0})),buf.push('>Learn Chef</a></div></div><h4>What\'s next?</h4><div class="row-fluid whats-next"><div class="span3"><h5><a'),buf.push(attrs({href:chef_documentation_url},{href:!0})),buf.push('>Chef Documentation</a></h5><p>The best place to start learning about Chef in general.</p></div><div class="divider"></div><div class="span3"><h5><a'),buf.push(attrs({href:chef_supermarket_url+"/cookbooks"},{href:!0})),buf.push('>Browse Community Cookbooks</a></h5><p>Hundreds of members of the Chef community have contributed cookbooks you can use or draw inspiration from.</p></div><div class="divider"></div><div class="span3"><h5><a'),buf.push(attrs({href:support_tickets_url},{href:!0})),buf.push(">Contact Support</a></h5><p>Our support team is here to provide assistance with any issues you may\nhave while using "+escape(null==(interp=chef_title)?"":interp)+". <a"),buf.push(attrs({href:chef_www_url+"/service-level-agreement/"},{href:!0})),buf.push('>Learn more about support for Chef</a>.</p></div><div class="divider"></div><div class="span3"><h5>More Resources</h5><ul><li><a'),buf.push(attrs({href:"http://webchat.freenode.net/?channels=chef&nick="+username},{href:!0})),buf.push(">Chat With Us</a></li><li><a"),buf.push(attrs({href:chef_mailing_list_subscribe_url},{href:!0})),buf.push('>Join the Mailing List</a></li><li><a href="http://foodfightshow.org/">Watch the Food Fight show</a></li><li><a'),buf.push(attrs({href:chef_www_url+"/training/"},{href:!0})),buf.push(">Get Professional Training</a></li></ul></div></div></div>")}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/organizations/starter_kit",["require","b","views/controls/modals/confirmation","utils/i18n.gettext","config","state","j!organizations/starter_kit"],function(e){var n,r,i,o,s,a;return n=e("b"),r=e("views/controls/modals/confirmation"),o=e("utils/i18n.gettext"),s=e("config"),a=e("state"),i=function(n){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.template=e("j!organizations/starter_kit"),i.prototype.events={"click button":"downloadStarterKit"},i.prototype.serialize=function(){var t,e,n,r,i,o,l,u;return{chef_documentation_url:s.chef_documentation_url,chef_mailing_list_subscribe_url:s.chef_mailing_list_subscribe_url,chef_supermarket_url:s.chef_supermarket_url,chef_www_url:s.chef_www_url,chef_title:s.chef_title,csrf_param:null!=(t=this.options)&&null!=(e=t.app)?e.csrf_param:void 0,csrf_token:null!=(n=this.options)&&null!=(r=n.app)?r.csrf_token:void 0,learn_chef_url:s.learn_chef_url,starter_kit_path:(null!=(i=this.options)&&null!=(o=i.app)&&null!=(l=o.currentOrg)?l.url():void 0)+"/getting_started",support_tickets_url:s.support_tickets_url,username:null!=(u=a.get("user"))?u.id:void 0}},i.prototype.downloadStarterKit=function(t){return t.preventDefault(),new r({app:this.options.app,controller:this,title:o("Are you certain?"),message:o("Your user key will be reset. Are you sure you want to do this?"),yes:function(t){return function(){return t.$("form").submit()
}}(this)})},i}(n.Layout)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("controllers/organizations",["require","config","controllers/base","views/organizations/modals/create","views/controls/modals/invite_user","views/organizations/modals/leave","views/organizations/list","views/organizations/members/tab","views/controls/modals/rekey","views/organizations/starter_kit_list","views/organizations/starter_kit","utils/i18n.gettext","underscore","utils/i18n","router"],function(e){var n,r,i,o,s,a,l,u,c,d,p,h,f,g,m;return f=e("config"),n=e("controllers/base"),r=e("views/organizations/modals/create"),i=e("views/controls/modals/invite_user"),o=e("views/organizations/modals/leave"),s=e("views/organizations/list"),a=e("views/organizations/members/tab"),u=e("views/controls/modals/rekey"),c=e("views/organizations/starter_kit_list"),d=e("views/organizations/starter_kit"),p=e("utils/i18n.gettext"),h=e("underscore"),g=e("utils/i18n"),m=e("router"),l=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.id="organizations",n.prototype.collection_type="organizations",n.prototype.messages={label:function(t){return g.ngettext("Organization","Organizations",null!=t?t:1)},selectEmpty:function(){return p("Please select an Organization")},selectMulti:function(){return p("%d organizations selected")},searchMessage:p("Search Organizations"),showingAllObjects:function(){return p("Showing <strong>All Organizations</strong>")}},n.prototype.listViewClass=s,n.prototype.tabs=[{id:"members",label:p("Members"),viewClass:a}],n.createOrganizationAction=function(){return f.org_creation_enabled?{id:"create",label:p("Create"),always:!0,dropdown:!1}:{id:"create",label:p("Create"),disabled_when:function(){return!0},dropdown:!1,disabled_message:"Creating organizations from Chef Manage has been disabled"}},n.prototype.actions=[n.createOrganizationAction(),{id:"rekey",label:p("Reset Validation Key")},{id:"gen_knife_config",label:p("Generate Knife Config")},{id:"invite_user",label:p("Invite User")},{id:"leave_organization",label:p("Leave Organization")},{id:"starterKit",label:p("Starter Kit")}],n.prototype.routes={organizations:"index","organizations/:id":"show","organizations/:id/details":"details","organizations/:id/members":"members","organizations/:id/getting_started":"gettingStarted","starter-kit":"starterKit"},n.prototype.getCollection=function(){return this.app.organizations},n.prototype.checkAccess=function(){return!0},n.prototype.action_invite_user=function(){return new i({model:this.selection.at(0),app:this.app,controller:this})},n.prototype.action_create=function(){return new r({app:this.app})},n.prototype.action_rekey=function(){var t;return t=this.selection.at(0),new u({model:t.validationClient,app:this.app,controller:this})},n.prototype.action_gen_knife_config=function(){return window.location.assign(this.selection.at(0).url()+"/knife_config")},n.prototype.action_leave_organization=function(){return new o({model:this.selection.at(0),app:this.app,controller:this})},n.prototype.action_starterKit=function(){return m.navigate(this.selection.at(0).url()+"/getting_started",{trigger:!0})},n.prototype.route_starterKit=n.wrapRoute(!1)(function(){return this.app.applyController(this,!1,new c({organizations:this.app.organizations}))}),n.prototype.route_gettingStarted=n.wrapRoute(!1)(function(t){var e;return e=this.app.organizations.getCurrent(t),this.checkAccess(e)?this.app.applyController(this,!1,new d({organizations:this.app.organizations,app:this.app})):this.app.rootRoute()}),n.prototype.route_details=function(t){return this.route_show(t,"details")},n.prototype.route_members=function(t){return this.route_show(t,"members")},n.prototype.route_show=function(t,e){return this.currentTabId=e,t=this.app.organizations.get(t),null!=t?[t]:[]},n}(n)})}.call(this),define("templates/users/modals/change_password",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<div class="modal-header">'),"started"!==state&&buf.push('<i data-dismiss="modal" aria-hidden="true" class="icon-remove"></i>'),buf.push('<h3 id="modal-label"><i class="icon-lock"></i>&nbsp;Change Password</h3></div><div class="modal-subheader">');var __val__=model.id;if(buf.push(escape(null==__val__?"":__val__)),buf.push('</div><div class="modal-body">'),"finished"===state)buf.push("Success!");else if("error"===state){buf.push('<div class="alert alert-error alert-block"><h4><i class="icon-exclamation-sign"></i>&nbsp;Server Error</h4>');var __val__=message;buf.push(null==__val__?"":__val__),buf.push("</div>")}else if("queued"===state||"started"===state){var __val__=logo();buf.push(null==__val__?"":__val__)}else buf.push('<form><div class="message"></div><div class="control-group"><label for="current_password" class="control-label">Current Password</label><div class="controls"><input id="current_password" name="current_password" type="password" maxlength="50" autofocus="autofocus" autocomplete="off"/><span class="help-inline"></span></div></div><div class="control-group"><label for="new_password" class="control-label">New Password</label><div class="controls"><input id="new_password" name="new_password" type="password" maxlength="50" autocomplete="off"/><span class="help-inline"></span></div></div><div class="control-group"><label for="new_password_confirmation" class="control-label">Confirm New Password</label><div class="controls"><input id="new_password_confirmation" name="new_password_confirmation" type="password" maxlength="50" autocomplete="off"/><span class="help-inline"></span></div></div></form>');buf.push('</div><div class="modal-list"></div><div class="modal-footer"><button'),buf.push(attrs({"data-dismiss":"modal","aria-hidden":"true",disabled:"started"===state,"class":"btn btn-close"},{"data-dismiss":!0,"aria-hidden":!0,disabled:!0})),buf.push(">");var __val__=closeButtonText;buf.push(escape(null==__val__?"":__val__)),buf.push('</button><button disabled="disabled" class="btn btn-primary submit"><i class="icon-lock"></i>&nbsp;Change Password</button></div>')}return buf.join("")}}),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function r(){this.constructor=t}for(var i in e)n.call(e,i)&&(t[i]=e[i]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},n={}.hasOwnProperty;define("views/users/modals/change_password",["require","views/controls/modals/base","views/controls/alerts/error_line","views/controls/spinner","views/controls/alerts/success_line","j!users/modals/change_password"],function(n){var r,i,o,s,a,l;return r=n("views/controls/modals/base"),o=n("views/controls/alerts/error_line"),s=n("views/controls/spinner"),a=n("views/controls/alerts/success_line"),l=n("j!users/modals/change_password"),i=function(n){function r(){return this.toggleSubmit=t(this.toggleSubmit,this),r.__super__.constructor.apply(this,arguments)}return e(r,n),r.prototype.template=l,r.prototype.events={"click .submit":"submit"},r.prototype.bindings={"[name=current_password]":"current_password","[name=new_password]":"new_password","[name=new_password_confirmation]":"new_password_confirmation"},r.prototype.initialize=function(){return r.__super__.initialize.call(this),this.model.on("validated",this.toggleSubmit)},r.prototype.afterRender=function(){return r.__super__.afterRender.call(this),this.bindValidation()},r.prototype.submit=function(){return this.model.validate().then(function(t){return function(){return t.setView(".message",new s).render(),t.model.sync("update",t.model,{success:function(){return t.setView(".message",new a({body:"Password changed."})).render(),t.$("button[data-dismiss=modal]").text("Close")},error:function(e){var n;return t.setView(".message",new o({body:null!=(n=e.responseJSON)?n.error:void 0})).render(),t.$("button[data-dismiss=modal]").text("Cancel")}})}}(this))},r.prototype.toggleSubmit=function(t,e,n){return this.$(".submit").prop("disabled",!n)},r}(r)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("models/user_password",["require","b","utils/backbone_validation"],function(e){var n,r,i;return n=e("b"),i=e("utils/backbone_validation"),r=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),_.extend(n.prototype,i.mixin()),n.prototype.defaults={current_password:"",new_password:"",new_password_confirmation:""},n.prototype.labels={new_password_confirmation:"New password confirmation"},n.prototype.validation={current_password:{minLength:6,maxLength:50,required:!0},new_password:{minLength:6,maxLength:50,required:!0},new_password_confirmation:{equalTo:"new_password",msg:"Passwords must match"}},n.prototype.initialize=function(t,e){var n;return n=null!=e?e.user:void 0,n?(this.set(n.attributes,{silent:!0}),this.url=function(){return n.url()+"/password"}):void 0},n}(n.Model)})}.call(this),define("templates/users/profile",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push("<header><h1>Profile</h1></header><nav>"),account_management_link_enabled&&(buf.push("<a"),buf.push(attrs({href:chef_account_management_url,target:"_blank","class":"account-management"},{href:!0,target:!0})),buf.push(">Account Management</a>")),buf.push("<a"),buf.push(attrs({"data-toggle":change_password_disabled?"tooltip":"",title:change_password_disabled?change_password_disabled_message:!1,"class":"change-password pull-right "+(change_password_disabled?"disabled":"")},{"class":!0,"data-toggle":!0,title:!0})),buf.push('><i class="icon-lock"></i>Change Password</a></nav><form class="content"><div class="messages"></div><div class="control-group"><label for="email" class="control-label">Email</label><div class="controls"><input'),buf.push(attrs({id:"email",name:"email",type:"text",value:model.get("email")},{name:!0,type:!0,value:!0})),buf.push('/><span class="help-inline"></span></div></div><div class="control-group"><label for="first_name" class="control-label">First Name</label><div class="controls"><input'),buf.push(attrs({id:"first_name",name:"first_name",type:"text",value:model.get("first_name")},{name:!0,type:!0,value:!0})),buf.push('/><span class="help-inline"></span></div></div><div class="control-group"><label for="middle_name" class="control-label">Middle Name</label><div class="controls"><input'),buf.push(attrs({id:"middle_name",name:"middle_name",type:"text",value:model.get("middle_name")},{name:!0,type:!0,value:!0})),buf.push('/><span class="help-inline"></span></div></div><div class="control-group"><label for="last_name" class="control-label">Last Name</label><div class="controls"><input'),buf.push(attrs({id:"last_name",name:"last_name",type:"text",value:model.get("last_name")},{name:!0,type:!0,value:!0})),buf.push('/><span class="help-inline"></span></div></div><div class="form-actions"><button class="btn btn-primary save">Save</button></div></form>')}return buf.join("")}}),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function r(){this.constructor=t}for(var i in e)n.call(e,i)&&(t[i]=e[i]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},n={}.hasOwnProperty;define("views/users/profile",["require","config","b","views/users/modals/change_password","views/controls/alerts/error_line","views/controls/spinner","views/controls/alerts/success_line","models/user_password","bootstrap-tooltip","j!users/profile"],function(n){var r,i,o,s,a,l,u,c;return c=n("config"),r=n("b"),i=n("views/users/modals/change_password"),o=n("views/controls/alerts/error_line"),s=n("views/controls/spinner"),a=n("views/controls/alerts/success_line"),l=n("models/user_password"),n("bootstrap-tooltip"),u=function(r){function u(){return this.toggleSubmit=t(this.toggleSubmit,this),u.__super__.constructor.apply(this,arguments)}return e(u,r),u.prototype.template=n("j!users/profile"),u.prototype.bindings={"#email":"email","#first_name":"first_name","#middle_name":"middle_name","#last_name":"last_name"},u.prototype.events={"click nav .change-password":"changePassword","submit form":"save"},u.prototype.initialize=function(){return this.change_password_disabled=c.external_auth.enabled,this.model.on("validated",this.toggleSubmit)},u.prototype.afterRender=function(){return this.$("nav a").tooltip({placement:"bottom"}),this.bindValidation()},u.prototype.save=function(t){return t.preventDefault(),this.model.validate().then(function(t){return function(){return t.setView(".messages",new s).render(),t.model.sync("update",t.model,{success:function(){return t.setView(".messages",new a({body:"Your profile was successfully updated."})).render()},error:function(e){var n;return t.setView(".messages",new o({body:"Error: "+(null!=(n=e.responseJSON)?n.error:void 0)||"There was a problem. Please try again later."})).render()}})}}(this))},u.prototype.serialize=function(){return{account_management_link_enabled:!c.private_chef&&this.model.id===c.user.username,change_password_disabled:this.change_password_disabled,change_password_disabled_message:"Passwords must be changed through "+c.external_auth.adjective,chef_account_management_url:c.chef_account_management_url,model:this.model}},u.prototype.changePassword=function(){return this.change_password_disabled?void 0:new i({model:new l({},{user:this.model})})},u.prototype.toggleSubmit=function(t,e,n){return this.$(".btn-primary").prop("disabled",!n)},u}(r.Layout)})}.call(this),define("templates/controls/public_key",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){if(buf.push('<header><h1>Public Key</h1></header><nav><a class="rekey pull-right"><i class="icon-key"></i>Reset Key</a></nav><pre class="content">'),null==publicKey)buf.push("There was no key to display.");else{var __val__=publicKey;buf.push(escape(null==__val__?"":__val__))}buf.push("</pre>")}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/controls/public_key",["require","b","views/controls/modals/rekey","j!controls/public_key"],function(e){var n,r,i,o;return n=e("b"),i=e("views/controls/modals/rekey"),o=e("j!controls/public_key"),r=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.events={"click nav .rekey":"rekey"},n.prototype.template=o,n.prototype.initialize=function(){return this.model.on("change:public_key",this.render,this)},n.prototype.serialize=function(){return{publicKey:this.model.get("public_key")}},n.prototype.rekey=function(){return new i({model:this.model})},n}(n.Layout)})}.call(this),define("templates/users/details",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<div class="row"><div class="profile panel span6"></div><div class="public-key panel span6"></div></div>')}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/users/details",["require","b","views/users/profile","views/controls/public_key","j!users/details"],function(e){var n,r,i,o,s;return n=e("b"),r=e("views/users/profile"),i=e("views/controls/public_key"),s=e("j!users/details"),o=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.template=s,n.prototype.afterRender=function(){return this.setView(".profile",new r({model:this.model})).render(),this.setView(".public-key",new i({model:this.model})).render()},n}(n.Layout)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("collections/user_groups",["models/group","slickback"],function(e,n){var r;return r=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.model=e,r.prototype.initialize=function(t,e){return r.__super__.initialize.apply(this,arguments),this.user=null!=e?e.user:void 0},r.prototype.url=function(){return this.user.url()+"/groups"},r}(n.Collection)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/users/groups/list",["require","views/controls/members/tab","utils/i18n.gettext"],function(e){var n,r,i;return n=e("views/controls/members/tab"),r=e("utils/i18n.gettext"),i=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.headerHeight=240,n.prototype.columns=[{id:"groupname",name:r("Name"),field:function(){return this.id}},{id:"remove",name:r("Remove"),width:70,resizable:!1,formatter:function(){return'<button class="btn btn-mini remove-member" type="button">'+r("Remove")+"</button>"}}],n}(n.List)})}.call(this),define("templates/users/groups/tab",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<div class="user-groups"><div class="add-to-group"><button class="btn btn-small">Add to Group</button></div><br/><div class="line-separator"></div><br/><div class="user-belongs-to"><label class="name"><span class="bold">');var __val__=user.get("username");buf.push(escape(null==__val__?"":__val__)),buf.push('</span>&nbsp;belongs to&nbsp;<span class="bold group_count">');var __val__=groups_count;buf.push(escape(null==__val__?"":__val__)),buf.push('</span><span class="groups_noun">&nbsp;');var __val__=1!=groups_count?"groups":"group";buf.push(escape(null==__val__?"":__val__)),buf.push('</span></label></div><div class="search-field"><input type="text" placeholder="Search Groups&hellip;" class="input-small"/><button class="btn"><i class="icon-search"></i></button></div><div class="list"></div></div>')}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/users/groups/tab",["require","views/controls/members/tab","collections/user_groups","views/users/groups/list","j!users/groups/tab"],function(e){var n,r,i,o,s;return n=e("views/controls/members/tab"),r=e("collections/user_groups"),i=e("views/users/groups/list"),s=e("j!users/groups/tab"),o=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.template=s,n.prototype.collectionClass=r,n.prototype.listClass=i,n.prototype.events={"click .remove-member":"removeGroup"},n.prototype.initialize=function(){return this.collection=new this.collectionClass([],{user:this.model}),n.__super__.initialize.apply(this,arguments),this.collection.fetch()},n.prototype.serialize=function(){return{user:this.model,groups_count:this.collection.length}},n.prototype.fetchSuccessful=function(){return n.__super__.fetchSuccessful.apply(this,arguments),this.$(".group_count").html(this.collection.length),this.$(".group_noun").html(1===this.collection.length?"group":"groups")},n.prototype.removeGroup=function(t){return t.preventDefault(),alert("Coming soon")},n}(n)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/users/list",["require","views/controls/list","utils/i18n.gettext"],function(e){var n,r,i;return n=e("views/controls/list"),r=e("utils/i18n.gettext"),i=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.initialize=function(){return n.__super__.initialize.apply(this,arguments),this.collection.on("url_manually_navigated",this.updateSelectedUser,this)},n.prototype.cleanup=function(){return n.__super__.cleanup.apply(this,arguments),this.collection.off(null,null,this)},n.prototype.updateSelectedUser=function(t){return this.selection.reset([t]),this.grid.updateHighlight()},n.prototype.columns=[{id:"username",name:r("User Name"),field:function(){return this.id}},{id:"display_name",name:r("Full Name"),field:"display_name"},{id:"email",name:r("Email"),field:"email"}],n}(n)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("controllers/users",["require","controllers/base","views/controls/modals/invite_user","views/organizations/modals/leave","views/users/profile","views/controls/modals/rekey","views/users/modals/remove_user_modal","utils/i18n.gettext","views/users/modals/change_password","views/users/details","views/users/groups/tab","views/users/list","models/user_password","config","utils/i18n","state"],function(e){var n,r,i,o,s,a,l,u,c,d,p,h,f,g,m,v;return n=e("controllers/base"),r=e("views/controls/modals/invite_user"),i=e("views/organizations/modals/leave"),o=e("views/users/profile"),s=e("views/controls/modals/rekey"),a=e("views/users/modals/remove_user_modal"),l=e("utils/i18n.gettext"),u=e("views/users/modals/change_password"),c=e("views/users/details"),d=e("views/users/groups/tab"),p=e("views/users/list"),h=e("models/user_password"),g=e("config"),m=e("utils/i18n"),v=e("state"),f=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}var o,d;return t(n,e),n.prototype.id="users",n.prototype.endpoint="users",n.prototype.collection_type="users",n.prototype.messages={label:function(t){return m.ngettext("User","Users",null!=t?t:1)},selectEmpty:function(){return l("Please select a user")},selectMulti:function(t){return m.sprintf(l("%d users selected"),t)},searchMessage:l("Search Users"),showingAllObjects:function(){return l("Showing <strong>All Users</strong>")},"delete":function(t){return m.ngettext("Delete User","Delete Users",null!=t?t:1)},deleteSingle:l("Deleting %s"),deleteLong:function(t){return m.ngettext("You are about to delete %d user:","You are about to delete %d users:",null!=t?t:1)}},n.prototype.listViewClass=p,n.prototype.tabs=[{id:"details",label:l("Details"),viewClass:c}],n.prototype.actions=[{id:"invite",label:l("Invite"),always:!0},{id:"change_password",label:l("Change Password"),disabled_when:function(){var t;return null!=(t=g.external_auth)?t.enabled:void 0},disabled_message:(null!=(o=g.external_auth)?o.enabled:void 0)?"Passwords must be changed through "+(null!=(d=g.external_auth)?d.adjective:void 0):void 0},{id:"rekey",label:l("Reset Key")},{id:"remove_user",label:l("Remove from Organization")}],n.prototype.routes={"organizations/:org/users":"index","organizations/:org/users/:id(/:tab)":"show"},n.prototype.checkAccess=function(){return!0},n.prototype.action_change_password=function(){return new u({model:new h({},{user:this.selection.at(0)})})},n.prototype.action_invite=function(){return new r({model:this.app.currentOrg,app:this.app,controller:this})},n.prototype.action_rekey=function(){return new s({model:this.selection.at(0)})},n.prototype.action_remove_user=function(){var t;return(null!=(t=v.get("user"))?t.id:void 0)===this.selection.at(0).id?new i({app:this.app,controller:this,model:this.app.currentOrg}):new a({app:this.app,controller:this,model:this.app.currentOrg,user:this.selection.at(0)})},n}(n)})}.call(this),define("templates/groups/modals/create",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<div class="modal-header">'),"started"!==state&&buf.push('<i data-dismiss="modal" aria-hidden="true" class="icon-remove"></i>'),buf.push('<h3 id="modal-label">');var __val__=title;if(buf.push(escape(null==__val__?"":__val__)),buf.push('</h3></div><div class="modal-subheader"></div><div class="modal-body">'),"finished"===state)buf.push("Success!");else if("error"===state){buf.push('<div class="alert alert-error alert-block"><h4><i class="icon-exclamation-sign"></i>&nbsp;Server Error</h4>');var __val__=message;buf.push(null==__val__?"":__val__),buf.push("</div>")}else if("queued"===state||"started"===state){var __val__=logo();buf.push(null==__val__?"":__val__)}else buf.push('<form class="create-group"><div class="control-group"><label for="create-group-name" class="control-label">Name</label><div class="controls"><input name="name" type="text" autofocus="autofocus" id="create-group-name"/><span class="help-inline"></span></div></div></form>');buf.push('</div><div class="modal-list"></div><div class="modal-footer"><button'),buf.push(attrs({"data-dismiss":"modal","aria-hidden":"true",disabled:"started"===state,"class":"btn btn-close"},{"data-dismiss":!0,"aria-hidden":!0,disabled:!0})),buf.push(">");var __val__=closeButtonText;buf.push(escape(null==__val__?"":__val__)),buf.push("</button>"),"error"!==state&&buf.push('<button disabled="disabled" class="btn btn-submit btn-primary">Create Group</button>'),buf.push("</div>")}return buf.join("")}}),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function r(){this.constructor=t}for(var i in e)n.call(e,i)&&(t[i]=e[i]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},n={}.hasOwnProperty;define("views/groups/modals/create",["require","models/group","views/controls/modals/base","utils/i18n.gettext","j!groups/modals/create"],function(n){var r,i,o,s,a;return i=n("models/group"),o=n("views/controls/modals/base"),s=n("utils/i18n.gettext"),a=n("j!groups/modals/create"),r=function(n){function r(){return this.toggleSubmit=t(this.toggleSubmit,this),r.__super__.constructor.apply(this,arguments)}return e(r,n),r.prototype.title=s("Create Group"),r.prototype.template=a,r.prototype.bindings={"[name=name]":"groupname"},r.prototype.events={"click .btn-submit":"submit"},r.prototype.initialize=function(){return this.model=new i({},{collection:this.options.app.currentOrg.groups}),r.__super__.initialize.call(this),this.model.on("validated",this.toggleSubmit)},r.prototype.serialize=function(){return _.extend(r.__super__.serialize.call(this),{state:this.state})},r.prototype.afterRender=function(){return this.submitButton=this.$(".btn-submit"),this.bindValidation(),r.__super__.afterRender.call(this)},r.prototype.submit=function(t){return t.preventDefault(),this.state&&"error"!==this.state?void 0:this.model.validate().then(function(t){return function(){return t.state="started",t.render(),t.model.sync("create",t.model,{url:t.model.collection.url(),success:function(){return t.onSaved()},error:function(){return t.state="error",t.render()}})}}(this))},r.prototype.toggleSubmit=function(t,e,n){return this.submitButton.prop("disabled",!n||"started"===this.state)},r}(o)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/groups/list",["require","views/controls/list","utils/i18n.gettext"],function(e){var n,r,i;return r=e("views/controls/list"),i=e("utils/i18n.gettext"),n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.columns=[{id:"groupname",name:i("Group Name"),field:function(){return this.id}}],n.prototype.beforeRender=function(){return n.__super__.beforeRender.call(this),-1===this.collection.currentPage?(this.collection.fetch(),delete this.collection.currentPage):void 0},n}(r)})}.call(this),define("templates/controls/add_button",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<button class="add-button btn btn-mini"><i class="icon-plus"></i>Add</button><div'),buf.push(attrs({"class":"add-pullout semimodal-pullout "+pulloutClassName},{"class":!0})),buf.push('><div class="input-append"><input type="text"/><button class="btn add-ok"><i class="icon-ok"></i></button><button class="btn add-cancel"><i class="icon-remove"></i></button></div></div>')}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/controls/add_button",["require","views/controls/semimodal","views/controls/spinner","j!controls/add_button","underscore","utils/i18n.gettext","jquery"],function(e){var n,r,i,o,s,a,l;return i=e("views/controls/semimodal"),o=e("views/controls/spinner"),l=e("j!controls/add_button"),a=e("underscore"),s=e("utils/i18n.gettext"),n=e("jquery"),r=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype.template=l,r.prototype.tagName="span",r.prototype.events={"click .add-button":"clickToggle"},r.prototype.initialize=function(){return r.__super__.initialize.apply(this,arguments),this.on("pullout",this.attachPulloutEvents,this),this.on("open",this.resetInput,this),a.bindAll(this,"clickOk","clickCancel")},r.prototype.cleanup=function(){return this.disableSpinner(),r.__super__.cleanup.apply(this,arguments)},r.prototype.attachPulloutEvents=function(){return this.$pullout.find(".add-ok").click(this.clickOk).end().find(".add-cancel").click(this.clickCancel)},r.prototype.resetInput=function(){return this.$pullout.find("input").val("").focus().end().find(".alert").remove()},r.prototype.clickOk=function(t){var e,r;return e=n(t.currentTarget),e.hasClass("disabled")?void 0:(r=this.$pullout.find("input").val(),this.trigger("add",r))},r.prototype.clickCancel=function(t){var e;return e=n(t.currentTarget),e.hasClass("disabled")?void 0:this.close()},r.prototype.enableSpinner=function(){return this.spinner=!0,this.$pullout.find(".add-ok").html('<i class="icon-spinner icon-spin"></i>').end().find("button").addClass("disabled"),this},r.prototype.disableSpinner=function(){return this.spinner&&(this.$pullout.find(".add-ok").html('<i class="icon-ok"></i>').end().find("button").removeClass("disabled"),this.spinner=!1,this.closePending&&(this.closePending=void 0,this.close())),this},r.prototype.error=function(t){var e;return t||(t=s("An error occurred, please try again.")),e=this.$pullout.find(".alert"),e.length?e.text(t):n('<div class="alert alert-error"></div>').text(t).appendTo(this.$pullout),this.closePending=void 0,this},r.prototype.close=function(){return this.spinner?(this.closePending=!0,this):r.__super__.close.apply(this,arguments)},r}(i)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);
return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/groups/members/grid",["require","views/controls/members/grid"],function(e){var n,r;return r=e("views/controls/members/grid"),n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.resize=function(){return n.__super__.resize.apply(this,arguments),this.updateRemoveButtons()},n.prototype.currentUnfilteredCollection=function(){return this.model.getMembersCollection()},n.prototype.updateRemoveButtons=function(){var t;return t=this.model.get("groupname"),"admins"!==t&&"billing-admins"!==t||1!==this.currentUnfilteredCollection().length?void 0:this.$("button.remove-member").prop("disabled",!0)},n}(r)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/groups/members/list",["require","views/controls/members/list","views/groups/members/grid","utils/i18n.gettext"],function(e){var n,r,i,o;return i=e("views/controls/members/list"),n=e("views/groups/members/grid"),o=e("utils/i18n.gettext"),r=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype.headerHeight=133,r.prototype.gridClass=n,r.prototype.columns=[{id:"name",name:o("Name"),field:"name"},{id:"type",name:o("Type"),field:"type"},{id:"remove",name:o("Remove"),width:70,resizable:!1,formatter:function(t,e,n,r,i){var s,a;return a=i.get("type"),s=i.get("name"),'<button class="btn btn-mini remove-member" type="button" data-type="'+a+'" data-name="'+s+'">'+o("Remove")+"</button>"}}],r.prototype.onResize=function(){return r.__super__.onResize.apply(this,arguments),this.grid.resize()},r}(i)})}.call(this),define("templates/groups/members",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<div class="group-members"><div class="error-container"></div><div class="toolbar"><span class="add"></span><div class="filter"><div class="input-prepend"><span class="add-on"><i class="icon-search"></i></span><input type="text" placeholder="Filter&hellip;" class="filter input-medium"/></div><span class="totals">('+escape(null==(interp=total)?"":interp)+' total)</span></div></div><div class="list"></div></div>')}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/groups/members",["require","views/controls/add_button","b","views/controls/alerts/error_line","views/groups/members/list","views/controls/members/tab","router","state","j!groups/members"],function(e){var n,r,i,o,s,a,l,u,c;return n=e("views/controls/add_button"),r=e("b"),i=e("views/controls/alerts/error_line"),o=e("views/groups/members/list"),a=e("views/controls/members/tab"),l=e("router"),u=e("state"),c=e("j!groups/members"),s=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype.template=c,r.prototype.listClass=o,r.prototype.events={"keyup input.filter":"updateFilter","click .remove-member":"removeMember"},r.prototype.initialize=function(t){var e,i,o;return this.options=null!=t?t:{},this.collection="function"==typeof(e=this.model).getMembersCollection?e.getMembersCollection():void 0,this.currentOrg=null!=(i=this.options.app)?i.currentOrg:void 0,this.currentUser=u.get("user"),this.listenTo(this.model,"sync",this.updateCollection,this),this.listenTo(this.model,"sync",this.fetchSuccessful,this),this.selection=null!=(o=u.get("controller"))?o.selection:void 0,r.__super__.initialize.apply(this,arguments),this.listView.grid.model=this.model,this.addButton=new n,this.addButton.on("add",this.addMember,this),this.addButton.on("toggle",this.clearError,this),this.setView(".add",this.addButton),this.model.on("member_valid",this.validMemberAdded,this),this.model.on("invalid_member_name",this.invalidMemberName,this),this.model.on("currently_member",this.memberAlreadyAdded,this),this.model.on("update_error",this.updateError,this),this.model.on("remove_error",this.removeError,this)},r.prototype.beforeRender=function(){return this.model.fetch()},r.prototype.cleanup=function(){return this.model.off(null,null,this)},r.prototype.clearError=function(){return this.$(".error-container").html("")},r.prototype.addMember=function(t){return this.clearError(),this.addButton.enableSpinner(),this.model.addMember(t)},r.prototype.validMemberAdded=function(){return this.addButton.close(),this.addButton.disableSpinner()},r.prototype.invalidMemberName=function(){return this.addButton.error("Sorry, but that is not a valid member name"),this.addButton.disableSpinner()},r.prototype.memberAlreadyAdded=function(){return this.addButton.error("Sorry, that member is already in this group"),this.addButton.disableSpinner()},r.prototype.updateError=function(t){var e;return e=t[1],this.addButton.error(403===e.status?"Sorry, you do not have permission to update this group":"Sorry, something went wrong"),this.addButton.disableSpinner()},r.prototype.removeError=function(t){var e;return e=t[1],403===e.status?this.setView(".error-container",new i({body:"Sorry, you do not have permission to remove the user"})).render():this.setView(".error-container",new i({body:"Sorry, something went wrong while removing the user"})).render()},r.prototype.removeMember=function(t){var e,n,r;return t.preventDefault(),this.clearError(),this.$("input.filter").val(""),e=$(t.target),n=e.data("name"),this.currentUser.get("display_name")===n&&(r=function(){return this.model.collection.trigger("render"),this.selection.reset(),l.navigate("/organizations/"+this.currentOrg.get("name")+"/groups")},this.model.once("sync",r,this)),this.model.removeMember(n,e.data("type").toLowerCase()+"s")},r.prototype.applyFilter=function(t){var e,n,r;return n=new RegExp("^"+t,"i"),e=this.model.getMembersCollection(),r=e.filter(function(t){return t.get("type").match(n)||t.get("name").match(n)}),this.collection.reset(r),this.listView.grid.updateRemoveButtons()},r.prototype.updateCollection=function(){var t;return t=this.model.getMembersCollection(),this.collection.reset(t.models),this.updateTotal(),this.listView.grid.updateRemoveButtons()},r.prototype.updateTotal=function(){return this.$(".totals").html("("+this.collection.length+" total)")},r}(a)})}.call(this),define("templates/controls/permissions",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<div class="permissions"><div class="toolbar"><span class="add"></span><span class="filter"><div class="input-prepend"><span class="add-on"><i class="icon-search"></i></span><input type="text" placeholder="Filter&hellip;" class="filter input-medium"/></div></span><span class="saving"><i class="icon-spinner icon-spin"></i>&nbsp;Saving ...</span><span class="saving-error alert alert-error">Error while saving.</span></div><div class="grid"></div><div class="loading">');var __val__=logo();if(buf.push(null==__val__?"":__val__),buf.push("</div>"),error){buf.push('<div class="alert alert-error alert-block"><h4><i'),buf.push(attrs({title:error.error,"class":"icon-exclamation-sign"},{title:!0})),buf.push("></i>");var __val__=errorType;buf.push(escape(null==__val__?"":__val__)),buf.push("</h4>");var __val__=errorDescription;buf.push(escape(null==__val__?"":__val__)),buf.push("</div>")}buf.push("</div>")}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/controls/permissions",["require","b","slickback","views/controls/grid","views/controls/add_button","j!controls/permissions","utils/i18n.gettext","underscore","jquery","bootstrap-tooltip"],function(e){var n,r,i,o,s,a,l,u,c,d,p;return i=e("b"),a=e("slickback"),o=e("views/controls/grid"),r=e("views/controls/add_button"),p=e("j!controls/permissions"),l=e("utils/i18n.gettext"),u=e("underscore"),n=e("jquery"),e("bootstrap-tooltip"),d=function(t,e,n,r,i){var o,s;return o="grant"===r.field&&"admins"===i.get("name")&&"group"===i.get("type"),s=o?'<div title="The \'admins\' group must have Grant permissions.\n            This permission cannot be removed."\n   data-toggle="tooltip" data-container="body"\n   style="height: 100%; width: 80%; position: absolute;\n   z-index: 100;"></div>':"","<div>\n"+s+'\n<input class="perm" type="checkbox"\n'+(o?"disabled":"")+"\n"+(o||n?"checked":"")+'\ndata-cid="'+i.cid+'" data-perm="'+r.field+'"/>\n</div>'},c={group:"group",user:"user",client:"briefcase"},s=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.template=p,i.prototype.permissionsColumns=[{id:"read",name:l("Read")},{id:"update",name:l("Update")},{id:"delete",name:l("Delete")},{id:"grant",name:l("Grant")}],i.prototype.nameColumn={id:"name",name:l("Name"),field:"name",headerCssClass:"name",cssClass:"name",width:120,resizable:!1,formatter:function(t,e,n,r,i){return'<i class="icon-'+c[i.get("type")]+'"></i>'+n}},i.prototype.events={"keyup input.filter":"updateFilter","change input.perm":"permissionToggle"},i.prototype.initialize=function(){return this.app=this.options.app,this.originalCollection=this.model.acl(),this.collection=new a.Collection,this.collectionUpdate(),this.grid=new o({collection:this.collection,columns:u.result(this,"columns"),gridOptions:{forceFitColumns:!1,autoHeight:!0,rowHeight:25}}),this.setView(".grid",this.grid),this.addButton=new r,this.addButton.on("add",this.addEntry,this),this.setView("span.add",this.addButton),this.updateSavingBanner=u.throttle(this.updateSavingBanner,100)},i.prototype.columns=function(){var t;return[this.nameColumn].concat(function(){var e,n,r,i;for(r=this.permissionsColumns,i=[],e=0,n=r.length;n>e;e++)t=r[e],i.push({id:t.id,name:t.name,field:t.id,width:t.width||80,resizable:!1,formatter:d});return i}.call(this))},i.prototype.beforeRender=function(){return this.filterValue="",this.collection.reset(this.originalCollection.models),this.originalCollection.off(null,null,this),this.originalCollection.on("reset add remove error",this.collectionUpdate,this),this.originalCollection.on("error",this.render,this)},i.prototype.cleanup=function(){return this.originalCollection.off(null,null,this)},i.prototype.afterRender=function(){return 403===this.originalCollection.status?this.$(".add-button").attr("disabled",!0):void 0},i.prototype.serialize=function(){var t,e;return 403===this.originalCollection.status?(e="&nbsp;Permissions Error",t="You do not have the permissions to view this information."):(e="&nbsp;Server Error",t="Something went wrong. Please try again later."),{error:this.originalCollection.error,errorType:e,errorDescription:t}},i.prototype.collectionUpdate=function(){return this.applyFilter(this.filterValue,!0),this.$el.toggleClass("loading-toggle",0===this.originalCollection.length&&!this.originalCollection.error),this.$("[data-toggle=tooltip]").tooltip(),this.updateWarning()},i.prototype.updateWarning=function(){return this.$(".slick-row").each(function(){return 0===n(this).find(":checkbox:checked").size()?n(this).children(".name").addClass("warning").tooltip({container:"body",title:"The Chef permissions system assumes that an object has no permissions by default, so if you just added this object, its permissions will only actually be updated if you add a permission. Also, if you just removed all permissions on this object, do not be alarmed if it is not shown here in the future."}).append("<i class='icon-info-sign'></i>"):n(this).children(".name").removeClass("warning").tooltip("destroy").children(".icon-info-sign").remove()})},i.prototype.permissionToggle=function(t){var e,r,i,o;return e=this.$(t.target),i=this.originalCollection.get(e.data("cid")),r=e.data("perm"),o=e.is(":checked"),i.set(r,o),this.originalCollection.actions+=1,this.updateSavingBanner(),n.ajax({type:"PUT",dataType:"json",url:this.originalCollection.url(),data:{ace:r,type:i.get("type"),name:i.get("name"),value:o},complete:function(t){return function(){return t.originalCollection.actions-=1,t.originalCollection.actions<0&&(t.originalCollection.actions=0),t.updateSavingBanner(),t.updateWarning()}}(this),error:function(t){return function(){return t.$el.addClass("saving-error-toggle"),i.set(r,!o),e.prop("checked",!o)}}(this)})},i.prototype.addEntry=function(t){return this.originalCollection.findWhere({name:t})?this.addButton.error(l("Could not add duplicate entry.")):(this.addButton.enableSpinner(),this.originalCollection.create({name:t},{url:this.originalCollection.collection.organization.url()+"/acls",wait:!0,success:function(t){return function(){return t.addButton.disableSpinner().close()}}(this),error:function(t){return function(e,n){var r;return r=l(404===n.status?"Object '"+e.get("name")+"' is unknown.":"An error occurred, please try again."),t.addButton.error(r).disableSpinner()}}(this)}))},i.prototype.updateFilter=function(t){var e,n;return e=this.$("input.filter"),n=27===t.which?(e.val(""),""):e.val().toLowerCase(),this.applyFilter(n)},i.prototype.applyFilter=function(t,e){return e||t!==this.filterValue?(this.filterValue=t,this.collection.reset(""===this.filterValue?this.originalCollection.models:this.originalCollection.filter(function(t){return function(e){return-1!==e.get("name").toLowerCase().indexOf(t.filterValue)}}(this)))):void 0},i.prototype.updateSavingBanner=function(){return this.$el.toggleClass("saving-toggle",!!this.originalCollection.actions),this.originalCollection.actions?this.$el.removeClass("saving-error-toggle"):void 0},i}(i.Layout)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/groups/permissions",["require","views/controls/permissions","views/controls/alerts/error"],function(e){var n,r,i;return i=e("views/controls/permissions"),n=e("views/controls/alerts/error"),r=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype.afterRender=function(){return null!=this.model.get("forbidden")?this.setView(new n({title:"Permissions Error",body:"You do not have permissions to view the contents of "+this.model.id+"."})).render():void 0},r}(i)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("controllers/groups",["require","controllers/base","views/groups/modals/create","views/groups/list","views/groups/members","views/groups/permissions","utils/i18n.gettext","utils/i18n"],function(e){var n,r,i,o,s,a,l,u;return n=e("controllers/base"),r=e("views/groups/modals/create"),i=e("views/groups/list"),o=e("views/groups/members"),s=e("views/groups/permissions"),l=e("utils/i18n.gettext"),u=e("utils/i18n"),a=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.id="groups",n.prototype.endpoint="groups",n.prototype.collection_type="groups",n.prototype.messages={label:function(t){return u.ngettext("Group","Groups",null!=t?t:1)},selectEmpty:function(){return l("Please select a group")},selectMulti:function(t){return u.sprintf(l("%d groups selected"),t)},searchMessage:l("Search Groups"),showingAllObjects:function(){return l("Showing <strong>All Groups</strong>")},"delete":function(t){return u.ngettext("Delete Group","Delete Groups",null!=t?t:1)},deleteSingle:l("Deleting %s"),deleteLong:function(t){return u.ngettext("You are about to delete %d group:","You are about to delete %d groups:",null!=t?t:1)}},n.prototype.listViewClass=i,n.prototype.tabs=[{id:"members",label:l("Members"),viewClass:o},{id:"group_permissions",label:l("Permissions"),viewClass:s}],n.prototype.actions=[{id:"create",label:l("Create"),always:!0,dropdown:!1},{id:"delete",label:l("Delete"),multi:!0,disabled_when:function(){var t,e;return e=["admins","billing-admins","clients","users"],t=window.app.selection.pluck("name"),_.any(t,function(t){return _.contains(e,t)})},disabled_message:"System groups cannot be deleted"}],n.prototype.routes={"organizations/:org/groups":"index","organizations/:org/groups/:id":"show","organizations/:org/groups/:id/:tabId":"show.tab"},n.prototype.action_create=function(){return new r({app:this.app})},n}(n)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/containers/list",["views/controls/list","utils/i18n.gettext"],function(e,n){var r;return r=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype.paginated=!1,r.prototype.actionColumn=!1,r.prototype.columns=[{id:"name",name:n("Name"),field:function(){return this.id}}],r}(e)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/containers/permissions",["views/controls/permissions","utils/i18n.gettext"],function(e,n){var r;return r=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype.permissionsColumns=[{id:"read",name:n("List"),width:160},{id:"create",name:n("Create"),width:160}],r}(e)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("controllers/containers",["require","controllers/base","views/containers/list","views/containers/permissions","utils/i18n.gettext","utils/i18n"],function(e){var n,r,i,o,s,a;return n=e("controllers/base"),r=e("views/containers/list"),i=e("views/containers/permissions"),s=e("utils/i18n.gettext"),a=e("utils/i18n"),o=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.id="containers",n.prototype.messages={label:function(){return s("Global Permissions")},selectEmpty:function(){return s("Please select a container")},selectMulti:function(t){return a.sprintf(s("%d containers selected"),t)},showingAllObjects:function(){return s("Showing all containers")}},n.prototype.listViewClass=r,n.prototype.tabs=[{id:"permissions",label:s("Permissions"),viewClass:i}],n.prototype.routes={"organizations/:org/global_permissions":"index","organizations/:org/global_permissions/:id":"show","organizations/:org/global_permissions/:id/:tabId":"show.tab"},n.prototype.checkAccess=function(t){return t||(t=this.app.organizations.last()),t.containers.length>0},n}(n)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("controllers/admin",["controllers/base","controllers/organizations","controllers/users","controllers/groups","controllers/containers","utils/i18n"],function(e,n,r,i,o,s){var a;return a=function(e){function a(){return a.__super__.constructor.apply(this,arguments)}return t(a,e),a.prototype.id="admin",a.prototype.messages={label:function(){return s.gettext("Administration")}},a.prototype.children=[n,r,i,o],a}(e)})}.call(this),function(){define("utils/browser",[],function(){var t,e,n,r;return e={Chrome:{},Safari:{string:navigator.vendor,subString:"Apple",versionSearch:"Version"},Opera:{prop:window.opera,versionSearch:"Version"},Firefox:{},IE:{subString:"MSIE"}},n=function(){var t,n,r,i;for(r in e){if(n=e[r],n.prop)return r;if(t=n.string||navigator.userAgent,i=n.subString||r,-1!==(null!=t?t.indexOf(i):void 0))return r}},r=function(t,n){var r,i,o;return r=e[t],o=new RegExp((r.versionSearch||t)+"\\D*(.*)$"),(i=n.match(o))?parseFloat(i[1]):void 0},t={name:n()},t.name&&(t.version=r(t.name,navigator.userAgent)||r(t.name,navigator.appVersion)),t})}.call(this),define("templates/application/modals/browser_version",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;if(buf.push('<div class="modal-header">'),"started"!==state&&buf.push('<i data-dismiss="modal" aria-hidden="true" class="icon-remove"></i>'),buf.push('<h3 id="modal-label"><i class="icon-warning-sign"></i>&nbsp;It looks like you\'re missing an ingredient &hellip;</h3></div><div class="modal-subheader">Please upgrade your browser by going to\n<a href="http://browsehappy.com/" target="_blank">Browse Happy</a>.</div><div class="modal-body">'),"finished"===state)buf.push("Success!");else if("error"===state){buf.push('<div class="alert alert-error alert-block"><h4><i class="icon-exclamation-sign"></i>&nbsp;Server Error</h4>');var __val__=message;buf.push(null==__val__?"":__val__),buf.push("</div>")}else if("queued"===state||"started"===state){var __val__=logo();buf.push(null==__val__?"":__val__)}else buf.push('<p>Unfortunately your browser is older than Chef is currently supporting.\nYou are welcome to continue using the Chef Management Console, however\nplease be aware not all functionality will be available and you may\nencounter unexpected errors.</p><p>We apologize for this interruption, if you have any questions please do not\nhesitate to contact us at <a href="mailto:'+escape(null==(interp=support_email_address)?"":interp)+'">\n'+escape(null==(interp=support_email_address)?"":interp)+"</a>. This message will only display once.\n</p>");buf.push('</div><div class="modal-list"></div><div class="modal-footer"><button data-dismiss="modal" aria-hidden="true" class="btn">Continue</button></div>')}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/application/modals/browser_version",["require","views/controls/modals/base","utils/browser","j!application/modals/browser_version","config"],function(e){var n,r,i;return r=e("views/controls/modals/base"),i=e("utils/browser"),n=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.template=e("j!application/modals/browser_version"),r.prototype.className=r.prototype.className+" modal-browser-version",r.prototype.supportedVersions={IE:9,Firefox:20,Chrome:26,Safari:6,Opera:999},r.prototype.initialize=function(){return this.browserOutdated()&&!this.checkCookie()?r.__super__.initialize.apply(this,arguments):void 0},r.prototype.serialize=function(){var t;return{user:null!=(t=this.app)?t.user.get("display_name"):void 0,state:null,support_email_address:e("config").support_email_address}},r.prototype.cleanup=function(){return this.setCookie(),r.__super__.cleanup.apply(this,arguments)},r.prototype.browserOutdated=function(){var t;return location.search.match(/__force_outdated__/)?!0:(t=this.supportedVersions[i.name],i.name&&t&&(!i.version||i.version<t))},r.prototype.checkCookie=function(){return!!document.cookie.match(/chef_manage_browser_warning=true/)},r.prototype.setCookie=function(){return document.cookie="chef_manage_browser_warning=true; Expires Fri, 31 Dec 9999 23:59:59 GMT; path=/"},r}(r)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("models/license_info",["require","b"],function(e){var n,r;return n=e("b"),r=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.defaults={limit_exceeded:!1,node_license:0,node_count:0,upgrade_url:""},n.prototype.url="/license",n}(n.Model)})}.call(this),define("templates/application/mainnav",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<ul class="nav nav-tabs">'),function(){if("number"==typeof tabs.length)for(var t=0,e=tabs.length;e>t;t++){var n=tabs[t];buf.push("<li"),buf.push(attrs({"class":n.active&&"active"},{"class":!0})),buf.push("><a"),buf.push(attrs({href:n.url},{href:!0})),buf.push(">");var r=n.label;buf.push(escape(null==r?"":r)),buf.push("</a></li>")}else for(var t in tabs){var n=tabs[t];buf.push("<li"),buf.push(attrs({"class":n.active&&"active"},{"class":!0})),buf.push("><a"),buf.push(attrs({href:n.url},{href:!0})),buf.push(">");var r=n.label;buf.push(escape(null==r?"":r)),buf.push("</a></li>")}}.call(this),buf.push("</ul>")}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/application/mainnav",["require","b","router","j!application/mainnav"],function(e){var n,r,i;return n=e("b"),i=e("router"),r=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.id="mainnav",r.prototype.template=e("j!application/mainnav"),r.prototype.events={"click a":"clickTab"},r.prototype.initialize=function(){return this.app=this.options.app,this.currentOrg=this.app.organizations.last()},r.prototype.beforeRender=function(){var t;return this.app.off("change:org",null,this),this.app.on("change:org",this.updateOrg,this),this.tabs=function(){var e,n,r,i;for(r=this.app.mainTabs,i=[],e=0,n=r.length;n>e;e++)t=r[e],t.checkAccess(this.currentOrg)&&i.push(t);return i}.call(this)},r.prototype.cleanup=function(){return this.app.off(null,null,this)},r.prototype.serialize=function(){var t;return{tabs:function(){var e,n,r,i;for(r=this.tabs,i=[],e=0,n=r.length;n>e;e++)t=r[e],i.push({active:t.id===this.activeTab,url:t.url(this.currentOrg),label:_.result(t.messages,"label")});return i}.call(this)}},r.prototype.clickTab=function(t){var e;return t.preventDefault(),e=$(t.currentTarget),i.navigate(e.attr("href"),{trigger:!0})},r.prototype.applyController=function(t){return null!=t.parentController&&(t=t.parentController),t.id!==this.activeTab?(this.activeTab=t.id,this.render()):void 0},r.prototype.updateOrg=function(t){return this.currentOrg=t,this.render()},r}(n.Layout)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/organizations/modals/create_first",["require","views/organizations/modals/create"],function(e){var n,r;return r=e("views/organizations/modals/create"),n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.modalOptions={backdrop:"static"},n.prototype.events={"click .btn-close":"goToNoOrgsModal","click .btn-submit":"submit"},n.prototype.goToNoOrgsModal=function(){return this.app.goToNoOrganizationsModal()},n.prototype.onSaved=function(){return window.location.assign(this.model.url()+"/getting_started")},n}(r)})}.call(this),define("templates/application/modals/org_invitation",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){if(buf.push('<div class="modal-header"><h3 id="modal-label">Organization Invitations</h3></div><div class="modal-subheader"></div><div class="modal-body">'),"finished"===state)buf.push("Success!");else if("error"===state){buf.push('<div class="alert alert-error alert-block"><h4><i class="icon-exclamation-sign"></i>&nbsp;Server Error</h4>');var __val__=message;buf.push(null==__val__?"":__val__),buf.push("</div>")}else if("queued"===state||"started"===state){var __val__=logo();buf.push(null==__val__?"":__val__)}else null!=invites?(function(){if("number"==typeof invites.length)for(var t=0,e=invites.length;e>t;t++){var n=invites[t];buf.push('<label class="current-visible"><input'),buf.push(attrs({id:n.orgname,type:"checkbox",value:n.orgname,"class":"invite"},{id:!0,type:!0,value:!0})),buf.push("/>");var r=n.orgname;buf.push(escape(null==r?"":r)),buf.push("</label>")}else for(var t in invites){var n=invites[t];buf.push('<label class="current-visible"><input'),buf.push(attrs({id:n.orgname,type:"checkbox",value:n.orgname,"class":"invite"},{id:!0,type:!0,value:!0})),buf.push("/>");var r=n.orgname;buf.push(escape(null==r?"":r)),buf.push("</label>")}}.call(this),buf.push('<div class="extra-info"></div>')):buf.push('<div class="spinner"></div>');buf.push('</div><div class="modal-list"></div><div class="modal-footer"><button'),buf.push(attrs({"data-dismiss":"modal","aria-hidden":"true",disabled:"started"===state,"class":"btn btn-close"},{"data-dismiss":!0,"aria-hidden":!0,disabled:!0})),buf.push(">");var __val__=closeButtonText;buf.push(escape(null==__val__?"":__val__)),buf.push("</button>"),rejectDisabled||buf.push('<button disabled="disabled" class="btn btn-danger"><i class="icon-remove-sign"></i>&nbsp;Reject</button>'),buf.push('<button disabled="disabled" class="btn btn-accept btn-primary"><i class="icon-plus-sign"></i>&nbsp;Accept</button></div>')}return buf.join("")}}),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function r(){this.constructor=t}for(var i in e)n.call(e,i)&&(t[i]=e[i]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},n={}.hasOwnProperty;define("views/application/modals/org_invitation",["require","views/controls/alerts/error_line","views/controls/modals/base","views/controls/spinner","views/controls/alerts/success_line","underscore","state","j!application/modals/org_invitation"],function(n){var r,i,o,s,a,l,u,c;return r=n("views/controls/alerts/error_line"),i=n("views/controls/modals/base"),s=n("views/controls/spinner"),a=n("views/controls/alerts/success_line"),l=n("underscore"),u=n("state"),c=n("j!application/modals/org_invitation"),o=function(n){function i(){return this.closeEvent=t(this.closeEvent,this),i.__super__.constructor.apply(this,arguments)}return e(i,n),i.prototype.template=c,i.prototype.events={"click input":"inputClicked","click .btn-danger":"rejectOrgs","click .btn-accept":"acceptOrgs","click .btn-close":"closeEvent"},i.prototype.className=i.prototype.className+" modal-org-invite",i.prototype.initialize=function(){var t,e;return this.initialized=!0,this.orgsUpdated=!1,this.usernav=this.options.usernav,this.invites=null,this.rejectDisabled=null!=(t=this.options.rejectDisabled)?t:!1,this.firstOrgMode=null!=this.options.firstOrgMode?!0:!1,i.__super__.initialize.call(this),$.ajax({url:"/users/"+(null!=(e=u.get("user"))?e.id:void 0)+"/association_requests",type:"get",dataType:"json",success:function(t){return function(e){return t.invites=e,t.render()}}(this)})},i.prototype.afterRender=function(){return this.firstOrgMode&&this.$el.modal({backdrop:"static"}),i.__super__.afterRender.apply(this,arguments)},i.prototype.closeEvent=function(){var t;return this.orgsUpdated&&!this.firstOrgMode&&window.location.assign(window.location.href),this.firstOrgMode&&(this.orgsUpdated?window.location.href="/starter-kit":(this.$el.modal("hide"),this.cleanup(),this.app.goToNoOrganizationsModal())),null!=(t=this.usernav)?t.trigger("invites_updated"):void 0
},i.prototype.serialize=function(){return l.extend(i.__super__.serialize.call(this),{invites:this.invites,rejectDisabled:this.rejectDisabled,firstOrgMode:this.firstOrgMode})},i.prototype.beforeRender=function(){return this.setView(".spinner",new s)},i.prototype.inputClicked=function(){var t;return t=0===this.$("input:checked").length,this.$(".btn-danger").attr("disabled",t),this.$(".btn-accept").attr("disabled",t)},i.prototype.rejectOrgs=function(){return this.handleRequests(this.rejectUrl,"reject")},i.prototype.rejectUrl=function(t){var e;return"/users/"+(null!=(e=u.get("user"))?e.id:void 0)+"/association_requests/"+t},i.prototype.acceptOrgs=function(){return this.handleRequests(this.acceptUrl,"accept")},i.prototype.acceptUrl=function(t){var e;return"/users/"+(null!=(e=u.get("user"))?e.id:void 0)+"/association_requests/"+t},i.prototype.handleRequests=function(t,e){return this.$("input").each(function(n){return function(i,o){var s,l;return n.$(o).prop("checked")?(s=n.invites[i].id,l=n.invites[i].orgname,$.ajax({url:t(s,l),type:"put",data:{response:e},dataType:"json",success:function(){return n.$(o).parent("label").removeClass("current-visible").css("display","none"),n.$(o).prop("checked",!1),0===n.$(".current-visible").length&&n.setView(".extra-info",new a({body:"There are no remaining organization invitations."})).render(),n.$(".btn-close").html("Close"),n.inputClicked(),"accept"===e?n.orgsUpdated=!0:void 0},error:function(){return n.setView(".extra-info",new r({body:"There was a problem processing one or more invitations. Please try again later."})).render(),n.inputClicked()}})):void 0}}(this))},i}(i)})}.call(this),define("templates/organizations/modals/no_organizations",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){if(buf.push('<div class="modal-header"><h3 id="modal-label" class="welcome-header"><div class="message">Welcome to</div><div class="logo-holder"><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNi4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB3aWR0aD0iMzM4LjEwM3B4IiBoZWlnaHQ9Ijk4LjYxNXB4IiB2aWV3Qm94PSIwIDAgMzM4LjEwMyA5OC42MTUiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDMzOC4xMDMgOTguNjE1Ig0KCSB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnPg0KCTxnPg0KCQk8cGF0aCBmaWxsPSIjRkZGRkZGIiBkPSJNMTA2LjcxNywzNS42MzR2LTAuMTY2YzAtMTYuNjExLDEyLjUyMS0zMC4yMTcsMzAuNDY3LTMwLjIxN2MxMS4wMTksMCwxNy42MTIsMy42NzMsMjMuMDM5LDkuMDE1DQoJCQlsLTguMTgxLDkuNDMyYy00LjUwNy00LjA5LTkuMDk4LTYuNTk0LTE0Ljk0MS02LjU5NGMtOS44NSwwLTE2Ljk0NCw4LjE4LTE2Ljk0NCwxOC4xOTZ2MC4xNjcNCgkJCWMwLDEwLjAxNiw2LjkyOCwxOC4zNjMsMTYuOTQ0LDE4LjM2M2M2LjY3OCwwLDEwLjc2OC0yLjY3MSwxNS4zNTgtNi44NDVsOC4xOCw4LjI2NGMtNi4wMDksNi40MjctMTIuNjg4LDEwLjQzMy0yMy45NTYsMTAuNDMzDQoJCQlDMTE5LjQ4OSw2NS42ODQsMTA2LjcxNyw1Mi40MTMsMTA2LjcxNywzNS42MzR6Ii8+DQoJCTxwYXRoIGZpbGw9IiNGRkZGRkYiIGQ9Ik0xNzAuOTA3LDYuMjUzaDEyLjg1NHYyMy4xMjJoMjMuNzA2VjYuMjUzaDEyLjg1NHY1OC40M2gtMTIuODU0VjQxLjIyN2gtMjMuNzA2djIzLjQ1NmgtMTIuODU0VjYuMjUzeiIvPg0KCQk8cGF0aCBmaWxsPSIjRkZGRkZGIiBkPSJNMjM2LjAxNiw2LjI1M2g0NC4wNzN2MTEuNDM2aC0zMS4zMDF2MTEuODUzaDI3LjU0NXYxMS40MzVoLTI3LjU0NXYxMi4yNzFoMzEuNzE5djExLjQzNmgtNDQuNDkxVjYuMjUzeiINCgkJCS8+DQoJCTxwYXRoIGZpbGw9IiNGRkZGRkYiIGQ9Ik0yOTMuNjEyLDYuMjUzaDQ0LjQ5djExLjY4NmgtMzEuNjM1djEyLjQzOGgyNy44OHYxMS42ODZoLTI3Ljg4djIyLjYyMWgtMTIuODU1VjYuMjUzeiIvPg0KCTwvZz4NCjwvZz4NCjxwYXRoIGZpbGw9IiNGRkZGRkYiIGQ9Ik00Ni44MDgsNjcuODg5Yy0xMS42MjUsMC0yMS4wODItOS40NTgtMjEuMDgyLTIxLjA4M2MwLTExLjYyNSw5LjQ1OC0yMS4wODIsMjEuMDgyLTIxLjA4Mg0KCWM5LjU5NSwwLDE3LjcwNyw2LjQ0NSwyMC4yNSwxNS4yMzFoOC4xNThjLTIuNzE0LTEzLjE5Ni0xNC40Mi0yMy4xNS0yOC40MDgtMjMuMTVjLTE1Ljk5MSwwLTI5LDEzLjAwOS0yOSwyOQ0KCXMxMy4wMDksMjkuMDAxLDI5LDI5LjAwMWMxMy45ODgsMCwyNS42OTQtOS45NTQsMjguNDA4LTIzLjE1aC04LjE1OEM2NC41MTUsNjEuNDQzLDU2LjQwMiw2Ny44ODksNDYuODA4LDY3Ljg4OXoiLz4NCjxwYXRoIGZpbGw9IiNGRkZGRkYiIGQ9Ik0zMi41OTcsNjEuMDE3YzMuNjQxLDMuNjQxLDguNjY3LDUuODk2LDE0LjIxMSw1Ljg5NnYtOC40MDVjLTMuMjMxLDAtNi4xNTctMS4zMS04LjI3NC0zLjQyN0wzMi41OTcsNjEuMDE3DQoJeiIvPg0KPHBhdGggZmlsbD0iI0YzOEIwMCIgZD0iTTI2LjcwMSw0Ni44MDZjMCwyLjg3OCwwLjYxMiw1LjYxNCwxLjcwNiw4LjA5Mmw3LjY4OS0zLjM4MWMtMC42MzUtMS40NDEtMC45OS0zLjAzNC0wLjk5LTQuNzENCgljMC02LjQ2Myw1LjIzOS0xMS43MDIsMTEuNzAxLTExLjcwMnYtOC40MDVDMzUuNzIxLDI2LjY5OSwyNi43MDEsMzUuNzE5LDI2LjcwMSw0Ni44MDZ6Ii8+DQo8cGF0aCBmaWxsPSIjRkZGRkZGIiBkPSJNNTQuMDk5LDI4LjA2OWwtMy4wNDksNy44MzZjMi40ODksMC45Nyw0LjU2NywyLjc2Myw1Ljg5MSw1LjA1MWg5LjEwNA0KCUM2NC4yNDYsMzUuMDU0LDU5LjgwMSwzMC4yOTYsNTQuMDk5LDI4LjA2OXoiLz4NCjxwYXRoIGZpbGw9IiNGMzhCMDAiIGQ9Ik01MS4wNSw1Ny43MDhsMy4wNDksNy44MzZjNS43MDItMi4yMjgsMTAuMTQ2LTYuOTg1LDExLjk0NS0xMi44ODdINTYuOTQNCglDNTUuNjE2LDU0Ljk0NCw1My41MzksNTYuNzM3LDUxLjA1LDU3LjcwOHoiLz4NCjxwYXRoIGZpbGw9IiNGRkZGRkYiIGQ9Ik05LjYwOSw1OC4wNTRjLTAuMTM0LTAuNDQtMC4yNi0wLjg4NC0wLjM3OC0xLjMzYy0wLjAwNy0wLjAyNy0wLjAxNC0wLjA1NC0wLjAyMS0wLjA4Mg0KCUM5LjEwMSw1Ni4yMyw5LDU1LjgxNSw4LjkwNCw1NS4zOThjLTAuMDE5LTAuMDg0LTAuMDM3LTAuMTctMC4wNTUtMC4yNTVjLTAuMDc5LTAuMzU5LTAuMTU0LTAuNzE4LTAuMjI0LTEuMDgNCgljLTAuMDMtMC4xNi0wLjA1OC0wLjMyMi0wLjA4Ni0wLjQ4M2MtMC4wNTEtMC4yODktMC4xMDItMC41NzctMC4xNDYtMC44NjdjLTAuMDM4LTAuMjQ3LTAuMDcxLTAuNDk2LTAuMTA0LTAuNzQ1DQoJYy0wLjIyOC0xLjY5NS0wLjM1Mi0zLjQxNy0wLjM1LTUuMTYzSDBjLTAuMDAyLDEuOTAzLDAuMTE3LDMuNzgzLDAuMzQxLDUuNjM1SDAuMzRjMC4wMDUsMC4wNDEsMC4wMTIsMC4wODEsMC4wMTcsMC4xMjINCgljMC4wNjIsMC41MDUsMC4xMzEsMS4wMDgsMC4yMSwxLjUwOWMwLjAyMSwwLjEzOCwwLjA0NiwwLjI3NCwwLjA2OSwwLjQxMmMwLjA2OCwwLjQxMiwwLjEzOSwwLjgyMiwwLjIxOCwxLjIzDQoJYzAuMDQyLDAuMjE3LDAuMDg5LDAuNDMzLDAuMTM0LDAuNjQ4YzAuMDY4LDAuMzI1LDAuMTM2LDAuNjUsMC4yMSwwLjk3M2MwLjA2NSwwLjI4NSwwLjEzNywwLjU2NiwwLjIwOCwwLjg0OQ0KCUMxLjQ3LDU4LjQzNywxLjUzMiw1OC42OSwxLjYsNTguOTQxYzAuMDksMC4zMzQsMC4xODYsMC42NjYsMC4yODMsMC45OTdDMS45MjMsNjAuMDc3LDEuOTU4LDYwLjIxNywyLDYwLjM1NGwwLjAwNS0wLjAwMQ0KCWMwLjU0OCwxLjgxNCwxLjE5NywzLjU4NCwxLjk1Miw1LjI5N2w3LjI3Ni0zLjJDMTAuNjA1LDYxLjAyOCwxMC4wNjUsNTkuNTU5LDkuNjA5LDU4LjA1NEw5LjYwOSw1OC4wNTR6Ii8+DQo8cGF0aCBmaWxsPSIjRjM4QjAwIiBkPSJNNDYuODA4LDg1LjY3NWMtMTAuNzE2LDAtMjAuNDMtNC4zNjMtMjcuNDY3LTExLjQwMmwtNS42MjUsNS42MjVjOC40Nyw4LjQ3MSwyMC4xNjcsMTMuNzE1LDMzLjA5MiwxMy43MTUNCgljMjMuODY5LDAsNDMuNTY0LTE3Ljg2Nyw0Ni40NDMtNDAuOTU2aC04LjAxNEM4Mi40MDYsNzEuMzI0LDY2LjI1Miw4NS42NzUsNDYuODA4LDg1LjY3NXoiLz4NCjxwYXRoIGZpbGw9IiNGMzhCMDAiIGQ9Ik00Ni44MDgsNy45MzhjOC43MDYsMCwxNi43NSwyLjg3OCwyMy4yMzUsNy43MzJMNzQuOCw5LjI5M0M2Ni45OTMsMy40NTgsNTcuMzA1LDAsNDYuODA4LDANCglDMjYuOTQ2LDAsOS45NzYsMTIuMzcyLDMuMTc5LDI5LjgzbDcuNDA3LDIuODgyQzE2LjI0MSwxOC4yMjcsMzAuMzQ0LDcuOTM4LDQ2LjgwOCw3LjkzOHoiLz4NCjxwYXRoIGZpbGw9IiNGRkZGRkYiIGQ9Ik04NS4yMzYsNDAuOTU2aDguMDE0Yy0wLjg1OS02Ljg4OC0zLjIxNS0xMy4zMTEtNi43MzItMTguOTM0bC02Ljc0OCw0LjIxMQ0KCUM4Mi41MjYsMzAuNjMxLDg0LjQyNywzNS42MTYsODUuMjM2LDQwLjk1NnoiLz4NCjxwYXRoIGZpbGw9IiNGMzhCMDAiIGQ9Ik03Ni4yMDgsNDAuOTU2aDguMDQxYy0yLjA5OC0xMy40ODItMTEuMzMyLTI0LjYyOS0yMy43MDMtMjkuNDU5bC0yLjg3Myw3LjM4NA0KCUM2Ny4wODMsMjIuNTUzLDc0LjIsMzAuODQyLDc2LjIwOCw0MC45NTZ6Ii8+DQo8cGF0aCBmaWxsPSIjRkZGRkZGIiBkPSJNNDYuODA4LDE2LjgzMUw0Ni44MDgsMTYuODMxbDAuMDAxLTcuOTE4YzAsMCwwLDAtMC4wMDEsMGMtMTYuMDUsMC0yOS43OTksMTAuMDMxLTM1LjMxMiwyNC4xNTMNCglsNy4zNzgsMi44NzFDMjMuMjM1LDI0Ljc2NiwzNC4xMTEsMTYuODMxLDQ2LjgwOCwxNi44MzF6Ii8+DQo8cGF0aCBmaWxsPSIjRjM4QjAwIiBkPSJNMTYuODMyLDQ2LjgwNkwxNi44MzIsNDYuODA2bC03LjkxOCwwdjBjMCwxNS45MjQsOS44NzYsMjkuNTc4LDIzLjgyMiwzNS4xNzZsMi45NC03LjM1DQoJQzI0LjY0NCw3MC4yMDQsMTYuODMyLDU5LjQwMywxNi44MzIsNDYuODA2eiIvPg0KPHBhdGggZmlsbD0iI0ZGRkZGRiIgZD0iTTQ2LjgwOCw3Ni43ODJWODQuN2MxOC45MDYsMCwzNC42MjEtMTMuOTE2LDM3LjQ0Mi0zMi4wNDJoLTguMDQxDQoJQzczLjQ3OSw2Ni4zOTUsNjEuMzM1LDc2Ljc4Miw0Ni44MDgsNzYuNzgyeiIvPg0KPGc+DQoJPHBhdGggZmlsbD0iI0YxOEEyMSIgZD0iTTEyNS4wMzQsODkuNTE3aC0wLjEwOGwtNS45MTItOC44NTRWOTQuMTZoLTMuMjY2Vjc1LjI2NWgzLjUzNmw1Ljc1LDguOTM1bDUuNzUtOC45MzVoMy41MzZWOTQuMTZIMTMxDQoJCVY4MC42MDlMMTI1LjAzNCw4OS41MTd6Ii8+DQoJPHBhdGggZmlsbD0iI0YxOEEyMSIgZD0iTTE2My4xODMsOTQuMTZoLTMuNTA5bC0xLjkxNy00LjU2MmgtOC45MzVsLTEuOTQzLDQuNTYyaC0zLjQwMWw4LjMxNC0xOS4wM2gzLjA3N0wxNjMuMTgzLDk0LjE2eg0KCQkgTTE1My4yNzcsNzkuMDk4bC0zLjIzOSw3LjU1OGg2LjUwNUwxNTMuMjc3LDc5LjA5OHoiLz4NCgk8cGF0aCBmaWxsPSIjRjE4QTIxIiBkPSJNMTg1LjU0LDc1LjI2NWgzLjI2NlY5NC4xNmgtMi43OGwtMTAuNDE5LTEzLjQ0MlY5NC4xNmgtMy4yNjZWNzUuMjY1aDMuMDc3TDE4NS41NCw4OC4zM1Y3NS4yNjV6Ii8+DQoJPHBhdGggZmlsbD0iI0YxOEEyMSIgZD0iTTIxNy42NjgsOTQuMTZoLTMuNTA5bC0xLjkxNy00LjU2MmgtOC45MzVsLTEuOTQzLDQuNTYyaC0zLjQwMWw4LjMxNC0xOS4wM2gzLjA3N0wyMTcuNjY4LDk0LjE2eg0KCQkgTTIwNy43NjIsNzkuMDk4bC0zLjIzOSw3LjU1OGg2LjUwNUwyMDcuNzYyLDc5LjA5OHoiLz4NCgk8cGF0aCBmaWxsPSIjRjE4QTIxIiBkPSJNMjM0LjYyNyw5NC40ODRjLTUuOTExLDAtOS43OTgtNC4yMTEtOS43OTgtOS43NDVjMC01LjMxNyw0LjA0OS05Ljc5OCw5Ljc0NC05Ljc5OA0KCQljMy4yOTMsMCw1LjMxNywwLjkxOCw3LjI2MSwyLjU2NGwtMi4xMDUsMi41MWMtMS40NTctMS4yNDEtMi44ODgtMi4wMjQtNS4yOS0yLjAyNGMtMy40ODIsMC02LjEyOCwzLjAyMy02LjEyOCw2LjY5NA0KCQljMCwzLjkxNCwyLjU2NCw2Ljc3NSw2LjQyNSw2Ljc3NWMxLjc4MSwwLDMuNDAxLTAuNTY3LDQuNTYyLTEuNDMxdi0zLjUzNmgtNC44MzJ2LTIuODg4aDguMDQ0djcuOTM2DQoJCUMyNDAuNjQ2LDkzLjEzNCwyMzcuOTc1LDk0LjQ4NCwyMzQuNjI3LDk0LjQ4NHoiLz4NCgk8cGF0aCBmaWxsPSIjRjE4QTIxIiBkPSJNMjY2Ljc1Niw3OC4yMzRoLTEwLjY4OXY0LjkxM2g5LjQ3NXYyLjk2OWgtOS40NzV2NS4wNzVoMTAuODI0djIuOTY5aC0xNC4xNDRWNzUuMjY1aDE0LjAwOVY3OC4yMzR6Ii8+DQo8L2c+DQo8L3N2Zz4NCg==" alt="Chef Manage"/></div></h3></div><div class="modal-subheader"></div><div class="modal-body">'),"finished"===state)buf.push("Success!");else if("error"===state){buf.push('<div class="alert alert-error alert-block"><h4><i class="icon-exclamation-sign"></i>&nbsp;Server Error</h4>');var __val__=message;buf.push(null==__val__?"":__val__),buf.push("</div>")}else if("queued"===state||"started"===state){var __val__=logo();buf.push(null==__val__?"":__val__)}else buf.push('<div class="message well">Thank you for using Chef!<br/><br/>'),buf.push(org_creation_enabled?"You are not yet a member of any organizations, so please either create a new organization or accept a pending invitation.":"You are not yet a member of any organizations, so you must accept a pending invitation to an organization before doing anything else."),buf.push('<br/><br/>If you are trying to join a specific organization and don\'t have any invitations, get someone in the organization to send you an invitation, then hit the refresh button.</div><div class="spinner"></div><div class="logout"><a href="/login">Sign Out</a></div><div class="buttons clearfix">'),org_creation_enabled&&(buf.push('<div class="create-new-org pull-left"><div'),buf.push(attrs({disabled:!org_creation_enabled,"class":"btn btn-primary btn-create"},{disabled:!0})),buf.push(">Create New Organization</div></div>")),buf.push('<div class="pull-right"><div class="clearfix"></div><i class="icon-refresh pull-left"></i><div class="accept-invite pull-right"><div disabled="disabled" class="btn btn-primary btn-invite">Accept Invitations (0 pending)</div></div></div></div>');buf.push('</div><div class="modal-list"></div><div class="modal-footer"></div>')}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/organizations/modals/no_organizations",["require","config","views/controls/modals/base","views/organizations/modals/create_first","views/controls/alerts/error_line","views/application/modals/org_invitation","views/controls/spinner","state","j!organizations/modals/no_organizations"],function(e){var n,r,i,o,s,a,l,u,c;return l=e("config"),n=e("views/controls/modals/base"),r=e("views/organizations/modals/create_first"),i=e("views/controls/alerts/error_line"),s=e("views/application/modals/org_invitation"),a=e("views/controls/spinner"),u=e("state"),c=e("j!organizations/modals/no_organizations"),o=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.template=c,n.prototype.className=n.prototype.className+" modal-no-organization",n.prototype.modalOptions={backdrop:"static"},n.prototype.events={"click .btn-create":"createNewOrg","click .btn-invite":"manageInvites","click .icon-refresh":"refreshOrgInvites"},n.prototype.beforeRender=function(){return n.__super__.beforeRender.apply(this,arguments),this.setView(".spinner",new a)},n.prototype.afterRender=function(){return this.$(".modal-footer").remove(),n.__super__.afterRender.apply(this,arguments),this.getOrgInvites()},n.prototype.refreshOrgInvites=function(){return this.$(".icon-refresh").addClass("icon-spin"),this.getOrgInvites()},n.prototype.getOrgInvites=function(){var t;return $.ajax({url:"/users/"+(null!=(t=u.get("user"))?t.id:void 0)+"/association_requests",type:"get",success:function(t){return function(e){return t.$(".spinner").html(""),t.$(".icon-refresh").removeClass("icon-spin"),e.length>0&&t.$(".btn-invite").attr("disabled",!1).html("Accept Invite ("+e.length+" pending)"),t.$(".buttons").css("display","block")}}(this),error:function(t){return function(){return t.$(".icon-refresh").removeClass("icon-spin"),t.setView(".spinner",new i({body:"There was an error retrieving invitations. Please try again or create an organization."})).render(),t.$(".buttons").css("display","block")}}(this)})},n.prototype.createNewOrg=function(){return this.remove(),new r({app:this.app})},n.prototype.manageInvites=function(){return this.$(".btn-invite").attr("disabled")?void 0:(this.remove(),new s({app:this.app,usernav:null,title:"Organization Invitations",rejectDisabled:!0,firstOrgMode:!0}))},n.prototype.serialize=function(){return{org_creation_enabled:l.org_creation_enabled,state:null}},n}(n)})}.call(this),function(){define("helpers/json_validator",["underscore"],function(t){return function(e){var n;return null==e?void 0:(t.isString(e)&&(e=function(){try{return JSON.parse(e.replace(/,(\s*[\}\]])/g,"$1"))}catch(t){return void(n=t)}}()),(t.isArray(e)||!t.isObject(e))&&(e=void 0),e)}})}.call(this),define("templates/controls/json_editor",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<span style="display: none" class="out-of-date warning">This document is out of date. Please close and re-open this window.</span><textarea'),buf.push(attrs({name:attribute,rows:rows,autofocus:autofocus,spellcheck:"false","class":"attributes"},{name:!0,rows:!0,autofocus:!0,spellcheck:!0})),buf.push(">");var __val__=root;buf.push(escape(null==__val__?"":__val__)),buf.push('</textarea><span class="help-inline"><span style="visibility: hidden" class="error-message">Must be a valid JSON object</span></span>')}return buf.join("")}}),function(t){function e(t,e,i){var o=t.scrollTop;t.setSelectionRange?n(t,e,i):document.selection&&r(t,e,i),t.scrollTop=o}function n(t,e,n){var r=t.selectionStart,i=t.selectionEnd;if(r==i)e?r-n.tabString==t.value.substring(r-n.tabString.length,r)?(t.value=t.value.substring(0,r-n.tabString.length)+t.value.substring(r),t.focus(),t.setSelectionRange(r-n.tabString.length,r-n.tabString.length)):r-n.tabString==t.value.substring(r,r+n.tabString.length)&&(t.value=t.value.substring(0,r)+t.value.substring(r+n.tabString.length),t.focus(),t.setSelectionRange(r,r)):(t.value=t.value.substring(0,r)+n.tabString+t.value.substring(r),t.focus(),t.setSelectionRange(r+n.tabString.length,r+n.tabString.length));else{for(;r<t.value.length&&t.value.charAt(r).match(/[ \t]/);)r++;var o=t.value.split("\n"),s=new Array,a=0,l=0;for(var u in o)l=a+o[u].length,s.push({start:a,end:l,selected:r>=a&&l>r||l>=i&&i>a||a>r&&i>l}),a=l+1;var c=0;for(var u in s)if(s[u].selected){var d=s[u].start+c;e&&n.tabString==t.value.substring(d,d+n.tabString.length)?(t.value=t.value.substring(0,d)+t.value.substring(d+n.tabString.length),c-=n.tabString.length):e||(t.value=t.value.substring(0,d)+n.tabString+t.value.substring(d),c+=n.tabString.length)}t.focus();var p=r+(c>0?n.tabString.length:0>c?-n.tabString.length:0),h=i+c;t.setSelectionRange(p,h)}}function r(e,n,r){var i=document.selection.createRange();if(e==i.parentElement())if(""==i.text)if(n){var o=i.getBookmark();i.moveStart("character",-r.tabString.length),r.tabString==i.text?i.text="":(i.moveToBookmark(o),i.moveEnd("character",r.tabString.length),r.tabString==i.text&&(i.text="")),i.collapse(!0),i.select()}else i.text=r.tabString,i.collapse(!1),i.select();else{var s=i.text,a=s.length,l=s.split("\r\n"),u=document.body.createTextRange();u.moveToElementText(e),u.setEndPoint("EndToStart",i);var c=u.text,d=c.split("\r\n"),p=c.length,h=document.body.createTextRange();h.moveToElementText(e),h.setEndPoint("StartToEnd",i);var f=h.text,g=document.body.createTextRange();g.moveToElementText(e),g.setEndPoint("StartToEnd",u);var m=g.text,v=t(e).html();t("#r3").text(p+" + "+a+" + "+f.length+" = "+v.length),p+m.length<v.length?(d.push(""),p+=2,n&&r.tabString==l[0].substring(0,r.tabString.length)?l[0]=l[0].substring(r.tabString.length):n||(l[0]=r.tabString+l[0])):n&&r.tabString==d[d.length-1].substring(0,r.tabString.length)?d[d.length-1]=d[d.length-1].substring(r.tabString.length):n||(d[d.length-1]=r.tabString+d[d.length-1]);for(var y=1;y<l.length;y++)n&&r.tabString==l[y].substring(0,r.tabString.length)?l[y]=l[y].substring(r.tabString.length):n||(l[y]=r.tabString+l[y]);1==d.length&&0==p&&(n&&r.tabString==l[0].substring(0,r.tabString.length)?l[0]=l[0].substring(r.tabString.length):n||(l[0]=r.tabString+l[0])),p+a+f.length<v.length&&(l.push(""),a+=2),u.text=d.join("\r\n"),i.text=l.join("\r\n");var b=document.body.createTextRange();b.moveToElementText(e),p>0?b.setEndPoint("StartToEnd",u):b.setEndPoint("StartToStart",u),b.setEndPoint("EndToEnd",i),b.select()}}t.fn.tabby=function(n){var r=t.extend({},t.fn.tabby.defaults,n),i=t.fn.tabby.pressed;return this.each(function(){$this=t(this);var n=t.meta?t.extend({},r,$this.data()):r;$this.bind("keydown",function(r){var o=t.fn.tabby.catch_kc(r);return 16==o&&(i.shft=!0),17==o&&(i.ctrl=!0,setTimeout(function(){t.fn.tabby.pressed.ctrl=!1},1e3)),18==o&&(i.alt=!0,setTimeout(function(){t.fn.tabby.pressed.alt=!1},1e3)),9!=o||i.ctrl||i.alt?void 0:(r.preventDefault,i.last=o,setTimeout(function(){t.fn.tabby.pressed.last=null},0),e(t(r.target).get(0),i.shft,n),!1)}).bind("keyup",function(e){16==t.fn.tabby.catch_kc(e)&&(i.shft=!1)}).bind("blur",function(e){9==i.last&&t(e.target).one("focus",function(){i.last=null}).get(0).focus()})})},t.fn.tabby.catch_kc=function(t){return t.keyCode?t.keyCode:t.charCode?t.charCode:t.which},t.fn.tabby.pressed={shft:!1,ctrl:!1,alt:!1,last:null},t.fn.tabby.defaults={tabString:String.fromCharCode(9)}}(jQuery),define("jquery.textarea",["jquery"],function(){}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/controls/json_editor",["require","b","underscore","helpers/json_validator","j!controls/json_editor","jquery.textarea"],function(e){var n,r,i,o,s;return n=e("b"),i=e("underscore"),o=e("helpers/json_validator"),s=e("j!controls/json_editor"),e("jquery.textarea"),r=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.className="control-group",n.prototype.events={"change textarea":"validate","keyup textarea":"keyup"},n.prototype.template=s,n.prototype.initialize=function(t){var e;this.attribute=t.attribute||"data",this.autofocus=null!=t?t.autofocus:void 0,this.model.on("change",this.indicate_updates,this);try{this.model.fetch()}catch(n){e=n}return this.root=JSON.stringify(this.model.get(this.attribute),null,"  ")||"{}",this.rows=(null!=t?t.rows:void 0)||15,this.keyup=i.debounce(i.bind(this.keyup,this),200)},n.prototype.afterRender=function(){return this.validate(),$(this.el).tabby({tabString:"  "})},n.prototype.serialize=function(){return{attribute:this.attribute,autofocus:this.autofocus,error:this.error,root:this.root,rows:this.rows}},n.prototype.getValue=function(){return this.$("textarea").val()},n.prototype.keyup=function(){return this.validate()},n.prototype.submit=function(){var t;return t=this.validate(),t?this.model.set(this.attribute,t):!1},n.prototype.toggleError=function(t){var e,n;return t?(e="removeClass",n="hidden",this.trigger("valid")):(e="addClass",n="visible",this.trigger("invalid")),this.$el[e]("error"),this.$(".error-message").css("visibility",n),t},n.prototype.indicate_updates=function(){return this.$(".out-of-date").css("display","block")},n.prototype.validate=function(){return this.toggleError(o(this.getValue()))},n}(n.Layout)})}.call(this),define("templates/controls/modals/attributes",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<div class="modal-header">'),"started"!==state&&buf.push('<i data-dismiss="modal" aria-hidden="true" class="icon-remove"></i>'),buf.push('<h3 id="modal-label">');var __val__=title||"Edit Attributes";buf.push(escape(null==__val__?"":__val__)),buf.push('</h3></div><div class="modal-subheader">');var __val__=model.id;buf.push(escape(null==__val__?"":__val__)),buf.push('<div class="subtitle">');var __val__=attributesType;if(buf.push(escape(null==__val__?"":__val__)),buf.push('&nbsp;attributes</div></div><div class="modal-body">'),"finished"===state)buf.push("Success!");else if("error"===state){buf.push('<div class="alert alert-error alert-block"><h4><i class="icon-exclamation-sign"></i>&nbsp;Server Error</h4>');var __val__=message;buf.push(null==__val__?"":__val__),buf.push("</div>")}else if("queued"===state||"started"===state){var __val__=logo();buf.push(null==__val__?"":__val__)}else buf.push('<div class="attributes-editor"></div>');buf.push('</div><div class="modal-list"></div><div class="modal-footer"><button'),buf.push(attrs({"data-dismiss":"modal","aria-hidden":"true",disabled:"started"===state,"class":"btn btn-close"},{"data-dismiss":!0,"aria-hidden":!0,disabled:!0})),buf.push(">");var __val__=closeButtonText;buf.push(escape(null==__val__?"":__val__)),buf.push('</button><button class="btn btn-primary">Save Attributes</button></div>')}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/controls/modals/attributes",["require","views/controls/json_editor","views/controls/modals/base","underscore","state","j!controls/modals/attributes"],function(e){var n,r,i,o,s,a;return r=e("views/controls/json_editor"),i=e("views/controls/modals/base"),o=e("underscore"),s=e("state"),a=e("j!controls/modals/attributes"),n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.className=n.prototype.className+" modal-attributes",n.prototype.template=a,n.prototype.events={"click .btn-primary":"submit"},n.prototype.initialize=function(){var t;return(t=this.options).controller||(t.controller=s.get("controller")),this.attributesType=this.options.editAttribute||"normal",this.root=this.model.get(this.attributesType),this.attributesEditor=new r({model:this.model,attribute:this.attributesType,autofocus:!0}),this.setView(".attributes-editor",this.attributesEditor),n.__super__.initialize.apply(this,arguments)},n.prototype.serialize=function(){return o.extend(n.__super__.serialize.apply(this,arguments),{root:this.root,attributesType:this.friendlyAttributesType()})},n.prototype.submit=function(t){var e;return t.preventDefault(),this.attributesEditor.submit()?(this.queueAction(null!=(e=this.options.action)?e:this.attributesType,this.model.get(this.attributesType)),this.remove()):void 0},n.prototype.friendlyAttributesType=function(){return this.attributesType.replace(/_attributes/,"")},n}(i)})}.call(this),define("templates/controls/attributes",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push("<header><h1>");var __val__=title;buf.push(escape(null==__val__?"":__val__)),buf.push('</h1></header><nav><a class="expandall">Expand All</a><a class="collapseall">Collapse All</a><a class="edit pull-right"><i class="icon-edit"></i><span>Edit</span></a></nav><div class="content"></div>')}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/controls/tree/node",["require","b"],function(e){var n,r;return n=e("b"),r=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.tagName="li",n.prototype.initialize=function(){return this.tree=this.options.tree,this.$el.data("treeview-model",this.model)},n.prototype.serialize=function(){return{model:this.model,tree:this.tree}},n}(n.Layout)})}.call(this),define("templates/controls/tree/leaf_node",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var __val__=model;buf.push(escape(null==__val__?"":__val__))}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/controls/tree/leaf_node",["require","views/controls/tree/node","j!controls/tree/leaf_node"],function(e){var n,r,i;return r=e("views/controls/tree/node"),i=e("j!controls/tree/leaf_node"),n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.template=i,n.prototype.className="leaf",n}(r)})}.call(this),define("templates/controls/tree/parent_node",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<div class="treeview-toggle"><i class="icon-plus treeview-toggle-icon"></i>');var __val__=model.id;buf.push(escape(null==__val__?"":__val__)),buf.push('</div><ol class="treeview-children"></ol>')}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/controls/tree/parent_node",["require","views/controls/tree/node","j!controls/tree/parent_node"],function(e){var n,r,i;return n=e("views/controls/tree/node"),i=e("j!controls/tree/parent_node"),r=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.template=i,n.prototype.childrenRendered=!1,n.prototype.className="parent",n.prototype.events=function(){return{"click .treeview-toggle":"toggle"}},n.prototype.initialize=function(){return n.__super__.initialize.apply(this,arguments)},n.prototype.toggle=function(t){return t.preventDefault(),t.stopPropagation(),this.childrenRendered||this.renderChildren(),this.$el.children(".treeview-children").toggle(),this.$("> .treeview-toggle .treeview-toggle-icon").toggleClass("icon-plus icon-minus")},n.prototype.renderChildren=function(){var t,e,n,r,i,o;if(this.childrenRendered=!0,this.childrenNodes=function(){var t,e,n,i;for(n=this.collection,i=[],t=0,e=n.length;e>t;t++)r=n[t],i.push(this.tree.node(r));return i}.call(this),this.insertViews({"> .treeview-children":this.childrenNodes}),this.render(),this.tree.renderChildrenRecursively){for(i=this.childrenNodes,o=[],e=0,n=i.length;n>e;e++)t=i[e],o.push("parent"===t.className?t.renderChildren():void 0);return o}},n}(n)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/controls/tree",["require","backbone","views/controls/tree/leaf_node","views/controls/tree/parent_node","views/controls/tree/node","underscore"],function(e){var n,r,i,o,s,a;return n=e("backbone"),r=e("views/controls/tree/leaf_node"),i=e("views/controls/tree/parent_node"),o=e("views/controls/tree/node"),a=e("underscore"),s=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.Node=o,n.LeafNode=r,n.ParentNode=i,n.renderChildrenRecursively=!1,n.prototype.tagName="ol",n.prototype.className="treeview",n.prototype.leafNodeClass=r,n.prototype.parentNodeClass=i,n.prototype.initialize=function(){var t;return this.root=null!=(t=this.options.root)?t:[],a.isArray(this.root)||(this.root=[this.root]),this.buildTree()},n.prototype.buildTree=function(){var t;return this.nodes=function(){var e,n,r,i;for(r=this.root,i=[],e=0,n=r.length;n>e;e++)t=r[e],i.push(this.node(t));return i}.call(this),this.insertViews({"":this.nodes})},n.prototype.expandAll=function(){var t,e,n,r;for(this.renderChildrenRecursively=!0,r=this.nodes,t=0,e=r.length;e>t;t++)n=r[t],"parent"===n.className&&n.renderChildren();return this.$(".treeview-children").show(),this.$(".treeview-toggle-icon").removeClass("icon-plus").addClass("icon-minus")},n.prototype.collapseAll=function(){return this.$(".treeview-children").hide(),this.$(".treeview-toggle-icon").addClass("icon-plus").removeClass("icon-minus")},n.prototype.node=function(t){var e;return e=this.children(t),(null!=e?e.length:void 0)?new this.parentNodeClass({model:t,collection:e,tree:this}):new this.leafNodeClass({model:t,tree:this})},n.prototype.children=function(t){return t.children},n}(n.Layout)})}.call(this),define("templates/controls/attributes/leaf_node",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<span class="prop-key">');var __val__=model.key+":";buf.push(escape(null==__val__?"":__val__)),buf.push('</span>&nbsp;<span class="prop-val">');var __val__=model.value;buf.push(escape(null==__val__?"":__val__)),buf.push("</span>")}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/controls/attributes/leaf_node",["require","views/controls/tree","j!controls/attributes/leaf_node"],function(e){var n,r,i;return r=e("views/controls/tree"),i=e("j!controls/attributes/leaf_node"),n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.template=i,n}(r.LeafNode)})}.call(this),define("templates/controls/attributes/parent_node",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<div class="treeview-toggle"><i class="icon-plus treeview-toggle-icon"></i>');var __val__=model.key;buf.push(escape(null==__val__?"":__val__)),buf.push('</div><ol class="treeview-children"></ol>')}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t
},e={}.hasOwnProperty;define("views/controls/attributes/parent_node",["require","views/controls/tree","j!controls/attributes/parent_node"],function(e){var n,r,i;return r=e("views/controls/tree"),i=e("j!controls/attributes/parent_node"),n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.template=i,n}(r.ParentNode)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/controls/attributes/tree",["require","views/controls/attributes/leaf_node","views/controls/attributes/parent_node","views/controls/tree","underscore"],function(e){var n,r,i,o,s;return n=e("views/controls/attributes/leaf_node"),r=e("views/controls/attributes/parent_node"),o=e("views/controls/tree"),s=e("underscore"),i=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.leafNodeClass=n,i.prototype.parentNodeClass=r,i.prototype.initialize=function(){return this.options.root=this.convertAttributes(this.options.root),i.__super__.initialize.apply(this,arguments)},i.prototype.convertAttributes=function(t){var e,n,r,i,o,a,l;if(s.isArray(t)){for(o=[],e=n=0,i=t.length;i>n;e=++n)l=t[e],o.push({key:e,value:this.convertAttributes(l)});return o}if(s.isObject(t)){a=[];for(r in t)l=t[r],a.push({key:r,value:this.convertAttributes(l)});return a}return t},i.prototype.children=function(t){return s.isArray(t.value)&&t.value},i}(o)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/controls/attributes",["require","b","views/controls/modals/attributes","j!controls/attributes","underscore","views/controls/empty","views/controls/attributes/tree"],function(e){var n,r,i,o,s,a,l;return o=e("b"),n=e("views/controls/modals/attributes"),l=e("j!controls/attributes"),a=e("underscore"),s=e("views/controls/empty"),r=e("views/controls/attributes/tree"),i=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.className="attributes-view panel",i.TreeView=r,i.prototype.treeViewClass=i.TreeView,i.prototype.template=l,i.prototype.events={"click nav .expandall":"expandAll","click nav .collapseall":"collapseAll","click nav .edit":"edit"},i.prototype.initialize=function(t){return this.objectType=t.objectType||"Node",this.app=this.options.app,this.title=t.title||"Attributes"},i.prototype.serialize=function(){return{title:this.title}},i.prototype.cleanup=function(){return this.model.off(null,null,this)},i.prototype.modelAttributes=function(){return this.model.get("attributes")},i.prototype.beforeRender=function(){var t;return this.setRoots(),this.model.on("change:"+this.rootString,this.render,this),a.isEmpty(this.root)?(t=new s,this.tree=null,this.setView(".content",t)):(this.tree=new this.treeViewClass({root:this.root}),this.setView(".content",this.tree))},i.prototype.expandAll=function(t){var e;return t.preventDefault(),null!=(e=this.tree)?e.expandAll():void 0},i.prototype.collapseAll=function(t){var e;return t.preventDefault(),null!=(e=this.tree)?e.collapseAll():void 0},i.prototype.edit=function(t){return t.preventDefault(),new n({model:this.model,app:this.app,root:this.editRoot,title:"Edit "+this.objectType+" Attributes",editAttribute:this.options.rootAttribute,action:this.options.action})},i.prototype.setRoots=function(){return this.rootString=this.options.rootAttribute||"attributes",this.root=this.options.root||this.model.get(this.rootString),this.editRoot=this.options.editRoot||(this.options.editRootAttribute?this.model.get(this.options.editRootAttribute):this.root)},i}(o.Layout)})}.call(this),function(t,e){function n(e,n){var i,o,s,a=e.nodeName.toLowerCase();return"area"===a?(i=e.parentNode,o=i.name,e.href&&o&&"map"===i.nodeName.toLowerCase()?(s=t("img[usemap=#"+o+"]")[0],!!s&&r(s)):!1):(/input|select|textarea|button|object/.test(a)?!e.disabled:"a"===a?e.href||n:n)&&r(e)}function r(e){return t.expr.filters.visible(e)&&!t(e).parents().addBack().filter(function(){return"hidden"===t.css(this,"visibility")}).length}var i=0,o=/^ui-id-\d+$/;t.ui=t.ui||{},t.extend(t.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),t.fn.extend({focus:function(e){return function(n,r){return"number"==typeof n?this.each(function(){var e=this;setTimeout(function(){t(e).focus(),r&&r.call(e)},n)}):e.apply(this,arguments)}}(t.fn.focus),scrollParent:function(){var e;return e=t.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(t.css(this,"position"))&&/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!e.length?t(document):e},zIndex:function(n){if(n!==e)return this.css("zIndex",n);if(this.length)for(var r,i,o=t(this[0]);o.length&&o[0]!==document;){if(r=o.css("position"),("absolute"===r||"relative"===r||"fixed"===r)&&(i=parseInt(o.css("zIndex"),10),!isNaN(i)&&0!==i))return i;o=o.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++i)})},removeUniqueId:function(){return this.each(function(){o.test(this.id)&&t(this).removeAttr("id")})}}),t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(n){return!!t.data(n,e)}}):function(e,n,r){return!!t.data(e,r[3])},focusable:function(e){return n(e,!isNaN(t.attr(e,"tabindex")))},tabbable:function(e){var r=t.attr(e,"tabindex"),i=isNaN(r);return(i||r>=0)&&n(e,!i)}}),t("<a>").outerWidth(1).jquery||t.each(["Width","Height"],function(n,r){function i(e,n,r,i){return t.each(o,function(){n-=parseFloat(t.css(e,"padding"+this))||0,r&&(n-=parseFloat(t.css(e,"border"+this+"Width"))||0),i&&(n-=parseFloat(t.css(e,"margin"+this))||0)}),n}var o="Width"===r?["Left","Right"]:["Top","Bottom"],s=r.toLowerCase(),a={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+r]=function(n){return n===e?a["inner"+r].call(this):this.each(function(){t(this).css(s,i(this,n)+"px")})},t.fn["outer"+r]=function(e,n){return"number"!=typeof e?a["outer"+r].call(this,e):this.each(function(){t(this).css(s,i(this,e,!0,n)+"px")})}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(t.fn.removeData=function(e){return function(n){return arguments.length?e.call(this,t.camelCase(n)):e.call(this)}}(t.fn.removeData)),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),t.support.selectstart="onselectstart"in document.createElement("div"),t.fn.extend({disableSelection:function(){return this.bind((t.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(t){t.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),t.extend(t.ui,{plugin:{add:function(e,n,r){var i,o=t.ui[e].prototype;for(i in r)o.plugins[i]=o.plugins[i]||[],o.plugins[i].push([n,r[i]])},call:function(t,e,n){var r,i=t.plugins[e];if(i&&t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType)for(r=0;r<i.length;r++)t.options[i[r][0]]&&i[r][1].apply(t.element,n)}},hasScroll:function(e,n){if("hidden"===t(e).css("overflow"))return!1;var r=n&&"left"===n?"scrollLeft":"scrollTop",i=!1;return e[r]>0?!0:(e[r]=1,i=e[r]>0,e[r]=0,i)}})}(jQuery),define("jquery.ui/core",["jquery"],function(t){return function(){var e;return e||t.jQuery.ui}}(this)),function(t,e){var n=0,r=Array.prototype.slice,i=t.cleanData;t.cleanData=function(e){for(var n,r=0;null!=(n=e[r]);r++)try{t(n).triggerHandler("remove")}catch(o){}i(e)},t.widget=function(e,n,r){var i,o,s,a,l={},u=e.split(".")[0];e=e.split(".")[1],i=u+"-"+e,r||(r=n,n=t.Widget),t.expr[":"][i.toLowerCase()]=function(e){return!!t.data(e,i)},t[u]=t[u]||{},o=t[u][e],s=t[u][e]=function(t,e){return this._createWidget?void(arguments.length&&this._createWidget(t,e)):new s(t,e)},t.extend(s,o,{version:r.version,_proto:t.extend({},r),_childConstructors:[]}),a=new n,a.options=t.widget.extend({},a.options),t.each(r,function(e,r){return t.isFunction(r)?void(l[e]=function(){var t=function(){return n.prototype[e].apply(this,arguments)},i=function(t){return n.prototype[e].apply(this,t)};return function(){var e,n=this._super,o=this._superApply;return this._super=t,this._superApply=i,e=r.apply(this,arguments),this._super=n,this._superApply=o,e}}()):void(l[e]=r)}),s.prototype=t.widget.extend(a,{widgetEventPrefix:o?a.widgetEventPrefix:e},l,{constructor:s,namespace:u,widgetName:e,widgetFullName:i}),o?(t.each(o._childConstructors,function(e,n){var r=n.prototype;t.widget(r.namespace+"."+r.widgetName,s,n._proto)}),delete o._childConstructors):n._childConstructors.push(s),t.widget.bridge(e,s)},t.widget.extend=function(n){for(var i,o,s=r.call(arguments,1),a=0,l=s.length;l>a;a++)for(i in s[a])o=s[a][i],s[a].hasOwnProperty(i)&&o!==e&&(n[i]=t.isPlainObject(o)?t.isPlainObject(n[i])?t.widget.extend({},n[i],o):t.widget.extend({},o):o);return n},t.widget.bridge=function(n,i){var o=i.prototype.widgetFullName||n;t.fn[n]=function(s){var a="string"==typeof s,l=r.call(arguments,1),u=this;return s=!a&&l.length?t.widget.extend.apply(null,[s].concat(l)):s,this.each(a?function(){var r,i=t.data(this,o);return i?t.isFunction(i[s])&&"_"!==s.charAt(0)?(r=i[s].apply(i,l),r!==i&&r!==e?(u=r&&r.jquery?u.pushStack(r.get()):r,!1):void 0):t.error("no such method '"+s+"' for "+n+" widget instance"):t.error("cannot call methods on "+n+" prior to initialization; attempted to call method '"+s+"'")}:function(){var e=t.data(this,o);e?e.option(s||{})._init():t.data(this,o,new i(s,this))}),u}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,r){r=t(r||this.defaultElement||this)[0],this.element=t(r),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this.bindings=t(),this.hoverable=t(),this.focusable=t(),r!==this&&(t.data(r,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===r&&this.destroy()}}),this.document=t(r.style?r.ownerDocument:r.document||r),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(n,r){var i,o,s,a=n;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof n)if(a={},i=n.split("."),n=i.shift(),i.length){for(o=a[n]=t.widget.extend({},this.options[n]),s=0;s<i.length-1;s++)o[i[s]]=o[i[s]]||{},o=o[i[s]];if(n=i.pop(),r===e)return o[n]===e?null:o[n];o[n]=r}else{if(r===e)return this.options[n]===e?null:this.options[n];a[n]=r}return this._setOptions(a),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!e).attr("aria-disabled",e),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(e,n,r){var i,o=this;"boolean"!=typeof e&&(r=n,n=e,e=!1),r?(n=i=t(n),this.bindings=this.bindings.add(n)):(r=n,n=this.element,i=this.widget()),t.each(r,function(r,s){function a(){return e||o.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof s?o[s]:s).apply(o,arguments):void 0}"string"!=typeof s&&(a.guid=s.guid=s.guid||a.guid||t.guid++);var l=r.match(/^(\w+)\s*(.*)$/),u=l[1]+o.eventNamespace,c=l[2];c?i.delegate(c,u,a):n.bind(u,a)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e)},_delay:function(t,e){function n(){return("string"==typeof t?r[t]:t).apply(r,arguments)}var r=this;return setTimeout(n,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,n,r){var i,o,s=this.options[e];if(r=r||{},n=t.Event(n),n.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),n.target=this.element[0],o=n.originalEvent)for(i in o)i in n||(n[i]=o[i]);return this.element.trigger(n,r),!(t.isFunction(s)&&s.apply(this.element[0],[n].concat(r))===!1||n.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,n){t.Widget.prototype["_"+e]=function(r,i,o){"string"==typeof i&&(i={effect:i});var s,a=i?i===!0||"number"==typeof i?n:i.effect||n:e;i=i||{},"number"==typeof i&&(i={duration:i}),s=!t.isEmptyObject(i),i.complete=o,i.delay&&r.delay(i.delay),s&&t.effects&&t.effects.effect[a]?r[e](i):a!==e&&r[a]?r[a](i.duration,i.easing,o):r.queue(function(n){t(this)[e](),o&&o.call(r[0]),n()})}})}(jQuery),define("jquery.ui/widget",["jquery"],function(t){return function(){var e;return e||t.jQuery.widget}}(this)),function(t){var e=!1;t(document).mouseup(function(){e=!1}),t.widget("ui.mouse",{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(n){return!0===t.data(n.target,e.widgetName+".preventClickEvent")?(t.removeData(n.target,e.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(n){if(!e){this._mouseStarted&&this._mouseUp(n),this._mouseDownEvent=n;var r=this,i=1===n.which,o="string"==typeof this.options.cancel&&n.target.nodeName?t(n.target).closest(this.options.cancel).length:!1;return i&&!o&&this._mouseCapture(n)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){r.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(n)&&this._mouseDelayMet(n)&&(this._mouseStarted=this._mouseStart(n)!==!1,!this._mouseStarted)?(n.preventDefault(),!0):(!0===t.data(n.target,this.widgetName+".preventClickEvent")&&t.removeData(n.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return r._mouseMove(t)},this._mouseUpDelegate=function(t){return r._mouseUp(t)},t(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),n.preventDefault(),e=!0,!0)):!0}},_mouseMove:function(e){return t.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button?this._mouseUp(e):this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){return t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),define("jquery.ui/mouse",["jquery","jquery.ui/widget"],function(t){return function(){var e;return e||t.jQuery.ui.mouse}}(this)),function(t){function e(t,e,n){return t>e&&e+n>t}function n(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))}t.widget("ui.sortable",t.ui.mouse,{version:"1.10.3",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var t=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===t.axis||n(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_setOption:function(e,n){"disabled"===e?(this.options[e]=n,this.widget().toggleClass("ui-sortable-disabled",!!n)):t.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(e,n){var r=null,i=!1,o=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(e),t(e.target).parents().each(function(){return t.data(this,o.widgetName+"-item")===o?(r=t(this),!1):void 0}),t.data(e.target,o.widgetName+"-item")===o&&(r=t(e.target)),r&&(!this.options.handle||n||(t(this.options.handle,r).find("*").addBack().each(function(){this===e.target&&(i=!0)}),i))?(this.currentItem=r,this._removeCurrentsFromItems(),!0):!1)},_mouseStart:function(e,n,r){var i,o,s=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,s.cursorAt&&this._adjustOffsetFromHelper(s.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),s.containment&&this._setContainment(),s.cursor&&"auto"!==s.cursor&&(o=this.document.find("body"),this.storedCursor=o.css("cursor"),o.css("cursor",s.cursor),this.storedStylesheet=t("<style>*{ cursor: "+s.cursor+" !important; }</style>").appendTo(o)),s.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",s.opacity)),s.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",s.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!r)for(i=this.containers.length-1;i>=0;i--)this.containers[i]._trigger("activate",e,this._uiHash(this));return t.ui.ddmanager&&(t.ui.ddmanager.current=this),t.ui.ddmanager&&!s.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(e),!0},_mouseDrag:function(e){var n,r,i,o,s=this.options,a=!1;for(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<s.scrollSensitivity?this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop+s.scrollSpeed:e.pageY-this.overflowOffset.top<s.scrollSensitivity&&(this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop-s.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<s.scrollSensitivity?this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft+s.scrollSpeed:e.pageX-this.overflowOffset.left<s.scrollSensitivity&&(this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft-s.scrollSpeed)):(e.pageY-t(document).scrollTop()<s.scrollSensitivity?a=t(document).scrollTop(t(document).scrollTop()-s.scrollSpeed):t(window).height()-(e.pageY-t(document).scrollTop())<s.scrollSensitivity&&(a=t(document).scrollTop(t(document).scrollTop()+s.scrollSpeed)),e.pageX-t(document).scrollLeft()<s.scrollSensitivity?a=t(document).scrollLeft(t(document).scrollLeft()-s.scrollSpeed):t(window).width()-(e.pageX-t(document).scrollLeft())<s.scrollSensitivity&&(a=t(document).scrollLeft(t(document).scrollLeft()+s.scrollSpeed))),a!==!1&&t.ui.ddmanager&&!s.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),n=this.items.length-1;n>=0;n--)if(r=this.items[n],i=r.item[0],o=this._intersectsWithPointer(r),o&&r.instance===this.currentContainer&&i!==this.currentItem[0]&&this.placeholder[1===o?"next":"prev"]()[0]!==i&&!t.contains(this.placeholder[0],i)&&("semi-dynamic"===this.options.type?!t.contains(this.element[0],i):!0)){if(this.direction=1===o?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(r))break;this._rearrange(e,r),this._trigger("change",e,this._uiHash());break}return this._contactContainers(e),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,n){if(e){if(t.ui.ddmanager&&!this.options.dropBehaviour&&t.ui.ddmanager.drop(this,e),this.options.revert){var r=this,i=this.placeholder.offset(),o=this.options.axis,s={};o&&"x"!==o||(s.left=i.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),o&&"y"!==o||(s.top=i.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,t(this.helper).animate(s,parseInt(this.options.revert,10)||500,function(){r._clear(e)})}else this._clear(e,n);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("deactivate",null,this._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,this._uiHash(this)),this.containers[e].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),t.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?t(this.domPosition.prev).after(this.currentItem):t(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var n=this._getItemsAsjQuery(e&&e.connected),r=[];return e=e||{},t(n).each(function(){var n=(t(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);n&&r.push((e.key||n[1]+"[]")+"="+(e.key&&e.expression?n[1]:n[2]))}),!r.length&&e.key&&r.push(e.key+"="),r.join("&")},toArray:function(e){var n=this._getItemsAsjQuery(e&&e.connected),r=[];return e=e||{},n.each(function(){r.push(t(e.item||this).attr(e.attribute||"id")||"")}),r},_intersectsWith:function(t){var e=this.positionAbs.left,n=e+this.helperProportions.width,r=this.positionAbs.top,i=r+this.helperProportions.height,o=t.left,s=o+t.width,a=t.top,l=a+t.height,u=this.offset.click.top,c=this.offset.click.left,d="x"===this.options.axis||r+u>a&&l>r+u,p="y"===this.options.axis||e+c>o&&s>e+c,h=d&&p;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?h:o<e+this.helperProportions.width/2&&n-this.helperProportions.width/2<s&&a<r+this.helperProportions.height/2&&i-this.helperProportions.height/2<l},_intersectsWithPointer:function(t){var n="x"===this.options.axis||e(this.positionAbs.top+this.offset.click.top,t.top,t.height),r="y"===this.options.axis||e(this.positionAbs.left+this.offset.click.left,t.left,t.width),i=n&&r,o=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return i?this.floating?s&&"right"===s||"down"===o?2:1:o&&("down"===o?2:1):!1},_intersectsWithSides:function(t){var n=e(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),r=e(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),i=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return this.floating&&o?"right"===o&&r||"left"===o&&!r:i&&("down"===i&&n||"up"===i&&!n)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!==t&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!==t&&(t>0?"right":"left")},refresh:function(t){return this._refreshItems(t),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(e){var n,r,i,o,s=[],a=[],l=this._connectWith();if(l&&e)for(n=l.length-1;n>=0;n--)for(i=t(l[n]),r=i.length-1;r>=0;r--)o=t.data(i[r],this.widgetFullName),o&&o!==this&&!o.options.disabled&&a.push([t.isFunction(o.options.items)?o.options.items.call(o.element):t(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o]);for(a.push([t.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):t(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),n=a.length-1;n>=0;n--)a[n][0].each(function(){s.push(this)});return t(s)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=t.grep(this.items,function(t){for(var n=0;n<e.length;n++)if(e[n]===t.item[0])return!1;return!0})},_refreshItems:function(e){this.items=[],this.containers=[this];var n,r,i,o,s,a,l,u,c=this.items,d=[[t.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):t(this.options.items,this.element),this]],p=this._connectWith();if(p&&this.ready)for(n=p.length-1;n>=0;n--)for(i=t(p[n]),r=i.length-1;r>=0;r--)o=t.data(i[r],this.widgetFullName),o&&o!==this&&!o.options.disabled&&(d.push([t.isFunction(o.options.items)?o.options.items.call(o.element[0],e,{item:this.currentItem}):t(o.options.items,o.element),o]),this.containers.push(o));for(n=d.length-1;n>=0;n--)for(s=d[n][1],a=d[n][0],r=0,u=a.length;u>r;r++)l=t(a[r]),l.data(this.widgetName+"-item",s),c.push({item:l,instance:s,width:0,height:0,left:0,top:0})},refreshPositions:function(e){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var n,r,i,o;for(n=this.items.length-1;n>=0;n--)r=this.items[n],r.instance!==this.currentContainer&&this.currentContainer&&r.item[0]!==this.currentItem[0]||(i=this.options.toleranceElement?t(this.options.toleranceElement,r.item):r.item,e||(r.width=i.outerWidth(),r.height=i.outerHeight()),o=i.offset(),r.left=o.left,r.top=o.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(n=this.containers.length-1;n>=0;n--)o=this.containers[n].element.offset(),this.containers[n].containerCache.left=o.left,this.containers[n].containerCache.top=o.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight();return this},_createPlaceholder:function(e){e=e||this;var n,r=e.options;r.placeholder&&r.placeholder.constructor!==String||(n=r.placeholder,r.placeholder={element:function(){var r=e.currentItem[0].nodeName.toLowerCase(),i=t("<"+r+">",e.document[0]).addClass(n||e.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===r?e.currentItem.children().each(function(){t("<td>&#160;</td>",e.document[0]).attr("colspan",t(this).attr("colspan")||1).appendTo(i)}):"img"===r&&i.attr("src",e.currentItem.attr("src")),n||i.css("visibility","hidden"),i},update:function(t,i){(!n||r.forcePlaceholderSize)&&(i.height()||i.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),i.width()||i.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10)))}}),e.placeholder=t(r.placeholder.element.call(e.element,e.currentItem)),e.currentItem.after(e.placeholder),r.placeholder.update(e,e.placeholder)},_contactContainers:function(r){var i,o,s,a,l,u,c,d,p,h,f=null,g=null;for(i=this.containers.length-1;i>=0;i--)if(!t.contains(this.currentItem[0],this.containers[i].element[0]))if(this._intersectsWith(this.containers[i].containerCache)){if(f&&t.contains(this.containers[i].element[0],f.element[0]))continue;f=this.containers[i],g=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",r,this._uiHash(this)),this.containers[i].containerCache.over=0);if(f)if(1===this.containers.length)this.containers[g].containerCache.over||(this.containers[g]._trigger("over",r,this._uiHash(this)),this.containers[g].containerCache.over=1);else{for(s=1e4,a=null,h=f.floating||n(this.currentItem),l=h?"left":"top",u=h?"width":"height",c=this.positionAbs[l]+this.offset.click[l],o=this.items.length-1;o>=0;o--)t.contains(this.containers[g].element[0],this.items[o].item[0])&&this.items[o].item[0]!==this.currentItem[0]&&(!h||e(this.positionAbs.top+this.offset.click.top,this.items[o].top,this.items[o].height))&&(d=this.items[o].item.offset()[l],p=!1,Math.abs(d-c)>Math.abs(d+this.items[o][u]-c)&&(p=!0,d+=this.items[o][u]),Math.abs(d-c)<s&&(s=Math.abs(d-c),a=this.items[o],this.direction=p?"up":"down"));
if(!a&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[g])return;a?this._rearrange(r,a,null,!0):this._rearrange(r,null,this.containers[g].element,!0),this._trigger("change",r,this._uiHash()),this.containers[g]._trigger("change",r,this._uiHash(this)),this.currentContainer=this.containers[g],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[g]._trigger("over",r,this._uiHash(this)),this.containers[g].containerCache.over=1}},_createHelper:function(e){var n=this.options,r=t.isFunction(n.helper)?t(n.helper.apply(this.element[0],[e,this.currentItem])):"clone"===n.helper?this.currentItem.clone():this.currentItem;return r.parents("body").length||t("parent"!==n.appendTo?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(r[0]),r[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!r[0].style.width||n.forceHelperSize)&&r.width(this.currentItem.width()),(!r[0].style.height||n.forceHelperSize)&&r.height(this.currentItem.height()),r},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,n,r,i=this.options;"parent"===i.containment&&(i.containment=this.helper[0].parentNode),("document"===i.containment||"window"===i.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,t("document"===i.containment?document:window).width()-this.helperProportions.width-this.margins.left,(t("document"===i.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(i.containment)||(e=t(i.containment)[0],n=t(i.containment).offset(),r="hidden"!==t(e).css("overflow"),this.containment=[n.left+(parseInt(t(e).css("borderLeftWidth"),10)||0)+(parseInt(t(e).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(t(e).css("borderTopWidth"),10)||0)+(parseInt(t(e).css("paddingTop"),10)||0)-this.margins.top,n.left+(r?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(t(e).css("borderLeftWidth"),10)||0)-(parseInt(t(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(r?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(t(e).css("borderTopWidth"),10)||0)-(parseInt(t(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(e,n){n||(n=this.position);var r="absolute"===e?1:-1,i="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(i[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():o?0:i.scrollTop())*r,left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():o?0:i.scrollLeft())*r}},_generatePosition:function(e){var n,r,i=this.options,o=e.pageX,s=e.pageY,a="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(a[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(s=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(s=this.containment[3]+this.offset.click.top)),i.grid&&(n=this.originalPageY+Math.round((s-this.originalPageY)/i.grid[1])*i.grid[1],s=this.containment?n-this.offset.click.top>=this.containment[1]&&n-this.offset.click.top<=this.containment[3]?n:n-this.offset.click.top>=this.containment[1]?n-i.grid[1]:n+i.grid[1]:n,r=this.originalPageX+Math.round((o-this.originalPageX)/i.grid[0])*i.grid[0],o=this.containment?r-this.offset.click.left>=this.containment[0]&&r-this.offset.click.left<=this.containment[2]?r:r-this.offset.click.left>=this.containment[0]?r-i.grid[0]:r+i.grid[0]:r)),{top:s-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:a.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:a.scrollLeft())}},_rearrange:function(t,e,n,r){n?n[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var i=this.counter;this._delay(function(){i===this.counter&&this.refreshPositions(!r)})},_clear:function(t,e){this.reverting=!1;var n,r=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(n in this._storedCSS)("auto"===this._storedCSS[n]||"static"===this._storedCSS[n])&&(this._storedCSS[n]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!e&&r.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||r.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(e||(r.push(function(t){this._trigger("remove",t,this._uiHash())}),r.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),r.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer)))),n=this.containers.length-1;n>=0;n--)e||r.push(function(t){return function(e){t._trigger("deactivate",e,this._uiHash(this))}}.call(this,this.containers[n])),this.containers[n].containerCache.over&&(r.push(function(t){return function(e){t._trigger("out",e,this._uiHash(this))}}.call(this,this.containers[n])),this.containers[n].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!e){for(this._trigger("beforeStop",t,this._uiHash()),n=0;n<r.length;n++)r[n].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!1}if(e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!e){for(n=0;n<r.length;n++)r[n].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){t.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(e){var n=e||this;return{helper:n.helper,placeholder:n.placeholder||t([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:e?e.element:null}}})}(jQuery),define("jquery.ui/sortable",["jquery","jquery.ui/core","jquery.ui/widget","jquery.ui/mouse"],function(t){return function(){var e;return e||t.jQuery.ui.sortable}}(this)),function(){define("views/controls/run_list_editor/helpers/draggable",["require","jquery.ui/sortable"],function(t){return t("jquery.ui/sortable"),{draggableSetup:function(t){return null==t&&(t=!1),this.draggable=this.$("ul").sortable({containment:this.containment,connectWith:this.connectWith,over:function(){return $(this).addClass("droppable"),t?$(".ui-sortable-placeholder").appendTo($(".ui-sortable-placeholder").parent(".ui-sortable")):void 0},out:function(){return $(this).removeClass("droppable")},stop:function(){return $(this).removeClass("droppable")},update:function(){return $(this).trigger("dropped")}})}}})}.call(this),define("templates/controls/run_list_editor/available",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<div class="header clearfix"><div class="pull-left"><i'),buf.push(attrs({"class":iconClass},{"class":!0})),buf.push("></i><label>");var __val__=label;buf.push(escape(null==__val__?"":__val__)),buf.push("</label></div>"),filterable&&buf.push('<div class="pull-right"><input type="search"/></div>'),buf.push("</div><div"),buf.push(attrs({"class":"list-content "+(filterable?"has-filter":null)},{"class":!0})),buf.push("><ul>"),function(){if("number"==typeof collection.length)for(var t=0,e=collection.length;e>t;t++){var n=collection[t];buf.push("<li"),buf.push(attrs({"data-type":type},{"data-type":!0})),buf.push(">");var r=n.get("name");buf.push(escape(null==r?"":r)),buf.push("</li>")}else for(var t in collection){var n=collection[t];buf.push("<li"),buf.push(attrs({"data-type":type},{"data-type":!0})),buf.push(">");var r=n.get("name");buf.push(escape(null==r?"":r)),buf.push("</li>")}}.call(this),buf.push('</ul></div><div class="spinner"></div>')}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/controls/run_list_editor/available",["require","underscore","b","views/controls/spinner","views/controls/run_list_editor/helpers/draggable","j!controls/run_list_editor/available"],function(e){var n,r,i,o,s,a;return o=e("underscore"),r=e("b"),i=e("views/controls/spinner"),s=e("views/controls/run_list_editor/helpers/draggable"),a=e("j!controls/run_list_editor/available"),n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),o.extend(n.prototype,s),n.prototype.template=a,n.prototype.events={"keyup input":"filterEvent","dropped .ui-sortable":"droppedEvent"},n.prototype.initialize=function(t){return this.spinnerView=new i,this.containment=t.containment,this.connectWith=t.connectWith,this.startingRunList=t.startingRunList,this.filterable=t.filterable,this.setView(".spinner",this.spinnerView),this.collection.fetch({complete:function(t){return function(){return t.fetchSuccessful()}}(this)}),this.collection.on("reset remove",this.render,this)},n.prototype.serialize=function(){var t;return t=this.collection.toArray(),{collection:t,iconClass:this.iconClass,label:this.label,type:this.type,filterable:this.filterable}},n.prototype.fetchSuccessful=function(){var t,e,n,r;for(this.render(),r=this.startingRunList,t=0,n=r.length;n>t;t++)e=r[t],e.type===this.type&&this.collection.remove(this.collection.get(e.name));return this.spinnerView.remove(),this.collection.on("sync",this.updateListView,this)},n.prototype.droppedEvent=function(){var t;return t=this.$("input").val(),(null!=t?t.length:void 0)>0?this.$("ul li:not(:contains('"+this.$("input").val()+"'))").fadeOut("slow"):void 0},n.prototype.filterEvent=function(t){return t.preventDefault,this.filter()},n.prototype.filter=function(){var t;return t=this.$("input").val(),t.length>0?(this.$("ul li:contains('"+t+"')").show(),this.$("ul li:not(:contains('"+t+"'))").hide()):this.$("ul li").show()},n.prototype.afterRender=function(){return this.draggableSetup()},n.prototype.updateListView=function(t,e){var n,r,i,o,s;for(o=e.results,s=[],n=0,r=o.length;r>n;n++)i=o[n],s.push(this.$("ul").append("<li data-type="+this.type+">"+i.name+"</li>"));return s},n}(r.Layout)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/controls/run_list_editor/available_recipes",["require","views/controls/run_list_editor/available","utils/i18n.gettext"],function(e){var n,r,i;return r=e("views/controls/run_list_editor/available"),i=e("utils/i18n.gettext"),n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.label=i("Available Recipes"),n.prototype.iconClass="icon-book",n.prototype.type="recipe",n}(r)})}.call(this),function(){define("views/controls/run_list_editor/helpers/scroll_loadable",["require"],function(){return{scroll:function(t){var e;return t.preventDefault(),null==this.waitingForScrollResponse&&(this.waitingForScrollResponse=!1),e=t.target.offsetHeight+.3*t.target.offsetHeight,t.target.scrollHeight-t.target.scrollTop<e&&!this.waitingForScrollResponse&&null==this.reachedBottom?(this.collection.requestNextPage({update:!0,remove:!1,success:function(t){return function(e,n){return n.results.length<e.perPage&&(t.reachedBottom=!0),t.waitingForScrollResponse=!1,t.spinnerView.remove()}}(this)}),this.setView(".spinner",this.spinnerView).render(),this.waitingForScrollResponse=!0):void 0}}})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/controls/run_list_editor/available_roles",["require","views/controls/run_list_editor/available","utils/i18n.gettext","views/controls/run_list_editor/helpers/scroll_loadable"],function(e){var n,r,i,o;return r=e("views/controls/run_list_editor/available"),i=e("utils/i18n.gettext"),o=e("views/controls/run_list_editor/helpers/scroll_loadable"),n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),_.extend(n.prototype,o),n.prototype.label=i("Available Roles"),n.prototype.iconClass="icon-th-large",n.prototype.type="role",n.prototype.afterRender=function(){return this.$("ul").on("scroll",function(t){return function(e){return t.scroll(e)}}(this)),n.__super__.afterRender.call(this)},n}(r)})}.call(this),define("templates/controls/run_list_editor/current",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<div class="header"><label>Current Run List</label></div><div class="list-content"><ul>'),function(){if("number"==typeof runList.length)for(var t=0,e=runList.length;e>t;t++){var n=runList[t];buf.push("<li"),buf.push(attrs({"data-type":n.type,"class":"item"},{"data-type":!0})),buf.push(">");var r=n.name;buf.push(escape(null==r?"":r)),buf.push("</li>")}else for(var t in runList){var n=runList[t];buf.push("<li"),buf.push(attrs({"data-type":n.type,"class":"item"},{"data-type":!0})),buf.push(">");var r=n.name;buf.push(escape(null==r?"":r)),buf.push("</li>")}}.call(this),buf.push("</ul></div>")}return buf.join("")}}),function(){define("views/controls/run_list_editor/helpers/normalize_run_list",["require"],function(){return{normalizeRunList:function(t){return Array.isArray(t)&&"string"==typeof t[0]?t.map(function(t){return t=t.slice(0,-1).split("["),{type:t[0],name:t[1]}}):t}}})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function r(){this.constructor=t}for(var i in e)n.call(e,i)&&(t[i]=e[i]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},n={}.hasOwnProperty;define("views/controls/run_list_editor/current",["require","jquery","underscore","backbone","views/controls/run_list_editor/helpers/draggable","j!controls/run_list_editor/current","views/controls/run_list_editor/helpers/normalize_run_list"],function(n){var r,i,o,s,a,l,u;return r=n("jquery"),s=n("underscore"),i=n("backbone"),a=n("views/controls/run_list_editor/helpers/draggable"),u=n("j!controls/run_list_editor/current"),l=n("views/controls/run_list_editor/helpers/normalize_run_list"),o=function(n){function i(){return this.updateRunList=t(this.updateRunList,this),i.__super__.constructor.apply(this,arguments)}return e(i,n),s.extend(i.prototype,a),s.extend(i.prototype,l),i.prototype.template=u,i.prototype.initialize=function(t){return this.containment=t.containment,this.connectWith=t.connectWith,this.environment=t.environment,this.runList=this.normalizeRunList(this.model.get("run_list"))},i.prototype.serialize=function(){return{runList:this.runList}},i.prototype.afterRender=function(){return this.draggableSetup({append:!0}),this.draggable.on("sortstop sortreceive sortremove",this.updateRunList)},i.prototype.getParsedRunList=function(){return s.map(this.$("li:not(.ui-sortable-placeholder)").toArray(),function(t){var e,n;return t=r(t),e=t.text(),n=t.data("type"),{name:e,type:n}})},i.prototype.updateRunList=function(){var t,e;return e=this.getParsedRunList(),this.model.set({run_list:e}),null!=(t=this.model.run_lists().get(this.environment))?t.set({run_list:e}):void 0},i}(i.Layout)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("collections/recipes",["require","b"],function(e){var n,r;return n=e("b"),r=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.idAttribute="name",n.prototype.initialize=function(t,e){return this.environment=e.environment,this.organization=e.organization,e},n.prototype.url=function(){return this.organization.url()+"/environments/"+this.environment+"/recipes"},n.prototype.parse=function(t){return t.map(function(t){return{id:t,name:t}})},n}(n.Collection)})}.call(this),define("templates/controls/run_list_editor",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<div class="runListEditor row-fluid"><div class="span6"><div class="roles available"></div><div class="recipes available"></div></div><div class="span6"><div class="current"></div></div></div>')}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/controls/run_list_editor",["require","views/controls/run_list_editor/available_recipes","views/controls/run_list_editor/available_roles","b","views/controls/run_list_editor/current","collections/recipes","collections/roles","j!controls/run_list_editor","views/controls/run_list_editor/helpers/normalize_run_list","jquery"],function(e){var n,r,i,o,s,a,l,u,c,d;return r=e("views/controls/run_list_editor/available_recipes"),i=e("views/controls/run_list_editor/available_roles"),o=e("b"),s=e("views/controls/run_list_editor/current"),a=e("collections/recipes"),l=e("collections/roles"),d=e("j!controls/run_list_editor"),c=e("views/controls/run_list_editor/helpers/normalize_run_list"),n=e("jquery"),u=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),_.extend(o.prototype,c),o.prototype.template=d,o.prototype.initialize=function(t){var e,o,u,c;for(this.startingRunList=[],c=this.normalizeRunList(this.model.get("run_list")),e=0,u=c.length;u>e;e++)o=c[e],this.startingRunList.push(n.extend(!0,{},o));return"role"===this.model.get("chef_type")&&this.startingRunList.push({name:this.model.get("name"),type:"role"}),this.environment=t.environment,this.organization=t.organization,this.currentRole=t.currentRole,this.recipes=new a([],{environment:this.environment,organization:this.organization}),this.roles=new l([],{organization:this.organization}),this.setView(".recipes",new r({collection:this.recipes,containment:this.el,connectWith:".current ul",startingRunList:this.startingRunList,filterable:!0})),this.setView(".roles",new i({collection:this.roles,containment:this.el,connectWith:".current ul",startingRunList:this.startingRunList,filterable:!1})),this.setView(".current",new s({model:this.model,containment:this.el,connectWith:".available ul",environment:this.environment}))},o}(o.Layout)})}.call(this),define("templates/controls/modals/edit_run_list",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<div class="modal-header">'),"started"!==state&&buf.push('<i data-dismiss="modal" aria-hidden="true" class="icon-remove"></i>'),buf.push('<h3 id="modal-label">');var __val__=controller.messages.editRunList||"Edit Run List";buf.push(escape(null==__val__?"":__val__)),buf.push('</h3></div><div class="modal-subheader">');var __val__=model.id;if(buf.push(escape(null==__val__?"":__val__)),buf.push('</div><div class="modal-body">'),"finished"===state)buf.push("Success!");else if("error"===state){buf.push('<div class="alert alert-error alert-block"><h4><i class="icon-exclamation-sign"></i>&nbsp;Server Error</h4>');var __val__=message;buf.push(null==__val__?"":__val__),buf.push("</div>")}else if("queued"===state||"started"===state){var __val__=logo();buf.push(null==__val__?"":__val__)}else buf.push('<div class="run-list-editor"></div>');buf.push('</div><div class="modal-list"></div><div class="modal-footer"><button'),buf.push(attrs({"data-dismiss":"modal","aria-hidden":"true",disabled:"started"===state,"class":"btn btn-close"},{"data-dismiss":!0,"aria-hidden":!0,disabled:!0})),buf.push(">");var __val__=closeButtonText;buf.push(escape(null==__val__?"":__val__)),buf.push('</button><button class="btn btn-primary">Save Run List</button></div>')}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/controls/modals/edit_run_list",["require","views/controls/modals/base","views/controls/run_list_editor","j!controls/modals/edit_run_list"],function(e){var n,r,i,o;return r=e("views/controls/modals/base"),i=e("views/controls/run_list_editor"),o=e("j!controls/modals/edit_run_list"),n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.template=o,n.prototype.events={"click .btn-primary":"submit"},n.prototype.initialize=function(t){return this.model=this.collection.at(0),this.environment="_default",this.organization=t.app.organizations.last(),this.runList=this.model.get("run_list"),this.runListEditor=new i({environment:this.environment,model:this.model,organization:this.organization}),n.__super__.initialize.call(this)},n.prototype.beforeRender=function(){return this.setView(".modal-body",this.runListEditor)},n.prototype.getProcessedRunList=function(){return this.model.get("run_list").map(function(t){return t.type+"["+t.name+"]"})},n.prototype.submit=function(){return this.queueAction("edit_run_list",this.getProcessedRunList()),this.remove()},n}(r)})}.call(this),define("templates/nodes/modals/manage_tags",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){if(buf.push('<div class="modal-header">'),"started"!==state&&buf.push('<i data-dismiss="modal" aria-hidden="true" class="icon-remove"></i>'),buf.push('<h3 id="modal-label">Manage Node Tags</h3></div><div class="modal-subheader">'),collection.length>1){var __val__=collection.length;buf.push(escape(null==__val__?"":__val__)),buf.push("&nbsp;nodes selected")}else{var __val__=collection.at(0).id;buf.push(escape(null==__val__?"":__val__))}if(buf.push('</div><div class="modal-body">'),"finished"===state)buf.push("Success!");else if("error"===state){buf.push('<div class="alert alert-error alert-block"><h4><i class="icon-exclamation-sign"></i>&nbsp;Server Error</h4>');var __val__=message;buf.push(null==__val__?"":__val__),buf.push("</div>")}else if("queued"===state||"started"===state){var __val__=logo();buf.push(null==__val__?"":__val__)}else buf.push('<input type="text" name="tags" autofocus="autofocus"/><select class="operations"><option selected="selected" value="Add">Add Tags</option><option value="Delete">Delete Tags</option><option value="Set">Set Tags</option></select><p class="muted">Note: Multiple tags should be comma-separated.</p>');buf.push('</div><div class="modal-list"></div><div class="modal-footer"><button'),buf.push(attrs({"data-dismiss":"modal","aria-hidden":"true",disabled:"started"===state,"class":"btn btn-close"},{"data-dismiss":!0,"aria-hidden":!0,disabled:!0})),buf.push(">");var __val__=closeButtonText;buf.push(escape(null==__val__?"":__val__)),buf.push('</button><button class="btn btn-primary">Update Tags</button></div>')}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/nodes/modals/manage_tags",["views/controls/modals/base","j!nodes/modals/manage_tags","utils/i18n","underscore"],function(e,n){var r;return r=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype.template=n,r.prototype.events={"click .btn-primary":"submit"},r.prototype.submit=function(){var t,e;return t=this.$("select.operations").find(":selected").val(),e=this.$('input[name="tags"]').val(),this.queueAction("manage_tags",e,t),this.remove()},r}(e)})}.call(this),define("templates/nodes/modals/delete",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<div class="modal-header">'),"started"!==state&&buf.push('<i data-dismiss="modal" aria-hidden="true" class="icon-remove"></i>'),buf.push('<h3 id="modal-label"><i class="icon-remove-sign"></i>&nbsp;');var __val__=title;if(buf.push(escape(null==__val__?"":__val__)),buf.push('</h3></div><div class="modal-subheader">'),collection.length>1){var __val__=messages.selectMulti(collection.length);buf.push(escape(null==__val__?"":__val__))}else{var __val__=collection.at(0).id;buf.push(escape(null==__val__?"":__val__))}if(buf.push('</div><div class="modal-body">'),"finished"===state)buf.push("Success!");else if("error"===state){buf.push('<div class="alert alert-error alert-block"><h4><i class="icon-exclamation-sign"></i>&nbsp;Server Error</h4>');var __val__=message;buf.push(null==__val__?"":__val__),buf.push("</div>")}else if("queued"===state||"started"===state){var __val__=logo();buf.push(null==__val__?"":__val__)}else{buf.push("<p>");var __val__=i18n.sprintf(messages.deleteLong(collection.length),collection.length);buf.push(escape(null==__val__?"":__val__)),buf.push("</p><ul>"),function(){if("number"==typeof collection.models.length)for(var t=0,e=collection.models.length;e>t;t++){var n=collection.models[t];buf.push("<li>");var r=n.id;buf.push(escape(null==r?"":r)),buf.push("</li>")}else for(var t in collection.models){var n=collection.models[t];buf.push("<li>");var r=n.id;buf.push(escape(null==r?"":r)),buf.push("</li>")}}.call(this),buf.push("</ul><p>Any associated clients will also be deleted.</p><p>This action is irreversible. Are you sure?</p>")}buf.push('</div><div class="modal-list"></div><div class="modal-footer"><button'),buf.push(attrs({"data-dismiss":"modal","aria-hidden":"true",disabled:"started"===state,"class":"btn btn-close"},{"data-dismiss":!0,"aria-hidden":!0,disabled:!0})),buf.push(">");var __val__=closeButtonText;buf.push(escape(null==__val__?"":__val__)),buf.push('</button><button class="btn btn-yes btn-danger"><i class="icon-remove-sign">&nbsp;</i>');var __val__=yesButtonText;buf.push(escape(null==__val__?"":__val__)),buf.push("</button></div>")}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/nodes/modals/delete",["require","views/controls/modals/delete","j!nodes/modals/delete"],function(e){var n,r,i;return n=e("views/controls/modals/delete"),i=e("j!nodes/modals/delete"),r=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.template=i,n}(n)})}.call(this),define("templates/nodes/environment_editor",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){if("loading"===state){buf.push('<select disabled="disabled"><option>');var __val__=selectedEnv;buf.push(escape(null==__val__?"":__val__)),buf.push('</option></select><i class="icon-spinner icon-spin"></i>')}else if(buf.push("<select>"),function(){if("number"==typeof environments.length)for(var t=0,e=environments.length;e>t;t++){var n=environments[t];buf.push("<option"),buf.push(attrs({value:n,selected:n===selectedEnv},{value:!0,selected:!0})),buf.push(">");var r=n;buf.push(escape(null==r?"":r)),buf.push("</option>")}else for(var t in environments){var n=environments[t];buf.push("<option"),buf.push(attrs({value:n,selected:n===selectedEnv},{value:!0,selected:!0})),buf.push(">");var r=n;buf.push(escape(null==r?"":r)),buf.push("</option>")}}.call(this),buf.push('<option data-action="manage">Manage Environments&hellip;</option></select>'),justSaved&&buf.push('<span class="saved"><span class="check">✓</span>Saved!</span>'),selectedEnv!==savedEnv){buf.push('<div class="alert alert-block clearfix"><p>Node environment changed from <code>');var __val__=savedEnv;buf.push(escape(null==__val__?"":__val__)),buf.push("</code> to <code>");
var __val__=selectedEnv;buf.push(escape(null==__val__?"":__val__)),buf.push('</code>.</p><div class="controls"><button class="btn btn-mini cancel">Cancel</button><button class="btn btn-mini btn-primary save">Save</button></div></div>')}else"error"===state&&buf.push('<div class="alert alert-danger alert-block"><h4><i class="icon-exclamation-sign"></i>&nbsp;Server Error</h4><p>Something went wrong. Please try again later. No changes were saved.</p></div>')}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/nodes/environment_editor",["require","jquery","b","router","j!nodes/environment_editor"],function(e){var n,r,i,o,s;return n=e("jquery"),r=e("b"),o=e("router"),s=e("j!nodes/environment_editor"),i=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype.template=s,r.prototype.events={"change select":"selectChange","click .cancel":"cancel","click .save":"save"},r.prototype.initialize=function(t){var e,n;return this.app=t.app,this.savedEnv=this.model.get("chef_environment"),this.selectedEnv=this.savedEnv,this.environments=null!=(e=this.app)&&null!=(n=e.currentOrg)?n.environments:void 0,this.environments.on("add",this.render,this),0===this.environments.length?this.environments.fetch():void 0},r.prototype.serialize=function(){return{environments:this.environments.pluck("name").sort(),justSaved:this.justSaved,selectedEnv:this.selectedEnv,savedEnv:this.savedEnv,state:this.state}},r.prototype.beforeRender=function(){return this.state=0===this.environments.length||this.saving&&!this.error?"loading":this.error?"error":"ready"},r.prototype.cancel=function(){return this.selectedEnv=this.savedEnv,this.render()},r.prototype.save=function(){var t;return this.saving=!0,t=this.$("select").val(),this.model.save({chef_environment:t},{validate:!1,success:function(e){return function(){return e.savedEnv=e.selectedEnv=t,e.justSaved=!0,e.saving=!1,e.error=!1,e.render()}}(this),error:function(t){return function(){return t.selectedEnv=t.savedEnv,t.saving=!1,t.error=!0,t.render()}}(this)}),this.render()},r.prototype.selectChange=function(t){var e,r;return this.justSaved=!1,this.error=!1,r=t.currentTarget,e="manage"===n(r.options[r.selectedIndex]).data("action"),e?o.navigate(this.app.currentOrg.environments.url(),{trigger:!0}):(this.selectedEnv=r.value,this.render())},r}(r.Layout)})}.call(this),define("templates/nodes/summary",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<div class="last-checkin span3 well">');var now=moment(),lastCheckinSeconds=node.get("attributes").ohai_time||0,lastCheckin=moment.unix(lastCheckinSeconds).utc(),isStale=moment.duration(now-lastCheckin).asDays()>2;if(buf.push('<dl class="human"><dt>Last Check In:&nbsp;</dt><dd class="times"><span'),buf.push(attrs({"class":"human-time "+(isStale?"stale":null)},{"class":!0})),buf.push(">"),0===lastCheckinSeconds)buf.push("Never");else{var __val__=lastCheckin.fromNow();buf.push(escape(null==__val__?"":__val__))}if(buf.push("</span>"),0!==lastCheckinSeconds){buf.push('<div class="iso">');var __val__=lastCheckin.format("YYYY-MM-DD HH:mm:ss");buf.push(escape(null==__val__?"":__val__)),buf.push("&nbsp;UTC</div>")}buf.push('</dd></dl></div><div class="uptime span3 well">');var uptimeSeconds=node.get("attributes").uptime_seconds||0,uptime=moment.duration(uptimeSeconds,"seconds");if(buf.push('<dl class="human"><dt>Uptime:&nbsp;</dt><dd class="times"><span class="human-time">'),0===uptimeSeconds)buf.push("Unknown");else{var __val__=uptime.humanize();buf.push(escape(null==__val__?"":__val__))}if(buf.push("</span>"),0!==uptimeSeconds){buf.push('<div class="iso">Since&nbsp;');var __val__=moment(now-uptime).utc().format("YYYY-MM-DD HH:mm:ss");buf.push(escape(null==__val__?"":__val__)),buf.push("&nbsp;UTC</div>")}buf.push('</dd></dl></div><div class="info span6 well"><table><tr><td class="first-col">Environment:</td><td class="environment"></td></tr><tr><td>Platforms:</td><td>');var __val__=node.get("attributes").platform;buf.push(escape(null==__val__?"":__val__)),buf.push("</td></tr><tr><td>FQDN:</td><td>");var __val__=node.get("attributes").fqdn;buf.push(escape(null==__val__?"":__val__)),buf.push("</td></tr><tr><td>IP Address:</td><td>");var __val__=node.get("attributes").ipaddress;buf.push(escape(null==__val__?"":__val__)),buf.push("</td></tr></table></div>")}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/nodes/summary",["require","b","views/nodes/environment_editor","j!nodes/summary"],function(e){var n,r,i,o;return n=e("b"),r=e("views/nodes/environment_editor"),o=e("j!nodes/summary"),i=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.template=o,n.prototype.serialize=function(){return{node:this.model}},n.prototype.events={"change #node-environment-value select":"changeEnvironment"},n.prototype.beforeRender=function(){var t,e;return(null!=(t=this.options.app)&&null!=(e=t.currentOrg)?e.environments:void 0)?this.setView(".info .environment",new r({app:this.options.app,model:this.model})):void 0},n}(n.Layout)})}.call(this),define("templates/controls/button_list",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push("<header><h1>");var __val__=label;buf.push(escape(null==__val__?"":__val__)),buf.push('</h1></header><nav><a class="add-link pull-right"><i class="icon-plus"></i><span>Add</span></a></nav><div class="content">'),0===items.length&&buf.push('<div class="empty"></div>'),buf.push("<ul>"),function(){if("number"==typeof items.length)for(var t=0,e=items.length;e>t;t++){var n=items[t];buf.push("<li><span"),buf.push(attrs({"data-name":n,"class":"button-content"},{"data-name":!0})),buf.push(">");var r=n;buf.push(escape(null==r?"":r)),buf.push('</span><i class="icon-remove icon-white"></i></li>')}else for(var t in items){var n=items[t];buf.push("<li><span"),buf.push(attrs({"data-name":n,"class":"button-content"},{"data-name":!0})),buf.push(">");var r=n;buf.push(escape(null==r?"":r)),buf.push('</span><i class="icon-remove icon-white"></i></li>')}}.call(this),buf.push("</ul></div>")}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/controls/button_list",["require","b","j!controls/button_list","views/controls/empty"],function(e){var n,r,i,o;return n=e("b"),o=e("j!controls/button_list"),i=e("views/controls/empty"),r=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.template=o,n.prototype.serialize=function(){return{items:this.collection,label:this.options.label}},n.prototype.beforeRender=function(){return this.setView(".empty",new i)},n.prototype.events={"click .icon-remove":"clickRemove"},n.prototype.clickRemove=function(t){return t.preventDefault()},n}(n.Layout)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/nodes/node_tags",["require","b","views/controls/button_list","utils/i18n.gettext","state"],function(e){var n,r,i,o,s;return n=e("b"),r=e("views/controls/button_list"),o=e("utils/i18n.gettext"),s=e("state"),i=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.initialize=function(){return this.model.on("change:normal",this.render,this),this.app=this.options.app},n.prototype.events={"click .icon-remove":"clickRemove","click .add-link":"clickAdd"},n.prototype.serialize=function(){var t;return{items:null!=(t=this.model.get("normal").tags)?t:[],label:o("Tags")}},n.prototype.clickRemove=function(t){var e,n;return t.preventDefault(),n=this.$(t.currentTarget.parentElement).find(".button-content").data("name"),e=[[this.model.id],n,"Delete"],this.app.organizations.last().actions.create({action_id:"nodes/manage_tags",arguments:JSON.stringify(e)},{wait:!0,success:null})},n.prototype.clickAdd=function(t){return t.preventDefault(),s.get("controller").action_manageTags()},n}(r)})}.call(this),define("templates/controls/run_list/leaf_node",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){if("role"===model.type)buf.push('<span class="runlist-tree-version">&hellip;</span><span class="runlist-tree-position">'),model.missing||model.error?(buf.push("<i"),buf.push(attrs({title:model.missing?"Role not found":model.error,"class":"icon-exclamation-sign"},{title:!0})),buf.push("></i>")):buf.push("&hellip;"),buf.push('</span><i title="Role" class="icon-th-large"></i>');else{if(buf.push('<span class="runlist-tree-version">'),model.no_version)buf.push('<i title="No valid version" class="icon-exclamation-sign"></i>');else if(model.missing)buf.push("&hellip;");else{var __val__=model.version;buf.push(escape(null==__val__?"":__val__))}if(buf.push('</span><span class="runlist-tree-position">'),model.missing)buf.push('<i title="Cookbook not found, upload or remove from runlist" class="icon-exclamation-sign"></i>');else if(model.no_version||model.skipped)buf.push("&hellip;");else{var __val__=model.position;buf.push(escape(null==__val__?"":__val__))}buf.push('</span><i title="Recipe" class="icon-book"></i>')}buf.push("<span"),buf.push(attrs({"class":"runlist-tree-name "+model.type},{"class":!0})),buf.push(">");var __val__=model.name;buf.push(escape(null==__val__?"":__val__)),buf.push("</span>")}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/controls/run_list/leaf_node",["require","bootstrap-tooltip","views/controls/tree","j!controls/run_list/leaf_node"],function(e){var n,r,i;return e("bootstrap-tooltip"),r=e("views/controls/tree"),i=e("j!controls/run_list/leaf_node"),n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.template=i,n.prototype.initialize=function(){return n.__super__.initialize.apply(this,arguments),this.model.missing||this.model.no_version||this.model.error?this.$el.addClass("error"):this.model.skipped?this.$el.addClass("skipped"):void 0},n.prototype.afterRender=function(){return this["super"],this.$(".icon-exclamation-sign").tooltip({placement:"top"})},n}(r.LeafNode)})}.call(this),define("templates/controls/run_list/parent_node",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){if(buf.push('<div class="treeview-toggle"><i class="icon-plus treeview-toggle-icon"></i>'),"role"===model.type)buf.push('<span class="runlist-tree-version">&hellip;</span><span class="runlist-tree-position">'),model.missing||model.error?(buf.push("<i"),buf.push(attrs({title:model.missing?"Role not found":model.error,"class":"icon-exclamation-sign"},{title:!0})),buf.push("></i>")):buf.push("&hellip;"),buf.push('</span><i title="Role" class="icon-th-large"></i>');else{if(buf.push('<span class="runlist-tree-version">'),model.no_version)buf.push('<i title="No valid version" class="icon-exclamation-sign"></i>');else if(model.missing)buf.push("&hellip;");else{var __val__=model.version;buf.push(escape(null==__val__?"":__val__))}if(buf.push('</span><span class="runlist-tree-position">'),model.missing)buf.push('<i title="Cookbook not found, upload or remove from runlist" class="icon-exclamation-sign"></i>');else if(model.no_version||model.skipped)buf.push("&hellip;");else{var __val__=model.position;buf.push(escape(null==__val__?"":__val__))}buf.push('</span><i title="Recipe" class="icon-book"></i>')}buf.push("<span"),buf.push(attrs({"class":"runlist-tree-name "+model.type},{"class":!0})),buf.push(">");var __val__=model.name;buf.push(escape(null==__val__?"":__val__)),buf.push('</span></div><ol class="treeview-children"></ol>')}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/controls/run_list/parent_node",["require","views/controls/tree","j!controls/run_list/parent_node"],function(e){var n,r,i;return r=e("views/controls/tree"),i=e("j!controls/run_list/parent_node"),n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.template=i,n}(r.ParentNode)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/controls/run_list/tree_view",["require","views/controls/run_list/leaf_node","views/controls/run_list/parent_node","views/controls/tree"],function(e){var n,r,i,o;return n=e("views/controls/run_list/leaf_node"),r=e("views/controls/run_list/parent_node"),o=e("views/controls/tree"),i=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.leafNodeClass=n,i.prototype.parentNodeClass=r,i}(o)})}.call(this),define("templates/controls/select_dropdown",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<a class="dropdown-toggle">'),labelIcon&&(buf.push("<i"),buf.push(attrs({"class":"dropdown-toggle-icon icon-"+labelIcon},{"class":!0})),buf.push("></i>")),buf.push('<span class="dropdown-toggle-label">');var __val__=label;buf.push(escape(null==__val__?"":__val__)),buf.push('</span><i class="icon-caret-down"></i></a><ul'),buf.push(attrs({role:"menu","class":"dropdown-menu semimodal-pullout "+pulloutClassName},{"class":!0,role:!0})),buf.push(">"),function(){if("number"==typeof items.length)for(var t=0,e=items.length;e>t;t++){var n=items[t];if("divider"==n||"divider"==n.id)buf.push('<li class="divider"></li>');else{itemClasses=[n.id],n.id===selected&&itemClasses.push("selected icon"),buf.push("<li"),buf.push(attrs({"class":itemClasses.join(" ")},{"class":!0})),buf.push("><a"),buf.push(attrs({tabindex:"-1","data-action":n.id},{tabindex:!0,"data-action":!0})),buf.push(">"),n.id===selected&&buf.push('<i class="icon-ok"></i>');var r=n.label;buf.push(escape(null==r?"":r)),buf.push("</a></li>")}}else for(var t in items){var n=items[t];if("divider"==n||"divider"==n.id)buf.push('<li class="divider"></li>');else{itemClasses=[n.id],n.id===selected&&itemClasses.push("selected icon"),buf.push("<li"),buf.push(attrs({"class":itemClasses.join(" ")},{"class":!0})),buf.push("><a"),buf.push(attrs({tabindex:"-1","data-action":n.id},{tabindex:!0,"data-action":!0})),buf.push(">"),n.id===selected&&buf.push('<i class="icon-ok"></i>');var r=n.label;buf.push(escape(null==r?"":r)),buf.push("</a></li>")}}}.call(this),buf.push("</ul>")}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/controls/select_dropdown",["b","views/controls/dropdown","j!controls/select_dropdown","underscore","utils/i18n.gettext"],function(e,n,r,i,o){var s;return s=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.pulloutClassName="with-icons",n.prototype.template=r,n.prototype.initialize=function(){var t,e;return n.__super__.initialize.apply(this,arguments),this.selected=null!=(t=this.options.selected)?t:null!=(e=this.items[0])?e.id:void 0,this.on("action",this.selectItem,this)},n.prototype.beforeRender=function(){var t,e;return this.label=this.selected?(t=i.find(this.items,function(t){return function(e){return e.id===t.selected}}(this)),null!=(e=null!=t?t.label:void 0)?e:this.selected):o("Please select one")},n.prototype.serialize=function(){return i.extend(n.__super__.serialize.apply(this,arguments),{selected:this.selected})},n.prototype.selectItem=function(t){return this.selected=t,this.cleanup(),this.render()},n}(n)})}.call(this),define("templates/controls/runlist_error",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<div class="alert alert-error alert-block"><h4><i class="icon-exclamation-sign"></i>&nbsp;'+escape(null==(interp=title)?"":interp)+"</h4>"+escape(null==(interp=message)?"":interp)+"</div>")}return buf.join("")}}),define("templates/controls/run_list",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){if(buf.push('<header><h1>Run List</h1><div class="environment-picker"></div></header><nav><span class="expand-all">Expand All</span><span class="collapse-all">Collapse All</span>'),editable&&(buf.push('<span class="edit pull-right"><i class="icon-edit"></i><span>Edit</span></span>'),collection.length>1&&"_default"!==environment&&buf.push('<span class="delete pull-right">Delete</span>')),buf.push('</nav><div class="content"><div class="runlist-tree-header">'),buf.push('&nbsp;<span class="runlist-tree-version">Version</span><span class="runlist-tree-position">Position</span></div><div class="runlist-tree">'),0===collection.length){var __val__=logo();buf.push(null==__val__?"":__val__)}buf.push("</div></div>")}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/controls/run_list",["require","b","views/controls/empty","views/controls/run_list/tree_view","views/controls/select_dropdown","j!controls/runlist_error","state","j!controls/run_list"],function(e){var n,r,i,o,s,a,l,u;return n=e("b"),r=e("views/controls/empty"),i=e("views/controls/run_list/tree_view"),s=e("views/controls/select_dropdown"),a=e("j!controls/runlist_error"),l=e("state"),u=e("j!controls/run_list"),o=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.template=u,o.prototype.events={"click nav .expand-all":"expandAll","click nav .collapse-all":"collapseAll","click nav .edit":"edit","click nav .delete":"delete"},o.prototype.initialize=function(){return this.collection.on("sync",this.render,this),this.editable=null!=this.options.editable?this.options.editable:!0,this.app=this.options.app,this.type=this.options.type,this.environment=null,0===this.collection.length&&(this.fetchXhr=this.collection.fetch({success:function(t){return function(){return t.fetchXhr=void 0}}(this),error:function(t){return function(e,r){return t.fetchXhr=void 0,t.errorLayout=new n.Layout({template:a}),t.errorLayout.serialize=412===r.status?{title:"Unsatisfiable Run List Item",message:r.responseText}:{title:"Server Error",message:"Something went wrong. Please try again later."},t.setView(".runlist-tree",t.errorLayout).render()}}(this)})),this.collection.object.on("change:chef_environment",function(t){return function(e,n){return t.environment=n}}(this))},o.prototype.cleanup=function(){return this.fetchXhr?this.fetchXhr.abort():void 0},o.prototype.serialize=function(){return{collection:this.collection,editable:this.editable,environment:this.environment}},o.prototype.beforeRender=function(){var t,e;if(this.collection.length){if(null==this.environment&&(this.environment=this.collection.get("_default")?"_default":this.collection.at(0).id),this.tree=new i({root:this.collection.get(this.environment).get("run_list")}),this.collection.get(this.environment).get("run_list").length<1?this.setView(".runlist-tree",new r):this.setView(".runlist-tree",this.tree),t=function(){var t,n,r,i;for(r=this.collection.models,i=[],t=0,n=r.length;n>t;t++)e=r[t],i.push({id:e.id,label:e.id});return i}.call(this),t.length>1)return this.environmentDropdown=this.setView(".environment-picker",new s({selected:this.environment,items:t})).on("action",this.changeEnvironment,this);if(this.environmentDropdown)return this.environmentDropdown.remove(),this.environmentDropdown=void 0}else if(this.environmentDropdown)return this.environmentDropdown.remove(),this.environmentDropdown=void 0},o.prototype.expandAll=function(t){return t.preventDefault(),this.tree?this.tree.expandAll():void 0},o.prototype.collapseAll=function(t){return t.preventDefault(),this.tree?this.tree.collapseAll():void 0},o.prototype.edit=function(t){var e;return t.preventDefault(),"role"===this.type&&"_default"!==this.environment?alert("Coming soon"):null!=(e=l.get("controller"))?e.dispatchAction("editRunList"):void 0},o.prototype["delete"]=function(t){return t.preventDefault(),alert("Coming soon")},o.prototype.changeEnvironment=function(t){return t!==this.environment?(this.environment=t,this.render()):void 0},o}(n.Layout)})}.call(this),define("templates/nodes/details",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<div class="summary row-fluid"></div><div class="row-fluid"><div class="tags panel span6"></div><div class="runlist panel span6"></div></div>')}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/nodes/details",["require","b","views/nodes/summary","views/nodes/node_tags","views/controls/run_list","j!nodes/details"],function(e){var n,r,i,o,s,a;return n=e("b"),i=e("views/nodes/summary"),o=e("views/nodes/node_tags"),s=e("views/controls/run_list"),a=e("j!nodes/details"),r=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.template=a,n.prototype.initialize=function(){return this.app=this.options.app,this.setViews({".summary":new i({model:this.model,app:this.app}),".tags":new o({model:this.model,app:this.app}),".runlist":new s({collection:this.model.run_lists(),app:this.app})})},n}(n.Layout)})}.call(this),define("templates/nodes/list_header",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<div class="message"></div><label class="showing"><div class="header-title pull-left">');var __val__=titleMessage;if(buf.push(null==__val__?"":__val__),buf.push("</div>"),isSolrSearchable&&(buf.push('<div class="search-filter input-append pull-right"><input'),buf.push(attrs({id:"solr-search",type:"text",placeholder:searchMessage+"&hellip;",value:filter},{type:!0,placeholder:!0,value:!0})),buf.push('/><button type="button" class="btn"><i class="icon-search"></i></button></div>'),darklaunch.search_dashboard)){buf.push('<br clear="right"/><div>');var link=window.location.href.split("/");link[link.length-1]="search",buf.push("<a"),buf.push(attrs({href:link.join("/"),"class":"pull-right"},{href:!0})),buf.push(">Try experimental new search</a></div>")}buf.push('</label><div class="header-separator clearfix"></div>')}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/nodes/list_header",["require","views/controls/list_header","j!nodes/list_header"],function(e){var n,r,i;return n=e("views/controls/list_header"),i=e("j!nodes/list_header"),r=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.template=i,n}(n)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/nodes/list",["require","views/controls/list","views/nodes/list_header","utils/i18n.gettext","moment"],function(e){var n,r,i,o,s;return n=e("views/controls/list"),r=e("views/nodes/list_header"),o=e("utils/i18n.gettext"),s=e("moment"),i=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.headerClass=r,n.prototype.columns=[{id:"name",name:o("Node Name"),field:function(){return this.id}},{id:"platform",name:o("Platform"),field:function(){return this.get("attributes").platform}},{id:"fqdn",name:o("FQDN"),field:function(){return this.get("attributes").fqdn}},{id:"ipaddress",name:o("IP Address"),field:function(){return this.get("attributes").ipaddress}},{id:"uptime",name:o("Uptime"),field:function(){var t;return null!=(t=this.get("attributes").uptime_seconds)?t:0},formatter:function(t,e,n){var r;return r=0===n?"Unknown":s.duration(n,"seconds").humanize(),'<span title="'+n+'">'+r+"</span>"}},{id:"ohai_time",name:o("Last Check-In"),field:function(){var t;return null!=(t=this.get("attributes").ohai_time)?t:0},formatter:function(t,e,n){var r;return r=0===n?"Never":s.unix(n).fromNow(),'<span title="'+n+'">'+r+"</span>"}},{id:"environment",name:o("Environment"),field:"chef_environment"}],n}(n)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("controllers/nodes",["require","views/controls/modals/attributes","views/controls/attributes","b","controllers/base","models/client","views/controls/modals/edit_run_list","views/nodes/modals/manage_tags","views/nodes/modals/delete","views/nodes/details","views/nodes/list","views/controls/permissions","views/controls/modals/rekey","utils/i18n.gettext","utils/i18n"],function(e){var n,r,i,o,s,a,l,u,c,d,p,h,f,g,m;return n=e("views/controls/modals/attributes"),r=e("views/controls/attributes"),i=e("b"),o=e("controllers/base"),s=e("models/client"),a=e("views/controls/modals/edit_run_list"),l=e("views/nodes/modals/manage_tags"),u=e("views/nodes/modals/delete"),c=e("views/nodes/details"),d=e("views/nodes/list"),h=e("views/controls/permissions"),f=e("views/controls/modals/rekey"),g=e("utils/i18n.gettext"),m=e("utils/i18n"),p=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.id="nodes",i.prototype.endpoint="nodes",i.prototype.collection_type="nodes",i.prototype.messages={editRunList:g("Edit Node Run List"),label:function(t){return m.ngettext("Node","Nodes",null!=t?t:1)},selectEmpty:function(){return g("Please select a node")},selectMulti:function(t){return g(m.sprintf("%d nodes selected",t))},"delete":function(t){return m.ngettext("Delete Node","Delete Nodes",null!=t?t:1)},deleteSingle:g("Deleting %s"),deleteLong:function(t){return m.ngettext("You are about to delete %d node:","You are about to delete %d nodes:",null!=t?t:1)},searchMessage:g("Search Nodes"),showingNObjects:function(t){return m.sprintf(m.ngettext("Showing <strong>%d node</strong>","Showing <strong>%d nodes</strong>",null!=t?t:1),t)},showingAllObjects:function(){return g("Showing <strong>All Nodes</strong>")},searchingObjects:function(){return g("Searching nodes...")}},i.prototype.listViewClass=d,i.prototype.deleteModalClass=u,i.prototype.tabs=[{id:"details",label:g("Details"),viewClass:c},{id:"attributes",label:g("Attributes"),viewClass:r,viewArgs:{editRootAttribute:"normal",objectType:"Node"}},{id:"permissions",label:g("Permissions"),viewClass:h,condition:function(t){var e;return null!=(e=t.get("access"))?e.grant:void 0}}],i.prototype.actions=[{id:"delete",label:g("Delete"),multi:!0,access:"delete"},{id:"manageTags",label:g("Manage Tags"),multi:!0},{id:"rekey",label:g("Reset Key"),access:"update"},{id:"editRunList",label:g("Edit Run List"),access:"update"},{id:"editAttributes",label:g("Edit Attributes"),access:"update"}],i.prototype.routes={"organizations/:org/nodes":"index","organizations/:org/nodes/:id":"show","organizations/:org/nodes/:id/:tabId":"show.tab"},i.prototype.action_manageTags=function(){return new l({collection:this.selection,app:this.app,controller:this})},i.prototype.action_editRunList=function(){return new a({collection:this.selection,app:this.app,controller:this})},i.prototype.action_rekey=function(){return new f({app:this.app,controller:this,model:new s({name:this.selection.at(0).id},{collection:this.app.currentOrg.clients})})},i.prototype.action_editAttributes=function(){return new n({app:this.app,controller:this,model:this.selection.at(0),title:g("Edit Node Attributes")})},i}(o)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("controllers/nodes_parent",["require","controllers/base","controllers/nodes","utils/i18n"],function(e){var n,r,i,o;return n=e("controllers/base"),r=e("controllers/nodes"),o=e("utils/i18n"),i=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.id="nodes_parent",n.prototype.messages={label:function(){return o.gettext("Nodes")}},n.prototype.children=[r],n}(n)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/cookbooks/list",["require","views/controls/list","utils/i18n.gettext","router"],function(e){var n,r,i,o;return r=e("views/controls/list"),i=e("utils/i18n.gettext"),o=e("router"),n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.actionColumn=!1,n.prototype.columns=[{id:"name",name:i("Cookbook"),field:function(){return this.id}},{id:"current_version",name:i("Current Version"),field:function(){return this.get("current_version")}}],n.prototype.beforeRender=function(){return n.__super__.beforeRender.call(this),-1===this.collection.currentPage?(this.collection.fetch(),delete this.collection.currentPage):void 0},n.prototype.updateSelection=function(){return this.selection.length<=1?(this.$el.removeClass("list-multiselect"),1===this.selection.length?o.navigate(this.selection.at(0).currentVersionUrl(),{trigger:!0}):o.navigate(this.collection.url(),{trigger:!0})):this.$el.addClass("list-multiselect")},n}(r)})}.call(this),function(){function t(t){this.tokens=[],this.tokens.links={},this.options=t||a.defaults,this.rules=l.normal,this.options.gfm&&(this.rules=this.options.tables?l.tables:l.gfm)}function e(t,e){if(this.options=e||a.defaults,this.links=t,this.rules=u.normal,!this.links)throw new Error("Tokens array requires a `links` property.");
this.options.gfm?this.rules=this.options.breaks?u.breaks:u.gfm:this.options.pedantic&&(this.rules=u.pedantic)}function n(t){this.tokens=[],this.token=null,this.options=t||a.defaults}function r(t,e){return t.replace(e?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function i(t,e){return t=t.source,e=e||"",function n(r,i){return r?(i=i.source||i,i=i.replace(/(^|[^\[])\^/g,"$1"),t=t.replace(r,i),n):new RegExp(t,e)}}function o(){}function s(t){for(var e,n,r=1;r<arguments.length;r++){e=arguments[r];for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t}function a(e,i,o){if(o||"function"==typeof i){o||(o=i,i=null),i&&(i=s({},a.defaults,i));var l=t.lex(l,i),u=i.highlight,c=0,d=l.length,p=0;if(!u||u.length<3)return o(null,n.parse(l,i));for(var h=function(){delete i.highlight;var t=n.parse(l,i);return i.highlight=u,o(null,t)};d>p;p++)!function(t){return"code"===t.type?(c++,u(t.text,t.lang,function(e,n){return null==n||n===t.text?--c||h():(t.text=n,t.escaped=!0,void(--c||h()))})):void 0}(l[p])}else try{return i&&(i=s({},a.defaults,i)),n.parse(t.lex(e,i),i)}catch(f){if(f.message+="\nPlease report this to https://github.com/chjj/marked.",(i||a.defaults).silent)return"<p>An error occured:</p><pre>"+r(f.message+"",!0)+"</pre>";throw f}}var l={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:o,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:o,lheading:/^([^\n]+)\n *(=|-){3,} *\n*/,blockquote:/^( *>[^\n]+(\n[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment|closed|closing) *(?:\n{2,}|\s*$)/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:o,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/};l.bullet=/(?:[*+-]|\d+\.)/,l.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,l.item=i(l.item,"gm")(/bull/g,l.bullet)(),l.list=i(l.list)(/bull/g,l.bullet)("hr",/\n+(?=(?: *[-*_]){3,} *(?:\n+|$))/)(),l._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|@)\\b",l.html=i(l.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,l._tag)(),l.paragraph=i(l.paragraph)("hr",l.hr)("heading",l.heading)("lheading",l.lheading)("blockquote",l.blockquote)("tag","<"+l._tag)("def",l.def)(),l.normal=s({},l),l.gfm=s({},l.normal,{fences:/^ *(`{3,}|~{3,}) *(\S+)? *\n([\s\S]+?)\s*\1 *(?:\n+|$)/,paragraph:/^/}),l.gfm.paragraph=i(l.paragraph)("(?!","(?!"+l.gfm.fences.source.replace("\\1","\\2")+"|")(),l.tables=s({},l.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),t.rules=l,t.lex=function(e,n){var r=new t(n);return r.lex(e)},t.prototype.lex=function(t){return t=t.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(t,!0)},t.prototype.token=function(t,e){for(var n,r,i,o,s,a,u,c,d,t=t.replace(/^ +$/gm,"");t;)if((i=this.rules.newline.exec(t))&&(t=t.substring(i[0].length),i[0].length>1&&this.tokens.push({type:"space"})),i=this.rules.code.exec(t))t=t.substring(i[0].length),i=i[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?i:i.replace(/\n+$/,"")});else if(i=this.rules.fences.exec(t))t=t.substring(i[0].length),this.tokens.push({type:"code",lang:i[2],text:i[3]});else if(i=this.rules.heading.exec(t))t=t.substring(i[0].length),this.tokens.push({type:"heading",depth:i[1].length,text:i[2]});else if(e&&(i=this.rules.nptable.exec(t))){for(t=t.substring(i[0].length),a={type:"table",header:i[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:i[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:i[3].replace(/\n$/,"").split("\n")},c=0;c<a.align.length;c++)a.align[c]=/^ *-+: *$/.test(a.align[c])?"right":/^ *:-+: *$/.test(a.align[c])?"center":/^ *:-+ *$/.test(a.align[c])?"left":null;for(c=0;c<a.cells.length;c++)a.cells[c]=a.cells[c].split(/ *\| */);this.tokens.push(a)}else if(i=this.rules.lheading.exec(t))t=t.substring(i[0].length),this.tokens.push({type:"heading",depth:"="===i[2]?1:2,text:i[1]});else if(i=this.rules.hr.exec(t))t=t.substring(i[0].length),this.tokens.push({type:"hr"});else if(i=this.rules.blockquote.exec(t))t=t.substring(i[0].length),this.tokens.push({type:"blockquote_start"}),i=i[0].replace(/^ *> ?/gm,""),this.token(i,e),this.tokens.push({type:"blockquote_end"});else if(i=this.rules.list.exec(t)){for(t=t.substring(i[0].length),o=i[2],this.tokens.push({type:"list_start",ordered:o.length>1}),i=i[0].match(this.rules.item),n=!1,d=i.length,c=0;d>c;c++)a=i[c],u=a.length,a=a.replace(/^ *([*+-]|\d+\.) +/,""),~a.indexOf("\n ")&&(u-=a.length,a=this.options.pedantic?a.replace(/^ {1,4}/gm,""):a.replace(new RegExp("^ {1,"+u+"}","gm"),"")),this.options.smartLists&&c!==d-1&&(s=l.bullet.exec(i[c+1])[0],o===s||o.length>1&&s.length>1||(t=i.slice(c+1).join("\n")+t,c=d-1)),r=n||/\n\n(?!\s*$)/.test(a),c!==d-1&&(n="\n"===a[a.length-1],r||(r=n)),this.tokens.push({type:r?"loose_item_start":"list_item_start"}),this.token(a,!1),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"})}else if(i=this.rules.html.exec(t))t=t.substring(i[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:"pre"===i[1]||"script"===i[1],text:i[0]});else if(e&&(i=this.rules.def.exec(t)))t=t.substring(i[0].length),this.tokens.links[i[1].toLowerCase()]={href:i[2],title:i[3]};else if(e&&(i=this.rules.table.exec(t))){for(t=t.substring(i[0].length),a={type:"table",header:i[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:i[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:i[3].replace(/(?: *\| *)?\n$/,"").split("\n")},c=0;c<a.align.length;c++)a.align[c]=/^ *-+: *$/.test(a.align[c])?"right":/^ *:-+: *$/.test(a.align[c])?"center":/^ *:-+ *$/.test(a.align[c])?"left":null;for(c=0;c<a.cells.length;c++)a.cells[c]=a.cells[c].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(a)}else if(e&&(i=this.rules.paragraph.exec(t)))t=t.substring(i[0].length),this.tokens.push({type:"paragraph",text:"\n"===i[1][i[1].length-1]?i[1].slice(0,-1):i[1]});else if(i=this.rules.text.exec(t))t=t.substring(i[0].length),this.tokens.push({type:"text",text:i[0]});else if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0));return this.tokens};var u={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:o,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:__|[\s\S])+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:o,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/};u._inside=/(?:\[[^\]]*\]|[^\]]|\](?=[^\[]*\]))*/,u._href=/\s*<?([^\s]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/,u.link=i(u.link)("inside",u._inside)("href",u._href)(),u.reflink=i(u.reflink)("inside",u._inside)(),u.normal=s({},u),u.pedantic=s({},u.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),u.gfm=s({},u.normal,{escape:i(u.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:i(u.text)("]|","~]|")("|","|https?://|")()}),u.breaks=s({},u.gfm,{br:i(u.br)("{2,}","*")(),text:i(u.gfm.text)("{2,}","*")()}),e.rules=u,e.output=function(t,n,r){var i=new e(n,r);return i.output(t)},e.prototype.output=function(t){for(var e,n,i,o,s="";t;)if(o=this.rules.escape.exec(t))t=t.substring(o[0].length),s+=o[1];else if(o=this.rules.autolink.exec(t))t=t.substring(o[0].length),"@"===o[2]?(n=this.mangle(":"===o[1][6]?o[1].substring(7):o[1]),i=this.mangle("mailto:")+n):(n=r(o[1]),i=n),s+='<a href="'+i+'">'+n+"</a>";else if(o=this.rules.url.exec(t))t=t.substring(o[0].length),n=r(o[1]),i=n,s+='<a href="'+i+'">'+n+"</a>";else if(o=this.rules.tag.exec(t))t=t.substring(o[0].length),s+=this.options.sanitize?r(o[0]):o[0];else if(o=this.rules.link.exec(t))t=t.substring(o[0].length),s+=this.outputLink(o,{href:o[2],title:o[3]});else if((o=this.rules.reflink.exec(t))||(o=this.rules.nolink.exec(t))){if(t=t.substring(o[0].length),e=(o[2]||o[1]).replace(/\s+/g," "),e=this.links[e.toLowerCase()],!e||!e.href){s+=o[0][0],t=o[0].substring(1)+t;continue}s+=this.outputLink(o,e)}else if(o=this.rules.strong.exec(t))t=t.substring(o[0].length),s+="<strong>"+this.output(o[2]||o[1])+"</strong>";else if(o=this.rules.em.exec(t))t=t.substring(o[0].length),s+="<em>"+this.output(o[2]||o[1])+"</em>";else if(o=this.rules.code.exec(t))t=t.substring(o[0].length),s+="<code>"+r(o[2],!0)+"</code>";else if(o=this.rules.br.exec(t))t=t.substring(o[0].length),s+="<br>";else if(o=this.rules.del.exec(t))t=t.substring(o[0].length),s+="<del>"+this.output(o[1])+"</del>";else if(o=this.rules.text.exec(t))t=t.substring(o[0].length),s+=r(o[0]);else if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0));return s},e.prototype.outputLink=function(t,e){return"!"!==t[0][0]?'<a href="'+r(e.href)+'"'+(e.title?' title="'+r(e.title)+'"':"")+">"+this.output(t[1])+"</a>":'<img src="'+r(e.href)+'" alt="'+r(t[1])+'"'+(e.title?' title="'+r(e.title)+'"':"")+">"},e.prototype.smartypants=function(t){return this.options.smartypants?t.replace(/--/g,"—").replace(/'([^']*)'/g,"‘$1’").replace(/"([^"]*)"/g,"“$1”").replace(/\.{3}/g,"…"):t},e.prototype.mangle=function(t){for(var e,n="",r=t.length,i=0;r>i;i++)e=t.charCodeAt(i),Math.random()>.5&&(e="x"+e.toString(16)),n+="&#"+e+";";return n},n.parse=function(t,e){var r=new n(e);return r.parse(t)},n.prototype.parse=function(t){this.inline=new e(t.links,this.options),this.tokens=t.reverse();for(var n="";this.next();)n+=this.tok();return n},n.prototype.next=function(){return this.token=this.tokens.pop()},n.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},n.prototype.parseText=function(){for(var t=this.token.text;"text"===this.peek().type;)t+="\n"+this.next().text;return this.inline.output(t)},n.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return"<hr>\n";case"heading":return"<h"+this.token.depth+">"+this.inline.output(this.token.text)+"</h"+this.token.depth+">\n";case"code":if(this.options.highlight){var t=this.options.highlight(this.token.text,this.token.lang);null!=t&&t!==this.token.text&&(this.token.escaped=!0,this.token.text=t)}return this.token.escaped||(this.token.text=r(this.token.text,!0)),"<pre><code"+(this.token.lang?' class="'+this.options.langPrefix+this.token.lang+'"':"")+">"+this.token.text+"</code></pre>\n";case"table":var e,n,i,o,s,a="";for(a+="<thead>\n<tr>\n",n=0;n<this.token.header.length;n++)e=this.inline.output(this.token.header[n]),a+=this.token.align[n]?'<th align="'+this.token.align[n]+'">'+e+"</th>\n":"<th>"+e+"</th>\n";for(a+="</tr>\n</thead>\n",a+="<tbody>\n",n=0;n<this.token.cells.length;n++){for(i=this.token.cells[n],a+="<tr>\n",s=0;s<i.length;s++)o=this.inline.output(i[s]),a+=this.token.align[s]?'<td align="'+this.token.align[s]+'">'+o+"</td>\n":"<td>"+o+"</td>\n";a+="</tr>\n"}return a+="</tbody>\n","<table>\n"+a+"</table>\n";case"blockquote_start":for(var a="";"blockquote_end"!==this.next().type;)a+=this.tok();return"<blockquote>\n"+a+"</blockquote>\n";case"list_start":for(var l=this.token.ordered?"ol":"ul",a="";"list_end"!==this.next().type;)a+=this.tok();return"<"+l+">\n"+a+"</"+l+">\n";case"list_item_start":for(var a="";"list_item_end"!==this.next().type;)a+="text"===this.token.type?this.parseText():this.tok();return"<li>"+a+"</li>\n";case"loose_item_start":for(var a="";"list_item_end"!==this.next().type;)a+=this.tok();return"<li>"+a+"</li>\n";case"html":return this.token.pre||this.options.pedantic?this.token.text:this.inline.output(this.token.text);case"paragraph":return"<p>"+this.inline.output(this.token.text)+"</p>\n";case"text":return"<p>"+this.parseText()+"</p>\n"}},o.exec=o,a.options=a.setOptions=function(t){return s(a.defaults,t),a},a.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,smartLists:!1,silent:!1,highlight:null,langPrefix:"lang-"},a.Parser=n,a.parser=n.parse,a.Lexer=t,a.lexer=t.lex,a.InlineLexer=e,a.inlineLexer=e.output,a.parse=a,"object"==typeof exports?module.exports=a:"function"==typeof define&&define.amd?define("marked",[],function(){return a}):this.marked=a}.call(function(){return this||("undefined"!=typeof window?window:global)}()),define("highlight",[],function(){var t=new function(){function e(t){return t.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;")}function n(t){for(var e=t.firstChild;e;e=e.nextSibling){if("CODE"==e.nodeName)return e;if(3!=e.nodeType||!e.nodeValue.match(/\s+/))break}}function r(t,e){return Array.prototype.map.call(t.childNodes,function(t){return 3==t.nodeType?e?t.nodeValue.replace(/\n/g,""):t.nodeValue:"BR"==t.nodeName?"\n":r(t,e)}).join("")}function i(t){var e=(t.className+" "+(t.parentNode?t.parentNode.className:"")).split(/\s+/);e=e.map(function(t){return t.replace(/^language-/,"")});for(var n=0;n<e.length;n++)if(f[e[n]]||"no-highlight"==e[n])return e[n]}function o(t){var e=[];return function n(t,r){for(var i=t.firstChild;i;i=i.nextSibling)3==i.nodeType?r+=i.nodeValue.length:"BR"==i.nodeName?r+=1:1==i.nodeType&&(e.push({event:"start",offset:r,node:i}),r=n(i,r),e.push({event:"stop",offset:r,node:i}));return r}(t,0),e}function s(t,n,r){function i(){return t.length&&n.length?t[0].offset!=n[0].offset?t[0].offset<n[0].offset?t:n:"start"==n[0].event?t:n:t.length?t:n}function o(t){function n(t){return" "+t.nodeName+'="'+e(t.value)+'"'}return"<"+t.nodeName+Array.prototype.map.call(t.attributes,n).join("")+">"}for(var s=0,a="",l=[];t.length||n.length;){var u=i().splice(0,1)[0];if(a+=e(r.substr(s,u.offset-s)),s=u.offset,"start"==u.event)a+=o(u.node),l.push(u.node);else if("stop"==u.event){var c,d=l.length;do d--,c=l[d],a+="</"+c.nodeName.toLowerCase()+">";while(c!=u.node);for(l.splice(d,1);d<l.length;)a+=o(l[d]),d++}}return a+e(r.substr(s))}function a(e){function n(t){return t&&t.source||t}function r(t,r){return RegExp(n(t),"m"+(e.case_insensitive?"i":"")+(r?"g":""))}function i(e,o){function s(t,e){e.split(" ").forEach(function(e){var n=e.split("|");l[n[0]]=[t,n[1]?Number(n[1]):1],a.push(n[0])})}if(!e.compiled){e.compiled=!0;var a=[];if(e.keywords){var l={};if(e.lexemsRe=r(e.lexems||t.IDENT_RE+"(?!\\.)",!0),"string"==typeof e.keywords)s("keyword",e.keywords);else for(var u in e.keywords)e.keywords.hasOwnProperty(u)&&s(u,e.keywords[u]);e.keywords=l}o&&(e.beginWithKeyword&&(e.begin="\\b("+a.join("|")+")\\b(?!\\.)\\s*"),e.beginRe=r(e.begin?e.begin:"\\B|\\b"),e.end||e.endsWithParent||(e.end="\\B|\\b"),e.end&&(e.endRe=r(e.end)),e.terminator_end=n(e.end)||"",e.endsWithParent&&o.terminator_end&&(e.terminator_end+=(e.end?"|":"")+o.terminator_end)),e.illegal&&(e.illegalRe=r(e.illegal)),void 0===e.relevance&&(e.relevance=1),e.contains||(e.contains=[]);for(var c=0;c<e.contains.length;c++)"self"==e.contains[c]&&(e.contains[c]=e),i(e.contains[c],e);e.starts&&i(e.starts,o);for(var d=[],c=0;c<e.contains.length;c++)d.push(n(e.contains[c].begin));e.terminator_end&&d.push(n(e.terminator_end)),e.illegal&&d.push(n(e.illegal)),e.terminators=d.length?r(d.join("|"),!0):{exec:function(){return null}}}}i(e)}function l(t,n,r){function i(t,e){for(var n=0;n<e.contains.length;n++){var r=e.contains[n].beginRe.exec(t);if(r&&0==r.index)return e.contains[n]}}function o(t,e){return t.end&&t.endRe.test(e)?t:t.endsWithParent?o(t.parent,e):void 0}function s(t,e){return!r&&e.illegal&&e.illegalRe.test(t)}function c(t,e){var n=v.case_insensitive?e[0].toLowerCase():e[0];return t.keywords.hasOwnProperty(n)&&t.keywords[n]}function d(){var t=e(b);if(!y.keywords)return t;var n="",r=0;y.lexemsRe.lastIndex=0;for(var i=y.lexemsRe.exec(t);i;){n+=t.substr(r,i.index-r);var o=c(y,i);o?(w+=o[1],n+='<span class="'+o[0]+'">'+i[0]+"</span>"):n+=i[0],r=y.lexemsRe.lastIndex,i=y.lexemsRe.exec(t)}return n+t.substr(r)}function p(){if(y.subLanguage&&!f[y.subLanguage])return e(b);var t=y.subLanguage?l(y.subLanguage,b):u(b);return y.relevance>0&&(w+=t.keyword_count,_+=t.relevance),'<span class="'+t.language+'">'+t.value+"</span>"}function h(){return void 0!==y.subLanguage?p():d()}function g(t,n){var r=t.className?'<span class="'+t.className+'">':"";t.returnBegin?(x+=r,b=""):t.excludeBegin?(x+=e(n)+r,b=""):(x+=r,b=n),y=Object.create(t,{parent:{value:y}})}function m(t,n){if(b+=t,void 0===n)return x+=h(),0;var r=i(n,y);if(r)return x+=h(),g(r,n),r.returnBegin?0:n.length;var a=o(y,n);if(a){var l=y;l.returnEnd||l.excludeEnd||(b+=n),x+=h();do y.className&&(x+="</span>"),_+=y.relevance,y=y.parent;while(y!=a.parent);return l.excludeEnd&&(x+=e(n)),b="",a.starts&&g(a.starts,""),l.returnEnd?0:n.length}if(s(n,y))throw new Error('Illegal lexem "'+n+'" for mode "'+(y.className||"<unnamed>")+'"');return b+=n,n.length||1}var v=f[t];a(v);var y=v,b="",_=0,w=0,x="";try{for(var k,C,j=0;;){if(y.terminators.lastIndex=j,k=y.terminators.exec(n),!k)break;C=m(n.substr(j,k.index-j),k[0]),j=k.index+C}return m(n.substr(j)),{relevance:_,keyword_count:w,value:x,language:t}}catch(M){if(-1!=M.message.indexOf("Illegal"))return{relevance:0,keyword_count:0,value:e(n)};throw M}}function u(t){var n={keyword_count:0,relevance:0,value:e(t)},r=n;for(var i in f)if(f.hasOwnProperty(i)){var o=l(i,t,!1);o.language=i,o.keyword_count+o.relevance>r.keyword_count+r.relevance&&(r=o),o.keyword_count+o.relevance>n.keyword_count+n.relevance&&(r=n,n=o)}return r.language&&(n.second_best=r),n}function c(t,e,n){return e&&(t=t.replace(/^((<[^>]+>|\t)+)/gm,function(t,n){return n.replace(/\t/g,e)})),n&&(t=t.replace(/\n/g,"<br>")),t}function d(t,e,n){var a=r(t,n),d=i(t);if("no-highlight"!=d){var p=d?l(d,a,!0):u(a);d=p.language;var h=o(t);if(h.length){var f=document.createElement("pre");f.innerHTML=p.value,p.value=s(h,o(f),a)}p.value=c(p.value,e,n);var g=t.className;g.match("(\\s|^)(language-)?"+d+"(\\s|$)")||(g=g?g+" "+d:d),t.innerHTML=p.value,t.className=g,t.result={language:d,kw:p.keyword_count,re:p.relevance},p.second_best&&(t.second_best={language:p.second_best.language,kw:p.second_best.keyword_count,re:p.second_best.relevance})}}function p(){p.called||(p.called=!0,Array.prototype.map.call(document.getElementsByTagName("pre"),n).filter(Boolean).forEach(function(e){d(e,t.tabReplace)}))}function h(){window.addEventListener("DOMContentLoaded",p,!1),window.addEventListener("load",p,!1)}var f={};this.LANGUAGES=f,this.highlight=l,this.highlightAuto=u,this.fixMarkup=c,this.highlightBlock=d,this.initHighlighting=p,this.initHighlightingOnLoad=h,this.IDENT_RE="[a-zA-Z][a-zA-Z0-9_]*",this.UNDERSCORE_IDENT_RE="[a-zA-Z_][a-zA-Z0-9_]*",this.NUMBER_RE="\\b\\d+(\\.\\d+)?",this.C_NUMBER_RE="(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",this.BINARY_NUMBER_RE="\\b(0b[01]+)",this.RE_STARTERS_RE="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|\\.|-|-=|/|/=|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",this.BACKSLASH_ESCAPE={begin:"\\\\[\\s\\S]",relevance:0},this.APOS_STRING_MODE={className:"string",begin:"'",end:"'",illegal:"\\n",contains:[this.BACKSLASH_ESCAPE],relevance:0},this.QUOTE_STRING_MODE={className:"string",begin:'"',end:'"',illegal:"\\n",contains:[this.BACKSLASH_ESCAPE],relevance:0},this.C_LINE_COMMENT_MODE={className:"comment",begin:"//",end:"$"},this.C_BLOCK_COMMENT_MODE={className:"comment",begin:"/\\*",end:"\\*/"},this.HASH_COMMENT_MODE={className:"comment",begin:"#",end:"$"},this.NUMBER_MODE={className:"number",begin:this.NUMBER_RE,relevance:0},this.C_NUMBER_MODE={className:"number",begin:this.C_NUMBER_RE,relevance:0},this.BINARY_NUMBER_MODE={className:"number",begin:this.BINARY_NUMBER_RE,relevance:0},this.REGEXP_MODE={className:"regexp",begin:/\//,end:/\/[gim]*/,illegal:/\n/,contains:[this.BACKSLASH_ESCAPE,{begin:/\[/,end:/\]/,relevance:0,contains:[this.BACKSLASH_ESCAPE]}]},this.inherit=function(t,e){var n={};for(var r in t)n[r]=t[r];if(e)for(var r in e)n[r]=e[r];return n}};return t.LANGUAGES.bash=function(t){var e={className:"variable",begin:/\$[\w\d#@][\w\d_]*/},n={className:"variable",begin:/\$\{(.*?)\}/},r={className:"string",begin:/"/,end:/"/,contains:[t.BACKSLASH_ESCAPE,e,n,{className:"variable",begin:/\$\(/,end:/\)/,contains:t.BACKSLASH_ESCAPE}],relevance:0},i={className:"string",begin:/'/,end:/'/,relevance:0};return{lexems:/-?[a-z]+/,keywords:{keyword:"if then else elif fi for break continue while in do done exit return set declare case esac export exec",literal:"true false",built_in:"printf echo read cd pwd pushd popd dirs let eval unset typeset readonly getopts source shopt caller type hash bind help sudo",operator:"-ne -eq -lt -gt -f -d -e -s -l -a"},contains:[{className:"shebang",begin:/^#![^\n]+sh\s*$/,relevance:10},{className:"function",begin:/\w[\w\d_]*\s*\(\s*\)\s*\{/,returnBegin:!0,contains:[{className:"title",begin:/\w[\w\d_]*/}],relevance:0},t.HASH_COMMENT_MODE,t.NUMBER_MODE,r,i,e,n]}}(t),t.LANGUAGES.ini=function(t){return{case_insensitive:!0,illegal:"[^\\s]",contains:[{className:"comment",begin:";",end:"$"},{className:"title",begin:"^\\[",end:"\\]"},{className:"setting",begin:"^[a-z0-9\\[\\]_-]+[ \\t]*=[ \\t]*",end:"$",contains:[{className:"value",endsWithParent:!0,keywords:"on off true false yes no",contains:[t.QUOTE_STRING_MODE,t.NUMBER_MODE],relevance:0}]}]}}(t),t.LANGUAGES.json=function(t){var e={literal:"true false null"},n=[t.QUOTE_STRING_MODE,t.C_NUMBER_MODE],r={className:"value",end:",",endsWithParent:!0,excludeEnd:!0,contains:n,keywords:e},i={begin:"{",end:"}",contains:[{className:"attribute",begin:'\\s*"',end:'"\\s*:\\s*',excludeBegin:!0,excludeEnd:!0,contains:[t.BACKSLASH_ESCAPE],illegal:"\\n",starts:r}],illegal:"\\S"},o={begin:"\\[",end:"\\]",contains:[t.inherit(r,{className:null})],illegal:"\\S"};return n.splice(n.length,0,i,o),{contains:n,keywords:e,illegal:"\\S"}}(t),t.LANGUAGES.xml=function(){var t="[A-Za-z0-9\\._:-]+",e={endsWithParent:!0,relevance:0,contains:[{className:"attribute",begin:t,relevance:0},{begin:'="',returnBegin:!0,end:'"',contains:[{className:"value",begin:'"',endsWithParent:!0}]},{begin:"='",returnBegin:!0,end:"'",contains:[{className:"value",begin:"'",endsWithParent:!0}]},{begin:"=",contains:[{className:"value",begin:"[^\\s/>]+"}]}]};return{case_insensitive:!0,contains:[{className:"pi",begin:"<\\?",end:"\\?>",relevance:10},{className:"doctype",begin:"<!DOCTYPE",end:">",relevance:10,contains:[{begin:"\\[",end:"\\]"}]},{className:"comment",begin:"<!--",end:"-->",relevance:10},{className:"cdata",begin:"<\\!\\[CDATA\\[",end:"\\]\\]>",relevance:10},{className:"tag",begin:"<style(?=\\s|>|$)",end:">",keywords:{title:"style"},contains:[e],starts:{end:"</style>",returnEnd:!0,subLanguage:"css"}},{className:"tag",begin:"<script(?=\\s|>|$)",end:">",keywords:{title:"script"},contains:[e],starts:{end:"</script>",returnEnd:!0,subLanguage:"javascript"}},{begin:"<%",end:"%>",subLanguage:"vbscript"},{className:"tag",begin:"</?",end:"/?>",relevance:0,contains:[{className:"title",begin:"[^ /><]+"},e]}]}}(t),t.LANGUAGES.markdown=function(){return{contains:[{className:"header",begin:"^#{1,3}",end:"$"},{className:"header",begin:"^.+?\\n[=-]{2,}$"},{begin:"<",end:">",subLanguage:"xml",relevance:0},{className:"bullet",begin:"^([*+-]|(\\d+\\.))\\s+"},{className:"strong",begin:"[*_]{2}.+?[*_]{2}"},{className:"emphasis",begin:"\\*.+?\\*"},{className:"emphasis",begin:"_.+?_",relevance:0},{className:"blockquote",begin:"^>\\s+",end:"$"},{className:"code",begin:"`.+?`"},{className:"code",begin:"^    ",end:"$",relevance:0},{className:"horizontal_rule",begin:"^-{3,}",end:"$"},{begin:"\\[.+?\\]\\(.+?\\)",returnBegin:!0,contains:[{className:"link_label",begin:"\\[.+\\]"},{className:"link_url",begin:"\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0}]}]}}(t),t.LANGUAGES.ruby=function(t){var e="[a-zA-Z_][a-zA-Z0-9_]*(\\!|\\?)?",n="[a-zA-Z_]\\w*[!?=]?|[-+~]\\@|<<|>>|=~|===?|<=>|[<>]=?|\\*\\*|[-/+%^&*~`|]|\\[\\]=?",r={keyword:"and false then defined module in return redo if BEGIN retry end for true self when next until do begin unless END rescue nil else break undef not super class case require yield alias while ensure elsif or include"},i={className:"yardoctag",begin:"@[A-Za-z]+"},o=[{className:"comment",begin:"#",end:"$",contains:[i]},{className:"comment",begin:"^\\=begin",end:"^\\=end",contains:[i],relevance:10},{className:"comment",begin:"^__END__",end:"\\n$"}],s={className:"subst",begin:"#\\{",end:"}",lexems:e,keywords:r},a=[t.BACKSLASH_ESCAPE,s],l=[{className:"string",begin:"'",end:"'",contains:a,relevance:0},{className:"string",begin:'"',end:'"',contains:a,relevance:0},{className:"string",begin:"%[qw]?\\(",end:"\\)",contains:a},{className:"string",begin:"%[qw]?\\[",end:"\\]",contains:a},{className:"string",begin:"%[qw]?{",end:"}",contains:a},{className:"string",begin:"%[qw]?<",end:">",contains:a,relevance:10},{className:"string",begin:"%[qw]?/",end:"/",contains:a,relevance:10},{className:"string",begin:"%[qw]?%",end:"%",contains:a,relevance:10},{className:"string",begin:"%[qw]?-",end:"-",contains:a,relevance:10},{className:"string",begin:"%[qw]?\\|",end:"\\|",contains:a,relevance:10}],u={className:"function",beginWithKeyword:!0,end:" |$|;",keywords:"def",contains:[{className:"title",begin:n,lexems:e,keywords:r},{className:"params",begin:"\\(",end:"\\)",lexems:e,keywords:r}].concat(o)},c=o.concat(l.concat([{className:"class",beginWithKeyword:!0,end:"$|;",keywords:"class module",contains:[{className:"title",begin:"[A-Za-z_]\\w*(::\\w+)*(\\?|\\!)?",relevance:0},{className:"inheritance",begin:"<\\s*",contains:[{className:"parent",begin:"("+t.IDENT_RE+"::)?"+t.IDENT_RE}]}].concat(o)},u,{className:"constant",begin:"(::)?(\\b[A-Z]\\w*(::)?)+",relevance:0},{className:"symbol",begin:":",contains:l.concat([{begin:n}]),relevance:0},{className:"symbol",begin:e+":",relevance:0},{className:"number",begin:"(\\b0[0-7_]+)|(\\b0x[0-9a-fA-F_]+)|(\\b[1-9][0-9_]*(\\.[0-9_]+)?)|[0_]\\b",relevance:0},{className:"number",begin:"\\?\\w"},{className:"variable",begin:"(\\$\\W)|((\\$|\\@\\@?)(\\w+))"},{begin:"("+t.RE_STARTERS_RE+")\\s*",contains:o.concat([{className:"regexp",begin:"/",end:"/[a-z]*",illegal:"\\n",contains:[t.BACKSLASH_ESCAPE,s]}]),relevance:0}]));return s.contains=c,u.contains[1].contains=c,{lexems:e,keywords:r,contains:c}}(t),t}),function(){define("utils/highlight",["jquery","highlight"],function(t,e){return{element:function(n){var r;return r=t(n).find("pre"),r.is(":empty")?void 0:e.highlightBlock(r.get(0))},text:function(t){return e.highlightAuto(t).value}}})}.call(this),function(){define("utils/markdown",["marked","utils/highlight"],function(t,e){return{text:function(n){return t(n,{highlight:e.text,sanitize:!0})}}})}.call(this),define("templates/cookbooks/details",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<div class="cookbook-details row-fluid"><div class="details-sidepane well span2"><div class="license"><label>License</label><div class="text">');var __val__=license;if(buf.push(escape(null==__val__?"":__val__)),buf.push("</div></div>"),platforms.length>0&&(buf.push('<div class="platforms"><label>Platforms</label><div class="ul">'),function(){if("number"==typeof platforms.length)for(var t=0,e=platforms.length;e>t;t++){var n=platforms[t];buf.push("<li>");var r=t+" ("+n+")";buf.push(escape(null==r?"":r)),buf.push("</li>")}else for(var t in platforms){var n=platforms[t];buf.push("<li>");var r=t+" ("+n+")";buf.push(escape(null==r?"":r)),buf.push("</li>")}}.call(this),buf.push("</div></div>")),buf.push('<div class="versions"><label>Versions</label><div class="ul">'),function(){if("number"==typeof versions.length)for(var t=0,e=versions.length;e>t;t++){var n=versions[t];buf.push("<li"),buf.push(attrs({"data-version":n,"class":n===displayVersion?"active":""},{"class":!0,"data-version":!0})),buf.push(">");var r=n;buf.push(escape(null==r?"":r)),buf.push("</li>")}else for(var t in versions){var n=versions[t];buf.push("<li"),buf.push(attrs({"data-version":n,"class":n===displayVersion?"active":""},{"class":!0,"data-version":!0})),buf.push(">");var r=n;buf.push(escape(null==r?"":r)),buf.push("</li>")}}.call(this),buf.push("</div></div></div>"),void 0===longDescription){var __val__=logo();buf.push(null==__val__?"":__val__)}else{if(buf.push('<div class="details-content-description span10 panel"><header><h1><i class="icon-book"></i>README</h1></header>'),longDescription.length>0){buf.push('<div class="content">');var __val__=markdown.text(longDescription);buf.push(null==__val__?"":__val__),buf.push("</div>")}else buf.push('<div class="alert">The README is empty.</div>');buf.push("</div>")}buf.push("</div>")}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/cookbooks/details",["require","b","utils/markdown","router","j!cookbooks/details"],function(e){var n,r,i,o,s;return n=e("b"),i=e("utils/markdown"),o=e("router"),s=e("j!cookbooks/details"),r=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.template=s,n.prototype.events={"click .versions li":"changeVersion"},n.prototype.initialize=function(t){var e;return this.options=null!=t?t:{},"function"==typeof(null!=(e=this.model)?e.displayVersionModel:void 0)?(this.cookbookVersion=this.model.displayVersionModel(),this.listenTo(this.cookbookVersion,"change",this.render)):void 0},n.prototype.serialize=function(){var t,e,n,r,o,s,a,l;return t=null!=(e=null!=(n=this.cookbookVersion)?n.get("metadata"):void 0)?e:{},{displayVersion:null!=(r=this.model)?r.get("displayVersion"):void 0,license:null!=(o=t.license)?o:"",longDescription:t.long_description,platforms:null!=(s=t.platforms)?s:[],markdown:i,versions:null!=(a=null!=(l=this.model)?l.get("versions"):void 0)?a:[]}},n.prototype.changeVersion=function(t){var e;return e=t.currentTarget.getAttribute("data-version"),o.navigate(this.model.url()+"/"+e,{trigger:!0})},n}(n.Layout)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("models/cookbook_file_item",["b"],function(e){var n;return n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.url=function(){return this.get("baseUrl")+"/fetchfile?filetype="+this.get("fileType")+"&filename="+this.get("name")+"&cookbookversion="+this.get("version")},n.prototype.parse=function(t){return t&&t.length>0?this.set("content",t):void 0},n}(e.Model)})}.call(this),define("templates/controls/downloadable_file",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<div class="download-non-src-file"><label>');var __val__="Click here to download "+fileName;buf.push(escape(null==__val__?"":__val__)),buf.push("</label><a"),buf.push(attrs({href:link,"class":"btn btn-primary btn-large btn-download"},{href:!0})),buf.push(">Download</a></div>")}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/controls/downloadable_file",["require","b","j!controls/downloadable_file"],function(e){var n,r,i;return n=e("b"),i=e("j!controls/downloadable_file"),r=function(e){function n(){return n.__super__.constructor.apply(this,arguments)
}return t(n,e),n.prototype.template=i,n.prototype.initialize=function(){return this.fileName=this.options.fileName,this.link=this.options.downloadLink},n.prototype.serialize=function(){return{fileName:this.fileName,link:this.link}},n}(n.Layout)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/cookbooks/content/empty_file",["require","b"],function(e){var n,r;return n=e("b"),r=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.className="oneline",n.prototype.template=function(t){return t.message},n.prototype.serialize=function(){return{message:this.options.message}},n}(n.Layout)})}.call(this),define("templates/controls/highlighted_file",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push("<header><h1>"),markdownFile&&buf.push('<i class="icon-book"></i>');var __val__=fileName;if(buf.push(escape(null==__val__?"":__val__)),buf.push("</h1></header><nav><a"),buf.push(attrs({href:url,"class":"download-link pull-right"},{href:!0})),buf.push('><i class="download-icon icon-download-alt"></i>Download File</a></nav><div class="loading-spinner"></div><div class="content">'),content)if(markdownFile){buf.push('<div class="markdown_content">');var __val__=markdown.text(content);buf.push(null==__val__?"":__val__),buf.push("</div>")}else{buf.push("<pre>");var __val__=content;buf.push(null==__val__?"":__val__),buf.push("</pre>")}buf.push("</div>")}return buf.join("")}}),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function r(){this.constructor=t}for(var i in e)n.call(e,i)&&(t[i]=e[i]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},n={}.hasOwnProperty;define("views/controls/highlighted_file",["require","backbone","views/controls/spinner","utils/highlight","utils/markdown","j!controls/highlighted_file"],function(n){var r,i,o,s,a,l;return r=n("backbone"),o=n("views/controls/spinner"),s=n("utils/highlight"),a=n("utils/markdown"),l=n("j!controls/highlighted_file"),i=function(n){function r(){return this.loaded=t(this.loaded,this),r.__super__.constructor.apply(this,arguments)}return e(r,n),r.prototype.className="panel",r.prototype.template=l,r.prototype.initialize=function(){return this.fileName=this.options.fileName,this.baseUrl=this.options.baseUrl,this.srcUrl=this.options.srcUrl,this.fileType=this.options.fileType,this.version=this.options.version,this.syntaxHighlightableFile=this.options.syntaxHighlightableFile,this.fileDownloaderClass=this.options.fileDownloaderClass,this.markdownFile=this.options.markdownFile,this.file=new this.fileDownloaderClass({name:this.fileName,baseUrl:this.baseUrl,fileType:this.fileType,version:this.version}),this.loading=!0,this.file.on("sync",this.loaded,this),this.file.fetch({dataType:"text"})},r.prototype.loaded=function(){return this.loading=!1,this.file.on("change",this.render,this),this.render()},r.prototype.afterRender=function(){return this.loading?(this.$(".loading-spinner").show(),this.$(".file-content").hide(),this.setView(".loading-spinner",new o).render()):(this.$(".file-content").show(),this.$(".loading-spinner").hide(),this.syntaxHighlightableFile&&!this.markdownFile?s.element(this.el):void 0)},r.prototype.cleanup=function(){return this.file.off(null,null,this)},r.prototype.serialize=function(){var t;return t=this.markdownFile?this.file.get("content"):_(this.file.get("content")).escape(),{fileName:this.fileName,url:this.srcUrl,content:t,markdownFile:this.markdownFile,markdown:a}},r}(r.Layout)})}.call(this),define("templates/cookbooks/content",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<div class="cookbook-content row-fluid"><div class="cookbook-sidepane well span2">'),function(){if("number"==typeof segments.length)for(var t=0,e=segments.length;e>t;t++){var n=segments[t];buf.push('<div class="listing"><div class="listheader"><i class="dropdown-icon icon-caret-right"></i>&nbsp;');var r=n.replace("_"," ");buf.push(escape(null==r?"":r)),buf.push('</div><ol class="file-list collapsed">'),function(){if("number"==typeof(cookbookVersion.get(n)||[]).length)for(var t=0,e=(cookbookVersion.get(n)||[]).length;e>t;t++){var r=(cookbookVersion.get(n)||[])[t];buf.push("<li"),buf.push(attrs({"data-filetype":n,"class":"file-item"},{"data-filetype":!0})),buf.push(">");var i=r.name;buf.push(escape(null==i?"":i)),buf.push("</li>")}else for(var t in cookbookVersion.get(n)||[]){var r=(cookbookVersion.get(n)||[])[t];buf.push("<li"),buf.push(attrs({"data-filetype":n,"class":"file-item"},{"data-filetype":!0})),buf.push(">");var i=r.name;buf.push(escape(null==i?"":i)),buf.push("</li>")}}.call(this),buf.push("</ol></div>")}else for(var t in segments){var n=segments[t];buf.push('<div class="listing"><div class="listheader"><i class="dropdown-icon icon-caret-right"></i>&nbsp;');var r=n.replace("_"," ");buf.push(escape(null==r?"":r)),buf.push('</div><ol class="file-list collapsed">'),function(){if("number"==typeof(cookbookVersion.get(n)||[]).length)for(var t=0,e=(cookbookVersion.get(n)||[]).length;e>t;t++){var r=(cookbookVersion.get(n)||[])[t];buf.push("<li"),buf.push(attrs({"data-filetype":n,"class":"file-item"},{"data-filetype":!0})),buf.push(">");var i=r.name;buf.push(escape(null==i?"":i)),buf.push("</li>")}else for(var t in cookbookVersion.get(n)||[]){var r=(cookbookVersion.get(n)||[])[t];buf.push("<li"),buf.push(attrs({"data-filetype":n,"class":"file-item"},{"data-filetype":!0})),buf.push(">");var i=r.name;buf.push(escape(null==i?"":i)),buf.push("</li>")}}.call(this),buf.push("</ol></div>")}}.call(this),buf.push('</div><div class="cookbook-file-source span10"></div></div>')}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/cookbooks/content",["require","jquery","b","models/cookbook_file_item","views/controls/downloadable_file","views/cookbooks/content/empty_file","views/controls/highlighted_file","utils/i18n.gettext","j!cookbooks/content"],function(e){var n,r,i,o,s,a,l,u,c;return n=e("jquery"),r=e("b"),o=e("models/cookbook_file_item"),s=e("views/controls/downloadable_file"),a=e("views/cookbooks/content/empty_file"),l=e("views/controls/highlighted_file"),u=e("utils/i18n.gettext"),c=e("j!cookbooks/content"),i=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype.template=c,r.prototype.sourceFileMatch=/^(Gemfile|LICENSE|README|CONTRIBUTING|Berksfile)$|\.(rb|erb|lock|json|yaml|yml|sh|bash|js|java|pl|txt|py|xml|conf|config|md|git|gitignore|rdoc|log|sample|feature|seed|graph|html|cron|pm|patch|types|users|css|sass|diff|erl|js|java|perl|php|ps|scala|sql|vb|markdown)$/,r.prototype.syntaxHighlightMatch=/\.(rb|erb|json|yaml|yml|sh|bash|js|java|pl|py|xmlcss|sass|diff|erl|js|java|perl|pl|php|ps|scala|sql|vb|html)$/,r.prototype.markdownMatch=/\.(md|markdown)$/,r.prototype.segments=["attributes","definitions","files","libraries","providers","recipes","resources","root_files","templates"],r.prototype.events={"click .listheader":"toggleFileList","click .file-item":"displayFile"},r.prototype.initialize=function(t){var e;return this.options=null!=t?t:{},"function"==typeof(null!=(e=this.model)?e.displayVersionModel:void 0)&&(this.cookbookVersion=this.model.displayVersionModel(),this.listenTo(this.cookbookVersion,"change",this.render)),this.setView(".cookbook-file-source",new a({message:u("Please select a file")}))},r.prototype.serialize=function(){return{cookbookVersion:this.cookbookVersion,segments:this.segments}},r.prototype.toggleFileList=function(t){return t.preventDefault(),n(t.currentTarget).parent(".listing").children(".file-list").toggleClass("collapsed expand"),n(t.currentTarget).children(".dropdown-icon").toggleClass("icon-caret-right icon-caret-down")},r.prototype.displayFile=function(t){var e,r,i,a,u,c,d,p;return e=this.model.url(),r=n(t.currentTarget),d=r.text(),a=r.data("filetype"),p=this.cookbookVersion.get("version"),i=new o({baseUrl:e,fileType:a,name:d,version:p}).url(),c={baseUrl:e,downloadLink:i,fileDownloaderClass:o,fileName:d,fileType:a,markdownFile:this.markdownMatch.test(d),srcUrl:i,syntaxHighlightableFile:this.syntaxHighlightMatch.test(d),version:p},u=this.sourceFileMatch.test(d)?l:s,t.preventDefault(),this.$("li").removeClass("active"),r.addClass("active"),this.setView(".cookbook-file-source",new u(c)).render()},r}(r.Layout)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/cookbooks/object_tabs",["require","views/application/object_tabs"],function(e){var n,r;return r=e("views/application/object_tabs"),n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.urlBase=function(){return this.model.displayVersionModel().url()},n}(r)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("controllers/cookbooks",["require","b","controllers/base","views/cookbooks/list","views/cookbooks/details","views/cookbooks/content","views/controls/permissions","views/controls/modals/delete","utils/i18n.gettext","utils/i18n","views/cookbooks/object_tabs"],function(e){var n,r,i,o,s,a,l,u,c,d,p;return n=e("b"),r=e("controllers/base"),s=e("views/cookbooks/list"),o=e("views/cookbooks/details"),i=e("views/cookbooks/content"),c=e("views/controls/permissions"),u=e("views/controls/modals/delete"),d=e("utils/i18n.gettext"),p=e("utils/i18n"),a=e("views/cookbooks/object_tabs"),l=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.id="cookbooks",n.prototype.endpoint="cookbooks",n.prototype.collection_type="cookbooks",n.prototype.objectViewClass=a,n.prototype.messages={label:function(t){return p.ngettext("Cookbook","Cookbooks",null!=t?t:1)},selectEmpty:function(){return d("Please select a cookbook")},selectMulti:function(){return d("%d cookbooks selected")},"delete":function(t){return p.ngettext("Deleting %d cookbook","Deleting %d cookbooks",null!=t?t:1)},deleteSingle:d("Deleting %s"),deleteLong:function(t){return p.ngettext("You are about to delete %d cookbook:","You are about to delete %d cookbooks:",null!=t?t:1)},showingAllObjects:function(){return d("Showing <strong>All Cookbooks</strong>")}},n.prototype.listViewClass=s,n.prototype.tabs=[{id:"details",label:d("Details"),viewClass:o},{id:"content",label:d("Content"),viewClass:i},{id:"permissions",label:d("Permissions"),viewClass:c}],n.prototype.routes={"organizations/:org/cookbooks":"index","organizations/:org/cookbooks/:id":"showVersion","organizations/:org/cookbooks/:id/:version":"showVersion","organizations/:org/cookbooks/:id/:version/:tabId":"showVersion.tab"},n.prototype.route_showVersion=function(t,e,n,r){var i;return this.currentTabId=r,i=this.collection.get(e),null!=i?(n||(n=i.get("current_version")),i.set("displayVersion",n),i.getCookbookVersion(n).fetch(),[i]):[]},n}(r)})}.call(this),define("templates/controls/modals/wizard/breadcrumbs",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){(function(){if("number"==typeof steps.length)for(var t=0,e=steps.length;e>t;t++){var n=steps[t];if(buf.push("<li"),buf.push(attrs({"class":n.active},{"class":!0})),buf.push(">"),n.active){buf.push("<span>");var r=n.title;buf.push(escape(null==r?"":r)),buf.push("</span>")}else{buf.push('<a href="#">');var r=n.title;buf.push(escape(null==r?"":r)),buf.push("</a>")}t<steps.length-1&&buf.push('<span class="divider">▶</span>'),buf.push("</li>")}else for(var t in steps){var n=steps[t];if(buf.push("<li"),buf.push(attrs({"class":n.active},{"class":!0})),buf.push(">"),n.active){buf.push("<span>");var r=n.title;buf.push(escape(null==r?"":r)),buf.push("</span>")}else{buf.push('<a href="#">');var r=n.title;buf.push(escape(null==r?"":r)),buf.push("</a>")}t<steps.length-1&&buf.push('<span class="divider">▶</span>'),buf.push("</li>")}}).call(this)}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/controls/modals/wizard/breadcrumbs",["require","jquery","b","j!controls/modals/wizard/breadcrumbs"],function(e){var n,r,i,o;return n=e("jquery"),r=e("b"),o=e("j!controls/modals/wizard/breadcrumbs"),i=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype.className="breadcrumb",r.prototype.tagName="ul",r.prototype.template=o,r.prototype.events={"click li a":"navigate"},r.prototype.initialize=function(t){return this.wizard=t.wizard,this.render()},r.prototype.serialize=function(){return{steps:this.steps()}},r.prototype.navigate=function(t){return t.preventDefault(),this.wizard.goToStep(n(t.currentTarget).parent().index())},r.prototype.steps=function(){return n.map(this.wizard.steps,function(t){return function(e,r){var i,o;return o=n(e).data("title"),i=r===t.wizard.currentStepIndex?"active":"",{title:o,active:i}}}(this))},r}(r.Layout)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/controls/modals/wizard/navigation_buttons",["require","jquery","b"],function(e){var n,r,i;return n=e("jquery"),r=e("b"),i=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype.className="btn-group",r.prototype.initialize=function(t){return this.wizard=t.wizard,this.nextButton=n("<button />",{"class":"btn-next btn",html:'&nbsp;&nbsp;Next&nbsp;&nbsp; <i class="icon-chevron-right"></i>',disabled:!0}),this.previousButton=n("<button />",{"class":"btn-previous btn",html:'<i class="icon-chevron-left"></i> Previous',disabled:!0}),this.previousButton.on("click",function(t){return function(){return t.wizard.goToPreviousStep()}}(this)),this.nextButton.on("click",function(t){return function(){return t.wizard.goToNextStep()}}(this))},r.prototype.afterRender=function(){return this.previousButton.prop("disabled",this.wizard.isFirstStep()),this.nextButton.prop("disabled",this.wizard.isLastStep()),this.$el.empty().append(this.previousButton,this.nextButton)},r}(r.Layout)})}.call(this),define("templates/controls/modals/wizard",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<div class="modal-header">'),"started"!==state&&buf.push('<i data-dismiss="modal" aria-hidden="true" class="icon-remove"></i>'),buf.push('<h3 id="modal-label">');var __val__=title;if(buf.push(escape(null==__val__?"":__val__)),buf.push('</h3></div><div class="modal-subheader"><nav class="wizard"></nav></div><div class="modal-body">'),"finished"===state)buf.push("Success!");else if("error"===state){buf.push('<div class="alert alert-error alert-block"><h4><i class="icon-exclamation-sign"></i>&nbsp;Server Error</h4>');var __val__=message;buf.push(null==__val__?"":__val__),buf.push("</div>")}else if("queued"===state||"started"===state){var __val__=logo();buf.push(null==__val__?"":__val__)}else buf.push('<div data-step="data-step" data-title="Step One">One</div><div data-step="data-step" data-title="Step Two">Two</div><div data-step="data-step" data-title="Step Three">Three</div>');buf.push('</div><div class="modal-list"></div><div class="modal-footer"><button'),buf.push(attrs({"data-dismiss":"modal","aria-hidden":"true",disabled:"started"===state,"class":"btn btn-close"},{"data-dismiss":!0,"aria-hidden":!0,disabled:!0})),buf.push(">");var __val__=closeButtonText;buf.push(escape(null==__val__?"":__val__)),buf.push('</button><nav class="wizard"></nav></div>')}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/controls/modals/wizard",["require","jquery","views/controls/modals/base","views/controls/modals/wizard/breadcrumbs","views/controls/modals/wizard/navigation_buttons","j!controls/modals/wizard"],function(e){var n,r,i,o,s,a;return n=e("jquery"),r=e("views/controls/modals/base"),o=e("views/controls/modals/wizard/breadcrumbs"),s=e("views/controls/modals/wizard/navigation_buttons"),a=e("j!controls/modals/wizard"),i=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype.template=a,r.prototype.initialize=function(){return this.currentInputValid=!0,this.currentStepIndex=0,r.__super__.initialize.call(this),this.toggleSteps(),this.renderNavigation()},r.prototype.afterRender=function(){return r.__super__.afterRender.call(this),this.toggleSteps(),this.renderNavigation()},r.prototype.renderNavigation=function(){var t;return t=new o({wizard:this}),this.buttons=new s({wizard:this}),this.setView(".modal-subheader nav.wizard",t),this.setView(".modal-footer nav.wizard",this.buttons),t.render(),this.buttons.render()},r.prototype.getCurrentStep=function(){return n(this.steps[this.currentStepIndex])},r.prototype.goToNextStep=function(){return this.isLastStep()?!1:this.goToStep(this.currentStepIndex+1)},r.prototype.goToPreviousStep=function(){return this.isFirstStep()?!1:this.goToStep(this.currentStepIndex-1)},r.prototype.goToStep=function(t){var e;return e=function(e){return function(){var n;return e.currentStepIndex=t,n=e.getCurrentStep(),e.trigger("change:step",n),e.toggleSteps(),e.renderNavigation(),n}}(this),this.currentInputValid?this.model.validate?this.model.validate().then(e):e():void 0},r.prototype.isFirstStep=function(){return 0===this.currentStepIndex},r.prototype.isLastStep=function(){return this.currentStepIndex===this.steps.length-1},r.prototype.toggleSteps=function(){return this.steps=this.$("[data-step]"),this.steps.hide(),this.getCurrentStep().show()},r}(r)})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function r(){this.constructor=t}for(var i in e)n.call(e,i)&&(t[i]=e[i]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},n={}.hasOwnProperty;define("views/controls/modals/json_wizard",["require","views/controls/json_editor","views/controls/modals/wizard","views/controls/spinner"],function(n){var r,i,o,s;return r=n("views/controls/json_editor"),s=n("views/controls/modals/wizard"),o=n("views/controls/spinner"),i=function(n){function i(){return this.toggleButtons=t(this.toggleButtons,this),i.__super__.constructor.apply(this,arguments)}return e(i,n),i.prototype.bindings={"[name=name]":"name","[name=description]":"description"},i.prototype.events={"click .btn-primary":"submit"},i.prototype.initialize=function(){return null==this.model&&(this.model=this.options.model),i.__super__.initialize.call(this),this.model.on("validated",this.toggleButtons),this.on("sync:success",this.onSaved),this.on("sync:error",this.onSaveError)},i.prototype.beforeRender=function(){return i.__super__.beforeRender.call(this),this.defaultAttributesEditor=new r({attribute:"default_attributes",model:this.model}),this.setView(".defaultAttributes",this.defaultAttributesEditor),this.overrideAttributesEditor=new r({attribute:"override_attributes",model:this.model}),this.setView(".overrideAttributes",this.overrideAttributesEditor),this.defaultAttributesEditor.on("valid",this.jsonIsValid,this),this.defaultAttributesEditor.on("invalid",this.jsonIsInvalid,this),this.overrideAttributesEditor.on("valid",this.jsonIsValid,this),this.overrideAttributesEditor.on("invalid",this.jsonIsInvalid,this)},i.prototype.cleanup=function(){return i.__super__.cleanup.apply(this,arguments),this.overrideAttributesEditor.off(null,null,this),this.defaultAttributesEditor.off(null,null,this)},i.prototype.afterRender=function(){return this.bindValidation(),i.__super__.afterRender.call(this)},i.prototype.serialize=function(){return _.extend(i.__super__.serialize.call(this),{failure:this.saveFailed,errorMessage:this.errorMessage})},i.prototype.spin=function(){var t;return t=this.$("form").height(),this.setView("form",new o).render(),this.$("form").height(t),this.$("form .spinner").css("top",t/2+"px"),this.$(".modal-header .icon-remove").hide(),this.$("button").prop("disabled",!0)},i.prototype.jsonIsValid=function(){return this.currentInputValid=!0,this.model.id?this.model.validate():void 0},i.prototype.jsonIsInvalid=function(){return this.currentInputValid=!1,this.model.id?this.model.validate():void 0},i.prototype.submit=function(t){return t.preventDefault(),this.defaultAttributesEditor.submit()&&this.overrideAttributesEditor.submit()?this.model.validate().then(function(t){return function(){return t.spin(),t.defaultAttributesEditor.submit(),t.overrideAttributesEditor.submit(),t.model.sync("create",t.model,{url:t.model.collection.url(),success:function(e,n,r){return t.trigger("sync:success",e,n,r)},error:function(e,n,r){return t.trigger("sync:error",e,n,r)}})}}(this)):void 0},i.prototype.toggleButtons=function(t,e,n){return this.$(".btn-primary").prop("disabled",!n||!this.currentInputValid),this.buttons.nextButton.prop("disabled",this.buttons.wizard.isLastStep()||!n||!this.currentInputValid),this.buttons.previousButton.prop("disabled",this.buttons.wizard.isFirstStep()||!n||!this.currentInputValid)},i}(s)})}.call(this),define("templates/roles/modals/create",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<div class="modal-header">'),"started"!==state&&buf.push('<i data-dismiss="modal" aria-hidden="true" class="icon-remove"></i>'),buf.push('<h3 id="modal-label">');var __val__=title;if(buf.push(escape(null==__val__?"":__val__)),buf.push('</h3></div><div class="modal-subheader"><nav class="wizard"></nav></div><div class="modal-body">'),"finished"===state)buf.push("Success!");else if("error"===state){buf.push('<div class="alert alert-error alert-block"><h4><i class="icon-exclamation-sign"></i>&nbsp;Server Error</h4>');var __val__=message;buf.push(null==__val__?"":__val__),buf.push("</div>")}else if("queued"===state||"started"===state){var __val__=logo();buf.push(null==__val__?"":__val__)}else{if(buf.push('<form class="create-role">'),failure){if(buf.push('<div class="failure"><div class="alert alert-error alert-block"><h4>Create Role Failed</h4><p>We were unable to create the role at this time. please try again.</p>'),errorMessage){buf.push("<p>Error reason:&nbsp;");var __val__=errorMessage;buf.push(escape(null==__val__?"":__val__)),buf.push("</p>")}buf.push("</div></div>")}else buf.push('<div data-step="data-step" data-title="Basics"><div class="control-group"><label for="create-role-name" class="control-label">Name</label><div class="controls"><input name="name" type="text" autofocus="autofocus" id="create-role-name"/><span class="help-inline"></span></div></div><div class="control-group"><label for="create-role-desc" class="control-label">Description</label><div class="controls"><textarea name="description" rows="3" id="create-role-desc"></textarea></div></div></div><div data-step="data-step" data-title="Run List" class="runList"></div><div data-step="data-step" data-title="Default Attributes" class="defaultAttributes"></div><div data-step="data-step" data-title="Override Attributes" class="overrideAttributes"></div>');buf.push("</form>")}buf.push('</div><div class="modal-list"></div><div class="modal-footer"><button'),buf.push(attrs({"data-dismiss":"modal","aria-hidden":"true",disabled:"started"===state,"class":"btn btn-close"},{"data-dismiss":!0,"aria-hidden":!0,disabled:!0})),buf.push(">");var __val__=closeButtonText;buf.push(escape(null==__val__?"":__val__)),buf.push('</button><nav class="wizard"></nav>'),failure||buf.push('<button disabled="disabled" class="btn btn-primary">Create Role</button>'),buf.push("</div>")}return buf.join("")}}),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function r(){this.constructor=t}for(var i in e)n.call(e,i)&&(t[i]=e[i]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},n={}.hasOwnProperty;define("views/roles/modals/create",["require","models/role","views/controls/run_list_editor","utils/i18n.gettext","views/controls/modals/json_wizard","j!roles/modals/create"],function(n){var r,i,o,s,a,l;return o=n("models/role"),s=n("views/controls/run_list_editor"),a=n("utils/i18n.gettext"),i=n("views/controls/modals/json_wizard"),l=n("j!roles/modals/create"),r=function(n){function r(){return this.onSaveError=t(this.onSaveError,this),r.__super__.constructor.apply(this,arguments)}return e(r,n),r.prototype.template=l,r.prototype.title=a("Create Role"),r.prototype.initialize=function(){var t,e;return this.model=new o({run_list:[]}),r.__super__.initialize.call(this),this.model.collection=null!=(t=this.app)&&null!=(e=t.currentOrg)?e.roles:void 0},r.prototype.beforeRender=function(){return r.__super__.beforeRender.call(this),this.setView(".runList",new s({environment:"_default",model:this.model,organization:this.app.currentOrg}))},r.prototype.onSaveError=function(t,e,n){return this.errorMessage=n,this.saveFailed=!0,this.closeButtonText=a("Close"),this.render(),this.$(".modal-subheader, nav.wizard").hide()},r}(i)})}.call(this),define("templates/roles/attributes",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<div class="role-attributes"><div class="default-container"></div><div class="override-container"></div></div>')}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/roles/attributes",["require","b","j!roles/attributes","views/controls/attributes"],function(e){var n,r,i,o;return r=e("b"),o=e("j!roles/attributes"),n=e("views/controls/attributes"),i=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype.template=o,r.prototype.initialize=function(){return this.app=this.options.app,this.model=this.options.model},r.prototype.beforeRender=function(){return this.setView(".default-container",new n({rootAttribute:"default_attributes",model:this.model,app:this.app,action:"roles/default_attributes",title:"Default Attributes",objectType:"Role"})),this.setView(".override-container",new n({rootAttribute:"override_attributes",model:this.model,app:this.app,action:"roles/override_attributes",title:"Override Attributes",objectType:"Role"}))},r}(r.Layout)})}.call(this),define("templates/roles/details",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){if(buf.push('<div class="role-details"><div class="row-fluid"><label class="description">Description:'),description){buf.push("<label>");var __val__=description;buf.push(escape(null==__val__?"":__val__)),buf.push("</label>")}else buf.push('<label class="muted">No Description</label>');buf.push('</label></div><div class="row-fluid runlist panel"></div></div>')}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/roles/details",["require","b","views/controls/run_list","j!roles/details"],function(e){var n,r,i,o;return n=e("b"),i=e("views/controls/run_list"),o=e("j!roles/details"),r=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.template=o,n.prototype.initialize=function(){return this.app=this.options.app,this.setView(".runlist",new i({app:this.app,collection:this.model.run_lists(),type:"role"}))},n.prototype.serialize=function(){return{description:this.model.get("description")}},n}(n.Layout)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/roles/list",["views/controls/list","utils/i18n.gettext"],function(e,n){var r;return r=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype.columns=[{id:"name",name:n("Name"),field:function(){return this.id}},{id:"description",name:n("Description"),field:"description"},{id:"environment",name:n("Environment"),field:function(){return this.environments.join(", ")}}],r}(e)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("controllers/roles",["require","controllers/base","views/roles/modals/create","views/controls/modals/edit_run_list","views/controls/permissions","views/roles/attributes","views/roles/details","views/roles/list","utils/i18n.gettext","utils/i18n"],function(e){var n,r,i,o,s,a,l,u,c,d;return n=e("controllers/base"),r=e("views/roles/modals/create"),i=e("views/controls/modals/edit_run_list"),o=e("views/controls/permissions"),s=e("views/roles/attributes"),a=e("views/roles/details"),l=e("views/roles/list"),c=e("utils/i18n.gettext"),d=e("utils/i18n"),u=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.id="roles",n.prototype.endpoint="roles",n.prototype.collection_type="roles",n.prototype.messages={editRunList:c("Edit Role Run List"),label:function(t){return d.ngettext("Role","Roles",null!=t?t:1)},selectEmpty:function(){return c("Please select a role")},selectMulti:function(t){return d.sprintf(c("%d roles selected"),t)},"delete":function(t){return d.ngettext("Delete Role","Delete Roles",null!=t?t:1)},deleteSingle:c("Deleting %s"),deleteLong:function(t){return d.ngettext("You are about to delete %d role:","You are about to delete %d roles:",null!=t?t:1)},searchMessage:c("Search Roles"),showingNObjects:function(t){return d.sprintf(d.ngettext("Showing <strong>%d role</strong>","Showing <strong>%d roles</strong>",null!=t?t:1),t)},showingAllObjects:function(){return c("Showing <strong>All Roles</strong>")},searchingObjects:function(){return c("Searching roles...")}},n.prototype.listViewClass=l,n.prototype.tabs=[{id:"details",label:c("Details"),viewClass:a},{id:"attributes",label:c("Attributes"),viewClass:s},{id:"permissions",label:c("Permissions"),viewClass:o}],n.prototype.actions=[{id:"create",label:c("Create"),always:!0,dropdown:!1},{id:"delete",label:c("Delete"),multi:!0},{id:"editRunList",label:c("Edit Run List"),access:"update",dropdown:!0}],n.prototype.routes={"organizations/:org/roles":"index","organizations/:org/roles/:id":"show","organizations/:org/roles/:id/:tabId":"show"},n.prototype.action_create=function(){return new r({app:this.app,controller:this})
},n.prototype.action_editRunList=function(){return new i({collection:this.selection,app:this.app,controller:this})},n}(n)})}.call(this),define("templates/databags/modals/create",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<div class="modal-header">'),"started"!==state&&buf.push('<i data-dismiss="modal" aria-hidden="true" class="icon-remove"></i>'),buf.push('<h3 id="modal-label">');var __val__=title;if(buf.push(escape(null==__val__?"":__val__)),buf.push('</h3></div><div class="modal-subheader"></div><div class="modal-body">'),"finished"===state)buf.push("Success!");else if("error"===state){buf.push('<div class="alert alert-error alert-block"><h4><i class="icon-exclamation-sign"></i>&nbsp;Server Error</h4>');var __val__=message;buf.push(null==__val__?"":__val__),buf.push("</div>")}else if("queued"===state||"started"===state){var __val__=logo();buf.push(null==__val__?"":__val__)}else buf.push('<form class="create-databag"><div class="control-group"><label for="create-databag-name" class="control-label">Name</label><div class="controls"><input name="name" type="text" autofocus="autofocus" id="create-databag-name"/><span class="help-inline"></span></div></div></form>');buf.push('</div><div class="modal-list"></div><div class="modal-footer"><button'),buf.push(attrs({"data-dismiss":"modal","aria-hidden":"true",disabled:"started"===state,"class":"btn btn-close"},{"data-dismiss":!0,"aria-hidden":!0,disabled:!0})),buf.push(">");var __val__=closeButtonText;buf.push(escape(null==__val__?"":__val__)),buf.push("</button>"),"error"!==state&&buf.push('<button disabled="disabled" class="btn btn-submit btn-primary">Create Data Bag</button>'),buf.push("</div>")}return buf.join("")}}),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function r(){this.constructor=t}for(var i in e)n.call(e,i)&&(t[i]=e[i]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},n={}.hasOwnProperty;define("views/databags/modals/create",["require","models/databag","views/controls/modals/base","utils/i18n.gettext","j!databags/modals/create"],function(n){var r,i,o,s,a;return i=n("models/databag"),o=n("views/controls/modals/base"),s=n("utils/i18n.gettext"),a=n("j!databags/modals/create"),r=function(n){function r(){return this.toggleSubmit=t(this.toggleSubmit,this),r.__super__.constructor.apply(this,arguments)}return e(r,n),r.prototype.title=s("Create Data Bag"),r.prototype.template=a,r.prototype.bindings={"[name=name]":"name"},r.prototype.events={"click .btn-submit":"submit"},r.prototype.initialize=function(){var t,e;return this.model=new i,r.__super__.initialize.call(this),this.model.collection=null!=(t=this.app)&&null!=(e=t.currentOrg)?e.databags:void 0,this.model.on("validated",this.toggleSubmit)},r.prototype.serialize=function(){return _.extend(r.__super__.serialize.call(this),{state:this.state})},r.prototype.afterRender=function(){return this.submitButton=this.$(".btn-submit"),this.bindValidation(),r.__super__.afterRender.call(this)},r.prototype.submit=function(t){return t.preventDefault(),this.state&&"error"!==this.state?void 0:this.model.validate().then(function(t){return function(){return t.state="started",t.render(),t.model.sync("create",t.model,{url:t.model.collection.url(),success:function(){return t.onSaved()},error:function(){return t.state="error",t.render()}})}}(this))},r.prototype.toggleSubmit=function(t,e,n){return this.submitButton.prop("disabled",!n||"started"===this.state)},r}(o)})}.call(this),define("templates/databag_items/modals/create",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<div class="modal-header">'),"started"!==state&&buf.push('<i data-dismiss="modal" aria-hidden="true" class="icon-remove"></i>'),buf.push('<h3 id="modal-label">');var __val__=title;buf.push(escape(null==__val__?"":__val__)),buf.push('</h3></div><div class="modal-subheader">Data Bag: ');var __val__=databag_name;if(buf.push(escape(null==__val__?"":__val__)),buf.push('</div><div class="modal-body">'),"finished"===state)buf.push("Success!");else if("error"===state){buf.push('<div class="alert alert-error alert-block"><h4><i class="icon-exclamation-sign"></i>&nbsp;Server Error</h4>');var __val__=message;buf.push(null==__val__?"":__val__),buf.push("</div>")}else if("queued"===state||"started"===state){var __val__=logo();buf.push(null==__val__?"":__val__)}else buf.push('<form class="create-databag-item"><div class="control-group"><label for="create-databag-item-id" class="control-label">ID</label><div class="controls"><input name="id" type="text" autofocus="autofocus" id="create-databag-item-id"/><span class="help-inline"></span></div></div><div class="data"></div></form>');buf.push('</div><div class="modal-list"></div><div class="modal-footer"><button'),buf.push(attrs({"data-dismiss":"modal","aria-hidden":"true",disabled:"started"===state,"class":"btn btn-close"},{"data-dismiss":!0,"aria-hidden":!0,disabled:!0})),buf.push(">");var __val__=closeButtonText;buf.push(escape(null==__val__?"":__val__)),buf.push("</button>"),"error"!==state&&buf.push('<button disabled="disabled" class="btn btn-submit btn-primary">Create Item</button>'),buf.push("</div>")}return buf.join("")}}),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function r(){this.constructor=t}for(var i in e)n.call(e,i)&&(t[i]=e[i]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},n={}.hasOwnProperty;define("views/databag_items/modals/create",["require","models/databag_item","views/controls/json_editor","views/controls/modals/base","utils/i18n.gettext","j!databag_items/modals/create"],function(n){var r,i,o,s,a,l;return i=n("models/databag_item"),o=n("views/controls/json_editor"),s=n("views/controls/modals/base"),a=n("utils/i18n.gettext"),l=n("j!databag_items/modals/create"),r=function(n){function r(){return this.toggleSubmit=t(this.toggleSubmit,this),r.__super__.constructor.apply(this,arguments)}return e(r,n),r.prototype.title=a("Create Data Bag Item"),r.prototype.template=l,r.prototype.bindings={"[name=id]":"id"},r.prototype.events={"click .btn-submit":"submit"},r.prototype.initialize=function(t){return this.model=new i,this.databag=t.databag,this.model.collection=this.databag.items,this.jsonEditor=new o({attribute:"data",model:this.model,rows:12}),this.setView(".data",this.jsonEditor),r.__super__.initialize.call(this),this.model.on("validated",this.toggleSubmit)},r.prototype.serialize=function(){return _.extend(r.__super__.serialize.call(this),{state:this.state,databag_name:this.databag.get("name")})},r.prototype.afterRender=function(){return this.submitButton=this.$(".btn-submit"),this.bindValidation(),r.__super__.afterRender.call(this)},r.prototype.submit=function(t){return t.preventDefault(),this.state&&"error"!==this.state?void 0:this.jsonEditor.submit()?this.model.validate().then(function(t){return function(){return t.state="started",t.render(),t.model.sync("create",t.model,{url:t.model.collection.url(),success:function(){return t.onSaved()},error:function(){return t.state="error",t.render()}})}}(this)):void 0},r.prototype.toggleSubmit=function(t,e,n){return this.submitButton.prop("disabled",!n||"started"===this.state)},r}(s)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/databags/list",["require","views/controls/list","utils/i18n.gettext"],function(e){var n,r,i;return r=e("views/controls/list"),i=e("utils/i18n.gettext"),n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.columns=[{id:"name",name:i("Name"),field:function(){return this.id}}],n}(r)})}.call(this),define("templates/databag_items/modals/delete",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<div class="modal-header">'),"started"!==state&&buf.push('<i data-dismiss="modal" aria-hidden="true" class="icon-remove"></i>'),buf.push('<h3 id="modal-label">Delete Data Bag Item</h3></div><div class="modal-subheader">');var __val__=model.id;if(buf.push(escape(null==__val__?"":__val__)),buf.push('</div><div class="modal-body">'),"finished"===state)buf.push("Success!");else if("error"===state){buf.push('<div class="alert alert-error alert-block"><h4><i class="icon-exclamation-sign"></i>&nbsp;Server Error</h4>');var __val__=message;buf.push(null==__val__?"":__val__),buf.push("</div>")}else if("queued"===state||"started"===state){var __val__=logo();buf.push(null==__val__?"":__val__)}else{buf.push("<p>You are about to delete: <strong>");var __val__=model.id;buf.push(escape(null==__val__?"":__val__)),buf.push("</strong></p><p>This action is irreversible. Are you sure? </p>")}buf.push('</div><div class="modal-list"></div><div class="modal-footer"><button'),buf.push(attrs({"data-dismiss":"modal","aria-hidden":"true",disabled:"started"===state,"class":"btn btn-close"},{"data-dismiss":!0,"aria-hidden":!0,disabled:!0})),buf.push(">");var __val__=closeButtonText;buf.push(escape(null==__val__?"":__val__)),buf.push('</button><button class="btn btn-danger"><i class="icon-remove-sign">&nbsp;</i>Delete Item</button></div>')}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/databag_items/modals/delete",["require","views/controls/modals/base","router","j!databag_items/modals/delete"],function(e){var n,r,i,o;return r=e("views/controls/modals/base"),i=e("router"),o=e("j!databag_items/modals/delete"),n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.template=o,n.prototype.events={"click .btn-danger":"submit"},n.prototype.initialize=function(t){return this.model=t.model,n.__super__.initialize.call(this)},n.prototype.submit=function(){return i.navigate(this.model.collection.databag.url()),this.model.destroy(),this.remove()},n}(r)})}.call(this),define("templates/databag_items/modals/edit",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<div class="modal-header">'),"started"!==state&&buf.push('<i data-dismiss="modal" aria-hidden="true" class="icon-remove"></i>'),buf.push('<h3 id="modal-label">Edit Data Bag Item</h3></div><div class="modal-subheader">');var __val__=model.id;if(buf.push(escape(null==__val__?"":__val__)),buf.push('</div><div class="modal-body">'),"finished"===state)buf.push("Success!");else if("error"===state){buf.push('<div class="alert alert-error alert-block"><h4><i class="icon-exclamation-sign"></i>&nbsp;Server Error</h4>');var __val__=message;buf.push(null==__val__?"":__val__),buf.push("</div>")}else if("queued"===state||"started"===state){var __val__=logo();buf.push(null==__val__?"":__val__)}else buf.push("<div>Edit Dataaaaa</div>");buf.push('</div><div class="modal-list"></div><div class="modal-footer"><button'),buf.push(attrs({"data-dismiss":"modal","aria-hidden":"true",disabled:"started"===state,"class":"btn btn-close"},{"data-dismiss":!0,"aria-hidden":!0,disabled:!0})),buf.push(">");var __val__=closeButtonText;buf.push(escape(null==__val__?"":__val__)),buf.push('</button><button class="btn btn-primary">Save Item</button></div>')}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/databag_items/modals/edit",["require","views/controls/modals/base","views/controls/json_editor","j!databag_items/modals/edit"],function(e){var n,r,i,o;return i=e("views/controls/modals/base"),r=e("views/controls/json_editor"),o=e("j!databag_items/modals/edit"),n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.template=o,n.prototype.events={"click .btn-primary":"submit"},n.prototype.initialize=function(t){return this.model=t.model,this.dataEditor=new r({attribute:"data",model:this.model}),n.__super__.initialize.call(this)},n.prototype.beforeRender=function(){return this.setView(".modal-body",this.dataEditor)},n.prototype.submit=function(){return this.dataEditor.submit()?this.model.sync("update",this.model,{url:this.model.url(),success:function(t){return function(){return t.remove()}}(this)}):void 0},n}(i)})}.call(this),define("templates/databag_items/details",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push("<header><h1>");var __val__=model.id;buf.push(escape(null==__val__?"":__val__)),buf.push('</h1></header><nav><a class="expand-all">Expand All</a><a class="collapse-all">Collapse All</a><a class="delete-item pull-right"><i class="icon-trash"></i>Delete</a><a class="edit-item pull-right"><i class="icon-edit"></i>Edit</a></nav><div class="content"><div class="databag-item-data"></div></div>')}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/databag_items/details",["require","views/controls/attributes","b","views/databag_items/modals/delete","views/databag_items/modals/edit","j!databag_items/details"],function(e){var n,r,i,o,s,a;return n=e("views/controls/attributes"),r=e("b"),o=e("views/databag_items/modals/delete"),s=e("views/databag_items/modals/edit"),a=e("j!databag_items/details"),i=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype.className="panel",r.prototype.template=a,r.prototype.events={"click .delete-item":"onDeleteItemClick","click .edit-item":"onEditItemClick","click .collapse-all":"onCollapseAllClick","click .expand-all":"onExpandAllClick"},r.prototype.initialize=function(t){return this.app=t.app,this.model.on("change",this.render,this),this.model.on("destroy",this.remove,this)},r.prototype.serialize=function(){return{model:this.model}},r.prototype.afterRender=function(){return this.tree=new n.TreeView({root:this.model.get("data")}),this.setView(".databag-item-data",this.tree).render()},r.prototype.onDeleteItemClick=function(t){return t.preventDefault(),new o({model:this.model,app:this.app})},r.prototype.onEditItemClick=function(t){return t.preventDefault(),new s({model:this.model,app:this.app})},r.prototype.onCollapseAllClick=function(t){return t.preventDefault(),this.tree.collapseAll()},r.prototype.onExpandAllClick=function(t){return t.preventDefault(),this.tree.expandAll()},r}(r.Layout)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/databag_items/list",["require","views/controls/list","utils/i18n.gettext","views/controls/spinner"],function(e){var n,r,i;return n=e("views/controls/list"),i=e("utils/i18n.gettext"),r=e("views/controls/spinner"),n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.columns=[{id:"name",name:i("Name"),field:function(){return this.id}}],n.prototype.initialize=function(){var t,e;return n.__super__.initialize.apply(this,arguments),this.collection.on("remove",this.renderGrid,this),this.listHeader.messages.searchMessage=null!=(t=this.controller)&&null!=(e=t.messages)?e.searchItemsMessage:void 0},n}(n)})}.call(this),define("templates/databags/items",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<div class="row-fluid"><div class="span4"><a href="#" class="btn btn-mini create-item"><i class="icon-plus"> </i>Create Item</a><div class="databag-items"><div id="list-pane"></div></div></div><div class="span8"><div class="item"></div></div></div>')}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/databags/items",["require","b","views/databag_items/modals/create","models/databag_item","views/databag_items/details","views/databag_items/modals/delete","views/databag_items/modals/edit","views/databag_items/list","j!databags/items","state"],function(e){var n,r,i,o,s,a,l,u,c,d;return n=e("b"),r=e("views/databag_items/modals/create"),i=e("models/databag_item"),o=e("views/databag_items/details"),a=e("views/databag_items/modals/delete"),l=e("views/databag_items/modals/edit"),u=e("views/databag_items/list"),c=e("j!databags/items"),d=e("state"),s=function(e){function s(){return s.__super__.constructor.apply(this,arguments)}return t(s,e),s.prototype.template=c,s.prototype.events={"click .items a":"onItemClick","click .create-item":"onCreateItemClick"},s.prototype.initialize=function(t){return this.app=t.app,this.controller=d.get("controller")},s.prototype.serialize=function(){return{bag:this.model.toJSON()}},s.prototype.onResize=function(){var t,e;return e=parseInt(this.$el.parents(".tab-content").css("min-height")),this.$(".databag-items").height(e-this.$(".items-header").outerHeight()),null!=(t=this.listView)?t.resizeGrid():void 0},s.prototype.afterRender=function(){return this.listView=new u({app:this.app,collection:this.model.items,controller:this.controller,selection:new n.Collection,actions:[{id:"edit",label:"Edit",type:"databag"},{id:"delete",label:"Delete",type:"databag"}]}),this.listView.selection.on("select",this.onItemSelect,this),this.listView.on("action",this.onItemAction,this),this.setView("#list-pane",this.listView).render(),this.setInitialSelection(this.listView.selection)},s.prototype.onItemSelect=function(){var t;return t=this.listView.selection.first(),this.showDataBagItem(t)},s.prototype.onItemAction=function(t){var e;return e=this.listView.selection.first(),this["action_"+t].call(this,e)},s.prototype.action_edit=function(t){return new l({model:t,app:this.app})},s.prototype.action_delete=function(t){return new a({model:t,app:this.app})},s.prototype.onCreateItemClick=function(t){return t.preventDefault(),new r({app:this.app,databag:this.model})},s.prototype.setInitialSelection=function(t){var e,n,r;return e=this.controller.initialItemId,r=this.model.items,e?(n=new i({id:e},{collection:r}),delete this.controller.initialItemId,n.fetch().then(function(e){return r.remove(n,{silent:!0}),r.add(e,{at:0}),t.reset([n]),t.trigger("navigate select")})):void 0},s.prototype.showDataBagItem=function(t){var e;return this.$el.find(".items li").removeClass("active").filter("[data-item='"+t.id+"']").addClass("active"),e=new o({app:this.app,model:t}),this.setView(".item",e).render()},s}(n.Layout)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("controllers/databags",["require","controllers/base","views/databags/modals/create","views/databag_items/modals/create","models/databag","views/databags/list","views/databags/items","views/controls/permissions","utils/i18n.gettext","underscore","utils/i18n"],function(e){var n,r,i,o,s,a,l,u,c,d,p;return n=e("controllers/base"),i=e("views/databags/modals/create"),r=e("views/databag_items/modals/create"),s=e("models/databag"),a=e("views/databags/list"),o=e("views/databags/items"),u=e("views/controls/permissions"),c=e("utils/i18n.gettext"),d=e("underscore"),p=e("utils/i18n"),l=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.id="databags",n.prototype.endpoint="data",n.prototype.collection_type="databags",n.prototype.messages={label:function(t){return p.ngettext("Data Bag","Data Bags",null!=t?t:1)},selectEmpty:function(){return c("Please select a Data Bag")},selectMulti:function(t){return p.sprintf(c("%d data bags selected"),t)},selectMultiItems:function(t){return p.sprintf(c("%d data bag itemss selected"),t)},"delete":function(t){return p.ngettext("Delete Data Bag","Delete Data Bags",null!=t?t:1)},deleteItem:function(t){return p.ngettext("Delete Data Bag Item","Delete Data Bag Items",null!=t?t:1)},deleteSingle:c("Deleting %s"),deleteLong:function(t){return p.ngettext("You are about to delete %d data bag:","You are about to delete %d data bags:",null!=t?t:1)},searchItemsMessage:c("Search data bag items"),showingAllObjects:function(){return c("Showing <strong>All Databags</strong>")},showingNItems:function(t){return p.sprintf(p.ngettext("Showing <strong>%d item</strong>","Showing <strong>%d items</strong>",null!=t?t:1),t)},showingAllItems:function(){return c("Items")},searchingItems:function(){return c("Searching items...")}},n.prototype.listViewClass=a,n.prototype.tabs=[{id:"items",label:c("Items"),viewClass:o},{id:"permissions",label:c("Permissions"),viewClass:u}],n.prototype.actions=[{id:"create",label:c("Create"),always:!0,type:"databag",dropdown:!1},{id:"delete",label:c("Delete"),multi:!0,type:"databag"},{id:"createItem",label:c("Create Item"),type:"databag"}],n.prototype.routes={"organizations/:org/data_bags":"index","organizations/:org/data_bags/:id(/:tab)(/:item_id)":"show"},n.prototype.route_show=function(t,e,n,r){var i;return this.currentTabId=n,this.initialItemId=r,i=this.collection.get(e),i.items.fetch({reset:!0}),null!=i?[i]:[]},n.prototype.action_create=function(){return new i({app:this.app})},n.prototype.action_createItem=function(){return new r({app:this.app,databag:this.selection.first()})},n}(n)})}.call(this),define("templates/controls/constraints_editor/edit_item",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push("<td>");var __val__=constraint.name;buf.push(escape(null==__val__?"":__val__)),buf.push("</td><td><select"),buf.push(attrs({name:""+constraint.name+"-operator","class":"constraint-operator"},{name:!0})),buf.push('><option value="~&gt;">~></option><option value="&gt;=">>=</option><option value="&gt;">></option><option value="=">=</option><option value="&lt;"><</option><option value="&lt;="><=</option></select></td><td><input'),buf.push(attrs({type:"text",name:""+constraint.name+"-version",value:""+constraint.version,"class":"constraint-version"},{type:!0,name:!0,value:!0})),buf.push('/></td><td><a href="#" class="remove-constraint btn">Remove</a></td>')}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/controls/constraints_editor/edit_item",["require","b","j!controls/constraints_editor/edit_item"],function(e){var n,r,i;return n=e("b"),i=e("j!controls/constraints_editor/edit_item"),r=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.tagName="tr",n.prototype.template=i,n.prototype.events={change:"onConstraintChange","click .remove-constraint":"onRemoveClick"},n.prototype.serialize=function(){return{constraint:this.model.toJSON()}},n.prototype.afterRender=function(){return this.$('[value="'+this.model.get("operator")+'"]').prop("selected",!0)},n.prototype.onRemoveClick=function(t){return t.preventDefault(),this.model.destroy()},n.prototype.onConstraintChange=function(){return this.model.set({operator:this.$(".constraint-operator").val(),version:this.$(".constraint-version").val()})},n}(n.Layout)})}.call(this),define("templates/controls/constraints_editor",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<div class="constraint-content"><table><thead><tr><th>Name</th><th>Operator</th><th>Version (example 1.2.3)</th></tr></thead><tbody><tr><td><select name="new-constraint-name" class="constraint-name"></select></td><td><select name="new-constraint-operator"><option value="~&gt;">~></option><option value="&gt;=">>=</option><option value="&gt;">></option><option value="=">=</option><option value="&lt;"><</option><option value="&lt;="><=</option></select></td><td><input type="text" name="new-constraint-version" class="constraint-input"/></td><td><a disabled="disabled" href="#" class="add-constraint btn">Add</a></td></tr></tbody></table></div>')}return buf.join("")}}),define("templates/controls/constraints_editor/cookbook_options",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){(function(){if("number"==typeof cookbooks.length)for(var t=0,e=cookbooks.length;e>t;t++){var n=cookbooks[t];buf.push("<option"),buf.push(attrs({value:""+n.name},{value:!0})),buf.push(">");var r=n.name;buf.push(escape(null==r?"":r)),buf.push("</option>")}else for(var t in cookbooks){var n=cookbooks[t];buf.push("<option"),buf.push(attrs({value:""+n.name},{value:!0})),buf.push(">");var r=n.name;buf.push(escape(null==r?"":r)),buf.push("</option>")}}).call(this)}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/controls/constraints_editor",["require","underscore","b","views/controls/constraints_editor/edit_item","j!controls/constraints_editor","j!controls/constraints_editor/cookbook_options","views/controls/alerts/error_line","jquery"],function(e){var n,r,i,o,s,a,l,u;return a=e("underscore"),r=e("b"),i=e("views/controls/constraints_editor/edit_item"),l=e("j!controls/constraints_editor"),u=e("j!controls/constraints_editor/cookbook_options"),s=e("views/controls/alerts/error_line"),n=e("jquery"),o=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype.className="constraints-editor",r.prototype.template=l,r.prototype.events={"click .add-constraint":"onAddClick","keyup .constraint-input":"addButtonEnabled"},r.prototype.initialize=function(t){return this.views=[],this.cookbooks=t.cookbooks,this.constraints=t.constraints,this.cookbooks.on("reset",this.onCookbooksReset,this),this.constraints.on("add",this.onConstraintAdd,this),this.constraints.on("remove",this.onConstraintRemove,this)},r.prototype.afterRender=function(){return this.constraints.map(a.bind(this.onConstraintAdd,this)),this.removeCurrentConstraints()},r.prototype.removeCurrentConstraints=function(){var t,e,n,r,i;for(i=this.constraints.models,e=0,n=i.length;n>e;e++)r=i[e],t=r.get("name"),this.$(".constraint-name option[value='"+t+"']").remove();return this.sortCookbookSelect()},r.prototype.addButtonEnabled=function(t){var e;return null!=t&&t.preventDefault(),e=this.$(".constraint-input").val(),0===e.length||!e.match(/^(\d+\.\d+\.\d+)$/)||this.onlyOneCookbookLeft()?this.$(".add-constraint").attr("disabled",!0):this.$(".add-constraint").attr("disabled",!1)},r.prototype.onlyOneCookbookLeft=function(){return 0===this.$(".constraint-name").children().length},r.prototype.onAddClick=function(t){var e;return t.preventDefault(),this.$(".add-constraint").attr("disabled")?void 0:(this.constraints.add({name:this.$('[name="new-constraint-name"]').val(),operator:this.$('[name="new-constraint-operator"]').val(),version:this.$('[name="new-constraint-version"]').val()}),e=this.$(".constraint-name").get(0).selectedIndex,this.$(".constraint-name option:eq("+e+")").remove(),this.sortCookbookSelect(),this.addButtonEnabled(null))},r.prototype.onConstraintAdd=function(t){var e;return e=new i({model:t}),this.views.push(e),e.render().view.$el.insertBefore(this.$("tbody tr:last-child"))},r.prototype.onConstraintRemove=function(t){var e,r;return r=a(this.views).find(function(e){return e.model===t}),this.views=a(this.views).without(r),r.remove(),e=r.model.get("name"),this.$(".constraint-name").append(n("<option>",{value:e}).text(e)),this.sortCookbookSelect(),this.addButtonEnabled(null)},r.prototype.displayNoCookbooksError=function(){return this.setView(".constraint-content",new s({body:"You cannot add constraints since there are no cookbooks. Please upload a cookbook if you wish to add constraints."})).render(),this.trigger("no_cookbook_error")},r.prototype.onCookbooksReset=function(t){return 0===this.cookbooks.length?this.displayNoCookbooksError():(this.$('[name="new-constraint-name"]').html(u({cookbooks:t.toJSON()})),this.removeCurrentConstraints())},r.prototype.sortCookbookSelect=function(){return n(".constraint-name").each(function(){var t;return t=n(this).children("option"),t.sort(function(t,e){return t.value.localeCompare(e.value)}),n(this).empty().append(t)})},r}(r.Layout)})}.call(this),define("templates/environments/modals/create",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<div class="modal-header">'),"started"!==state&&buf.push('<i data-dismiss="modal" aria-hidden="true" class="icon-remove"></i>'),buf.push('<h3 id="modal-label">');var __val__=title;if(buf.push(escape(null==__val__?"":__val__)),buf.push('</h3></div><div class="modal-subheader"><nav class="wizard"></nav></div><div class="modal-body">'),"finished"===state)buf.push("Success!");else if("error"===state){buf.push('<div class="alert alert-error alert-block"><h4><i class="icon-exclamation-sign"></i>&nbsp;Server Error</h4>');var __val__=message;buf.push(null==__val__?"":__val__),buf.push("</div>")}else if("queued"===state||"started"===state){var __val__=logo();buf.push(null==__val__?"":__val__)}else{if(buf.push('<form class="create-environment">'),failure){if(buf.push('<div class="failure"><div class="alert alert-error alert-block"><h4>Create Environment Failed</h4><p>We were unable to create the environment at this time. please try again.</p>'),errorMessage){buf.push("<p>Error reason:&nbsp;");var __val__=errorMessage;buf.push(escape(null==__val__?"":__val__)),buf.push("</p>")}buf.push("</div></div>")}else buf.push('<div data-step="data-step" data-title="Basics"><div class="control-group"><label for="create-environment-name" class="control-label">Name</label><div class="controls"><input name="name" type="text" autofocus="autofocus" id="create-environment-name"/><span class="help-inline"></span></div></div><div class="control-group"><label for="create-environment-desc" class="control-label">Description</label><div class="controls"><textarea name="description" rows="3" id="create-environment-desc"></textarea></div></div></div><div data-step="data-step" data-title="Constraints" class="constraints"></div><div data-step="data-step" data-title="Default Attributes" class="defaultAttributes"></div><div data-step="data-step" data-title="Override Attributes" class="overrideAttributes"></div>');
buf.push("</form>")}buf.push('</div><div class="modal-list"></div><div class="modal-footer"><button'),buf.push(attrs({"data-dismiss":"modal","aria-hidden":"true",disabled:"started"===state,"class":"btn btn-close"},{"data-dismiss":!0,"aria-hidden":!0,disabled:!0})),buf.push(">");var __val__=closeButtonText;buf.push(escape(null==__val__?"":__val__)),buf.push('</button><nav class="wizard"></nav>'),failure||buf.push('<button disabled="disabled" class="btn btn-primary">Create Environment</button>'),buf.push("</div>")}return buf.join("")}}),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function r(){this.constructor=t}for(var i in e)n.call(e,i)&&(t[i]=e[i]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},n={}.hasOwnProperty;define("views/environments/modals/create",["require","views/controls/constraints_editor","utils/i18n.gettext","views/controls/modals/json_wizard","j!environments/modals/create"],function(n){var r,i,o,s,a;return r=n("views/controls/constraints_editor"),s=n("utils/i18n.gettext"),o=n("views/controls/modals/json_wizard"),a=n("j!environments/modals/create"),i=function(n){function i(){return this.onSaveError=t(this.onSaveError,this),i.__super__.constructor.apply(this,arguments)}return e(i,n),i.prototype.template=a,i.prototype.title=s("Create Environment"),i.prototype.initialize=function(){var t,e;return this.app=this.options.app,this.cookbooks=this.options.cookbooks,i.__super__.initialize.call(this),this.model.collection=null!=(t=this.app)&&null!=(e=t.currentOrg)?e.environments:void 0},i.prototype.beforeRender=function(){return i.__super__.beforeRender.call(this),this.setView(".constraints",new r({constraints:this.model.constraints,cookbooks:this.cookbooks}))},i.prototype.afterRender=function(){return this.cookbooks.fetch({reset:!0}),i.__super__.afterRender.call(this)},i.prototype.onSaveError=function(t){var e;return this.errorMessage=(null!=t&&null!=(e=t.responseJSON)?e.error:void 0)||"Internal Server Error",this.saveFailed=!0,this.closeButtonText=s("Close"),this.render(),this.$(".modal-subheader, nav.wizard").hide()},i}(o)})}.call(this),define("templates/environments/attributes",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<div class="default_attrs"></div><div class="override_attrs"></div>')}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/environments/attributes",["require","views/controls/attributes","b","state","j!environments/attributes"],function(e){var n,r,i,o,s;return n=e("views/controls/attributes"),r=e("b"),o=e("state"),s=e("j!environments/attributes"),i=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype.initialize=function(){return this.controller=this.options.controller||o.get("controller"),this.setViews({".default_attrs":new n({app:this.options.app,controller:this.controller,rootAttribute:"default_attributes",model:this.model,objectType:"Environment",title:"Default Attributes"}),".override_attrs":new n({app:this.options.app,controller:this.controller,rootAttribute:"override_attributes",model:this.model,objectType:"Environment",title:"Override Attributes"})})},r.prototype.template=s,r.prototype.serialize=function(){return{environment:this.model}},r}(r.Layout)})}.call(this),define("templates/environments/modals/cookbook_constraints",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<div class="modal-header">'),"started"!==state&&buf.push('<i data-dismiss="modal" aria-hidden="true" class="icon-remove"></i>'),buf.push('<h3 id="modal-label">');var __val__=title;buf.push(escape(null==__val__?"":__val__)),buf.push('</h3></div><div class="modal-subheader">');var __val__=model.id;if(buf.push(escape(null==__val__?"":__val__)),buf.push('</div><div class="modal-body">'),"finished"===state)buf.push("Success!");else if("error"===state){buf.push('<div class="alert alert-error alert-block"><h4><i class="icon-exclamation-sign"></i>&nbsp;Server Error</h4>');var __val__=message;buf.push(null==__val__?"":__val__),buf.push("</div>")}else if("queued"===state||"started"===state){var __val__=logo();buf.push(null==__val__?"":__val__)}else buf.push('<form class="message"></form><div class="constraints"></div>');buf.push('</div><div class="modal-list"></div><div class="modal-footer"><button'),buf.push(attrs({"data-dismiss":"modal","aria-hidden":"true",disabled:"started"===state,"class":"btn btn-close"},{"data-dismiss":!0,"aria-hidden":!0,disabled:!0})),buf.push(">");var __val__=closeButtonText;buf.push(escape(null==__val__?"":__val__)),buf.push('</button><button class="btn btn-primary btn-submit">Save Constraints</button></div>')}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/environments/modals/cookbook_constraints",["require","views/controls/modals/base","views/controls/constraints_editor","collections/cookbooks","views/controls/alerts/error_line","views/controls/spinner","utils/i18n.gettext","j!environments/modals/cookbook_constraints"],function(e){var n,r,i,o,s,a,l,u;return n=e("views/controls/modals/base"),r=e("views/controls/constraints_editor"),o=e("collections/cookbooks"),s=e("views/controls/alerts/error_line"),a=e("views/controls/spinner"),l=e("utils/i18n.gettext"),u=e("j!environments/modals/cookbook_constraints"),i=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.template=u,n.prototype.title=l("Edit Cookbook Constraints"),n.prototype.cleanup=function(){return n.__super__.cleanup.apply(this,arguments),this.constraintView.off(null,null,this)},n.prototype.events={"click .btn-submit":"submit"},n.prototype.afterRender=function(){var t;return n.__super__.afterRender.call(this),t=new o([],{organization:this.options.org}),t.fetch({reset:!0}),this.constraintView=new r({constraints:this.model.constraints,cookbooks:t}),this.setView(".constraints",this.constraintView).render(),this.constraintView.on("no_cookbook_error",this.noCookbooksAvaliable,this)},n.prototype.noCookbooksAvaliable=function(){return this.$(".btn-primary").remove(),this.$(".btn-close").html("Close")},n.prototype.submit=function(){return this.setView(".message",new a).render(),this.model.save(this.model.attributes,{success:this.remove.bind(this),error:function(t){return function(e,n){var r;return t.setView(".message",new s({body:null!=n&&null!=(r=n.responseJSON)?r.error:void 0})).render()}}(this),validate:!1})},n}(n)})}.call(this),define("templates/environments/cookbook_constraints",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<header><h1>Cookbook Constraints</h1></header><nav><a class="edit pull-right"><i class="icon-edit"></i><span>Edit</span></a></nav><div class="content">'),constraints.length>0?(buf.push('<table class="cookbooks_table constraints"><tr><th>Name</th><th>Operator</th><th>Version</th></tr>'),function(){if("number"==typeof constraints.length)for(var t=0,e=constraints.length;e>t;t++){var n=constraints[t];buf.push("<tr><td>");var r=n.name;buf.push(escape(null==r?"":r)),buf.push("</td><td>");var r=n.operator;buf.push(escape(null==r?"":r)),buf.push("</td><td>");var r=n.version;buf.push(escape(null==r?"":r)),buf.push("</td></tr>")}else for(var t in constraints){var n=constraints[t];buf.push("<tr><td>");var r=n.name;buf.push(escape(null==r?"":r)),buf.push("</td><td>");var r=n.operator;buf.push(escape(null==r?"":r)),buf.push("</td><td>");var r=n.version;buf.push(escape(null==r?"":r)),buf.push("</td></tr>")}}.call(this),buf.push("</table>")):buf.push('<div class="alert alert-info empty"><i class="icon-info-sign"></i>&nbsp;There are no items to display.</div>'),buf.push("</div>")}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/environments/cookbook_constraints",["require","b","views/environments/modals/cookbook_constraints","j!environments/cookbook_constraints"],function(e){var n,r,i,o;return n=e("b"),r=e("views/environments/modals/cookbook_constraints"),o=e("j!environments/cookbook_constraints"),i=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.template=o,n.prototype.events={"click nav .edit":"edit"},n.prototype.initialize=function(){return this.model.on("sync",this.render,this)},n.prototype.serialize=function(){return{constraints:this.model.constraints.toJSON()}},n.prototype.edit=function(t){return t.preventDefault(),new r({model:this.model,org:this.options.org})},n}(n.Layout)})}.call(this),define("templates/environments/details",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){if(buf.push('<div class="row-fluid"><label class="description">Description:'),description){buf.push("<label>");var __val__=description;buf.push(escape(null==__val__?"":__val__)),buf.push("</label>")}else buf.push('<label class="muted">No Description</label>');buf.push('</label></div><div class="row-fluid constraints panel"></div>')}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/environments/details",["require","backbone","views/environments/cookbook_constraints","j!environments/details"],function(e){var n,r,i,o;return n=e("backbone"),r=e("views/environments/cookbook_constraints"),o=e("j!environments/details"),i=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.template=o,n.prototype.serialize=function(){return{description:this.model.get("description")}},n.prototype.beforeRender=function(){return this.setViews({".constraints":new r({model:this.model,org:this.options.app.currentOrg})})},n}(n.Layout)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/environments/list",["views/controls/list","utils/i18n.gettext"],function(e,n){var r;return r=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype.columns=[{id:"name",name:n("Environment Name"),field:function(){return this.id}},{id:"description",name:n("Description"),field:"description"},{id:"number_of_constraints",name:n("Number of Constraints"),field:function(){return this.get("cookbook_versions").length}}],r}(e)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("controllers/environments",["require","controllers/base","collections/cookbooks","views/environments/modals/create","models/environment","views/environments/attributes","views/environments/details","views/environments/list","views/controls/permissions","utils/i18n.gettext","utils/i18n"],function(e){var n,r,i,o,s,a,l,u,c,d,p;return n=e("controllers/base"),r=e("collections/cookbooks"),i=e("views/environments/modals/create"),o=e("models/environment"),s=e("views/environments/attributes"),a=e("views/environments/details"),l=e("views/environments/list"),c=e("views/controls/permissions"),d=e("utils/i18n.gettext"),p=e("utils/i18n"),u=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.id="environments",n.prototype.endpoint="environments",n.prototype.collection_type="environments",n.prototype.messages={label:function(t){return p.ngettext("Environment","Environments",null!=t?t:1)},selectEmpty:function(){return d("Please select an environment")},selectMulti:function(t){return p.sprintf(d("%d environments selected"),t)},"delete":function(t){return p.ngettext("Delete Environment","Delete Environments",null!=t?t:1)},deleteSingle:d("Deleting %s"),deleteLong:function(t){return p.ngettext("You are about to delete %d environment:","You are about to delete %d environments:",null!=t?t:1)},searchMessage:d("Search Environments"),showingNObjects:function(t){return p.sprintf(p.ngettext("Showing <strong>%d environment</strong>","Showing <strong>%d environments</strong>",null!=t?t:1),t)},showingAllObjects:function(){return d("Showing <strong>All Environments</strong>")},searchingObjects:function(){return d("Searching environments...")}},n.prototype.listViewClass=l,n.prototype.tabs=[{id:"details",label:d("Details"),viewClass:a},{id:"attributes",label:d("Attributes"),viewClass:s,viewArgs:{controller:n}},{id:"permissions",label:d("Permissions"),viewClass:c}],n.prototype.actions=[{id:"create",label:d("Create"),always:!0,dropdown:!1},{id:"delete",label:d("Delete"),multi:!0}],n.prototype.routes={"organizations/:org/environments":"index","organizations/:org/environments/:id":"show","organizations/:org/environments/:id/:tabId":"show.tab"},n.prototype.action_create=function(){return new i({app:this.app,model:new o,cookbooks:new r([],{organization:this.app.currentOrg})})},n}(n)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/clients/list",["require","views/controls/list","utils/i18n.gettext"],function(e){var n,r,i;return r=e("views/controls/list"),i=e("utils/i18n.gettext"),n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.columns=[{id:"name",name:i("Name"),field:function(){return this.id}}],n}(r)})}.call(this),define("templates/clients/object_tabs",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<div class="object-label"><span class="object-type">');var __val__=label+":";buf.push(escape(null==__val__?"":__val__)),buf.push('</span>&nbsp;<span class="object-id">');var __val__=model.id;buf.push(escape(null==__val__?"":__val__)),buf.push("</span>"),model.get("validator")&&buf.push('&nbsp;<span class="label">Validation Client</span>'),buf.push('</div><ul class="nav nav-tabs">'),function(){if("number"==typeof tabs.length)for(var t=0,e=tabs.length;e>t;t++){var n=tabs[t];buf.push("<li"),buf.push(attrs({"data-tab":n.id,"class":currentTabId==n.id?"active":""},{"class":!0,"data-tab":!0})),buf.push("><a"),buf.push(attrs({href:urlBase+"/"+n.id+queryParams},{href:!0})),buf.push(">");var r=n.label;buf.push(escape(null==r?"":r)),buf.push("</a></li>")}else for(var t in tabs){var n=tabs[t];buf.push("<li"),buf.push(attrs({"data-tab":n.id,"class":currentTabId==n.id?"active":""},{"class":!0,"data-tab":!0})),buf.push("><a"),buf.push(attrs({href:urlBase+"/"+n.id+queryParams},{href:!0})),buf.push(">");var r=n.label;buf.push(escape(null==r?"":r)),buf.push("</a></li>")}}.call(this),buf.push('</ul><div class="tab-content container-fluid"></div>')}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/clients/object_tabs",["require","views/application/object_tabs","j!clients/object_tabs"],function(e){var n,r,i;return r=e("views/application/object_tabs"),i=e("j!clients/object_tabs"),n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.template=i,n}(r)})}.call(this),define("templates/clients/details",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<div class="spinner"></div><div class="row-fluid"><div class="public-key panel span6"></div></div>')}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("models/client_details",["require","models/base","helpers/rekey"],function(e){var n,r,i;return n=e("models/base"),i=e("helpers/rekey"),r=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),_.extend(n.prototype,i),n.prototype.idAttribute="name",n.prototype.url=function(){return this.get("organization_url")+"/clients/"+this.get("id")},n}(n)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/clients/details",["require","b","j!clients/details","views/controls/public_key","views/controls/spinner","jquery","models/client_details","views/controls/alerts/error"],function(e){var n,r,i,o,s,a,l,u;return r=e("b"),u=e("j!clients/details"),a=e("views/controls/public_key"),l=e("views/controls/spinner"),n=e("jquery"),i=e("models/client_details"),s=e("views/controls/alerts/error"),o=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.template=u,n.prototype.initialize=function(){return this.app=this.options.app},n.prototype.afterRender=function(){return this.setView(".spinner",new l).render(),this.detailsModel=new i({organization_url:this.app.currentOrg.url(),id:this.model.id}),this.detailsModel.fetch().success(function(t){return function(){return t.setView(".public-key",new a({model:t.detailsModel})).render()}}(this)).fail(function(t){return function(){return t.setView(".public-key",new s({body:"An error occured fetching the details of the client. Please try again later."})).render()}}(this)).always(function(t){return function(){return t.$(".spinner").html(""),t.$(".public-key").css("display","block")}}(this))},n}(r.Layout)})}.call(this),define("templates/clients/modals/delete",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<div class="modal-header">'),"started"!==state&&buf.push('<i data-dismiss="modal" aria-hidden="true" class="icon-remove"></i>'),buf.push('<h3 id="modal-label"><i class="icon-remove-sign"></i>&nbsp;');var __val__=title;if(buf.push(escape(null==__val__?"":__val__)),buf.push('</h3></div><div class="modal-subheader">'),collection.length>1){var __val__=messages.selectMulti(collection.length);buf.push(escape(null==__val__?"":__val__))}else{var __val__=collection.at(0).id;buf.push(escape(null==__val__?"":__val__))}if(buf.push('</div><div class="modal-body">'),"finished"===state)buf.push("Success!");else if("error"===state){buf.push('<div class="alert alert-error alert-block"><h4><i class="icon-exclamation-sign"></i>&nbsp;Server Error</h4>');var __val__=message;buf.push(null==__val__?"":__val__),buf.push("</div>")}else if("queued"===state||"started"===state){var __val__=logo();buf.push(null==__val__?"":__val__)}else{buf.push("<p>");var __val__=i18n.sprintf(messages.deleteLong(collection.length),collection.length);buf.push(escape(null==__val__?"":__val__)),buf.push("</p><ul>"),function(){if("number"==typeof collection.toJSON().length)for(var t=0,e=collection.toJSON().length;e>t;t++){var n=collection.toJSON()[t];if(n.validator){buf.push('<li class="delete-validator">');var r=n.name;buf.push(escape(null==r?"":r)),buf.push('&nbsp;<i class="icon icon-warning-sign"></i></li>')}else{buf.push("<li>");var r=n.name;buf.push(escape(null==r?"":r)),buf.push("</li>")}}else for(var t in collection.toJSON()){var n=collection.toJSON()[t];if(n.validator){buf.push('<li class="delete-validator">');var r=n.name;buf.push(escape(null==r?"":r)),buf.push('&nbsp;<i class="icon icon-warning-sign"></i></li>')}else{buf.push("<li>");var r=n.name;buf.push(escape(null==r?"":r)),buf.push("</li>")}}}.call(this),buf.push("</ul>"),hasValidator&&buf.push('<p class="alert alert-error"><i class="icon icon-warning-sign"> </i>You are about to delete a validation client. Without a validation client, you may have difficulties creating new nodes.</p>'),buf.push("<p>This action is irreversible. Are you sure?</p>")}buf.push('</div><div class="modal-list"></div><div class="modal-footer"><button'),buf.push(attrs({"data-dismiss":"modal","aria-hidden":"true",disabled:"started"===state,"class":"btn btn-close"},{"data-dismiss":!0,"aria-hidden":!0,disabled:!0})),buf.push(">");var __val__=closeButtonText;buf.push(escape(null==__val__?"":__val__)),buf.push('</button><button class="btn btn-yes btn-danger"><i class="icon-remove-sign">&nbsp;</i>');var __val__=yesButtonText;buf.push(escape(null==__val__?"":__val__)),buf.push("</button></div>")}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/clients/modals/delete",["require","views/controls/modals/delete","j!clients/modals/delete"],function(e){var n,r,i;return r=e("views/controls/modals/delete"),i=e("j!clients/modals/delete"),n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.template=i,n.prototype.serialize=function(){var t;return t=this.collection.some(function(t){return t.get("validator")}),_.extend(n.__super__.serialize.apply(this,arguments),{hasValidator:t})},n}(r)})}.call(this),define("templates/clients/modals/create",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){if(buf.push('<div class="modal-header">'),"started"!==state&&buf.push('<i data-dismiss="modal" aria-hidden="true" class="icon-remove"></i>'),buf.push('<h3 id="modal-label"><i class="icon-briefcase"></i>&nbsp;Create Client</h3></div><div class="modal-subheader"></div><div class="modal-body">'),"finished"===state)buf.push("Success!");else if("error"===state){buf.push('<div class="alert alert-error alert-block"><h4><i class="icon-exclamation-sign"></i>&nbsp;Server Error</h4>');var __val__=message;buf.push(null==__val__?"":__val__),buf.push("</div>")}else if("queued"===state||"started"===state){var __val__=logo();buf.push(null==__val__?"":__val__)}else buf.push('<form><label for="client-user-name" class="client-label">Client Name<input type="text" autofocus="autofocus" id="client-user-name"/></label><label for="client-validator" class="client-label checkbox">Validation Client<input type="checkbox" id="client-validator"/></label></form><div class="message"></div><pre class="private_key"></pre>');buf.push('</div><div class="modal-list"></div><div class="modal-footer"><button'),buf.push(attrs({"data-dismiss":"modal","aria-hidden":"true",disabled:"started"===state,"class":"btn btn-close"},{"data-dismiss":!0,"aria-hidden":!0,disabled:!0})),buf.push(">");var __val__=closeButtonText;buf.push(escape(null==__val__?"":__val__)),buf.push('</button><button disabled="disabled" class="btn btn-primary btn-create"><i class="icon-briefcase"></i>&nbsp;Create Client</button><button class="btn btn-primary btn-download"><i class="icon-download-alt"></i>&nbsp;Download</button></div>')}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/clients/modals/create",["require","models/client","views/controls/alerts/error_line","views/controls/modals/base","views/controls/spinner","views/controls/alerts/success_line","router","FileSaver","j!clients/modals/create"],function(e){var n,r,i,o,s,a,l,u,c,d,p;return n=e("models/client"),i=e("views/controls/alerts/error_line"),o=e("views/controls/modals/base"),s=e("views/controls/spinner"),a=e("views/controls/alerts/success_line"),c=e("router"),d=e("FileSaver"),p=e("j!clients/modals/create"),l=function(){try{return!!new Blob}catch(t){return u=t,!1}}(),r=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype.template=p,r.prototype.className=r.prototype.className+" modal-client-create",r.prototype.events={"keyup #client-user-name":"keyPressed","click .btn-create":"submit","click .btn-download":"download","click .btn-close":"close","click .user-link":"navigateToUser"},r.prototype.initialize=function(){return r.__super__.initialize.apply(this,arguments),this.collection=this.options.app.currentOrg.clients,this.model=new n({},{collection:this.collection}),this.modelSaved=!1},r.prototype.keyPressed=function(t){return t.which!==$.ui.keyCode.ENTER&&this.$(".message").html(""),0===$.trim(this.$("#client-user-name").val()).length?this.$(".btn-create").attr("disabled",!0):this.$(".btn-create").attr("disabled",!1)},r.prototype.download=function(t){return t.preventDefault(),this.privateKey&&l?d(new Blob([this.privateKey]),this.model.id+".pem"):void 0},r.prototype.close=function(){return this.remove(),this.modelSaved?(this.model.collection.add(this.model,{at:0}),c.navigate(this.model.url(),{trigger:!0})):void 0},r.prototype.navigateToUser=function(t){return t.preventDefault(),c.navigate(this.$(t.target).attr("href"),{trigger:!0})},r.prototype.submit=function(t){return t.preventDefault(),this.$(".btn-close").html("Close"),this.setView(".message",new s).render(),this.model.set("name",this.$("#client-user-name").val()),this.model.set("validator",this.$("#client-validator").is(":checked")),this.model.sync("create",this.model,{url:this.model.collection.url(),success:function(t){return function(e){return t.privateKey=e.private_key,t.modelSaved=!0,t.$(".btn-download").css("display","inline-block"),t.$(".btn-create").remove(),t.$("form").remove(),t.setView(".message",new a({body:"Client successfully created. Copy the private key below and keep it somewhere safe. It is NOT stored on the server."})).render(),t.$("pre").css("display","block").html(t.privateKey)}}(this),error:function(t){return function(e){var n;return n=function(){switch(e.status){case 409:return new i(null!=e.responseJSON.url?{body:"Creating a client by this name would overwrite this <a class='user-link' href='"+e.responseJSON.url+"'>user</a>. Please either delete that user or choose a different client name to avoid a conflict."}:{body:"A client by this name already exists."});case 403:return new i({body:"You do not have permission to create this client."});default:return new i({body:"There was a problem creating the client, please try again later."})}}(),t.setView(".message",n).render()}}(this)})},r}(o)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("controllers/clients",["require","controllers/base","views/clients/list","views/clients/object_tabs","views/clients/details","views/clients/modals/delete","utils/i18n.gettext","utils/i18n","views/clients/modals/create","views/controls/modals/extreme_warning_modal","views/controls/permissions"],function(e){var n,r,i,o,s,a,l,u,c,d,p;return n=e("controllers/base"),s=e("views/clients/list"),a=e("views/clients/object_tabs"),o=e("views/clients/details"),i=e("views/clients/modals/delete"),d=e("utils/i18n.gettext"),p=e("utils/i18n"),r=e("views/clients/modals/create"),u=e("views/controls/modals/extreme_warning_modal"),c=e("views/controls/permissions"),l=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.id="clients",n.prototype.endpoint="clients",n.prototype.collection_type="clients",n.prototype.listViewClass=s,n.prototype.objectViewClass=a,n.prototype.deleteModalClass=i,n.prototype.messages={label:function(t){return p.ngettext("Client","Clients",null!=t?t:1)},selectEmpty:function(){return d("Please select a client")},selectMulti:function(t){return d(p.sprintf("%d clients selected",t))},"delete":function(t){return p.ngettext("Delete Client","Delete Clients",null!=t?t:1)},deleteSingle:d("Deleting %s"),deleteLong:function(t){return p.ngettext("You are about to delete %d client:","You are about to delete %d clients:",null!=t?t:1)},searchMessage:d("Search Clients"),showingNObjects:function(t){return p.sprintf(p.ngettext("Showing <strong>%d client</strong>","Showing <strong>%d clients</strong>",null!=t?t:1),t)},showingAllObjects:function(){return d("Showing <strong>All Clients</strong>")},searchingObjects:function(){return d("Searching clients...")}},n.prototype.routes={"organizations/:org/clients":"index","organizations/:org/clients/:id":"show","organizations/:org/clients/:id/:tabId":"show"},n.prototype.tabs=[{id:"details",label:d("Details"),viewClass:o},{id:"permissions",label:d("Permissions"),viewClass:c}],n.prototype.actions=[{id:"create",label:d("Create"),always:!0,dropdown:!1},{id:"delete",label:d("Delete"),multi:!0}],n.prototype.action_create=function(){return new r({app:this.app,controller:this})},n}(n)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("controllers/policies",["require","controllers/base","controllers/cookbooks","controllers/roles","controllers/databags","controllers/environments","controllers/clients","utils/i18n"],function(e){var n,r,i,o,s,a,l,u;return n=e("controllers/base"),i=e("controllers/cookbooks"),l=e("controllers/roles"),o=e("controllers/databags"),s=e("controllers/environments"),r=e("controllers/clients"),u=e("utils/i18n"),a=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.id="policies",n.prototype.messages={label:function(){return u.gettext("Policy")}},n.prototype.children=[i,l,o,s,r],n}(n)})}.call(this),define("templates/controls/modals/report_feedback",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<div class="modal-header">'),"started"!==state&&buf.push('<i data-dismiss="modal" aria-hidden="true" class="icon-remove"></i>'),buf.push('<h3 id="modal-label">');var __val__=title;if(buf.push(escape(null==__val__?"":__val__)),buf.push('</h3></div><div class="modal-subheader"></div><div class="modal-body">'),"finished"===state)buf.push("Success!");else if("error"===state){buf.push('<div class="alert alert-error alert-block"><h4><i class="icon-exclamation-sign"></i>&nbsp;Server Error</h4>');
var __val__=message;buf.push(null==__val__?"":__val__),buf.push("</div>")}else if("queued"===state||"started"===state){var __val__=logo();buf.push(null==__val__?"":__val__)}else if(hosted){buf.push('<form><div class="subject"><label for="feedback-subject">');var __val__=i18n.gettext("Subject");buf.push(escape(null==__val__?"":__val__)),buf.push('</label><input id="feedback-subject" type="text" autofocus="autofocus" class="modal-report-feedback-subject"/></div><div class="description"><label for="feedback-desc">');var __val__=i18n.gettext("Description");buf.push(escape(null==__val__?"":__val__)),buf.push('</label><textarea rows="10" id="feedback-desc" type="text" class="modal-report-feedback-description"></textarea></div><div id="validation-error-message">Both subject and description fields require text.</div></form>')}else buf.push('<p class="support-message">To submit general feedback about the Management Console, please contact\n<a href="mailto:'+escape(null==(interp=support_email_address)?"":interp)+'?subject=Chef Management Console Feedback">\n '+escape(null==(interp=support_email_address)?"":interp)+'</a>.</p><div class="alert alert-error">If this is an urgent support request, please log into your support ticketing system, create an issue, and mark it as High Severity.</div>');buf.push('</div><div class="modal-list"></div><div class="modal-footer"><button'),buf.push(attrs({"data-dismiss":"modal","aria-hidden":"true",disabled:"started"===state,"class":"btn btn-close"},{"data-dismiss":!0,"aria-hidden":!0,disabled:!0})),buf.push(">");var __val__=closeButtonText;buf.push(escape(null==__val__?"":__val__)),buf.push("</button>"),hosted&&buf.push('<button class="btn btn-primary">Send Feedback</button>'),buf.push("</div>")}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/controls/modals/report_feedback",["require","views/controls/modals/base","underscore","config","utils/i18n","state","j!controls/modals/report_feedback"],function(e){var n,r,i,o,s,a;return n=e("views/controls/modals/base"),i=e("underscore"),o=e("config"),s=e("utils/i18n"),a=e("state"),r=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.template=e("j!controls/modals/report_feedback"),r.prototype.title=s.gettext("Feedback"),r.prototype.className=r.prototype.className+" modal-feedback",r.prototype.events={"click .btn-primary":"submit"},r.prototype.beforeRender=function(){return r.__super__.beforeRender.call(this),this.closeButtonText=this.app.isHosted()?"Cancel":"Close"},r.prototype.serialize=function(){return i.extend(r.__super__.serialize.call(this),{hosted:this.app.isHosted(),support_email_address:o.support_email_address})},r.prototype.submit=function(t){var e,n;return t.preventDefault(),n=this.$(".subject input").val(),e=this.$(".description textarea").val(),0===n.length||0===e.length?this.$("#validation-error-message").show():(this.$("#validation-error-message").hide(),this.queueAction("util/report_feedback",n,e,this.getBrowserInfo(),this.getAppState()),this.remove())},r.prototype.getBrowserInfo=function(){return{browser:jQuery.browser,navigator:i.omit(window.navigator,"plugins","mimeTypes"),window_innerHeight:window.innerHeight,window_innerWidth:window.innerWidth}},r.prototype.getAppState=function(){var t,e,n;return i.extend(i.pick(o.user,"first_name","last_name","email"),{url:window.location.href,activeController:null!=(e=a.get("controller"))?e.collection_type:void 0,selection:function(){var e,n,r,i;for(r=this.app.selection.models,i=[],e=0,n=r.length;n>e;e++)t=r[e],i.push(t.id);return i}.call(this),collectionCount:this.controller.collection.length,user:null!=(n=a.get("user"))?n.id:void 0,org:this.app.mainnav.currentOrg.id})},r}(n)})}.call(this),define("templates/reporting/dashboard/counts_chart",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<div class="panel"><header><h1>Run Counts</h1></header><nav class="legend"><span class="mainsuccess"><i class="legend-color"> </i>success</span><span class="mainfailure"><i class="legend-color"> </i>failure</span><span class="mainaborted"><i class="legend-color"></i>aborted</span></nav><div class="content"><div class="counts-chart"><svg></svg></div></div></div>')}return buf.join("")}}),function(){function t(t,e){try{for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}catch(r){t.prototype=e}}function e(t){for(var e=-1,n=t.length,r=[];++e<n;)r.push(t[e]);return r}function n(t){return Array.prototype.slice.call(t)}function r(){}function i(t){return t}function o(){return this}function s(){return!0}function a(t){return"function"==typeof t?t:function(){return t}}function l(t,e,n){return function(){var r=n.apply(e,arguments);return arguments.length?t:r}}function u(t){return null!=t&&!isNaN(t)}function c(t){return t.length}function d(t){return null==t}function p(t){return t.trim().replace(/\s+/g," ")}function h(t){for(var e=1;t*e%1;)e*=10;return e}function f(){}function g(t){function e(){for(var e,r=n,i=-1,o=r.length;++i<o;)(e=r[i].on)&&e.apply(this,arguments);return t}var n=[],i=new r;return e.on=function(e,r){var o,s=i.get(e);return arguments.length<2?s&&s.on:(s&&(s.on=null,n=n.slice(0,o=n.indexOf(s)).concat(n.slice(o+1)),i.remove(e)),r&&n.push(i.set(e,{on:r})),t)},e}function m(t,e){return e-(t?1+Math.floor(Math.log(t+Math.pow(10,1+Math.floor(Math.log(t)/Math.LN10)-e))/Math.LN10):1)}function v(t){return t+""}function y(t){for(var e=t.lastIndexOf("."),n=e>=0?t.substring(e):(e=t.length,""),r=[];e>0;)r.push(t.substring(e-=3,e+3));return r.reverse().join(",")+n}function b(t,e){var n=Math.pow(10,3*Math.abs(8-e));return{scale:e>8?function(t){return t/n}:function(t){return t*n},symbol:t}}function _(t){return function(e){return 0>=e?0:e>=1?1:t(e)}}function w(t){return function(e){return 1-t(1-e)}}function x(t){return function(e){return.5*(.5>e?t(2*e):2-t(2-2*e))}}function k(t){return t}function C(t){return function(e){return Math.pow(e,t)}}function j(t){return 1-Math.cos(t*Math.PI/2)}function M(t){return Math.pow(2,10*(t-1))}function S(t){return 1-Math.sqrt(1-t*t)}function D(t,e){var n;return arguments.length<2&&(e=.45),arguments.length<1?(t=1,n=e/4):n=e/(2*Math.PI)*Math.asin(1/t),function(r){return 1+t*Math.pow(2,10*-r)*Math.sin(2*(r-n)*Math.PI/e)}}function z(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}}function N(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function T(){d3.event.stopPropagation(),d3.event.preventDefault()}function P(){for(var t,e=d3.event;t=e.sourceEvent;)e=t;return e}function L(t){for(var e=new f,n=0,r=arguments.length;++n<r;)e[arguments[n]]=g(e);return e.of=function(n,r){return function(i){try{var o=i.sourceEvent=d3.event;i.target=t,d3.event=i,e[i.type].apply(n,r)}finally{d3.event=o}}},e}function E(t){var e=[t.a,t.b],n=[t.c,t.d],r=O(e),i=A(e,n),o=O(I(n,e,-i))||0;e[0]*n[1]<n[0]*e[1]&&(e[0]*=-1,e[1]*=-1,r*=-1,i*=-1),this.rotate=(r?Math.atan2(e[1],e[0]):Math.atan2(-n[0],n[1]))*ao,this.translate=[t.e,t.f],this.scale=[r,o],this.skew=o?Math.atan2(i,o)*ao:0}function A(t,e){return t[0]*e[0]+t[1]*e[1]}function O(t){var e=Math.sqrt(A(t,t));return e&&(t[0]/=e,t[1]/=e),e}function I(t,e,n){return t[0]+=n*e[0],t[1]+=n*e[1],t}function R(t){return"transform"==t?d3.interpolateTransform:d3.interpolate}function $(t,e){return e=e-(t=+t)?1/(e-t):0,function(n){return(n-t)*e}}function F(t,e){return e=e-(t=+t)?1/(e-t):0,function(n){return Math.max(0,Math.min(1,(n-t)*e))}}function q(){}function H(t,e,n){return new W(t,e,n)}function W(t,e,n){this.r=t,this.g=e,this.b=n}function V(t){return 16>t?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function B(t,e,n){var r,i,o,s=0,a=0,l=0;if(r=/([a-z]+)\((.*)\)/i.exec(t))switch(i=r[2].split(","),r[1]){case"hsl":return n(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return e(G(i[0]),G(i[1]),G(i[2]))}return(o=po.get(t))?e(o.r,o.g,o.b):(null!=t&&"#"===t.charAt(0)&&(4===t.length?(s=t.charAt(1),s+=s,a=t.charAt(2),a+=a,l=t.charAt(3),l+=l):7===t.length&&(s=t.substring(1,3),a=t.substring(3,5),l=t.substring(5,7)),s=parseInt(s,16),a=parseInt(a,16),l=parseInt(l,16)),e(s,a,l))}function Y(t,e,n){var r,i,o=Math.min(t/=255,e/=255,n/=255),s=Math.max(t,e,n),a=s-o,l=(s+o)/2;return a?(i=.5>l?a/(s+o):a/(2-s-o),r=t==s?(e-n)/a+(n>e?6:0):e==s?(n-t)/a+2:(t-e)/a+4,r*=60):i=r=0,X(r,i,l)}function U(t,e,n){t=Q(t),e=Q(e),n=Q(n);var r=ae((.4124564*t+.3575761*e+.1804375*n)/mo),i=ae((.2126729*t+.7151522*e+.072175*n)/vo),o=ae((.0193339*t+.119192*e+.9503041*n)/yo);return ne(116*i-16,500*(r-i),200*(i-o))}function Q(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function G(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}function X(t,e,n){return new Z(t,e,n)}function Z(t,e,n){this.h=t,this.s=e,this.l=n}function J(t,e,n){function r(t){return t>360?t-=360:0>t&&(t+=360),60>t?o+(s-o)*t/60:180>t?s:240>t?o+(s-o)*(240-t)/60:o}function i(t){return Math.round(255*r(t))}var o,s;return t%=360,0>t&&(t+=360),e=0>e?0:e>1?1:e,n=0>n?0:n>1?1:n,s=.5>=n?n*(1+e):n+e-n*e,o=2*n-s,H(i(t+120),i(t),i(t-120))}function K(t,e,n){return new te(t,e,n)}function te(t,e,n){this.h=t,this.c=e,this.l=n}function ee(t,e,n){return ne(n,Math.cos(t*=Math.PI/180)*e,Math.sin(t)*e)}function ne(t,e,n){return new re(t,e,n)}function re(t,e,n){this.l=t,this.a=e,this.b=n}function ie(t,e,n){var r=(t+16)/116,i=r+e/500,o=r-n/200;return i=se(i)*mo,r=se(r)*vo,o=se(o)*yo,H(le(3.2404542*i-1.5371385*r-.4985314*o),le(-.969266*i+1.8760108*r+.041556*o),le(.0556434*i-.2040259*r+1.0572252*o))}function oe(t,e,n){return K(Math.atan2(n,e)/Math.PI*180,Math.sqrt(e*e+n*n),t)}function se(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function ae(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function le(t){return Math.round(255*(.00304>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function ue(t){return Ui(t,jo),t}function ce(t){return function(){return _o(t,this)}}function de(t){return function(){return wo(t,this)}}function pe(t,e){function n(){this.removeAttribute(t)}function r(){this.removeAttributeNS(t.space,t.local)}function i(){this.setAttribute(t,e)}function o(){this.setAttributeNS(t.space,t.local,e)}function s(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}function a(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}return t=d3.ns.qualify(t),null==e?t.local?r:n:"function"==typeof e?t.local?a:s:t.local?o:i}function he(t){return new RegExp("(?:^|\\s+)"+d3.requote(t)+"(?:\\s+|$)","g")}function fe(t,e){function n(){for(var n=-1;++n<i;)t[n](this,e)}function r(){for(var n=-1,r=e.apply(this,arguments);++n<i;)t[n](this,r)}t=t.trim().split(/\s+/).map(ge);var i=t.length;return"function"==typeof e?r:n}function ge(t){var e=he(t);return function(n,r){if(i=n.classList)return r?i.add(t):i.remove(t);var i=n.className,o=null!=i.baseVal,s=o?i.baseVal:i;r?(e.lastIndex=0,e.test(s)||(s=p(s+" "+t),o?i.baseVal=s:n.className=s)):s&&(s=p(s.replace(e," ")),o?i.baseVal=s:n.className=s)}}function me(t,e,n){function r(){this.style.removeProperty(t)}function i(){this.style.setProperty(t,e,n)}function o(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}return null==e?r:"function"==typeof e?o:i}function ve(t,e){function n(){delete this[t]}function r(){this[t]=e}function i(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}return null==e?n:"function"==typeof e?i:r}function ye(t){return{__data__:t}}function be(t){return function(){return Co(this,t)}}function _e(t){return arguments.length||(t=d3.ascending),function(e,n){return t(e&&e.__data__,n&&n.__data__)}}function we(t,e,n){function r(){var e=this[o];e&&(this.removeEventListener(t,e,e.$),delete this[o])}function i(){function i(t){var n=d3.event;d3.event=t,a[0]=s.__data__;try{e.apply(s,a)}finally{d3.event=n}}var s=this,a=arguments;r.call(this),this.addEventListener(t,this[o]=i,i.$=n),i._=e}var o="__on"+t,s=t.indexOf(".");return s>0&&(t=t.substring(0,s)),e?i:r}function xe(t,e){for(var n=0,r=t.length;r>n;n++)for(var i,o=t[n],s=0,a=o.length;a>s;s++)(i=o[s])&&e(i,s,n);return t}function ke(t){return Ui(t,So),t}function Ce(t,e,n){Ui(t,Do);var i=new r,o=d3.dispatch("start","end"),s=Oo;return t.id=e,t.time=n,t.tween=function(e,n){return arguments.length<2?i.get(e):(null==n?i.remove(e):i.set(e,n),t)},t.ease=function(e){return arguments.length?(s="function"==typeof e?e:d3.ease.apply(d3,arguments),t):s},t.each=function(e,n){return arguments.length<2?je.call(t,e):(o.on(e,n),t)},d3.timer(function(r){return xe(t,function(t,a){function l(r){return f.active>e?c():(f.active=e,i.forEach(function(e,n){(n=n.call(t,g,a))&&d.push(n)}),o.start.call(t,g,a),u(r)||d3.timer(u,0,n),1)}function u(n){if(f.active!==e)return c();for(var r=(n-p)/h,i=s(r),l=d.length;l>0;)d[--l].call(t,i);return r>=1?(c(),No=e,o.end.call(t,g,a),No=0,1):void 0}function c(){return--f.count||delete t.__transition__,1}var d=[],p=t.delay,h=t.duration,f=(t=t.node).__transition__||(t.__transition__={active:0,count:0}),g=t.__data__;++f.count,r>=p?l(r):d3.timer(l,p,n)})},0,n),t}function je(t){var e=No,n=Oo,r=Eo,i=Ao;return No=this.id,Oo=this.ease(),xe(this,function(e,n,r){Eo=e.delay,Ao=e.duration,t.call(e=e.node,e.__data__,n,r)}),No=e,Oo=n,Eo=r,Ao=i,this}function Me(t,e,n){return""!=n&&$o}function Se(t,e){return d3.tween(t,R(e))}function De(){for(var t,e=Date.now(),n=Ho;n;)t=e-n.then,t>=n.delay&&(n.flush=n.callback(t)),n=n.next;var r=ze()-e;r>24?(isFinite(r)&&(clearTimeout(Ro),Ro=setTimeout(De,r)),Io=0):(Io=1,Wo(De))}function ze(){for(var t=null,e=Ho,n=1/0;e;)e.flush?(delete qo[e.callback.id],e=t?t.next=e.next:Ho=e.next):(n=Math.min(n,e.then+e.delay),e=(t=e).next);return n}function Ne(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();if(0>Vo&&(window.scrollX||window.scrollY)){n=d3.select(document.body).append("svg").style("position","absolute").style("top",0).style("left",0);var i=n[0][0].getScreenCTM();Vo=!i.f&&!i.e,n.remove()}return Vo?(r.x=e.pageX,r.y=e.pageY):(r.x=e.clientX,r.y=e.clientY),r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}function Te(t){var e=t[0],n=t[t.length-1];return n>e?[e,n]:[n,e]}function Pe(t){return t.rangeExtent?t.rangeExtent():Te(t.range())}function Le(t,e){var n,r=0,i=t.length-1,o=t[r],s=t[i];return o>s&&(n=r,r=i,i=n,n=o,o=s,s=n),(e=e(s-o))&&(t[r]=e.floor(o),t[i]=e.ceil(s)),t}function Ee(){return Math}function Ae(t,e,n,r){function i(){var i=Math.min(t.length,e.length)>2?He:qe,l=r?F:$;return s=i(t,e,l,n),a=i(e,t,l,d3.interpolate),o}function o(t){return s(t)}var s,a;return o.invert=function(t){return a(t)},o.domain=function(e){return arguments.length?(t=e.map(Number),i()):t},o.range=function(t){return arguments.length?(e=t,i()):e},o.rangeRound=function(t){return o.range(t).interpolate(d3.interpolateRound)},o.clamp=function(t){return arguments.length?(r=t,i()):r},o.interpolate=function(t){return arguments.length?(n=t,i()):n},o.ticks=function(e){return $e(t,e)},o.tickFormat=function(e){return Fe(t,e)},o.nice=function(){return Le(t,Ie),i()},o.copy=function(){return Ae(t,e,n,r)},i()}function Oe(t,e){return d3.rebind(t,e,"range","rangeRound","interpolate","clamp")}function Ie(t){return t=Math.pow(10,Math.round(Math.log(t)/Math.LN10)-1),t&&{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}}function Re(t,e){var n=Te(t),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/e)/Math.LN10)),o=e/r*i;return.15>=o?i*=10:.35>=o?i*=5:.75>=o&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+.5*i,n[2]=i,n}function $e(t,e){return d3.range.apply(d3,Re(t,e))}function Fe(t,e){return d3.format(",."+Math.max(0,-Math.floor(Math.log(Re(t,e)[2])/Math.LN10+.01))+"f")}function qe(t,e,n,r){var i=n(t[0],t[1]),o=r(e[0],e[1]);return function(t){return o(i(t))}}function He(t,e,n,r){var i=[],o=[],s=0,a=Math.min(t.length,e.length)-1;for(t[a]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<=a;)i.push(n(t[s-1],t[s])),o.push(r(e[s-1],e[s]));return function(e){var n=d3.bisect(t,e,1,a)-1;return o[n](i[n](e))}}function We(t,e){function n(n){return t(e(n))}var r=e.pow;return n.invert=function(e){return r(t.invert(e))},n.domain=function(i){return arguments.length?(e=i[0]<0?Be:Ve,r=e.pow,t.domain(i.map(e)),n):t.domain().map(r)},n.nice=function(){return t.domain(Le(t.domain(),Ee)),n},n.ticks=function(){var n=Te(t.domain()),i=[];if(n.every(isFinite)){var o=Math.floor(n[0]),s=Math.ceil(n[1]),a=r(n[0]),l=r(n[1]);if(e===Be)for(i.push(r(o));o++<s;)for(var u=9;u>0;u--)i.push(r(o)*u);else{for(;s>o;o++)for(var u=1;10>u;u++)i.push(r(o)*u);i.push(r(o))}for(o=0;i[o]<a;o++);for(s=i.length;i[s-1]>l;s--);i=i.slice(o,s)}return i},n.tickFormat=function(t,i){if(arguments.length<2&&(i=Bo),arguments.length<1)return i;var o,s=Math.max(.1,t/n.ticks().length),a=e===Be?(o=-1e-12,Math.floor):(o=1e-12,Math.ceil);return function(t){return t/r(a(e(t)+o))<=s?i(t):""}},n.copy=function(){return We(t.copy(),e)},Oe(n,t)}function Ve(t){return Math.log(0>t?0:t)/Math.LN10}function Be(t){return-Math.log(t>0?0:-t)/Math.LN10}function Ye(t,e){function n(e){return t(r(e))}var r=Ue(e),i=Ue(1/e);return n.invert=function(e){return i(t.invert(e))},n.domain=function(e){return arguments.length?(t.domain(e.map(r)),n):t.domain().map(i)},n.ticks=function(t){return $e(n.domain(),t)},n.tickFormat=function(t){return Fe(n.domain(),t)},n.nice=function(){return n.domain(Le(n.domain(),Ie))},n.exponent=function(t){if(!arguments.length)return e;var o=n.domain();return r=Ue(e=t),i=Ue(1/e),n.domain(o)},n.copy=function(){return Ye(t.copy(),e)},Oe(n,t)}function Ue(t){return function(e){return 0>e?-Math.pow(-e,t):Math.pow(e,t)}}function Qe(t,e){function n(e){return s[((o.get(e)||o.set(e,t.push(e)))-1)%s.length]}function i(e,n){return d3.range(t.length).map(function(t){return e+n*t})}var o,s,a;return n.domain=function(i){if(!arguments.length)return t;t=[],o=new r;for(var s,a=-1,l=i.length;++a<l;)o.has(s=i[a])||o.set(s,t.push(s));return n[e.t].apply(n,e.a)},n.range=function(t){return arguments.length?(s=t,a=0,e={t:"range",a:arguments},n):s},n.rangePoints=function(r,o){arguments.length<2&&(o=0);var l=r[0],u=r[1],c=(u-l)/(Math.max(1,t.length-1)+o);return s=i(t.length<2?(l+u)/2:l+c*o/2,c),a=0,e={t:"rangePoints",a:arguments},n},n.rangeBands=function(r,o,l){arguments.length<2&&(o=0),arguments.length<3&&(l=o);var u=r[1]<r[0],c=r[u-0],d=r[1-u],p=(d-c)/(t.length-o+2*l);return s=i(c+p*l,p),u&&s.reverse(),a=p*(1-o),e={t:"rangeBands",a:arguments},n},n.rangeRoundBands=function(r,o,l){arguments.length<2&&(o=0),arguments.length<3&&(l=o);var u=r[1]<r[0],c=r[u-0],d=r[1-u],p=Math.floor((d-c)/(t.length-o+2*l)),h=d-c-(t.length-o)*p;return s=i(c+Math.round(h/2),p),u&&s.reverse(),a=Math.round(p*(1-o)),e={t:"rangeRoundBands",a:arguments},n},n.rangeBand=function(){return a},n.rangeExtent=function(){return Te(e.a[0])},n.copy=function(){return Qe(t,e)},n.domain(t)}function Ge(t,e){function n(){var n=0,o=(t.length,e.length);for(i=[];++n<o;)i[n-1]=d3.quantile(t,n/o);return r}function r(t){return isNaN(t=+t)?0/0:e[d3.bisect(i,t)]}var i;return r.domain=function(e){return arguments.length?(t=e.filter(function(t){return!isNaN(t)}).sort(d3.ascending),n()):t},r.range=function(t){return arguments.length?(e=t,n()):e},r.quantiles=function(){return i},r.copy=function(){return Ge(t,e)},n()}function Xe(t,e,n){function r(e){return n[Math.max(0,Math.min(s,Math.floor(o*(e-t))))]}function i(){return o=n.length/(e-t),s=n.length-1,r}var o,s;return r.domain=function(n){return arguments.length?(t=+n[0],e=+n[n.length-1],i()):[t,e]},r.range=function(t){return arguments.length?(n=t,i()):n},r.copy=function(){return Xe(t,e,n)},i()}function Ze(t,e){function n(n){return e[d3.bisect(t,n)]}return n.domain=function(e){return arguments.length?(t=e,n):t},n.range=function(t){return arguments.length?(e=t,n):e},n.copy=function(){return Ze(t,e)},n}function Je(t){function e(t){return+t}return e.invert=e,e.domain=e.range=function(n){return arguments.length?(t=n.map(e),e):t},e.ticks=function(e){return $e(t,e)},e.tickFormat=function(e){return Fe(t,e)},e.copy=function(){return Je(t)},e}function Ke(t){return t.innerRadius}function tn(t){return t.outerRadius}function en(t){return t.startAngle}function nn(t){return t.endAngle}function rn(t){function e(e){function s(){c.push("M",o(t(d),u))}for(var l,c=[],d=[],p=-1,h=e.length,f=a(n),g=a(r);++p<h;)i.call(this,l=e[p],p)?d.push([+f.call(this,l,p),+g.call(this,l,p)]):d.length&&(s(),d=[]);return d.length&&s(),c.length?c.join(""):null}var n=on,r=sn,i=s,o=an,l=o.key,u=.7;return e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(r=t,e):r},e.defined=function(t){return arguments.length?(i=t,e):i},e.interpolate=function(t){return arguments.length?(l="function"==typeof t?o=t:(o=Jo.get(t)||an).key,e):l},e.tension=function(t){return arguments.length?(u=t,e):u},e}function on(t){return t[0]}function sn(t){return t[1]}function an(t){return t.join("L")}function ln(t){return an(t)+"Z"}function un(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("V",(r=t[e])[1],"H",r[0]);return i.join("")}function cn(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("H",(r=t[e])[0],"V",r[1]);return i.join("")}function dn(t,e){return t.length<4?an(t):t[1]+fn(t.slice(1,t.length-1),gn(t,e))}function pn(t,e){return t.length<3?an(t):t[0]+fn((t.push(t[0]),t),gn([t[t.length-2]].concat(t,[t[1]]),e))}function hn(t,e){return t.length<3?an(t):t[0]+fn(t,gn(t,e))}function fn(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return an(t);var n=t.length!=e.length,r="",i=t[0],o=t[1],s=e[0],a=s,l=1;if(n&&(r+="Q"+(o[0]-2*s[0]/3)+","+(o[1]-2*s[1]/3)+","+o[0]+","+o[1],i=t[1],l=2),e.length>1){a=e[1],o=t[l],l++,r+="C"+(i[0]+s[0])+","+(i[1]+s[1])+","+(o[0]-a[0])+","+(o[1]-a[1])+","+o[0]+","+o[1];for(var u=2;u<e.length;u++,l++)o=t[l],a=e[u],r+="S"+(o[0]-a[0])+","+(o[1]-a[1])+","+o[0]+","+o[1]}if(n){var c=t[l];r+="Q"+(o[0]+2*a[0]/3)+","+(o[1]+2*a[1]/3)+","+c[0]+","+c[1]}return r}function gn(t,e){for(var n,r=[],i=(1-e)/2,o=t[0],s=t[1],a=1,l=t.length;++a<l;)n=o,o=s,s=t[a],r.push([i*(s[0]-n[0]),i*(s[1]-n[1])]);return r}function mn(t){if(t.length<3)return an(t);var e=1,n=t.length,r=t[0],i=r[0],o=r[1],s=[i,i,i,(r=t[1])[0]],a=[o,o,o,r[1]],l=[i,",",o];for(wn(l,s,a);++e<n;)r=t[e],s.shift(),s.push(r[0]),a.shift(),a.push(r[1]),wn(l,s,a);for(e=-1;++e<2;)s.shift(),s.push(r[0]),a.shift(),a.push(r[1]),wn(l,s,a);return l.join("")}function vn(t){if(t.length<4)return an(t);for(var e,n=[],r=-1,i=t.length,o=[0],s=[0];++r<3;)e=t[r],o.push(e[0]),s.push(e[1]);for(n.push(_n(es,o)+","+_n(es,s)),--r;++r<i;)e=t[r],o.shift(),o.push(e[0]),s.shift(),s.push(e[1]),wn(n,o,s);return n.join("")}function yn(t){for(var e,n,r=-1,i=t.length,o=i+4,s=[],a=[];++r<4;)n=t[r%i],s.push(n[0]),a.push(n[1]);for(e=[_n(es,s),",",_n(es,a)],--r;++r<o;)n=t[r%i],s.shift(),s.push(n[0]),a.shift(),a.push(n[1]),wn(e,s,a);return e.join("")}function bn(t,e){var n=t.length-1;if(n)for(var r,i,o=t[0][0],s=t[0][1],a=t[n][0]-o,l=t[n][1]-s,u=-1;++u<=n;)r=t[u],i=u/n,r[0]=e*r[0]+(1-e)*(o+i*a),r[1]=e*r[1]+(1-e)*(s+i*l);return mn(t)}function _n(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function wn(t,e,n){t.push("C",_n(Ko,e),",",_n(Ko,n),",",_n(ts,e),",",_n(ts,n),",",_n(es,e),",",_n(es,n))}function xn(t,e){return(e[1]-t[1])/(e[0]-t[0])}function kn(t){for(var e=0,n=t.length-1,r=[],i=t[0],o=t[1],s=r[0]=xn(i,o);++e<n;)r[e]=(s+(s=xn(i=o,o=t[e+1])))/2;return r[e]=s,r}function Cn(t){for(var e,n,r,i,o=[],s=kn(t),a=-1,l=t.length-1;++a<l;)e=xn(t[a],t[a+1]),Math.abs(e)<1e-6?s[a]=s[a+1]=0:(n=s[a]/e,r=s[a+1]/e,i=n*n+r*r,i>9&&(i=3*e/Math.sqrt(i),s[a]=i*n,s[a+1]=i*r));for(a=-1;++a<=l;)i=(t[Math.min(l,a+1)][0]-t[Math.max(0,a-1)][0])/(6*(1+s[a]*s[a])),o.push([i||0,s[a]*i||0]);return o}function jn(t){return t.length<3?an(t):t[0]+fn(t,Cn(t))}function Mn(t){for(var e,n,r,i=-1,o=t.length;++i<o;)e=t[i],n=e[0],r=e[1]+Xo,e[0]=n*Math.cos(r),e[1]=n*Math.sin(r);return t}function Sn(t){function e(e){function s(){m.push("M",u(t(y),h),p,d(t(v.reverse()),h),"Z")}for(var c,f,g,m=[],v=[],y=[],b=-1,_=e.length,w=a(n),x=a(i),k=n===r?function(){return f}:a(r),C=i===o?function(){return g}:a(o);++b<_;)l.call(this,c=e[b],b)?(v.push([f=+w.call(this,c,b),g=+x.call(this,c,b)]),y.push([+k.call(this,c,b),+C.call(this,c,b)])):v.length&&(s(),v=[],y=[]);return v.length&&s(),m.length?m.join(""):null}var n=on,r=on,i=0,o=sn,l=s,u=an,c=u.key,d=u,p="L",h=.7;return e.x=function(t){return arguments.length?(n=r=t,e):r},e.x0=function(t){return arguments.length?(n=t,e):n},e.x1=function(t){return arguments.length?(r=t,e):r},e.y=function(t){return arguments.length?(i=o=t,e):o},e.y0=function(t){return arguments.length?(i=t,e):i},e.y1=function(t){return arguments.length?(o=t,e):o},e.defined=function(t){return arguments.length?(l=t,e):l},e.interpolate=function(t){return arguments.length?(c="function"==typeof t?u=t:(u=Jo.get(t)||an).key,d=u.reverse||u,p=u.closed?"M":"L",e):c},e.tension=function(t){return arguments.length?(h=t,e):h},e}function Dn(t){return t.source}function zn(t){return t.target}function Nn(t){return t.radius}function Tn(t){return[t.x,t.y]}function Pn(t){return function(){var e=t.apply(this,arguments),n=e[0],r=e[1]+Xo;return[n*Math.cos(r),n*Math.sin(r)]}}function Ln(){return 64}function En(){return"circle"}function An(t){var e=Math.sqrt(t/Math.PI);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}function On(t,e){t.attr("transform",function(t){return"translate("+e(t)+",0)"})}function In(t,e){t.attr("transform",function(t){return"translate(0,"+e(t)+")"})}function Rn(t,e,n){if(r=[],n&&e.length>1){for(var r,i,o,s=Te(t.domain()),a=-1,l=e.length,u=(e[1]-e[0])/++n;++a<l;)for(i=n;--i>0;)(o=+e[a]-i*u)>=s[0]&&r.push(o);for(--a,i=0;++i<n&&(o=+e[a]+i*u)<s[1];)r.push(o)}return r}function $n(){as||(as=d3.select("body").append("div").style("visibility","hidden").style("top",0).style("height",0).style("width",0).style("overflow-y","scroll").append("div").style("height","2000px").node().parentNode);var t,e=d3.event;try{as.scrollTop=1e3,as.dispatchEvent(e),t=1e3-as.scrollTop}catch(n){t=e.wheelDelta||5*-e.detail}return t}function Fn(t){for(var e=t.source,n=t.target,r=Hn(e,n),i=[e];e!==r;)e=e.parent,i.push(e);for(var o=i.length;n!==r;)i.splice(o,0,n),n=n.parent;return i}function qn(t){for(var e=[],n=t.parent;null!=n;)e.push(t),t=n,n=n.parent;return e.push(t),e}function Hn(t,e){if(t===e)return t;for(var n=qn(t),r=qn(e),i=n.pop(),o=r.pop(),s=null;i===o;)s=i,i=n.pop(),o=r.pop();return s}function Wn(t){t.fixed|=2}function Vn(t){t.fixed&=1}function Bn(t){t.fixed|=4}function Yn(t){t.fixed&=3}function Un(t,e,n){var r=0,i=0;if(t.charge=0,!t.leaf)for(var o,s=t.nodes,a=s.length,l=-1;++l<a;)o=s[l],null!=o&&(Un(o,e,n),t.charge+=o.charge,r+=o.charge*o.cx,i+=o.charge*o.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var u=e*n[t.point.index];t.charge+=t.pointCharge=u,r+=u*t.point.x,i+=u*t.point.y}t.cx=r/t.charge,t.cy=i/t.charge}function Qn(){return 20}function Gn(){return 1}function Xn(t){return t.x}function Zn(t){return t.y}function Jn(t,e,n){t.y0=e,t.y=n}function Kn(t){return d3.range(t.length)}function tr(t){for(var e=-1,n=t[0].length,r=[];++e<n;)r[e]=0;return r}function er(t){for(var e,n=1,r=0,i=t[0][1],o=t.length;o>n;++n)(e=t[n][1])>i&&(r=n,i=e);return r}function nr(t){return t.reduce(rr,0)}function rr(t,e){return t+e[1]}function ir(t,e){return or(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function or(t,e){for(var n=-1,r=+t[0],i=(t[1]-r)/e,o=[];++n<=e;)o[n]=i*n+r;return o}function sr(t){return[d3.min(t),d3.max(t)]}function ar(t,e){return d3.rebind(t,e,"sort","children","value"),t.links=dr,t.nodes=function(e){return ps=!0,(t.nodes=t)(e)},t}function lr(t){return t.children}function ur(t){return t.value}function cr(t,e){return e.value-t.value}function dr(t){return d3.merge(t.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}function pr(t,e){return t.value-e.value}function hr(t,e){var n=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=n,n._pack_prev=e}function fr(t,e){t._pack_next=e,e._pack_prev=t}function gr(t,e){var n=e.x-t.x,r=e.y-t.y,i=t.r+e.r;return i*i-n*n-r*r>.001}function mr(t){function e(t){c=Math.min(t.x-t.r,c),d=Math.max(t.x+t.r,d),p=Math.min(t.y-t.r,p),h=Math.max(t.y+t.r,h)}if((n=t.children)&&(u=n.length)){var n,r,i,o,s,a,l,u,c=1/0,d=-1/0,p=1/0,h=-1/0;if(n.forEach(vr),r=n[0],r.x=-r.r,r.y=0,e(r),u>1&&(i=n[1],i.x=i.r,i.y=0,e(i),u>2))for(o=n[2],_r(r,i,o),e(o),hr(r,o),r._pack_prev=o,hr(o,i),i=r._pack_next,s=3;u>s;s++){_r(r,i,o=n[s]);var f=0,g=1,m=1;for(a=i._pack_next;a!==i;a=a._pack_next,g++)if(gr(a,o)){f=1;break}if(1==f)for(l=r._pack_prev;l!==a._pack_prev&&!gr(l,o);l=l._pack_prev,m++);f?(m>g||g==m&&i.r<r.r?fr(r,i=a):fr(r=l,i),s--):(hr(r,o),i=o,e(o))}var v=(c+d)/2,y=(p+h)/2,b=0;for(s=0;u>s;s++)o=n[s],o.x-=v,o.y-=y,b=Math.max(b,o.r+Math.sqrt(o.x*o.x+o.y*o.y));t.r=b,n.forEach(yr)}}function vr(t){t._pack_next=t._pack_prev=t}function yr(t){delete t._pack_next,delete t._pack_prev}function br(t,e,n,r){var i=t.children;if(t.x=e+=r*t.x,t.y=n+=r*t.y,t.r*=r,i)for(var o=-1,s=i.length;++o<s;)br(i[o],e,n,r)}function _r(t,e,n){var r=t.r+n.r,i=e.x-t.x,o=e.y-t.y;if(r&&(i||o)){var s=e.r+n.r,a=i*i+o*o;s*=s,r*=r;var l=.5+(r-s)/(2*a),u=Math.sqrt(Math.max(0,2*s*(r+a)-(r-=a)*r-s*s))/(2*a);n.x=t.x+l*i+u*o,n.y=t.y+l*o-u*i}else n.x=t.x+r,n.y=t.y}function wr(t){return 1+d3.max(t,function(t){return t.y})}function xr(t){return t.reduce(function(t,e){return t+e.x},0)/t.length}function kr(t){var e=t.children;return e&&e.length?kr(e[0]):t}function Cr(t){var e,n=t.children;return n&&(e=n.length)?Cr(n[e-1]):t}function jr(t,e){return t.parent==e.parent?1:2}function Mr(t){var e=t.children;return e&&e.length?e[0]:t._tree.thread}function Sr(t){var e,n=t.children;return n&&(e=n.length)?n[e-1]:t._tree.thread}function Dr(t,e){var n=t.children;if(n&&(i=n.length))for(var r,i,o=-1;++o<i;)e(r=Dr(n[o],e),t)>0&&(t=r);return t}function zr(t,e){return t.x-e.x}function Nr(t,e){return e.x-t.x}function Tr(t,e){return t.depth-e.depth}function Pr(t,e){function n(t,r){var i=t.children;if(i&&(s=i.length))for(var o,s,a=null,l=-1;++l<s;)o=i[l],n(o,a),a=o;e(t,r)}n(t,null)}function Lr(t){for(var e,n=0,r=0,i=t.children,o=i.length;--o>=0;)e=i[o]._tree,e.prelim+=n,e.mod+=n,n+=e.shift+(r+=e.change)}function Er(t,e,n){t=t._tree,e=e._tree;var r=n/(e.number-t.number);t.change+=r,e.change-=r,e.shift+=n,e.prelim+=n,e.mod+=n}function Ar(t,e,n){return t._tree.ancestor.parent==e.parent?t._tree.ancestor:n}function Or(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function Ir(t,e){var n=t.x+e[3],r=t.y+e[0],i=t.dx-e[1]-e[3],o=t.dy-e[0]-e[2];return 0>i&&(n+=i/2,i=0),0>o&&(r+=o/2,o=0),{x:n,y:r,dx:i,dy:o}}function Rr(t,e){function n(t,r){d3.text(t,e,function(t){r(t&&n.parse(t))})}function r(e){return e.map(i).join(t)}function i(t){return s.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}var o=new RegExp("\r\n|["+t+"\r\n]","g"),s=new RegExp('["'+t+"\n]"),a=t.charCodeAt(0);return n.parse=function(t){var e;return n.parseRows(t,function(t,n){if(n){for(var r={},i=-1,o=e.length;++i<o;)r[e[i]]=t[i];return r}return e=t,null})},n.parseRows=function(t,e){function n(){if(o.lastIndex>=t.length)return l;if(i)return i=!1,s;var e=o.lastIndex;if(34===t.charCodeAt(e)){for(var n=e;n++<t.length;)if(34===t.charCodeAt(n)){if(34!==t.charCodeAt(n+1))break;n++}o.lastIndex=n+2;var r=t.charCodeAt(n+1);return 13===r?(i=!0,10===t.charCodeAt(n+2)&&o.lastIndex++):10===r&&(i=!0),t.substring(e+1,n).replace(/""/g,'"')}var u=o.exec(t);return u?(i=u[0].charCodeAt(0)!==a,t.substring(e,u.index)):(o.lastIndex=t.length,t.substring(e))
}var r,i,s={},l={},u=[],c=0;for(o.lastIndex=0;(r=n())!==l;){for(var d=[];r!==s&&r!==l;)d.push(r),r=n();(!e||(d=e(d,c++)))&&u.push(d)}return u},n.format=function(t){return t.map(r).join("\n")},n}function $r(t,e){return function(n){return n&&t.hasOwnProperty(n.type)?t[n.type](n):e}}function Fr(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function qr(t,e){fs.hasOwnProperty(t.type)&&fs[t.type](t,e)}function Hr(t,e){qr(t.geometry,e)}function Wr(t,e){for(var n=t.features,r=0,i=n.length;i>r;r++)qr(n[r].geometry,e)}function Vr(t,e){for(var n=t.geometries,r=0,i=n.length;i>r;r++)qr(n[r],e)}function Br(t,e){for(var n=t.coordinates,r=0,i=n.length;i>r;r++)e.apply(null,n[r])}function Yr(t,e){for(var n=t.coordinates,r=0,i=n.length;i>r;r++)for(var o=n[r],s=0,a=o.length;a>s;s++)e.apply(null,o[s])}function Ur(t,e){for(var n=t.coordinates,r=0,i=n.length;i>r;r++)for(var o=n[r][0],s=0,a=o.length;a>s;s++)e.apply(null,o[s])}function Qr(t,e){e.apply(null,t.coordinates)}function Gr(t,e){for(var n=t.coordinates[0],r=0,i=n.length;i>r;r++)e.apply(null,n[r])}function Xr(t){return t.source}function Zr(t){return t.target}function Jr(){function t(t){var e=Math.sin(t*=h)*f,n=Math.sin(h-t)*f,r=n*o+e*d,a=n*s+e*p,l=n*i+e*c;return[Math.atan2(a,r)/hs,Math.atan2(l,Math.sqrt(r*r+a*a))/hs]}var e,n,r,i,o,s,a,l,u,c,d,p,h,f;return t.distance=function(){return null==h&&(f=1/Math.sin(h=Math.acos(Math.max(-1,Math.min(1,i*c+r*u*Math.cos(a-e)))))),h},t.source=function(a){var l=Math.cos(e=a[0]*hs),u=Math.sin(e);return r=Math.cos(n=a[1]*hs),i=Math.sin(n),o=r*l,s=r*u,h=null,t},t.target=function(e){var n=Math.cos(a=e[0]*hs),r=Math.sin(a);return u=Math.cos(l=e[1]*hs),c=Math.sin(l),d=u*n,p=u*r,h=null,t},t}function Kr(t,e){var n=Jr().source(t).target(e);return n.distance(),n}function ti(t){for(var e=0,n=0;;){if(t(e,n))return[e,n];0===e?(e=n+1,n=0):(e-=1,n+=1)}}function ei(t,e,n,r){var i,o,s,a,l,u,c;return i=r[t],o=i[0],s=i[1],i=r[e],a=i[0],l=i[1],i=r[n],u=i[0],c=i[1],(c-s)*(a-o)-(l-s)*(u-o)>0}function ni(t,e,n){return(n[0]-e[0])*(t[1]-e[1])<(n[1]-e[1])*(t[0]-e[0])}function ri(t,e,n,r){var i=t[0],o=e[0],s=n[0],a=r[0],l=t[1],u=e[1],c=n[1],d=r[1],p=i-s,h=o-i,f=a-s,g=l-c,m=u-l,v=d-c,y=(f*g-v*p)/(v*h-f*m);return[i+y*h,l+y*m]}function ii(t,e){var n={list:t.map(function(t,e){return{index:e,x:t[0],y:t[1]}}).sort(function(t,e){return t.y<e.y?-1:t.y>e.y?1:t.x<e.x?-1:t.x>e.x?1:0}),bottomSite:null},r={list:[],leftEnd:null,rightEnd:null,init:function(){r.leftEnd=r.createHalfEdge(null,"l"),r.rightEnd=r.createHalfEdge(null,"l"),r.leftEnd.r=r.rightEnd,r.rightEnd.l=r.leftEnd,r.list.unshift(r.leftEnd,r.rightEnd)},createHalfEdge:function(t,e){return{edge:t,side:e,vertex:null,l:null,r:null}},insert:function(t,e){e.l=t,e.r=t.r,t.r.l=e,t.r=e},leftBound:function(t){var e=r.leftEnd;do e=e.r;while(e!=r.rightEnd&&i.rightOf(e,t));return e=e.l},del:function(t){t.l.r=t.r,t.r.l=t.l,t.edge=null},right:function(t){return t.r},left:function(t){return t.l},leftRegion:function(t){return null==t.edge?n.bottomSite:t.edge.region[t.side]},rightRegion:function(t){return null==t.edge?n.bottomSite:t.edge.region[vs[t.side]]}},i={bisect:function(t,e){var n={region:{l:t,r:e},ep:{l:null,r:null}},r=e.x-t.x,i=e.y-t.y,o=r>0?r:-r,s=i>0?i:-i;return n.c=t.x*r+t.y*i+.5*(r*r+i*i),o>s?(n.a=1,n.b=i/r,n.c/=r):(n.b=1,n.a=r/i,n.c/=i),n},intersect:function(t,e){var n=t.edge,r=e.edge;if(!n||!r||n.region.r==r.region.r)return null;var i=n.a*r.b-n.b*r.a;if(Math.abs(i)<1e-10)return null;var o,s,a=(n.c*r.b-r.c*n.b)/i,l=(r.c*n.a-n.c*r.a)/i,u=n.region.r,c=r.region.r;u.y<c.y||u.y==c.y&&u.x<c.x?(o=t,s=n):(o=e,s=r);var d=a>=s.region.r.x;return d&&"l"===o.side||!d&&"r"===o.side?null:{x:a,y:l}},rightOf:function(t,e){var n=t.edge,r=n.region.r,i=e.x>r.x;if(i&&"l"===t.side)return 1;if(!i&&"r"===t.side)return 0;if(1===n.a){var o=e.y-r.y,s=e.x-r.x,a=0,l=0;if(!i&&n.b<0||i&&n.b>=0?l=a=o>=n.b*s:(l=e.x+e.y*n.b>n.c,n.b<0&&(l=!l),l||(a=1)),!a){var u=r.x-n.region.l.x;l=n.b*(s*s-o*o)<u*o*(1+2*s/u+n.b*n.b),n.b<0&&(l=!l)}}else{var c=n.c-n.a*e.x,d=e.y-c,p=e.x-r.x,h=c-r.y;l=d*d>p*p+h*h}return"l"===t.side?l:!l},endPoint:function(t,n,r){t.ep[n]=r,t.ep[vs[n]]&&e(t)},distance:function(t,e){var n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)}},o={list:[],insert:function(t,e,n){t.vertex=e,t.ystar=e.y+n;for(var r=0,i=o.list,s=i.length;s>r;r++){var a=i[r];if(!(t.ystar>a.ystar||t.ystar==a.ystar&&e.x>a.vertex.x))break}i.splice(r,0,t)},del:function(t){for(var e=0,n=o.list,r=n.length;r>e&&n[e]!=t;++e);n.splice(e,1)},empty:function(){return 0===o.list.length},nextEvent:function(t){for(var e=0,n=o.list,r=n.length;r>e;++e)if(n[e]==t)return n[e+1];return null},min:function(){var t=o.list[0];return{x:t.vertex.x,y:t.ystar}},extractMin:function(){return o.list.shift()}};r.init(),n.bottomSite=n.list.shift();for(var s,a,l,u,c,d,p,h,f,g,m,v,y,b=n.list.shift();;)if(o.empty()||(s=o.min()),b&&(o.empty()||b.y<s.y||b.y==s.y&&b.x<s.x))a=r.leftBound(b),l=r.right(a),p=r.rightRegion(a),v=i.bisect(p,b),d=r.createHalfEdge(v,"l"),r.insert(a,d),g=i.intersect(a,d),g&&(o.del(a),o.insert(a,g,i.distance(g,b))),a=d,d=r.createHalfEdge(v,"r"),r.insert(a,d),g=i.intersect(d,l),g&&o.insert(d,g,i.distance(g,b)),b=n.list.shift();else{if(o.empty())break;a=o.extractMin(),u=r.left(a),l=r.right(a),c=r.right(l),p=r.leftRegion(a),h=r.rightRegion(l),m=a.vertex,i.endPoint(a.edge,a.side,m),i.endPoint(l.edge,l.side,m),r.del(a),o.del(l),r.del(l),y="l",p.y>h.y&&(f=p,p=h,h=f,y="r"),v=i.bisect(p,h),d=r.createHalfEdge(v,y),r.insert(u,d),i.endPoint(v,vs[y],m),g=i.intersect(u,d),g&&(o.del(u),o.insert(u,g,i.distance(g,p))),g=i.intersect(d,c),g&&o.insert(d,g,i.distance(g,p))}for(a=r.right(r.leftEnd);a!=r.rightEnd;a=r.right(a))e(a.edge)}function oi(){return{leaf:!0,nodes:[],point:null}}function si(t,e,n,r,i,o){if(!t(e,n,r,i,o)){var s=.5*(n+i),a=.5*(r+o),l=e.nodes;l[0]&&si(t,l[0],n,r,s,a),l[1]&&si(t,l[1],s,r,i,a),l[2]&&si(t,l[2],n,a,s,o),l[3]&&si(t,l[3],s,a,i,o)}}function ai(t){return{x:t[0],y:t[1]}}function li(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function ui(t){return t.substring(0,3)}function ci(t,e,n,r){for(var i,o,s=0,a=e.length,l=n.length;a>s;){if(r>=l)return-1;if(i=e.charCodeAt(s++),37==i){if(o=$s[e.charAt(s++)],!o||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function di(t){return new RegExp("^(?:"+t.map(d3.requote).join("|")+")","i")}function pi(t){for(var e=new r,n=-1,i=t.length;++n<i;)e.set(t[n].toLowerCase(),n);return e}function hi(t,e,n){Ls.lastIndex=0;var r=Ls.exec(e.substring(n));return r?n+=r[0].length:-1}function fi(t,e,n){Ps.lastIndex=0;var r=Ps.exec(e.substring(n));return r?n+=r[0].length:-1}function gi(t,e,n){Os.lastIndex=0;var r=Os.exec(e.substring(n));return r?(t.m=Is.get(r[0].toLowerCase()),n+=r[0].length):-1}function mi(t,e,n){Es.lastIndex=0;var r=Es.exec(e.substring(n));return r?(t.m=As.get(r[0].toLowerCase()),n+=r[0].length):-1}function vi(t,e,n){return ci(t,Rs.c.toString(),e,n)}function yi(t,e,n){return ci(t,Rs.x.toString(),e,n)}function bi(t,e,n){return ci(t,Rs.X.toString(),e,n)}function _i(t,e,n){Fs.lastIndex=0;var r=Fs.exec(e.substring(n,n+4));return r?(t.y=+r[0],n+=r[0].length):-1}function wi(t,e,n){Fs.lastIndex=0;var r=Fs.exec(e.substring(n,n+2));return r?(t.y=xi(+r[0]),n+=r[0].length):-1}function xi(t){return t+(t>68?1900:2e3)}function ki(t,e,n){Fs.lastIndex=0;var r=Fs.exec(e.substring(n,n+2));return r?(t.m=r[0]-1,n+=r[0].length):-1}function Ci(t,e,n){Fs.lastIndex=0;var r=Fs.exec(e.substring(n,n+2));return r?(t.d=+r[0],n+=r[0].length):-1}function ji(t,e,n){Fs.lastIndex=0;var r=Fs.exec(e.substring(n,n+2));return r?(t.H=+r[0],n+=r[0].length):-1}function Mi(t,e,n){Fs.lastIndex=0;var r=Fs.exec(e.substring(n,n+2));return r?(t.M=+r[0],n+=r[0].length):-1}function Si(t,e,n){Fs.lastIndex=0;var r=Fs.exec(e.substring(n,n+2));return r?(t.S=+r[0],n+=r[0].length):-1}function Di(t,e,n){Fs.lastIndex=0;var r=Fs.exec(e.substring(n,n+3));return r?(t.L=+r[0],n+=r[0].length):-1}function zi(t,e,n){var r=qs.get(e.substring(n,n+=2).toLowerCase());return null==r?-1:(t.p=r,n)}function Ni(t){var e=t.getTimezoneOffset(),n=e>0?"-":"+",r=~~(Math.abs(e)/60),i=Math.abs(e)%60;return n+Ds(r)+Ds(i)}function Ti(t){return t.toISOString()}function Pi(t,e,n){function r(e){var n=t(e),r=o(n,1);return r-e>e-n?n:r}function i(n){return e(n=t(new ys(n-1)),1),n}function o(t,n){return e(t=new ys(+t),n),t}function s(t,r,o){var s=i(t),a=[];if(o>1)for(;r>s;)n(s)%o||a.push(new Date(+s)),e(s,1);else for(;r>s;)a.push(new Date(+s)),e(s,1);return a}function a(t,e,n){try{ys=li;var r=new li;return r._=t,s(r,e,n)}finally{ys=Date}}t.floor=t,t.round=r,t.ceil=i,t.offset=o,t.range=s;var l=t.utc=Li(t);return l.floor=l,l.round=Li(r),l.ceil=Li(i),l.offset=Li(o),l.range=a,t}function Li(t){return function(e,n){try{ys=li;var r=new li;return r._=e,t(r,n)._}finally{ys=Date}}}function Ei(t,e,n){function r(e){return t(e)}return r.invert=function(e){return Oi(t.invert(e))},r.domain=function(e){return arguments.length?(t.domain(e),r):t.domain().map(Oi)},r.nice=function(t){return r.domain(Le(r.domain(),function(){return t}))},r.ticks=function(n,i){var o=Ai(r.domain());if("function"!=typeof n){var s=o[1]-o[0],a=s/n,l=d3.bisect(Ws,a);if(l==Ws.length)return e.year(o,n);if(!l)return t.ticks(n).map(Oi);Math.log(a/Ws[l-1])<Math.log(Ws[l]/a)&&--l,n=e[l],i=n[1],n=n[0].range}return n(o[0],new Date(+o[1]+1),i)},r.tickFormat=function(){return n},r.copy=function(){return Ei(t.copy(),e,n)},d3.rebind(r,t,"range","rangeRound","interpolate","clamp")}function Ai(t){var e=t[0],n=t[t.length-1];return n>e?[e,n]:[n,e]}function Oi(t){return new Date(t)}function Ii(t){return function(e){for(var n=t.length-1,r=t[n];!r[1](e);)r=t[--n];return r[0](e)}}function Ri(t){var e=new Date(t,0,1);return e.setFullYear(t),e}function $i(t){var e=t.getFullYear(),n=Ri(e),r=Ri(e+1);return e+(t-n)/(r-n)}function Fi(t){var e=new Date(Date.UTC(t,0,1));return e.setUTCFullYear(t),e}function qi(t){var e=t.getUTCFullYear(),n=Fi(e),r=Fi(e+1);return e+(t-n)/(r-n)}Date.now||(Date.now=function(){return+new Date});try{document.createElement("div").style.setProperty("opacity",0,"")}catch(Hi){var Wi=CSSStyleDeclaration.prototype,Vi=Wi.setProperty;Wi.setProperty=function(t,e,n){Vi.call(this,t,e+"",n)}}d3={version:"2.10.3"};var Bi=n;try{Bi(document.documentElement.childNodes)[0].nodeType}catch(Yi){Bi=e}var Ui=[].__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]};d3.map=function(t){var e=new r;for(var n in t)e.set(n,t[n]);return e},t(r,{has:function(t){return Qi+t in this},get:function(t){return this[Qi+t]},set:function(t,e){return this[Qi+t]=e},remove:function(t){return t=Qi+t,t in this&&delete this[t]},keys:function(){var t=[];return this.forEach(function(e){t.push(e)}),t},values:function(){var t=[];return this.forEach(function(e,n){t.push(n)}),t},entries:function(){var t=[];return this.forEach(function(e,n){t.push({key:e,value:n})}),t},forEach:function(t){for(var e in this)e.charCodeAt(0)===Gi&&t.call(this,e.substring(1),this[e])}});var Qi="\x00",Gi=Qi.charCodeAt(0);d3.functor=a,d3.rebind=function(t,e){for(var n,r=1,i=arguments.length;++r<i;)t[n=arguments[r]]=l(t,e,e[n]);return t},d3.ascending=function(t,e){return e>t?-1:t>e?1:t>=e?0:0/0},d3.descending=function(t,e){return t>e?-1:e>t?1:e>=t?0:0/0},d3.mean=function(t,e){var n,r=t.length,i=0,o=-1,s=0;if(1===arguments.length)for(;++o<r;)u(n=t[o])&&(i+=(n-i)/++s);else for(;++o<r;)u(n=e.call(t,t[o],o))&&(i+=(n-i)/++s);return s?i:void 0},d3.median=function(t,e){return arguments.length>1&&(t=t.map(e)),t=t.filter(u),t.length?d3.quantile(t.sort(d3.ascending),.5):void 0},d3.min=function(t,e){var n,r,i=-1,o=t.length;if(1===arguments.length){for(;++i<o&&(null==(n=t[i])||n!=n);)n=void 0;for(;++i<o;)null!=(r=t[i])&&n>r&&(n=r)}else{for(;++i<o&&(null==(n=e.call(t,t[i],i))||n!=n);)n=void 0;for(;++i<o;)null!=(r=e.call(t,t[i],i))&&n>r&&(n=r)}return n},d3.max=function(t,e){var n,r,i=-1,o=t.length;if(1===arguments.length){for(;++i<o&&(null==(n=t[i])||n!=n);)n=void 0;for(;++i<o;)null!=(r=t[i])&&r>n&&(n=r)}else{for(;++i<o&&(null==(n=e.call(t,t[i],i))||n!=n);)n=void 0;for(;++i<o;)null!=(r=e.call(t,t[i],i))&&r>n&&(n=r)}return n},d3.extent=function(t,e){var n,r,i,o=-1,s=t.length;if(1===arguments.length){for(;++o<s&&(null==(n=i=t[o])||n!=n);)n=i=void 0;for(;++o<s;)null!=(r=t[o])&&(n>r&&(n=r),r>i&&(i=r))}else{for(;++o<s&&(null==(n=i=e.call(t,t[o],o))||n!=n);)n=void 0;for(;++o<s;)null!=(r=e.call(t,t[o],o))&&(n>r&&(n=r),r>i&&(i=r))}return[n,i]},d3.random={normal:function(t,e){var n=arguments.length;return 2>n&&(e=1),1>n&&(t=0),function(){var n,r,i;do n=2*Math.random()-1,r=2*Math.random()-1,i=n*n+r*r;while(!i||i>1);return t+e*n*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(t,e){var n=arguments.length;2>n&&(e=1),1>n&&(t=0);var r=d3.random.normal();return function(){return Math.exp(t+e*r())}},irwinHall:function(t){return function(){for(var e=0,n=0;t>n;n++)e+=Math.random();return e/t}}},d3.sum=function(t,e){var n,r=0,i=t.length,o=-1;if(1===arguments.length)for(;++o<i;)isNaN(n=+t[o])||(r+=n);else for(;++o<i;)isNaN(n=+e.call(t,t[o],o))||(r+=n);return r},d3.quantile=function(t,e){var n=(t.length-1)*e+1,r=Math.floor(n),i=t[r-1],o=n-r;return o?i+o*(t[r]-i):i},d3.transpose=function(t){return d3.zip.apply(d3,t)},d3.zip=function(){if(!(r=arguments.length))return[];for(var t=-1,e=d3.min(arguments,c),n=new Array(e);++t<e;)for(var r,i=-1,o=n[t]=new Array(r);++i<r;)o[i]=arguments[i][t];return n},d3.bisector=function(t){return{left:function(e,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=e.length);i>r;){var o=r+i>>>1;t.call(e,e[o],o)<n?r=o+1:i=o}return r},right:function(e,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=e.length);i>r;){var o=r+i>>>1;n<t.call(e,e[o],o)?i=o:r=o+1}return r}}};var Xi=d3.bisector(function(t){return t});d3.bisectLeft=Xi.left,d3.bisect=d3.bisectRight=Xi.right,d3.first=function(t,e){var n,r=0,i=t.length,o=t[0];for(1===arguments.length&&(e=d3.ascending);++r<i;)e.call(t,o,n=t[r])>0&&(o=n);return o},d3.last=function(t,e){var n,r=0,i=t.length,o=t[0];for(1===arguments.length&&(e=d3.ascending);++r<i;)e.call(t,o,n=t[r])<=0&&(o=n);return o},d3.nest=function(){function t(e,a){if(a>=s.length)return i?i.call(o,e):n?e.sort(n):e;for(var l,u,c,d=-1,p=e.length,h=s[a++],f=new r,g={};++d<p;)(c=f.get(l=h(u=e[d])))?c.push(u):f.set(l,[u]);return f.forEach(function(e,n){g[e]=t(n,a)}),g}function e(t,n){if(n>=s.length)return t;var r,i=[],o=a[n++];for(r in t)i.push({key:r,values:e(t[r],n)});return o&&i.sort(function(t,e){return o(t.key,e.key)}),i}var n,i,o={},s=[],a=[];return o.map=function(e){return t(e,0)},o.entries=function(n){return e(t(n,0),0)},o.key=function(t){return s.push(t),o},o.sortKeys=function(t){return a[s.length-1]=t,o},o.sortValues=function(t){return n=t,o},o.rollup=function(t){return i=t,o},o},d3.keys=function(t){var e=[];for(var n in t)e.push(n);return e},d3.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},d3.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},d3.permute=function(t,e){for(var n=[],r=-1,i=e.length;++r<i;)n[r]=t[e[r]];return n},d3.merge=function(t){return Array.prototype.concat.apply([],t)},d3.split=function(t,e){var n,r=[],i=[],o=-1,s=t.length;for(arguments.length<2&&(e=d);++o<s;)e.call(i,n=t[o],o)?i=[]:(i.length||r.push(i),i.push(n));return r},d3.range=function(t,e,n){if(arguments.length<3&&(n=1,arguments.length<2&&(e=t,t=0)),(e-t)/n===1/0)throw new Error("infinite range");var r,i=[],o=h(Math.abs(n)),s=-1;if(t*=o,e*=o,n*=o,0>n)for(;(r=t+n*++s)>e;)i.push(r/o);else for(;(r=t+n*++s)<e;)i.push(r/o);return i},d3.requote=function(t){return t.replace(Zi,"\\$&")};var Zi=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;d3.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)},d3.xhr=function(t,e,n){var r=new XMLHttpRequest;arguments.length<3?(n=e,e=null):e&&r.overrideMimeType&&r.overrideMimeType(e),r.open("GET",t,!0),e&&r.setRequestHeader("Accept",e),r.onreadystatechange=function(){if(4===r.readyState){var t=r.status;n(!t&&r.response||t>=200&&300>t||304===t?r:null)}},r.send(null)},d3.text=function(t,e,n){function r(t){n(t&&t.responseText)}arguments.length<3&&(n=e,e=null),d3.xhr(t,e,r)},d3.json=function(t,e){d3.text(t,"application/json",function(t){e(t?JSON.parse(t):null)})},d3.html=function(t,e){d3.text(t,"text/html",function(t){if(null!=t){var n=document.createRange();n.selectNode(document.body),t=n.createContextualFragment(t)}e(t)})},d3.xml=function(t,e,n){function r(t){n(t&&t.responseXML)}arguments.length<3&&(n=e,e=null),d3.xhr(t,e,r)};var Ji={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};d3.ns={prefix:Ji,qualify:function(t){var e=t.indexOf(":"),n=t;return e>=0&&(n=t.substring(0,e),t=t.substring(e+1)),Ji.hasOwnProperty(n)?{space:Ji[n],local:t}:t}},d3.dispatch=function(){for(var t=new f,e=-1,n=arguments.length;++e<n;)t[arguments[e]]=g(t);return t},f.prototype.on=function(t,e){var n=t.indexOf("."),r="";return n>0&&(r=t.substring(n+1),t=t.substring(0,n)),arguments.length<2?this[t].on(r):this[t].on(r,e)},d3.format=function(t){var e=Ki.exec(t),n=e[1]||" ",r=e[3]||"",i=e[5],o=+e[6],s=e[7],a=e[8],l=e[9],u=1,c="",d=!1;switch(a&&(a=+a.substring(1)),i&&(n="0",s&&(o-=Math.floor((o-1)/4))),l){case"n":s=!0,l="g";break;case"%":u=100,c="%",l="f";break;case"p":u=100,c="%",l="r";break;case"d":d=!0,a=0;break;case"s":u=-1,l="r"}return"r"==l&&!a&&(l="g"),l=to.get(l)||v,function(t){if(d&&t%1)return"";var e=0>t&&(t=-t)?"-":r;if(0>u){var p=d3.formatPrefix(t,a);t=p.scale(t),c=p.symbol}else t*=u;if(t=l(t,a),i){var h=t.length+e.length;o>h&&(t=new Array(o-h+1).join(n)+t),s&&(t=y(t)),t=e+t}else{s&&(t=y(t)),t=e+t;var h=t.length;o>h&&(t=new Array(o-h+1).join(n)+t)}return t+c}};var Ki=/(?:([^{])?([<>=^]))?([+\- ])?(#)?(0)?([0-9]+)?(,)?(\.[0-9]+)?([a-zA-Z%])?/,to=d3.map({g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return d3.round(t,e=m(t,e)).toFixed(Math.max(0,Math.min(20,e)))}}),eo=["y","z","a","f","p","n","μ","m","","k","M","G","T","P","E","Z","Y"].map(b);d3.formatPrefix=function(t,e){var n=0;return t&&(0>t&&(t*=-1),e&&(t=d3.round(t,m(t,e))),n=1+Math.floor(1e-12+Math.log(t)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((0>=n?n+1:n-1)/3)))),eo[8+n/3]};var no=C(2),ro=C(3),io=function(){return k},oo=d3.map({linear:io,poly:C,quad:function(){return no},cubic:function(){return ro},sin:function(){return j},exp:function(){return M},circle:function(){return S},elastic:D,back:z,bounce:function(){return N}}),so=d3.map({"in":k,out:w,"in-out":x,"out-in":function(t){return x(w(t))}});d3.ease=function(t){var e=t.indexOf("-"),n=e>=0?t.substring(0,e):t,r=e>=0?t.substring(e+1):"in";return n=oo.get(n)||io,r=so.get(r)||k,_(r(n.apply(null,Array.prototype.slice.call(arguments,1))))},d3.event=null,d3.transform=function(t){var e=document.createElementNS(d3.ns.prefix.svg,"g");return(d3.transform=function(t){e.setAttribute("transform",t);var n=e.transform.baseVal.consolidate();return new E(n?n.matrix:lo)})(t)},E.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var ao=180/Math.PI,lo={a:1,b:0,c:0,d:1,e:0,f:0};d3.interpolate=function(t,e){for(var n,r=d3.interpolators.length;--r>=0&&!(n=d3.interpolators[r](t,e)););return n},d3.interpolateNumber=function(t,e){return e-=t,function(n){return t+e*n}},d3.interpolateRound=function(t,e){return e-=t,function(n){return Math.round(t+e*n)}},d3.interpolateString=function(t,e){var n,r,i,o,s,a=0,l=0,u=[],c=[];for(uo.lastIndex=0,r=0;n=uo.exec(e);++r)n.index&&u.push(e.substring(a,l=n.index)),c.push({i:u.length,x:n[0]}),u.push(null),a=uo.lastIndex;for(a<e.length&&u.push(e.substring(a)),r=0,o=c.length;(n=uo.exec(t))&&o>r;++r)if(s=c[r],s.x==n[0]){if(s.i)if(null==u[s.i+1])for(u[s.i-1]+=s.x,u.splice(s.i,1),i=r+1;o>i;++i)c[i].i--;else for(u[s.i-1]+=s.x+u[s.i+1],u.splice(s.i,2),i=r+1;o>i;++i)c[i].i-=2;else if(null==u[s.i+1])u[s.i]=s.x;else for(u[s.i]=s.x+u[s.i+1],u.splice(s.i+1,1),i=r+1;o>i;++i)c[i].i--;c.splice(r,1),o--,r--}else s.x=d3.interpolateNumber(parseFloat(n[0]),parseFloat(s.x));for(;o>r;)s=c.pop(),null==u[s.i+1]?u[s.i]=s.x:(u[s.i]=s.x+u[s.i+1],u.splice(s.i+1,1)),o--;return 1===u.length?null==u[0]?c[0].x:function(){return e}:function(t){for(r=0;o>r;++r)u[(s=c[r]).i]=s.x(t);return u.join("")}},d3.interpolateTransform=function(t,e){var n,r=[],i=[],o=d3.transform(t),s=d3.transform(e),a=o.translate,l=s.translate,u=o.rotate,c=s.rotate,d=o.skew,p=s.skew,h=o.scale,f=s.scale;return a[0]!=l[0]||a[1]!=l[1]?(r.push("translate(",null,",",null,")"),i.push({i:1,x:d3.interpolateNumber(a[0],l[0])},{i:3,x:d3.interpolateNumber(a[1],l[1])})):r.push(l[0]||l[1]?"translate("+l+")":""),u!=c?(u-c>180?c+=360:c-u>180&&(u+=360),i.push({i:r.push(r.pop()+"rotate(",null,")")-2,x:d3.interpolateNumber(u,c)})):c&&r.push(r.pop()+"rotate("+c+")"),d!=p?i.push({i:r.push(r.pop()+"skewX(",null,")")-2,x:d3.interpolateNumber(d,p)}):p&&r.push(r.pop()+"skewX("+p+")"),h[0]!=f[0]||h[1]!=f[1]?(n=r.push(r.pop()+"scale(",null,",",null,")"),i.push({i:n-4,x:d3.interpolateNumber(h[0],f[0])},{i:n-2,x:d3.interpolateNumber(h[1],f[1])})):(1!=f[0]||1!=f[1])&&r.push(r.pop()+"scale("+f+")"),n=i.length,function(t){for(var e,o=-1;++o<n;)r[(e=i[o]).i]=e.x(t);return r.join("")}},d3.interpolateRgb=function(t,e){t=d3.rgb(t),e=d3.rgb(e);var n=t.r,r=t.g,i=t.b,o=e.r-n,s=e.g-r,a=e.b-i;return function(t){return"#"+V(Math.round(n+o*t))+V(Math.round(r+s*t))+V(Math.round(i+a*t))}},d3.interpolateHsl=function(t,e){t=d3.hsl(t),e=d3.hsl(e);var n=t.h,r=t.s,i=t.l,o=e.h-n,s=e.s-r,a=e.l-i;return o>180?o-=360:-180>o&&(o+=360),function(t){return J(n+o*t,r+s*t,i+a*t)+""}},d3.interpolateLab=function(t,e){t=d3.lab(t),e=d3.lab(e);var n=t.l,r=t.a,i=t.b,o=e.l-n,s=e.a-r,a=e.b-i;return function(t){return ie(n+o*t,r+s*t,i+a*t)+""}},d3.interpolateHcl=function(t,e){t=d3.hcl(t),e=d3.hcl(e);var n=t.h,r=t.c,i=t.l,o=e.h-n,s=e.c-r,a=e.l-i;return o>180?o-=360:-180>o&&(o+=360),function(t){return ee(n+o*t,r+s*t,i+a*t)+""}},d3.interpolateArray=function(t,e){var n,r=[],i=[],o=t.length,s=e.length,a=Math.min(t.length,e.length);for(n=0;a>n;++n)r.push(d3.interpolate(t[n],e[n]));for(;o>n;++n)i[n]=t[n];for(;s>n;++n)i[n]=e[n];return function(t){for(n=0;a>n;++n)i[n]=r[n](t);return i}},d3.interpolateObject=function(t,e){var n,r={},i={};for(n in t)n in e?r[n]=R(n)(t[n],e[n]):i[n]=t[n];for(n in e)n in t||(i[n]=e[n]);return function(t){for(n in r)i[n]=r[n](t);return i}};var uo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;d3.interpolators=[d3.interpolateObject,function(t,e){return e instanceof Array&&d3.interpolateArray(t,e)},function(t,e){return("string"==typeof t||"string"==typeof e)&&d3.interpolateString(t+"",e+"")},function(t,e){return("string"==typeof e?po.has(e)||/^(#|rgb\(|hsl\()/.test(e):e instanceof q)&&d3.interpolateRgb(t,e)},function(t,e){return!isNaN(t=+t)&&!isNaN(e=+e)&&d3.interpolateNumber(t,e)}],q.prototype.toString=function(){return this.rgb()+""},d3.rgb=function(t,e,n){return 1===arguments.length?t instanceof W?H(t.r,t.g,t.b):B(""+t,H,J):H(~~t,~~e,~~n)};var co=W.prototype=new q;co.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,r=this.b,i=30;return e||n||r?(e&&i>e&&(e=i),n&&i>n&&(n=i),r&&i>r&&(r=i),H(Math.min(255,Math.floor(e/t)),Math.min(255,Math.floor(n/t)),Math.min(255,Math.floor(r/t)))):H(i,i,i)},co.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),H(Math.floor(t*this.r),Math.floor(t*this.g),Math.floor(t*this.b))},co.hsl=function(){return Y(this.r,this.g,this.b)},co.toString=function(){return"#"+V(this.r)+V(this.g)+V(this.b)};var po=d3.map({aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"});po.forEach(function(t,e){po.set(t,B(e,H,J))}),d3.hsl=function(t,e,n){return 1===arguments.length?t instanceof Z?X(t.h,t.s,t.l):B(""+t,Y,X):X(+t,+e,+n)};var ho=Z.prototype=new q;ho.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),X(this.h,this.s,this.l/t)},ho.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),X(this.h,this.s,t*this.l)},ho.rgb=function(){return J(this.h,this.s,this.l)},d3.hcl=function(t,e,n){return 1===arguments.length?t instanceof te?K(t.h,t.c,t.l):t instanceof re?oe(t.l,t.a,t.b):oe((t=U((t=d3.rgb(t)).r,t.g,t.b)).l,t.a,t.b):K(+t,+e,+n)};var fo=te.prototype=new q;fo.brighter=function(t){return K(this.h,this.c,Math.min(100,this.l+go*(arguments.length?t:1)))},fo.darker=function(t){return K(this.h,this.c,Math.max(0,this.l-go*(arguments.length?t:1)))},fo.rgb=function(){return ee(this.h,this.c,this.l).rgb()},d3.lab=function(t,e,n){return 1===arguments.length?t instanceof re?ne(t.l,t.a,t.b):t instanceof te?ee(t.l,t.c,t.h):U((t=d3.rgb(t)).r,t.g,t.b):ne(+t,+e,+n)};var go=18,mo=.95047,vo=1,yo=1.08883,bo=re.prototype=new q;bo.brighter=function(t){return ne(Math.min(100,this.l+go*(arguments.length?t:1)),this.a,this.b)},bo.darker=function(t){return ne(Math.max(0,this.l-go*(arguments.length?t:1)),this.a,this.b)},bo.rgb=function(){return ie(this.l,this.a,this.b)};var _o=function(t,e){return e.querySelector(t)},wo=function(t,e){return e.querySelectorAll(t)},xo=document.documentElement,ko=xo.matchesSelector||xo.webkitMatchesSelector||xo.mozMatchesSelector||xo.msMatchesSelector||xo.oMatchesSelector,Co=function(t,e){return ko.call(t,e)};"function"==typeof Sizzle&&(_o=function(t,e){return Sizzle(t,e)[0]||null},wo=function(t,e){return Sizzle.uniqueSort(Sizzle(t,e))},Co=Sizzle.matchesSelector);var jo=[];d3.selection=function(){return Mo},d3.selection.prototype=jo,jo.select=function(t){var e,n,r,i,o=[];"function"!=typeof t&&(t=ce(t));for(var s=-1,a=this.length;++s<a;){o.push(e=[]),e.parentNode=(r=this[s]).parentNode;for(var l=-1,u=r.length;++l<u;)(i=r[l])?(e.push(n=t.call(i,i.__data__,l)),n&&"__data__"in i&&(n.__data__=i.__data__)):e.push(null)}return ue(o)},jo.selectAll=function(t){var e,n,r=[];"function"!=typeof t&&(t=de(t));for(var i=-1,o=this.length;++i<o;)for(var s=this[i],a=-1,l=s.length;++a<l;)(n=s[a])&&(r.push(e=Bi(t.call(n,n.__data__,a))),e.parentNode=n);return ue(r)},jo.attr=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node();return t=d3.ns.qualify(t),t.local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}for(e in t)this.each(pe(e,t[e]));return this}return this.each(pe(t,e))},jo.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node(),r=(t=t.trim().split(/^|\s+/g)).length,i=-1;if(e=n.classList){for(;++i<r;)if(!e.contains(t[i]))return!1}else for(e=n.className,null!=e.baseVal&&(e=e.baseVal);++i<r;)if(!he(t[i]).test(e))return!1;return!0}for(e in t)this.each(fe(e,t[e]));return this}return this.each(fe(t,e))},jo.style=function(t,e,n){var r=arguments.length;if(3>r){if("string"!=typeof t){2>r&&(e="");for(n in t)this.each(me(n,t[n],e));return this}if(2>r)return window.getComputedStyle(this.node(),null).getPropertyValue(t);n=""}return this.each(me(t,e,n))},jo.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(ve(e,t[e]));return this}return this.each(ve(t,e))},jo.text=function(t){return arguments.length<1?this.node().textContent:this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t})},jo.html=function(t){return arguments.length<1?this.node().innerHTML:this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t})},jo.append=function(t){function e(){return this.appendChild(document.createElementNS(this.namespaceURI,t))}function n(){return this.appendChild(document.createElementNS(t.space,t.local))}return t=d3.ns.qualify(t),this.select(t.local?n:e)},jo.insert=function(t,e){function n(){return this.insertBefore(document.createElementNS(this.namespaceURI,t),_o(e,this))}function r(){return this.insertBefore(document.createElementNS(t.space,t.local),_o(e,this))}return t=d3.ns.qualify(t),this.select(t.local?r:n)},jo.remove=function(){return this.each(function(){var t=this.parentNode;t&&t.removeChild(this)})},jo.data=function(t,e){function n(t,n){var i,o,s,a=t.length,d=n.length,p=Math.min(a,d),h=Math.max(a,d),f=[],g=[],m=[];if(e){var v,y=new r,b=[],_=n.length;for(i=-1;++i<a;)v=e.call(o=t[i],o.__data__,i),y.has(v)?m[_++]=o:y.set(v,o),b.push(v);for(i=-1;++i<d;)v=e.call(n,s=n[i],i),y.has(v)?(f[i]=o=y.get(v),o.__data__=s,g[i]=m[i]=null):(g[i]=ye(s),f[i]=m[i]=null),y.remove(v);for(i=-1;++i<a;)y.has(b[i])&&(m[i]=t[i])}else{for(i=-1;++i<p;)o=t[i],s=n[i],o?(o.__data__=s,f[i]=o,g[i]=m[i]=null):(g[i]=ye(s),f[i]=m[i]=null);for(;d>i;++i)g[i]=ye(n[i]),f[i]=m[i]=null;for(;h>i;++i)m[i]=t[i],g[i]=f[i]=null}g.update=f,g.parentNode=f.parentNode=m.parentNode=t.parentNode,l.push(g),u.push(f),c.push(m)}var i,o,s=-1,a=this.length;if(!arguments.length){for(t=new Array(a=(i=this[0]).length);++s<a;)(o=i[s])&&(t[s]=o.__data__);return t}var l=ke([]),u=ue([]),c=ue([]);if("function"==typeof t)for(;++s<a;)n(i=this[s],t.call(i,i.parentNode.__data__,s));else for(;++s<a;)n(i=this[s],t);
return u.enter=function(){return l},u.exit=function(){return c},u},jo.datum=jo.map=function(t){return arguments.length<1?this.property("__data__"):this.property("__data__",t)},jo.filter=function(t){var e,n,r,i=[];"function"!=typeof t&&(t=be(t));for(var o=0,s=this.length;s>o;o++){i.push(e=[]),e.parentNode=(n=this[o]).parentNode;for(var a=0,l=n.length;l>a;a++)(r=n[a])&&t.call(r,r.__data__,a)&&e.push(r)}return ue(i)},jo.order=function(){for(var t=-1,e=this.length;++t<e;)for(var n,r=this[t],i=r.length-1,o=r[i];--i>=0;)(n=r[i])&&(o&&o!==n.nextSibling&&o.parentNode.insertBefore(n,o),o=n);return this},jo.sort=function(t){t=_e.apply(this,arguments);for(var e=-1,n=this.length;++e<n;)this[e].sort(t);return this.order()},jo.on=function(t,e,n){var r=arguments.length;if(3>r){if("string"!=typeof t){2>r&&(e=!1);for(n in t)this.each(we(n,t[n],e));return this}if(2>r)return(r=this.node()["__on"+t])&&r._;n=!1}return this.each(we(t,e,n))},jo.each=function(t){return xe(this,function(e,n,r){t.call(e,e.__data__,n,r)})},jo.call=function(t){return t.apply(this,(arguments[0]=this,arguments)),this},jo.empty=function(){return!this.node()},jo.node=function(){for(var t=0,e=this.length;e>t;t++)for(var n=this[t],r=0,i=n.length;i>r;r++){var o=n[r];if(o)return o}return null},jo.transition=function(){for(var t,e,n=[],r=-1,i=this.length;++r<i;){n.push(t=[]);for(var o=this[r],s=-1,a=o.length;++s<a;)t.push((e=o[s])?{node:e,delay:Eo,duration:Ao}:null)}return Ce(n,No||++zo,Date.now())};var Mo=ue([[document]]);Mo[0].parentNode=xo,d3.select=function(t){return"string"==typeof t?Mo.select(t):ue([[t]])},d3.selectAll=function(t){return"string"==typeof t?Mo.selectAll(t):ue([Bi(t)])};var So=[];d3.selection.enter=ke,d3.selection.enter.prototype=So,So.append=jo.append,So.insert=jo.insert,So.empty=jo.empty,So.node=jo.node,So.select=function(t){for(var e,n,r,i,o,s=[],a=-1,l=this.length;++a<l;){r=(i=this[a]).update,s.push(e=[]),e.parentNode=i.parentNode;for(var u=-1,c=i.length;++u<c;)(o=i[u])?(e.push(r[u]=n=t.call(i.parentNode,o.__data__,u)),n.__data__=o.__data__):e.push(null)}return ue(s)};var Do=[],zo=0,No=0,To=0,Po=250,Lo=d3.ease("cubic-in-out"),Eo=To,Ao=Po,Oo=Lo;Do.call=jo.call,d3.transition=function(t){return arguments.length?No?t.transition():t:Mo.transition()},d3.transition.prototype=Do,Do.select=function(t){var e,n,r,i=[];"function"!=typeof t&&(t=ce(t));for(var o=-1,s=this.length;++o<s;){i.push(e=[]);for(var a=this[o],l=-1,u=a.length;++l<u;)(r=a[l])&&(n=t.call(r.node,r.node.__data__,l))?("__data__"in r.node&&(n.__data__=r.node.__data__),e.push({node:n,delay:r.delay,duration:r.duration})):e.push(null)}return Ce(i,this.id,this.time).ease(this.ease())},Do.selectAll=function(t){var e,n,r,i=[];"function"!=typeof t&&(t=de(t));for(var o=-1,s=this.length;++o<s;)for(var a=this[o],l=-1,u=a.length;++l<u;)if(r=a[l]){n=t.call(r.node,r.node.__data__,l),i.push(e=[]);for(var c=-1,d=n.length;++c<d;)e.push({node:n[c],delay:r.delay,duration:r.duration})}return Ce(i,this.id,this.time).ease(this.ease())},Do.filter=function(t){var e,n,r,i=[];"function"!=typeof t&&(t=be(t));for(var o=0,s=this.length;s>o;o++){i.push(e=[]);for(var n=this[o],a=0,l=n.length;l>a;a++)(r=n[a])&&t.call(r.node,r.node.__data__,a)&&e.push(r)}return Ce(i,this.id,this.time).ease(this.ease())},Do.attr=function(t,e){if(arguments.length<2){for(e in t)this.attrTween(e,Se(t[e],e));return this}return this.attrTween(t,Se(e,t))},Do.attrTween=function(t,e){function n(t,n){var r=e.call(this,t,n,this.getAttribute(i));return r===$o?(this.removeAttribute(i),null):r&&function(t){this.setAttribute(i,r(t))}}function r(t,n){var r=e.call(this,t,n,this.getAttributeNS(i.space,i.local));return r===$o?(this.removeAttributeNS(i.space,i.local),null):r&&function(t){this.setAttributeNS(i.space,i.local,r(t))}}var i=d3.ns.qualify(t);return this.tween("attr."+t,i.local?r:n)},Do.style=function(t,e,n){var r=arguments.length;if(3>r){if("string"!=typeof t){2>r&&(e="");for(n in t)this.styleTween(n,Se(t[n],n),e);return this}n=""}return this.styleTween(t,Se(e,t),n)},Do.styleTween=function(t,e,n){return arguments.length<3&&(n=""),this.tween("style."+t,function(r,i){var o=e.call(this,r,i,window.getComputedStyle(this,null).getPropertyValue(t));return o===$o?(this.style.removeProperty(t),null):o&&function(e){this.style.setProperty(t,o(e),n)}})},Do.text=function(t){return this.tween("text",function(e,n){this.textContent="function"==typeof t?t.call(this,e,n):t})},Do.remove=function(){return this.each("end.transition",function(){var t;!this.__transition__&&(t=this.parentNode)&&t.removeChild(this)})},Do.delay=function(t){return xe(this,"function"==typeof t?function(e,n,r){e.delay=0|t.call(e=e.node,e.__data__,n,r)}:(t|=0,function(e){e.delay=t}))},Do.duration=function(t){return xe(this,"function"==typeof t?function(e,n,r){e.duration=Math.max(1,0|t.call(e=e.node,e.__data__,n,r))}:(t=Math.max(1,0|t),function(e){e.duration=t}))},Do.transition=function(){return this.select(o)},d3.tween=function(t,e){function n(n,r,i){var o=t.call(this,n,r);return null==o?""!=i&&$o:i!=o&&e(i,o+"")}function r(n,r,i){return i!=t&&e(i,t)}return"function"==typeof t?n:null==t?Me:(t+="",r)};var Io,Ro,$o={},Fo=0,qo={},Ho=null;d3.timer=function(t,e,n){if(arguments.length<3){if(arguments.length<2)e=0;else if(!isFinite(e))return;n=Date.now()}var r=qo[t.id];r&&r.callback===t?(r.then=n,r.delay=e):qo[t.id=++Fo]=Ho={callback:t,then:n,delay:e,next:Ho},Io||(Ro=clearTimeout(Ro),Io=1,Wo(De))},d3.timer.flush=function(){for(var t,e=Date.now(),n=Ho;n;)t=e-n.then,n.delay||(n.flush=n.callback(t)),n=n.next;ze()};var Wo=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){setTimeout(t,17)};d3.mouse=function(t){return Ne(t,P())};var Vo=/WebKit/.test(navigator.userAgent)?-1:0;d3.touches=function(t,e){return arguments.length<2&&(e=P().touches),e?Bi(e).map(function(e){var n=Ne(t,e);return n.identifier=e.identifier,n}):[]},d3.scale={},d3.scale.linear=function(){return Ae([0,1],[0,1],d3.interpolate,!1)},d3.scale.log=function(){return We(d3.scale.linear(),Ve)};var Bo=d3.format(".0e");Ve.pow=function(t){return Math.pow(10,t)},Be.pow=function(t){return-Math.pow(10,-t)},d3.scale.pow=function(){return Ye(d3.scale.linear(),1)},d3.scale.sqrt=function(){return d3.scale.pow().exponent(.5)},d3.scale.ordinal=function(){return Qe([],{t:"range",a:[[]]})},d3.scale.category10=function(){return d3.scale.ordinal().range(Yo)},d3.scale.category20=function(){return d3.scale.ordinal().range(Uo)},d3.scale.category20b=function(){return d3.scale.ordinal().range(Qo)},d3.scale.category20c=function(){return d3.scale.ordinal().range(Go)};var Yo=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],Uo=["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"],Qo=["#393b79","#5254a3","#6b6ecf","#9c9ede","#637939","#8ca252","#b5cf6b","#cedb9c","#8c6d31","#bd9e39","#e7ba52","#e7cb94","#843c39","#ad494a","#d6616b","#e7969c","#7b4173","#a55194","#ce6dbd","#de9ed6"],Go=["#3182bd","#6baed6","#9ecae1","#c6dbef","#e6550d","#fd8d3c","#fdae6b","#fdd0a2","#31a354","#74c476","#a1d99b","#c7e9c0","#756bb1","#9e9ac8","#bcbddc","#dadaeb","#636363","#969696","#bdbdbd","#d9d9d9"];d3.scale.quantile=function(){return Ge([],[])},d3.scale.quantize=function(){return Xe(0,1,[0,1])},d3.scale.threshold=function(){return Ze([.5],[0,1])},d3.scale.identity=function(){return Je([0,1])},d3.svg={},d3.svg.arc=function(){function t(){var t=e.apply(this,arguments),o=n.apply(this,arguments),s=r.apply(this,arguments)+Xo,a=i.apply(this,arguments)+Xo,l=(s>a&&(l=s,s=a,a=l),a-s),u=l<Math.PI?"0":"1",c=Math.cos(s),d=Math.sin(s),p=Math.cos(a),h=Math.sin(a);return l>=Zo?t?"M0,"+o+"A"+o+","+o+" 0 1,1 0,"+-o+"A"+o+","+o+" 0 1,1 0,"+o+"M0,"+t+"A"+t+","+t+" 0 1,0 0,"+-t+"A"+t+","+t+" 0 1,0 0,"+t+"Z":"M0,"+o+"A"+o+","+o+" 0 1,1 0,"+-o+"A"+o+","+o+" 0 1,1 0,"+o+"Z":t?"M"+o*c+","+o*d+"A"+o+","+o+" 0 "+u+",1 "+o*p+","+o*h+"L"+t*p+","+t*h+"A"+t+","+t+" 0 "+u+",0 "+t*c+","+t*d+"Z":"M"+o*c+","+o*d+"A"+o+","+o+" 0 "+u+",1 "+o*p+","+o*h+"L0,0Z"}var e=Ke,n=tn,r=en,i=nn;return t.innerRadius=function(n){return arguments.length?(e=a(n),t):e},t.outerRadius=function(e){return arguments.length?(n=a(e),t):n},t.startAngle=function(e){return arguments.length?(r=a(e),t):r},t.endAngle=function(e){return arguments.length?(i=a(e),t):i},t.centroid=function(){var t=(e.apply(this,arguments)+n.apply(this,arguments))/2,o=(r.apply(this,arguments)+i.apply(this,arguments))/2+Xo;return[Math.cos(o)*t,Math.sin(o)*t]},t};var Xo=-Math.PI/2,Zo=2*Math.PI-1e-6;d3.svg.line=function(){return rn(i)};var Jo=d3.map({linear:an,"linear-closed":ln,"step-before":un,"step-after":cn,basis:mn,"basis-open":vn,"basis-closed":yn,bundle:bn,cardinal:hn,"cardinal-open":dn,"cardinal-closed":pn,monotone:jn});Jo.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)});var Ko=[0,2/3,1/3,0],ts=[0,1/3,2/3,0],es=[0,1/6,2/3,1/6];d3.svg.line.radial=function(){var t=rn(Mn);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},un.reverse=cn,cn.reverse=un,d3.svg.area=function(){return Sn(i)},d3.svg.area.radial=function(){var t=Sn(Mn);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},d3.svg.chord=function(){function t(t,a){var l=e(this,o,t,a),u=e(this,s,t,a);return"M"+l.p0+r(l.r,l.p1,l.a1-l.a0)+(n(l,u)?i(l.r,l.p1,l.r,l.p0):i(l.r,l.p1,u.r,u.p0)+r(u.r,u.p1,u.a1-u.a0)+i(u.r,u.p1,l.r,l.p0))+"Z"}function e(t,e,n,r){var i=e.call(t,n,r),o=l.call(t,i,r),s=u.call(t,i,r)+Xo,a=c.call(t,i,r)+Xo;return{r:o,a0:s,a1:a,p0:[o*Math.cos(s),o*Math.sin(s)],p1:[o*Math.cos(a),o*Math.sin(a)]}}function n(t,e){return t.a0==e.a0&&t.a1==e.a1}function r(t,e,n){return"A"+t+","+t+" 0 "+ +(n>Math.PI)+",1 "+e}function i(t,e,n,r){return"Q 0,0 "+r}var o=Dn,s=zn,l=Nn,u=en,c=nn;return t.radius=function(e){return arguments.length?(l=a(e),t):l},t.source=function(e){return arguments.length?(o=a(e),t):o},t.target=function(e){return arguments.length?(s=a(e),t):s},t.startAngle=function(e){return arguments.length?(u=a(e),t):u},t.endAngle=function(e){return arguments.length?(c=a(e),t):c},t},d3.svg.diagonal=function(){function t(t,i){var o=e.call(this,t,i),s=n.call(this,t,i),a=(o.y+s.y)/2,l=[o,{x:o.x,y:a},{x:s.x,y:a},s];return l=l.map(r),"M"+l[0]+"C"+l[1]+" "+l[2]+" "+l[3]}var e=Dn,n=zn,r=Tn;return t.source=function(n){return arguments.length?(e=a(n),t):e},t.target=function(e){return arguments.length?(n=a(e),t):n},t.projection=function(e){return arguments.length?(r=e,t):r},t},d3.svg.diagonal.radial=function(){var t=d3.svg.diagonal(),e=Tn,n=t.projection;return t.projection=function(t){return arguments.length?n(Pn(e=t)):e},t},d3.svg.mouse=d3.mouse,d3.svg.touches=d3.touches,d3.svg.symbol=function(){function t(t,r){return(ns.get(e.call(this,t,r))||An)(n.call(this,t,r))}var e=En,n=Ln;return t.type=function(n){return arguments.length?(e=a(n),t):e},t.size=function(e){return arguments.length?(n=a(e),t):n},t};var ns=d3.map({circle:An,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*is)),n=e*is;return"M0,"+-e+"L"+n+",0 0,"+e+" "+-n+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/rs),n=e*rs/2;return"M0,"+n+"L"+e+","+-n+" "+-e+","+-n+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/rs),n=e*rs/2;return"M0,"+-n+"L"+e+","+n+" "+-e+","+n+"Z"}});d3.svg.symbolTypes=ns.keys();var rs=Math.sqrt(3),is=Math.tan(30*Math.PI/180);d3.svg.axis=function(){function t(t){t.each(function(){var t,d=d3.select(this),p=null==u?n.ticks?n.ticks.apply(n,l):n.domain():u,h=null==e?n.tickFormat?n.tickFormat.apply(n,l):String:e,f=Rn(n,p,c),g=d.selectAll(".minor").data(f,String),m=g.enter().insert("line","g").attr("class","tick minor").style("opacity",1e-6),v=d3.transition(g.exit()).style("opacity",1e-6).remove(),y=d3.transition(g).style("opacity",1),b=d.selectAll("g").data(p,String),_=b.enter().insert("g","path").style("opacity",1e-6),w=d3.transition(b.exit()).style("opacity",1e-6).remove(),x=d3.transition(b).style("opacity",1),k=Pe(n),C=d.selectAll(".domain").data([0]),j=(C.enter().append("path").attr("class","domain"),d3.transition(C)),M=n.copy(),S=this.__chart__||M;this.__chart__=M,_.append("line").attr("class","tick"),_.append("text");var D=_.select("line"),z=x.select("line"),N=b.select("text").text(h),T=_.select("text"),P=x.select("text");switch(r){case"bottom":t=On,m.attr("y2",o),y.attr("x2",0).attr("y2",o),D.attr("y2",i),T.attr("y",Math.max(i,0)+a),z.attr("x2",0).attr("y2",i),P.attr("x",0).attr("y",Math.max(i,0)+a),N.attr("dy",".71em").attr("text-anchor","middle"),j.attr("d","M"+k[0]+","+s+"V0H"+k[1]+"V"+s);break;case"top":t=On,m.attr("y2",-o),y.attr("x2",0).attr("y2",-o),D.attr("y2",-i),T.attr("y",-(Math.max(i,0)+a)),z.attr("x2",0).attr("y2",-i),P.attr("x",0).attr("y",-(Math.max(i,0)+a)),N.attr("dy","0em").attr("text-anchor","middle"),j.attr("d","M"+k[0]+","+-s+"V0H"+k[1]+"V"+-s);break;case"left":t=In,m.attr("x2",-o),y.attr("x2",-o).attr("y2",0),D.attr("x2",-i),T.attr("x",-(Math.max(i,0)+a)),z.attr("x2",-i).attr("y2",0),P.attr("x",-(Math.max(i,0)+a)).attr("y",0),N.attr("dy",".32em").attr("text-anchor","end"),j.attr("d","M"+-s+","+k[0]+"H0V"+k[1]+"H"+-s);break;case"right":t=In,m.attr("x2",o),y.attr("x2",o).attr("y2",0),D.attr("x2",i),T.attr("x",Math.max(i,0)+a),z.attr("x2",i).attr("y2",0),P.attr("x",Math.max(i,0)+a).attr("y",0),N.attr("dy",".32em").attr("text-anchor","start"),j.attr("d","M"+s+","+k[0]+"H0V"+k[1]+"H"+s)}if(n.ticks)_.call(t,S),x.call(t,M),w.call(t,M),m.call(t,S),y.call(t,M),v.call(t,M);else{var L=M.rangeBand()/2,E=function(t){return M(t)+L};_.call(t,E),x.call(t,E)}})}var e,n=d3.scale.linear(),r="bottom",i=6,o=6,s=6,a=3,l=[10],u=null,c=0;return t.scale=function(e){return arguments.length?(n=e,t):n},t.orient=function(e){return arguments.length?(r=e,t):r},t.ticks=function(){return arguments.length?(l=arguments,t):l},t.tickValues=function(e){return arguments.length?(u=e,t):u},t.tickFormat=function(n){return arguments.length?(e=n,t):e},t.tickSize=function(e,n){if(!arguments.length)return i;var r=arguments.length-1;return i=+e,o=r>1?+n:i,s=r>0?+arguments[r]:i,t},t.tickPadding=function(e){return arguments.length?(a=+e,t):a},t.tickSubdivide=function(e){return arguments.length?(c=+e,t):c},t},d3.svg.brush=function(){function t(o){o.each(function(){var o,s=d3.select(this),c=s.selectAll(".background").data([0]),d=s.selectAll(".extent").data([0]),p=s.selectAll(".resize").data(u,String);s.style("pointer-events","all").on("mousedown.brush",i).on("touchstart.brush",i),c.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),d.enter().append("rect").attr("class","extent").style("cursor","move"),p.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return os[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),p.style("display",t.empty()?"none":null),p.exit().remove(),a&&(o=Pe(a),c.attr("x",o[0]).attr("width",o[1]-o[0]),n(s)),l&&(o=Pe(l),c.attr("y",o[0]).attr("height",o[1]-o[0]),r(s)),e(s)})}function e(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+c[+/e$/.test(t)][0]+","+c[+/^s/.test(t)][1]+")"})}function n(t){t.select(".extent").attr("x",c[0][0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",c[1][0]-c[0][0])}function r(t){t.select(".extent").attr("y",c[0][1]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",c[1][1]-c[0][1])}function i(){function i(){var t=d3.event.changedTouches;return t?d3.touches(v,t)[0]:d3.mouse(v)}function u(){32==d3.event.keyCode&&(C||(g=null,j[0]-=c[1][0],j[1]-=c[1][1],C=2),T())}function d(){32==d3.event.keyCode&&2==C&&(j[0]+=c[1][0],j[1]+=c[1][1],C=0,T())}function p(){var t=i(),o=!1;m&&(t[0]+=m[0],t[1]+=m[1]),C||(d3.event.altKey?(g||(g=[(c[0][0]+c[1][0])/2,(c[0][1]+c[1][1])/2]),j[0]=c[+(t[0]<g[0])][0],j[1]=c[+(t[1]<g[1])][1]):g=null),x&&h(t,a,0)&&(n(_),o=!0),k&&h(t,l,1)&&(r(_),o=!0),o&&(e(_),b({type:"brush",mode:C?"move":"resize"}))}function h(t,e,n){var r,i,s=Pe(e),a=s[0],l=s[1],u=j[n],d=c[1][n]-c[0][n];return C&&(a-=u,l-=d+u),r=Math.max(a,Math.min(l,t[n])),C?i=(r+=u)+d:(g&&(u=Math.max(a,Math.min(l,2*g[n]-r))),r>u?(i=r,r=u):i=u),c[0][n]!==r||c[1][n]!==i?(o=null,c[0][n]=r,c[1][n]=i,!0):void 0}function f(){p(),_.style("pointer-events","all").selectAll(".resize").style("display",t.empty()?"none":null),d3.select("body").style("cursor",null),M.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),b({type:"brushend"}),T()}var g,m,v=this,y=d3.select(d3.event.target),b=s.of(v,arguments),_=d3.select(v),w=y.datum(),x=!/^(n|s)$/.test(w)&&a,k=!/^(e|w)$/.test(w)&&l,C=y.classed("extent"),j=i(),M=d3.select(window).on("mousemove.brush",p).on("mouseup.brush",f).on("touchmove.brush",p).on("touchend.brush",f).on("keydown.brush",u).on("keyup.brush",d);if(C)j[0]=c[0][0]-j[0],j[1]=c[0][1]-j[1];else if(w){var S=+/w$/.test(w),D=+/^n/.test(w);m=[c[1-S][0]-j[0],c[1-D][1]-j[1]],j[0]=c[S][0],j[1]=c[D][1]}else d3.event.altKey&&(g=j.slice());_.style("pointer-events","none").selectAll(".resize").style("display",null),d3.select("body").style("cursor",y.style("cursor")),b({type:"brushstart"}),p(),T()}var o,s=L(t,"brushstart","brush","brushend"),a=null,l=null,u=ss[0],c=[[0,0],[0,0]];return t.x=function(e){return arguments.length?(a=e,u=ss[!a<<1|!l],t):a},t.y=function(e){return arguments.length?(l=e,u=ss[!a<<1|!l],t):l},t.extent=function(e){var n,r,i,s,u;return arguments.length?(o=[[0,0],[0,0]],a&&(n=e[0],r=e[1],l&&(n=n[0],r=r[0]),o[0][0]=n,o[1][0]=r,a.invert&&(n=a(n),r=a(r)),n>r&&(u=n,n=r,r=u),c[0][0]=0|n,c[1][0]=0|r),l&&(i=e[0],s=e[1],a&&(i=i[1],s=s[1]),o[0][1]=i,o[1][1]=s,l.invert&&(i=l(i),s=l(s)),i>s&&(u=i,i=s,s=u),c[0][1]=0|i,c[1][1]=0|s),t):(e=o||c,a&&(n=e[0][0],r=e[1][0],o||(n=c[0][0],r=c[1][0],a.invert&&(n=a.invert(n),r=a.invert(r)),n>r&&(u=n,n=r,r=u))),l&&(i=e[0][1],s=e[1][1],o||(i=c[0][1],s=c[1][1],l.invert&&(i=l.invert(i),s=l.invert(s)),i>s&&(u=i,i=s,s=u))),a&&l?[[n,i],[r,s]]:a?[n,r]:l&&[i,s])},t.clear=function(){return o=null,c[0][0]=c[0][1]=c[1][0]=c[1][1]=0,t},t.empty=function(){return a&&c[0][0]===c[1][0]||l&&c[0][1]===c[1][1]},d3.rebind(t,s,"on")};var os={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},ss=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];d3.behavior={},d3.behavior.drag=function(){function t(){this.on("mousedown.drag",e).on("touchstart.drag",e)}function e(){function t(){var t=a.parentNode;return c?d3.touches(t).filter(function(t){return t.identifier===c})[0]:d3.mouse(t)}function e(){if(!a.parentNode)return i();var e=t(),n=e[0]-d[0],r=e[1]-d[1];p|=n|r,d=e,T(),l({type:"drag",x:e[0]+s[0],y:e[1]+s[1],dx:n,dy:r})}function i(){l({type:"dragend"}),p&&(T(),d3.event.target===u&&h.on("click.drag",o,!0)),h.on(c?"touchmove.drag-"+c:"mousemove.drag",null).on(c?"touchend.drag-"+c:"mouseup.drag",null)}function o(){T(),h.on("click.drag",null)}var s,a=this,l=n.of(a,arguments),u=d3.event.target,c=d3.event.touches&&d3.event.changedTouches[0].identifier,d=t(),p=0,h=d3.select(window).on(c?"touchmove.drag-"+c:"mousemove.drag",e).on(c?"touchend.drag-"+c:"mouseup.drag",i,!0);r?(s=r.apply(a,arguments),s=[s.x-d[0],s.y-d[1]]):s=[0,0],c||T(),l({type:"dragstart"})}var n=L(t,"drag","dragstart","dragend"),r=null;return t.origin=function(e){return arguments.length?(r=e,t):r},d3.rebind(t,n,"on")},d3.behavior.zoom=function(){function t(){this.on("mousedown.zoom",s).on("mousewheel.zoom",a).on("mousemove.zoom",l).on("DOMMouseScroll.zoom",a).on("dblclick.zoom",u).on("touchstart.zoom",c).on("touchmove.zoom",d).on("touchend.zoom",c)}function e(t){return[(t[0]-b[0])/_,(t[1]-b[1])/_]}function n(t){return[t[0]*_+b[0],t[1]*_+b[1]]}function r(t){_=Math.max(w[0],Math.min(w[1],t))}function i(t,e){e=n(e),b[0]+=t[0]-e[0],b[1]+=t[1]-e[1]}function o(t){g&&g.domain(f.range().map(function(t){return(t-b[0])/_}).map(f.invert)),v&&v.domain(m.range().map(function(t){return(t-b[1])/_}).map(m.invert)),d3.event.preventDefault(),t({type:"zoom",scale:_,translate:b})}function s(){function t(){u=1,i(d3.mouse(s),d),o(a)}function n(){u&&T(),c.on("mousemove.zoom",null).on("mouseup.zoom",null),u&&d3.event.target===l&&c.on("click.zoom",r,!0)}function r(){T(),c.on("click.zoom",null)}var s=this,a=x.of(s,arguments),l=d3.event.target,u=0,c=d3.select(window).on("mousemove.zoom",t).on("mouseup.zoom",n),d=e(d3.mouse(s));window.focus(),T()}function a(){p||(p=e(d3.mouse(this))),r(Math.pow(2,.002*$n())*_),i(d3.mouse(this),p),o(x.of(this,arguments))}function l(){p=null}function u(){var t=d3.mouse(this),n=e(t);r(d3.event.shiftKey?_/2:2*_),i(t,n),o(x.of(this,arguments))}function c(){var t=d3.touches(this),n=Date.now();if(h=_,p={},t.forEach(function(t){p[t.identifier]=e(t)}),T(),1===t.length){if(500>n-y){var s=t[0],a=e(t[0]);r(2*_),i(s,a),o(x.of(this,arguments))}y=n}}function d(){var t=d3.touches(this),e=t[0],n=p[e.identifier];if(s=t[1]){var s,a=p[s.identifier];e=[(e[0]+s[0])/2,(e[1]+s[1])/2],n=[(n[0]+a[0])/2,(n[1]+a[1])/2],r(d3.event.scale*h)}i(e,n),y=null,o(x.of(this,arguments))}var p,h,f,g,m,v,y,b=[0,0],_=1,w=ls,x=L(t,"zoom");return t.translate=function(e){return arguments.length?(b=e.map(Number),t):b},t.scale=function(e){return arguments.length?(_=+e,t):_},t.scaleExtent=function(e){return arguments.length?(w=null==e?ls:e.map(Number),t):w},t.x=function(e){return arguments.length?(g=e,f=e.copy(),t):g},t.y=function(e){return arguments.length?(v=e,m=e.copy(),t):v},d3.rebind(t,x,"on")};var as,ls=[0,1/0];d3.layout={},d3.layout.bundle=function(){return function(t){for(var e=[],n=-1,r=t.length;++n<r;)e.push(Fn(t[n]));return e}},d3.layout.chord=function(){function t(){var t,u,d,p,h,f={},g=[],m=d3.range(o),v=[];for(n=[],r=[],t=0,p=-1;++p<o;){for(u=0,h=-1;++h<o;)u+=i[p][h];g.push(u),v.push(d3.range(o)),t+=u}for(s&&m.sort(function(t,e){return s(g[t],g[e])}),a&&v.forEach(function(t,e){t.sort(function(t,n){return a(i[e][t],i[e][n])})}),t=(2*Math.PI-c*o)/t,u=0,p=-1;++p<o;){for(d=u,h=-1;++h<o;){var y=m[p],b=v[y][h],_=i[y][b],w=u,x=u+=_*t;f[y+"-"+b]={index:y,subindex:b,startAngle:w,endAngle:x,value:_}}r[y]={index:y,startAngle:d,endAngle:u,value:(u-d)/t},u+=c}for(p=-1;++p<o;)for(h=p-1;++h<o;){var k=f[p+"-"+h],C=f[h+"-"+p];(k.value||C.value)&&n.push(k.value<C.value?{source:C,target:k}:{source:k,target:C})}l&&e()}function e(){n.sort(function(t,e){return l((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}var n,r,i,o,s,a,l,u={},c=0;return u.matrix=function(t){return arguments.length?(o=(i=t)&&i.length,n=r=null,u):i},u.padding=function(t){return arguments.length?(c=t,n=r=null,u):c},u.sortGroups=function(t){return arguments.length?(s=t,n=r=null,u):s},u.sortSubgroups=function(t){return arguments.length?(a=t,n=null,u):a},u.sortChords=function(t){return arguments.length?(l=t,n&&e(),u):l},u.chords=function(){return n||t(),n},u.groups=function(){return r||t(),r},u},d3.layout.force=function(){function t(t){return function(e,n,r,i){if(e.point!==t){var o=e.cx-t.x,s=e.cy-t.y,a=1/Math.sqrt(o*o+s*s);if(v>(i-n)*a){var l=e.charge*a*a;return t.px-=o*l,t.py-=s*l,!0}if(e.point&&isFinite(a)){var l=e.pointCharge*a*a;t.px-=o*l,t.py-=s*l}}return!e.charge}}function e(t){t.px=d3.event.x,t.py=d3.event.y,u.resume()}var n,r,o,s,l,u={},c=d3.dispatch("start","tick","end"),d=[1,1],p=.9,h=Qn,f=Gn,g=-30,m=.1,v=.8,y=[],b=[];return u.tick=function(){if((r*=.99)<.005)return c.end({type:"end",alpha:r=0}),!0;var e,n,i,a,u,h,f,v,_,w=y.length,x=b.length;for(n=0;x>n;++n)i=b[n],a=i.source,u=i.target,v=u.x-a.x,_=u.y-a.y,(h=v*v+_*_)&&(h=r*s[n]*((h=Math.sqrt(h))-o[n])/h,v*=h,_*=h,u.x-=v*(f=a.weight/(u.weight+a.weight)),u.y-=_*f,a.x+=v*(f=1-f),a.y+=_*f);if((f=r*m)&&(v=d[0]/2,_=d[1]/2,n=-1,f))for(;++n<w;)i=y[n],i.x+=(v-i.x)*f,i.y+=(_-i.y)*f;if(g)for(Un(e=d3.geom.quadtree(y),r,l),n=-1;++n<w;)(i=y[n]).fixed||e.visit(t(i));for(n=-1;++n<w;)i=y[n],i.fixed?(i.x=i.px,i.y=i.py):(i.x-=(i.px-(i.px=i.x))*p,i.y-=(i.py-(i.py=i.y))*p);c.tick({type:"tick",alpha:r})},u.nodes=function(t){return arguments.length?(y=t,u):y},u.links=function(t){return arguments.length?(b=t,u):b},u.size=function(t){return arguments.length?(d=t,u):d},u.linkDistance=function(t){return arguments.length?(h=a(t),u):h},u.distance=u.linkDistance,u.linkStrength=function(t){return arguments.length?(f=a(t),u):f},u.friction=function(t){return arguments.length?(p=t,u):p},u.charge=function(t){return arguments.length?(g="function"==typeof t?t:+t,u):g},u.gravity=function(t){return arguments.length?(m=t,u):m},u.theta=function(t){return arguments.length?(v=t,u):v},u.alpha=function(t){return arguments.length?(r?r=t>0?t:0:t>0&&(c.start({type:"start",alpha:r=t}),d3.timer(u.tick)),u):r},u.start=function(){function t(t,r){for(var i,o=e(n),s=-1,a=o.length;++s<a;)if(!isNaN(i=o[s][t]))return i;return Math.random()*r}function e(){if(!i){for(i=[],r=0;c>r;++r)i[r]=[];for(r=0;p>r;++r){var t=b[r];i[t.source.index].push(t.target),i[t.target.index].push(t.source)}}return i[n]}var n,r,i,a,c=y.length,p=b.length,m=d[0],v=d[1];for(n=0;c>n;++n)(a=y[n]).index=n,a.weight=0;for(o=[],s=[],n=0;p>n;++n)a=b[n],"number"==typeof a.source&&(a.source=y[a.source]),"number"==typeof a.target&&(a.target=y[a.target]),o[n]=h.call(this,a,n),s[n]=f.call(this,a,n),++a.source.weight,++a.target.weight;for(n=0;c>n;++n)a=y[n],isNaN(a.x)&&(a.x=t("x",m)),isNaN(a.y)&&(a.y=t("y",v)),isNaN(a.px)&&(a.px=a.x),isNaN(a.py)&&(a.py=a.y);if(l=[],"function"==typeof g)for(n=0;c>n;++n)l[n]=+g.call(this,y[n],n);else for(n=0;c>n;++n)l[n]=g;return u.resume()},u.resume=function(){return u.alpha(.1)},u.stop=function(){return u.alpha(0)},u.drag=function(){n||(n=d3.behavior.drag().origin(i).on("dragstart",Wn).on("drag",e).on("dragend",Vn)),this.on("mouseover.force",Bn).on("mouseout.force",Yn).call(n)},d3.rebind(u,c,"on")},d3.layout.partition=function(){function t(e,n,r,i){var o=e.children;if(e.x=n,e.y=e.depth*i,e.dx=r,e.dy=i,o&&(s=o.length)){var s,a,l,u=-1;for(r=e.value?r/e.value:0;++u<s;)t(a=o[u],n,l=a.value*r,i),n+=l}}function e(t){var n=t.children,r=0;if(n&&(i=n.length))for(var i,o=-1;++o<i;)r=Math.max(r,e(n[o]));return 1+r}function n(n,o){var s=r.call(this,n,o);return t(s[0],0,i[0],i[1]/e(s[0])),s}var r=d3.layout.hierarchy(),i=[1,1];return n.size=function(t){return arguments.length?(i=t,n):i},ar(n,r)},d3.layout.pie=function(){function t(o){var s=o.map(function(n,r){return+e.call(t,n,r)}),a=+("function"==typeof r?r.apply(this,arguments):r),l=(("function"==typeof i?i.apply(this,arguments):i)-r)/d3.sum(s),u=d3.range(o.length);null!=n&&u.sort(n===us?function(t,e){return s[e]-s[t]}:function(t,e){return n(o[t],o[e])});var c=[];return u.forEach(function(t){var e;c[t]={data:o[t],value:e=s[t],startAngle:a,endAngle:a+=e*l}}),c}var e=Number,n=us,r=0,i=2*Math.PI;return t.value=function(n){return arguments.length?(e=n,t):e},t.sort=function(e){return arguments.length?(n=e,t):n},t.startAngle=function(e){return arguments.length?(r=e,t):r},t.endAngle=function(e){return arguments.length?(i=e,t):i},t};var us={};d3.layout.stack=function(){function t(i,l){var u=i.map(function(n,r){return e.call(t,n,r)}),c=u.map(function(e){return e.map(function(e,n){return[s.call(t,e,n),a.call(t,e,n)]})}),d=n.call(t,c,l);u=d3.permute(u,d),c=d3.permute(c,d);var p,h,f,g=r.call(t,c,l),m=u.length,v=u[0].length;for(h=0;v>h;++h)for(o.call(t,u[0][h],f=g[h],c[0][h][1]),p=1;m>p;++p)o.call(t,u[p][h],f+=c[p-1][h][1],c[p][h][1]);return i}var e=i,n=Kn,r=tr,o=Jn,s=Xn,a=Zn;return t.values=function(n){return arguments.length?(e=n,t):e},t.order=function(e){return arguments.length?(n="function"==typeof e?e:cs.get(e)||Kn,t):n},t.offset=function(e){return arguments.length?(r="function"==typeof e?e:ds.get(e)||tr,t):r},t.x=function(e){return arguments.length?(s=e,t):s},t.y=function(e){return arguments.length?(a=e,t):a},t.out=function(e){return arguments.length?(o=e,t):o},t};var cs=d3.map({"inside-out":function(t){var e,n,r=t.length,i=t.map(er),o=t.map(nr),s=d3.range(r).sort(function(t,e){return i[t]-i[e]}),a=0,l=0,u=[],c=[];for(e=0;r>e;++e)n=s[e],l>a?(a+=o[n],u.push(n)):(l+=o[n],c.push(n));return c.reverse().concat(u)},reverse:function(t){return d3.range(t.length).reverse()},"default":Kn}),ds=d3.map({silhouette:function(t){var e,n,r,i=t.length,o=t[0].length,s=[],a=0,l=[];for(n=0;o>n;++n){for(e=0,r=0;i>e;e++)r+=t[e][n][1];r>a&&(a=r),s.push(r)}for(n=0;o>n;++n)l[n]=(a-s[n])/2;return l},wiggle:function(t){var e,n,r,i,o,s,a,l,u,c=t.length,d=t[0],p=d.length,h=[];for(h[0]=l=u=0,n=1;p>n;++n){for(e=0,i=0;c>e;++e)i+=t[e][n][1];for(e=0,o=0,a=d[n][0]-d[n-1][0];c>e;++e){for(r=0,s=(t[e][n][1]-t[e][n-1][1])/(2*a);e>r;++r)s+=(t[r][n][1]-t[r][n-1][1])/a;o+=s*t[e][n][1]}h[n]=l-=i?o/i*a:0,u>l&&(u=l)}for(n=0;p>n;++n)h[n]-=u;return h},expand:function(t){var e,n,r,i=t.length,o=t[0].length,s=1/i,a=[];for(n=0;o>n;++n){for(e=0,r=0;i>e;e++)r+=t[e][n][1];if(r)for(e=0;i>e;e++)t[e][n][1]/=r;else for(e=0;i>e;e++)t[e][n][1]=s}for(n=0;o>n;++n)a[n]=0;return a},zero:tr});d3.layout.histogram=function(){function t(t,o){for(var s,a,l=[],u=t.map(n,this),c=r.call(this,u,o),d=i.call(this,c,u,o),o=-1,p=u.length,h=d.length-1,f=e?1:1/p;++o<h;)s=l[o]=[],s.dx=d[o+1]-(s.x=d[o]),s.y=0;if(h>0)for(o=-1;++o<p;)a=u[o],a>=c[0]&&a<=c[1]&&(s=l[d3.bisect(d,a,1,h)-1],s.y+=f,s.push(t[o]));return l}var e=!0,n=Number,r=sr,i=ir;return t.value=function(e){return arguments.length?(n=e,t):n},t.range=function(e){return arguments.length?(r=a(e),t):r},t.bins=function(e){return arguments.length?(i="number"==typeof e?function(t){return or(t,e)}:a(e),t):i},t.frequency=function(n){return arguments.length?(e=!!n,t):e},t},d3.layout.hierarchy=function(){function t(e,s,a){var l=i.call(n,e,s),u=ps?e:{data:e};if(u.depth=s,a.push(u),l&&(c=l.length)){for(var c,d,p=-1,h=u.children=[],f=0,g=s+1;++p<c;)d=t(l[p],g,a),d.parent=u,h.push(d),f+=d.value;r&&h.sort(r),o&&(u.value=f)}else o&&(u.value=+o.call(n,e,s)||0);return u}function e(t,r){var i=t.children,s=0;if(i&&(a=i.length))for(var a,l=-1,u=r+1;++l<a;)s+=e(i[l],u);else o&&(s=+o.call(n,ps?t:t.data,r)||0);return o&&(t.value=s),s}function n(e){var n=[];return t(e,0,n),n}var r=cr,i=lr,o=ur;return n.sort=function(t){return arguments.length?(r=t,n):r},n.children=function(t){return arguments.length?(i=t,n):i},n.value=function(t){return arguments.length?(o=t,n):o},n.revalue=function(t){return e(t,0),t},n};var ps=!1;d3.layout.pack=function(){function t(t,i){var o=e.call(this,t,i),s=o[0];s.x=0,s.y=0,Pr(s,function(t){t.r=Math.sqrt(t.value)}),Pr(s,mr);var a=r[0],l=r[1],u=Math.max(2*s.r/a,2*s.r/l);if(n>0){var c=n*u/2;Pr(s,function(t){t.r+=c}),Pr(s,mr),Pr(s,function(t){t.r-=c}),u=Math.max(2*s.r/a,2*s.r/l)}return br(s,a/2,l/2,1/u),o}var e=d3.layout.hierarchy().sort(pr),n=0,r=[1,1];return t.size=function(e){return arguments.length?(r=e,t):r},t.padding=function(e){return arguments.length?(n=+e,t):n},ar(t,e)},d3.layout.cluster=function(){function t(t,i){var o,s=e.call(this,t,i),a=s[0],l=0;Pr(a,function(t){var e=t.children;e&&e.length?(t.x=xr(e),t.y=wr(e)):(t.x=o?l+=n(t,o):0,t.y=0,o=t)});var u=kr(a),c=Cr(a),d=u.x-n(u,c)/2,p=c.x+n(c,u)/2;return Pr(a,function(t){t.x=(t.x-d)/(p-d)*r[0],t.y=(1-(a.y?t.y/a.y:1))*r[1]}),s}var e=d3.layout.hierarchy().sort(null).value(null),n=jr,r=[1,1];return t.separation=function(e){return arguments.length?(n=e,t):n},t.size=function(e){return arguments.length?(r=e,t):r},ar(t,e)},d3.layout.tree=function(){function t(t,i){function o(t,e){var r=t.children,i=t._tree;if(r&&(s=r.length)){for(var s,l,u,c=r[0],d=c,p=-1;++p<s;)u=r[p],o(u,l),d=a(u,l,d),l=u;Lr(t);var h=.5*(c._tree.prelim+u._tree.prelim);
e?(i.prelim=e._tree.prelim+n(t,e),i.mod=i.prelim-h):i.prelim=h}else e&&(i.prelim=e._tree.prelim+n(t,e))}function s(t,e){t.x=t._tree.prelim+e;var n=t.children;if(n&&(r=n.length)){var r,i=-1;for(e+=t._tree.mod;++i<r;)s(n[i],e)}}function a(t,e,r){if(e){for(var i,o=t,s=t,a=e,l=t.parent.children[0],u=o._tree.mod,c=s._tree.mod,d=a._tree.mod,p=l._tree.mod;a=Sr(a),o=Mr(o),a&&o;)l=Mr(l),s=Sr(s),s._tree.ancestor=t,i=a._tree.prelim+d-o._tree.prelim-u+n(a,o),i>0&&(Er(Ar(a,t,r),t,i),u+=i,c+=i),d+=a._tree.mod,u+=o._tree.mod,p+=l._tree.mod,c+=s._tree.mod;a&&!Sr(s)&&(s._tree.thread=a,s._tree.mod+=d-c),o&&!Mr(l)&&(l._tree.thread=o,l._tree.mod+=u-p,r=t)}return r}var l=e.call(this,t,i),u=l[0];Pr(u,function(t,e){t._tree={ancestor:t,prelim:0,mod:0,change:0,shift:0,number:e?e._tree.number+1:0}}),o(u),s(u,-u._tree.prelim);var c=Dr(u,Nr),d=Dr(u,zr),p=Dr(u,Tr),h=c.x-n(c,d)/2,f=d.x+n(d,c)/2,g=p.depth||1;return Pr(u,function(t){t.x=(t.x-h)/(f-h)*r[0],t.y=t.depth/g*r[1],delete t._tree}),l}var e=d3.layout.hierarchy().sort(null).value(null),n=jr,r=[1,1];return t.separation=function(e){return arguments.length?(n=e,t):n},t.size=function(e){return arguments.length?(r=e,t):r},ar(t,e)},d3.layout.treemap=function(){function t(t,e){for(var n,r,i=-1,o=t.length;++i<o;)r=(n=t[i]).value*(0>e?0:e),n.area=isNaN(r)||0>=r?0:r}function e(n){var o=n.children;if(o&&o.length){var s,a,l,u=d(n),c=[],p=o.slice(),h=1/0,f=Math.min(u.dx,u.dy);for(t(p,u.dx*u.dy/n.value),c.area=0;(l=p.length)>0;)c.push(s=p[l-1]),c.area+=s.area,(a=r(c,f))<=h?(p.pop(),h=a):(c.area-=c.pop().area,i(c,f,u,!1),f=Math.min(u.dx,u.dy),c.length=c.area=0,h=1/0);c.length&&(i(c,f,u,!0),c.length=c.area=0),o.forEach(e)}}function n(e){var r=e.children;if(r&&r.length){var o,s=d(e),a=r.slice(),l=[];for(t(a,s.dx*s.dy/e.value),l.area=0;o=a.pop();)l.push(o),l.area+=o.area,null!=o.z&&(i(l,o.z?s.dx:s.dy,s,!a.length),l.length=l.area=0);r.forEach(n)}}function r(t,e){for(var n,r=t.area,i=0,o=1/0,s=-1,a=t.length;++s<a;)(n=t[s].area)&&(o>n&&(o=n),n>i&&(i=n));return r*=r,e*=e,r?Math.max(e*i*h/r,r/(e*o*h)):1/0}function i(t,e,n,r){var i,o=-1,s=t.length,a=n.x,u=n.y,c=e?l(t.area/e):0;if(e==n.dx){for((r||c>n.dy)&&(c=n.dy);++o<s;)i=t[o],i.x=a,i.y=u,i.dy=c,a+=i.dx=Math.min(n.x+n.dx-a,c?l(i.area/c):0);i.z=!0,i.dx+=n.x+n.dx-a,n.y+=c,n.dy-=c}else{for((r||c>n.dx)&&(c=n.dx);++o<s;)i=t[o],i.x=a,i.y=u,i.dx=c,u+=i.dy=Math.min(n.y+n.dy-u,c?l(i.area/c):0);i.z=!1,i.dy+=n.y+n.dy-u,n.x+=c,n.dx-=c}}function o(r){var i=s||a(r),o=i[0];return o.x=0,o.y=0,o.dx=u[0],o.dy=u[1],s&&a.revalue(o),t([o],o.dx*o.dy/o.value),(s?n:e)(o),p&&(s=i),i}var s,a=d3.layout.hierarchy(),l=Math.round,u=[1,1],c=null,d=Or,p=!1,h=.5*(1+Math.sqrt(5));return o.size=function(t){return arguments.length?(u=t,o):u},o.padding=function(t){function e(e){var n=t.call(o,e,e.depth);return null==n?Or(e):Ir(e,"number"==typeof n?[n,n,n,n]:n)}function n(e){return Ir(e,t)}if(!arguments.length)return c;var r;return d=null==(c=t)?Or:"function"==(r=typeof t)?e:"number"===r?(t=[t,t,t,t],n):n,o},o.round=function(t){return arguments.length?(l=t?Math.round:Number,o):l!=Number},o.sticky=function(t){return arguments.length?(p=t,s=null,o):p},o.ratio=function(t){return arguments.length?(h=t,o):h},ar(o,a)},d3.csv=Rr(",","text/csv"),d3.tsv=Rr("	","text/tab-separated-values"),d3.geo={};var hs=Math.PI/180;d3.geo.azimuthal=function(){function t(t){var e,r=t[0]*hs-n,u=t[1]*hs,c=Math.cos(r),d=Math.sin(r),p=Math.cos(u),h=Math.sin(u),f="orthographic"!==s?o*h+i*p*c:null,g="stereographic"===s?1/(1+f):"gnomonic"===s?1/f:"equidistant"===s?(e=Math.acos(f),e?e/Math.sin(e):0):"equalarea"===s?Math.sqrt(2/(1+f)):1,m=g*p*d,v=g*(o*p*c-i*h);return[a*m+l[0],a*v+l[1]]}var e,n,r,i,o,s="orthographic",a=200,l=[480,250];return t.invert=function(t){var e=(t[0]-l[0])/a,r=(t[1]-l[1])/a,u=Math.sqrt(e*e+r*r),c="stereographic"===s?2*Math.atan(u):"gnomonic"===s?Math.atan(u):"equidistant"===s?u:"equalarea"===s?2*Math.asin(.5*u):Math.asin(u),d=Math.sin(c),p=Math.cos(c);return[(n+Math.atan2(e*d,u*i*p+r*o*d))/hs,Math.asin(p*o-(u?r*d*i/u:0))/hs]},t.mode=function(e){return arguments.length?(s=e+"",t):s},t.origin=function(s){return arguments.length?(e=s,n=e[0]*hs,r=e[1]*hs,i=Math.cos(r),o=Math.sin(r),t):e},t.scale=function(e){return arguments.length?(a=+e,t):a},t.translate=function(e){return arguments.length?(l=[+e[0],+e[1]],t):l},t.origin([0,0])},d3.geo.albers=function(){function t(t){var e=r*(hs*t[0]-n),s=Math.sqrt(i-2*r*Math.sin(hs*t[1]))/r;return[l*s*Math.sin(e)+u[0],l*(s*Math.cos(e)-o)+u[1]]}function e(){var e=hs*a[0],l=hs*a[1],u=hs*s[1],c=Math.sin(e),d=Math.cos(e);return n=hs*s[0],r=.5*(c+Math.sin(l)),i=d*d+2*r*c,o=Math.sqrt(i-2*r*Math.sin(u))/r,t}var n,r,i,o,s=[-98,38],a=[29.5,45.5],l=1e3,u=[480,250];return t.invert=function(t){var e=(t[0]-u[0])/l,s=(t[1]-u[1])/l,a=o+s,c=Math.atan2(e,a),d=Math.sqrt(e*e+a*a);return[(n+c/r)/hs,Math.asin((i-d*d*r*r)/(2*r))/hs]},t.origin=function(t){return arguments.length?(s=[+t[0],+t[1]],e()):s},t.parallels=function(t){return arguments.length?(a=[+t[0],+t[1]],e()):a},t.scale=function(e){return arguments.length?(l=+e,t):l},t.translate=function(e){return arguments.length?(u=[+e[0],+e[1]],t):u},e()},d3.geo.albersUsa=function(){function t(t){var o=t[0],s=t[1];return(s>50?n:-140>o?r:21>s?i:e)(t)}var e=d3.geo.albers(),n=d3.geo.albers().origin([-160,60]).parallels([55,65]),r=d3.geo.albers().origin([-160,20]).parallels([8,18]),i=d3.geo.albers().origin([-60,10]).parallels([8,18]);return t.scale=function(o){return arguments.length?(e.scale(o),n.scale(.6*o),r.scale(o),i.scale(1.5*o),t.translate(e.translate())):e.scale()},t.translate=function(o){if(!arguments.length)return e.translate();var s=e.scale()/1e3,a=o[0],l=o[1];return e.translate(o),n.translate([a-400*s,l+170*s]),r.translate([a-190*s,l+200*s]),i.translate([a+580*s,l+430*s]),t},t.scale(e.scale())},d3.geo.bonne=function(){function t(t){var a=t[0]*hs-e,l=t[1]*hs-n;if(r){var u=i+r-l,c=a*Math.cos(l)/u;a=u*Math.sin(c),l=u*Math.cos(c)-i}else a*=Math.cos(l),l*=-1;return[o*a+s[0],o*l+s[1]]}var e,n,r,i,o=200,s=[480,250];return t.invert=function(t){var n=(t[0]-s[0])/o,a=(t[1]-s[1])/o;if(r){var l=i+a,u=Math.sqrt(n*n+l*l);a=i+r-u,n=e+u*Math.atan2(n,l)/Math.cos(a)}else a*=-1,n/=Math.cos(a);return[n/hs,a/hs]},t.parallel=function(e){return arguments.length?(i=1/Math.tan(r=e*hs),t):r/hs},t.origin=function(r){return arguments.length?(e=r[0]*hs,n=r[1]*hs,t):[e/hs,n/hs]},t.scale=function(e){return arguments.length?(o=+e,t):o},t.translate=function(e){return arguments.length?(s=[+e[0],+e[1]],t):s},t.origin([0,0]).parallel(45)},d3.geo.equirectangular=function(){function t(t){var r=t[0]/360,i=-t[1]/360;return[e*r+n[0],e*i+n[1]]}var e=500,n=[480,250];return t.invert=function(t){var r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return[360*r,-360*i]},t.scale=function(n){return arguments.length?(e=+n,t):e},t.translate=function(e){return arguments.length?(n=[+e[0],+e[1]],t):n},t},d3.geo.mercator=function(){function t(t){var r=t[0]/360,i=-(Math.log(Math.tan(Math.PI/4+t[1]*hs/2))/hs)/360;return[e*r+n[0],e*Math.max(-.5,Math.min(.5,i))+n[1]]}var e=500,n=[480,250];return t.invert=function(t){var r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return[360*r,2*Math.atan(Math.exp(-360*i*hs))/hs-90]},t.scale=function(n){return arguments.length?(e=+n,t):e},t.translate=function(e){return arguments.length?(n=[+e[0],+e[1]],t):n},t},d3.geo.path=function(){function t(t){"function"==typeof o&&(s=Fr(o.apply(this,arguments))),u(t);var e=l.length?l.join(""):null;return l=[],e}function e(t){return a(t).join(",")}function n(t){for(var e=i(t[0]),n=0,r=t.length;++n<r;)e-=i(t[n]);return e}function r(t){for(var e=d3.geom.polygon(t[0].map(a)),n=e.area(),r=e.centroid(0>n?(n*=-1,1):-1),i=r[0],o=r[1],s=n,l=0,u=t.length;++l<u;)e=d3.geom.polygon(t[l].map(a)),n=e.area(),r=e.centroid(0>n?(n*=-1,1):-1),i-=r[0],o-=r[1],s-=n;return[i,o,6*s]}function i(t){return Math.abs(d3.geom.polygon(t.map(a)).area())}var o=4.5,s=Fr(o),a=d3.geo.albersUsa(),l=[],u=$r({FeatureCollection:function(t){for(var e=t.features,n=-1,r=e.length;++n<r;)l.push(u(e[n].geometry))},Feature:function(t){u(t.geometry)},Point:function(t){l.push("M",e(t.coordinates),s)},MultiPoint:function(t){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)l.push("M",e(n[r]),s)},LineString:function(t){var n=t.coordinates,r=-1,i=n.length;for(l.push("M");++r<i;)l.push(e(n[r]),"L");l.pop()},MultiLineString:function(t){for(var n,r,i,o=t.coordinates,s=-1,a=o.length;++s<a;){for(n=o[s],r=-1,i=n.length,l.push("M");++r<i;)l.push(e(n[r]),"L");l.pop()}},Polygon:function(t){for(var n,r,i,o=t.coordinates,s=-1,a=o.length;++s<a;)if(n=o[s],r=-1,(i=n.length-1)>0){for(l.push("M");++r<i;)l.push(e(n[r]),"L");l[l.length-1]="Z"}},MultiPolygon:function(t){for(var n,r,i,o,s,a,u=t.coordinates,c=-1,d=u.length;++c<d;)for(n=u[c],r=-1,i=n.length;++r<i;)if(o=n[r],s=-1,(a=o.length-1)>0){for(l.push("M");++s<a;)l.push(e(o[s]),"L");l[l.length-1]="Z"}},GeometryCollection:function(t){for(var e=t.geometries,n=-1,r=e.length;++n<r;)l.push(u(e[n]))}}),c=t.area=$r({FeatureCollection:function(t){for(var e=0,n=t.features,r=-1,i=n.length;++r<i;)e+=c(n[r]);return e},Feature:function(t){return c(t.geometry)},Polygon:function(t){return n(t.coordinates)},MultiPolygon:function(t){for(var e=0,r=t.coordinates,i=-1,o=r.length;++i<o;)e+=n(r[i]);return e},GeometryCollection:function(t){for(var e=0,n=t.geometries,r=-1,i=n.length;++r<i;)e+=c(n[r]);return e}},0),d=t.centroid=$r({Feature:function(t){return d(t.geometry)},Polygon:function(t){var e=r(t.coordinates);return[e[0]/e[2],e[1]/e[2]]},MultiPolygon:function(t){for(var e,n=t.coordinates,i=0,o=0,s=0,a=-1,l=n.length;++a<l;)e=r(n[a]),i+=e[0],o+=e[1],s+=e[2];return[i/s,o/s]}});return t.projection=function(e){return a=e,t},t.pointRadius=function(e){return"function"==typeof e?o=e:(o=+e,s=Fr(o)),t},t},d3.geo.bounds=function(t){var e=1/0,n=1/0,r=-1/0,i=-1/0;return qr(t,function(t,o){e>t&&(e=t),t>r&&(r=t),n>o&&(n=o),o>i&&(i=o)}),[[e,n],[r,i]]};var fs={Feature:Hr,FeatureCollection:Wr,GeometryCollection:Vr,LineString:Br,MultiLineString:Yr,MultiPoint:Br,MultiPolygon:Ur,Point:Qr,Polygon:Gr};d3.geo.circle=function(){function t(){}function e(t){return l.distance(t)<a}function n(t){for(var e,n,i,o,s,u=-1,c=t.length,d=[];++u<c;)s=l.distance(i=t[u]),a>s?(n&&d.push(Kr(n,i)((o-a)/(o-s))),d.push(i),e=n=null):(n=i,!e&&d.length&&(d.push(Kr(d[d.length-1],n)((a-o)/(s-o))),e=n)),o=s;return e=t[0],n=d[0],n&&i[0]===e[0]&&i[1]===e[1]&&(i[0]!==n[0]||i[1]!==n[1])&&d.push(n),r(d)}function r(t){for(var e,n,r,i=0,o=t.length,s=o?[t[0]]:t,a=l.source();++i<o;)for(r=l.source(t[i-1])(t[i]).coordinates,e=0,n=r.length;++e<n;)s.push(r[e]);return l.source(a),s}var o=[0,0],s=89.99,a=s*hs,l=d3.geo.greatArc().source(o).target(i);t.clip=function(t){return"function"==typeof o&&l.source(o.apply(this,arguments)),u(t)||null};var u=$r({FeatureCollection:function(t){var e=t.features.map(u).filter(i);return e&&(t=Object.create(t),t.features=e,t)},Feature:function(t){var e=u(t.geometry);return e&&(t=Object.create(t),t.geometry=e,t)},Point:function(t){return e(t.coordinates)&&t},MultiPoint:function(t){var n=t.coordinates.filter(e);return n.length&&{type:t.type,coordinates:n}},LineString:function(t){var e=n(t.coordinates);return e.length&&(t=Object.create(t),t.coordinates=e,t)},MultiLineString:function(t){var e=t.coordinates.map(n).filter(function(t){return t.length});return e.length&&(t=Object.create(t),t.coordinates=e,t)},Polygon:function(t){var e=t.coordinates.map(n);return e[0].length&&(t=Object.create(t),t.coordinates=e,t)},MultiPolygon:function(t){var e=t.coordinates.map(function(t){return t.map(n)}).filter(function(t){return t[0].length});return e.length&&(t=Object.create(t),t.coordinates=e,t)},GeometryCollection:function(t){var e=t.geometries.map(u).filter(i);return e.length&&(t=Object.create(t),t.geometries=e,t)}});return t.origin=function(e){return arguments.length?(o=e,"function"!=typeof o&&l.source(o),t):o},t.angle=function(e){return arguments.length?(a=(s=+e)*hs,t):s},d3.rebind(t,l,"precision")},d3.geo.greatArc=function(){function t(){for(var r=t.distance.apply(this,arguments),i=0,a=o/r,l=[e];(i+=a)<1;)l.push(s(i));return l.push(n),{type:"LineString",coordinates:l}}var e,n,r=Xr,i=Zr,o=6*hs,s=Jr();return t.distance=function(){return"function"==typeof r&&s.source(e=r.apply(this,arguments)),"function"==typeof i&&s.target(n=i.apply(this,arguments)),s.distance()},t.source=function(n){return arguments.length?(r=n,"function"!=typeof r&&s.source(e=r),t):r},t.target=function(e){return arguments.length?(i=e,"function"!=typeof i&&s.target(n=i),t):i},t.precision=function(e){return arguments.length?(o=e*hs,t):o/hs},t},d3.geo.greatCircle=d3.geo.circle,d3.geom={},d3.geom.contour=function(t,e){var n=e||ti(t),r=[],i=n[0],o=n[1],s=0,a=0,l=0/0,u=0/0,c=0;do c=0,t(i-1,o-1)&&(c+=1),t(i,o-1)&&(c+=2),t(i-1,o)&&(c+=4),t(i,o)&&(c+=8),6===c?(s=-1===u?-1:1,a=0):9===c?(s=0,a=1===l?-1:1):(s=gs[c],a=ms[c]),s!=l&&a!=u&&(r.push([i,o]),l=s,u=a),i+=s,o+=a;while(n[0]!=i||n[1]!=o);return r};var gs=[1,0,1,1,-1,0,-1,1,0,0,0,0,-1,0,-1,0/0],ms=[0,-1,0,0,0,-1,0,0,1,-1,1,1,0,-1,0,0/0];d3.geom.hull=function(t){if(t.length<3)return[];var e,n,r,i,o,s,a,l,u,c,d=t.length,p=d-1,h=[],f=[],g=0;for(e=1;d>e;++e)t[e][1]<t[g][1]?g=e:t[e][1]==t[g][1]&&(g=t[e][0]<t[g][0]?e:g);for(e=0;d>e;++e)e!==g&&(i=t[e][1]-t[g][1],r=t[e][0]-t[g][0],h.push({angle:Math.atan2(i,r),index:e}));for(h.sort(function(t,e){return t.angle-e.angle}),u=h[0].angle,l=h[0].index,a=0,e=1;p>e;++e)n=h[e].index,u==h[e].angle?(r=t[l][0]-t[g][0],i=t[l][1]-t[g][1],o=t[n][0]-t[g][0],s=t[n][1]-t[g][1],r*r+i*i>=o*o+s*s?h[e].index=-1:(h[a].index=-1,u=h[e].angle,a=e,l=n)):(u=h[e].angle,a=e,l=n);for(f.push(g),e=0,n=0;2>e;++n)-1!==h[n].index&&(f.push(h[n].index),e++);for(c=f.length;p>n;++n)if(-1!==h[n].index){for(;!ei(f[c-2],f[c-1],h[n].index,t);)--c;f[c++]=h[n].index}var m=[];for(e=0;c>e;++e)m.push(t[f[e]]);return m},d3.geom.polygon=function(t){return t.area=function(){for(var e=0,n=t.length,r=t[n-1][0]*t[0][1],i=t[n-1][1]*t[0][0];++e<n;)r+=t[e-1][0]*t[e][1],i+=t[e-1][1]*t[e][0];return.5*(i-r)},t.centroid=function(e){var n,r,i=-1,o=t.length,s=0,a=0,l=t[o-1];for(arguments.length||(e=-1/(6*t.area()));++i<o;)n=l,l=t[i],r=n[0]*l[1]-l[0]*n[1],s+=(n[0]+l[0])*r,a+=(n[1]+l[1])*r;return[s*e,a*e]},t.clip=function(e){for(var n,r,i,o,s,a,l=-1,u=t.length,c=t[u-1];++l<u;){for(n=e.slice(),e.length=0,o=t[l],s=n[(i=n.length)-1],r=-1;++r<i;)a=n[r],ni(a,c,o)?(ni(s,c,o)||e.push(ri(s,a,c,o)),e.push(a)):ni(s,c,o)&&e.push(ri(s,a,c,o)),s=a;c=o}return e},t},d3.geom.voronoi=function(t){var e=t.map(function(){return[]});return ii(t,function(t){var n,r,i,o,s,a;1===t.a&&t.b>=0?(n=t.ep.r,r=t.ep.l):(n=t.ep.l,r=t.ep.r),1===t.a?(s=n?n.y:-1e6,i=t.c-t.b*s,a=r?r.y:1e6,o=t.c-t.b*a):(i=n?n.x:-1e6,s=t.c-t.a*i,o=r?r.x:1e6,a=t.c-t.a*o);var l=[i,s],u=[o,a];e[t.region.l.index].push(l,u),e[t.region.r.index].push(l,u)}),e.map(function(e,n){var r=t[n][0],i=t[n][1];return e.forEach(function(t){t.angle=Math.atan2(t[0]-r,t[1]-i)}),e.sort(function(t,e){return t.angle-e.angle}).filter(function(t,n){return!n||t.angle-e[n-1].angle>1e-10})})};var vs={l:"r",r:"l"};d3.geom.delaunay=function(t){var e=t.map(function(){return[]}),n=[];return ii(t,function(n){e[n.region.l.index].push(t[n.region.r.index])}),e.forEach(function(e,r){var i=t[r],o=i[0],s=i[1];e.forEach(function(t){t.angle=Math.atan2(t[0]-o,t[1]-s)}),e.sort(function(t,e){return t.angle-e.angle});for(var a=0,l=e.length-1;l>a;a++)n.push([i,e[a],e[a+1]])}),n},d3.geom.quadtree=function(t,e,n,r,i){function o(t,e,n,r,i,o){if(!isNaN(e.x)&&!isNaN(e.y))if(t.leaf){var a=t.point;a?Math.abs(a.x-e.x)+Math.abs(a.y-e.y)<.01?s(t,e,n,r,i,o):(t.point=null,s(t,a,n,r,i,o),s(t,e,n,r,i,o)):t.point=e}else s(t,e,n,r,i,o)}function s(t,e,n,r,i,s){var a=.5*(n+i),l=.5*(r+s),u=e.x>=a,c=e.y>=l,d=(c<<1)+u;t.leaf=!1,t=t.nodes[d]||(t.nodes[d]=oi()),u?n=a:i=a,c?r=l:s=l,o(t,e,n,r,i,s)}var a,l=-1,u=t.length;if(u&&isNaN(t[0].x)&&(t=t.map(ai)),arguments.length<5)if(3===arguments.length)i=r=n,n=e;else{for(e=n=1/0,r=i=-1/0;++l<u;)a=t[l],a.x<e&&(e=a.x),a.y<n&&(n=a.y),a.x>r&&(r=a.x),a.y>i&&(i=a.y);var c=r-e,d=i-n;c>d?i=n+c:r=e+d}var p=oi();return p.add=function(t){o(p,t,e,n,r,i)},p.visit=function(t){si(t,p,e,n,r,i)},t.forEach(p.add),p},d3.time={};var ys=Date,bs=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];li.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){_s.setUTCDate.apply(this._,arguments)},setDay:function(){_s.setUTCDay.apply(this._,arguments)},setFullYear:function(){_s.setUTCFullYear.apply(this._,arguments)},setHours:function(){_s.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){_s.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){_s.setUTCMinutes.apply(this._,arguments)},setMonth:function(){_s.setUTCMonth.apply(this._,arguments)},setSeconds:function(){_s.setUTCSeconds.apply(this._,arguments)},setTime:function(){_s.setTime.apply(this._,arguments)}};var _s=Date.prototype,ws="%a %b %e %H:%M:%S %Y",xs="%m/%d/%y",ks="%H:%M:%S",Cs=bs,js=Cs.map(ui),Ms=["January","February","March","April","May","June","July","August","September","October","November","December"],Ss=Ms.map(ui);d3.time.format=function(t){function e(e){for(var r,i,o=[],s=-1,a=0;++s<n;)37==t.charCodeAt(s)&&(o.push(t.substring(a,s),(i=Rs[r=t.charAt(++s)])?i(e):r),a=s+1);return o.push(t.substring(a,s)),o.join("")}var n=t.length;return e.parse=function(e){var n={y:1900,m:0,d:1,H:0,M:0,S:0,L:0},r=ci(n,t,e,0);if(r!=e.length)return null;"p"in n&&(n.H=n.H%12+12*n.p);var i=new ys;return i.setFullYear(n.y,n.m,n.d),i.setHours(n.H,n.M,n.S,n.L),i},e.toString=function(){return t},e};var Ds=d3.format("02d"),zs=d3.format("03d"),Ns=d3.format("04d"),Ts=d3.format("2d"),Ps=di(Cs),Ls=di(js),Es=di(Ms),As=pi(Ms),Os=di(Ss),Is=pi(Ss),Rs={a:function(t){return js[t.getDay()]},A:function(t){return Cs[t.getDay()]},b:function(t){return Ss[t.getMonth()]},B:function(t){return Ms[t.getMonth()]},c:d3.time.format(ws),d:function(t){return Ds(t.getDate())},e:function(t){return Ts(t.getDate())},H:function(t){return Ds(t.getHours())},I:function(t){return Ds(t.getHours()%12||12)},j:function(t){return zs(1+d3.time.dayOfYear(t))},L:function(t){return zs(t.getMilliseconds())},m:function(t){return Ds(t.getMonth()+1)},M:function(t){return Ds(t.getMinutes())},p:function(t){return t.getHours()>=12?"PM":"AM"},S:function(t){return Ds(t.getSeconds())},U:function(t){return Ds(d3.time.sundayOfYear(t))},w:function(t){return t.getDay()},W:function(t){return Ds(d3.time.mondayOfYear(t))},x:d3.time.format(xs),X:d3.time.format(ks),y:function(t){return Ds(t.getFullYear()%100)},Y:function(t){return Ns(t.getFullYear()%1e4)},Z:Ni,"%":function(){return"%"}},$s={a:hi,A:fi,b:gi,B:mi,c:vi,d:Ci,e:Ci,H:ji,I:ji,L:Di,m:ki,M:Mi,p:zi,S:Si,x:yi,X:bi,y:wi,Y:_i},Fs=/^\s*\d+/,qs=d3.map({am:0,pm:1});d3.time.format.utc=function(t){function e(t){try{ys=li;var e=new ys;return e._=t,n(e)}finally{ys=Date}}var n=d3.time.format(t);return e.parse=function(t){try{ys=li;var e=n.parse(t);return e&&e._}finally{ys=Date}},e.toString=n.toString,e};var Hs=d3.time.format.utc("%Y-%m-%dT%H:%M:%S.%LZ");d3.time.format.iso=Date.prototype.toISOString?Ti:Hs,Ti.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},Ti.toString=Hs.toString,d3.time.second=Pi(function(t){return new ys(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),d3.time.seconds=d3.time.second.range,d3.time.seconds.utc=d3.time.second.utc.range,d3.time.minute=Pi(function(t){return new ys(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),d3.time.minutes=d3.time.minute.range,d3.time.minutes.utc=d3.time.minute.utc.range,d3.time.hour=Pi(function(t){var e=t.getTimezoneOffset()/60;return new ys(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),d3.time.hours=d3.time.hour.range,d3.time.hours.utc=d3.time.hour.utc.range,d3.time.day=Pi(function(t){var e=new ys(1970,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),d3.time.days=d3.time.day.range,d3.time.days.utc=d3.time.day.utc.range,d3.time.dayOfYear=function(t){var e=d3.time.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},bs.forEach(function(t,e){t=t.toLowerCase(),e=7-e;var n=d3.time[t]=Pi(function(t){return(t=d3.time.day(t)).setDate(t.getDate()-(t.getDay()+e)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var n=d3.time.year(t).getDay();return Math.floor((d3.time.dayOfYear(t)+(n+e)%7)/7)-(n!==e)});d3.time[t+"s"]=n.range,d3.time[t+"s"].utc=n.utc.range,d3.time[t+"OfYear"]=function(t){var n=d3.time.year(t).getDay();return Math.floor((d3.time.dayOfYear(t)+(n+e)%7)/7)}}),d3.time.week=d3.time.sunday,d3.time.weeks=d3.time.sunday.range,d3.time.weeks.utc=d3.time.sunday.utc.range,d3.time.weekOfYear=d3.time.sundayOfYear,d3.time.month=Pi(function(t){return t=d3.time.day(t),t.setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),d3.time.months=d3.time.month.range,d3.time.months.utc=d3.time.month.utc.range,d3.time.year=Pi(function(t){return t=d3.time.day(t),t.setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),d3.time.years=d3.time.year.range,d3.time.years.utc=d3.time.year.utc.range;var Ws=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Vs=[[d3.time.second,1],[d3.time.second,5],[d3.time.second,15],[d3.time.second,30],[d3.time.minute,1],[d3.time.minute,5],[d3.time.minute,15],[d3.time.minute,30],[d3.time.hour,1],[d3.time.hour,3],[d3.time.hour,6],[d3.time.hour,12],[d3.time.day,1],[d3.time.day,2],[d3.time.week,1],[d3.time.month,1],[d3.time.month,3],[d3.time.year,1]],Bs=[[d3.time.format("%Y"),function(){return!0}],[d3.time.format("%B"),function(t){return t.getMonth()}],[d3.time.format("%b %d"),function(t){return 1!=t.getDate()}],[d3.time.format("%a %d"),function(t){return t.getDay()&&1!=t.getDate()}],[d3.time.format("%I %p"),function(t){return t.getHours()}],[d3.time.format("%I:%M"),function(t){return t.getMinutes()}],[d3.time.format(":%S"),function(t){return t.getSeconds()}],[d3.time.format(".%L"),function(t){return t.getMilliseconds()}]],Ys=d3.scale.linear(),Us=Ii(Bs);Vs.year=function(t,e){return Ys.domain(t.map($i)).ticks(e).map(Ri)},d3.time.scale=function(){return Ei(d3.scale.linear(),Vs,Us)};var Qs=Vs.map(function(t){return[t[0].utc,t[1]]}),Gs=[[d3.time.format.utc("%Y"),function(){return!0}],[d3.time.format.utc("%B"),function(t){return t.getUTCMonth()}],[d3.time.format.utc("%b %d"),function(t){return 1!=t.getUTCDate()}],[d3.time.format.utc("%a %d"),function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],[d3.time.format.utc("%I %p"),function(t){return t.getUTCHours()}],[d3.time.format.utc("%I:%M"),function(t){return t.getUTCMinutes()}],[d3.time.format.utc(":%S"),function(t){return t.getUTCSeconds()}],[d3.time.format.utc(".%L"),function(t){return t.getUTCMilliseconds()}]],Xs=Ii(Gs);Qs.year=function(t,e){return Ys.domain(t.map(qi)).ticks(e).map(Fi)},d3.time.scale.utc=function(){return Ei(d3.scale.linear(),Qs,Xs)}}(),define("d3",function(t){return function(){var e;return e||t.d3}}(this)),function(){function t(t,e){return new Date(e,t+1,0).getDate()}function e(t,e,n){return function(r,i,o){var s=t(r),a=[];if(r>s&&e(s),o>1)for(;i>s;){var l=new Date(+s);n(l)%o===0&&a.push(l),e(s)}else for(;i>s;)a.push(new Date(+s)),e(s);return a}}var n=window.nv||{};n.version="1.1.14b",n.dev=!0,window.nv=n,n.tooltip=n.tooltip||{},n.utils=n.utils||{},n.models=n.models||{},n.charts={},n.graphs=[],n.logs={},n.dispatch=d3.dispatch("render_start","render_end"),n.dev&&(n.dispatch.on("render_start",function(){n.logs.startTime=+new Date}),n.dispatch.on("render_end",function(){n.logs.endTime=+new Date,n.logs.totalTime=n.logs.endTime-n.logs.startTime,n.log("total",n.logs.totalTime)})),n.log=function(){if(n.dev&&console.log&&console.log.apply)console.log.apply(console,arguments);else if(n.dev&&"function"==typeof console.log&&Function.prototype.bind){var t=Function.prototype.bind.call(console.log,console);t.apply(console,arguments)}return arguments[arguments.length-1]},n.render=function(t){t=t||1,n.render.active=!0,n.dispatch.render_start(),setTimeout(function(){for(var e,r,i=0;t>i&&(r=n.render.queue[i]);i++)e=r.generate(),typeof r.callback==typeof Function&&r.callback(e),n.graphs.push(e);n.render.queue.splice(0,i),n.render.queue.length?setTimeout(arguments.callee,0):(n.render.active=!1,n.dispatch.render_end())},0)},n.render.active=!1,n.render.queue=[],n.addGraph=function(t){typeof arguments[0]==typeof Function&&(t={generate:arguments[0],callback:arguments[1]}),n.render.queue.push(t),n.render.active||n.render()},n.identity=function(t){return t},n.strip=function(t){return t.replace(/(\s|&)/g,"")},d3.time.monthEnd=function(t){return new Date(t.getFullYear(),t.getMonth(),0)},d3.time.monthEnds=e(d3.time.monthEnd,function(e){e.setUTCDate(e.getUTCDate()+1),e.setDate(t(e.getMonth()+1,e.getFullYear()))},function(t){return t.getMonth()}),n.interactiveGuideline=function(){"use strict";function t(d){d.each(function(d){function p(){var n=d3.mouse(this),r=n[0],i=n[1],l=!0,u=!1;if(c&&(r=d3.event.offsetX,i=d3.event.offsetY,"svg"!==d3.event.target.tagName&&(l=!1),d3.event.target.className.baseVal.match("nv-legend")&&(u=!0)),l&&(r-=o.left,i-=o.top),0>r||0>i||r>f||i>g||d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement||u){if(c&&d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement&&d3.event.relatedTarget.className.match(e.nvPointerEventsClass))return;return a.elementMouseout({mouseX:r,mouseY:i}),void t.renderGuideLine(null)}var d=s.invert(r);a.elementMousemove({mouseX:r,mouseY:i,pointXValue:d}),"dblclick"===d3.event.type&&a.elementDblclick({mouseX:r,mouseY:i,pointXValue:d})}var h=d3.select(this),f=r||960,g=i||400,m=h.selectAll("g.nv-wrap.nv-interactiveLineLayer").data([d]),v=m.enter().append("g").attr("class"," nv-wrap nv-interactiveLineLayer");v.append("g").attr("class","nv-interactiveGuideLine"),u&&(u.on("mousemove",p,!0).on("mouseout",p,!0).on("dblclick",p),t.renderGuideLine=function(t){if(l){var e=m.select(".nv-interactiveGuideLine").selectAll("line").data(null!=t?[n.utils.NaNtoZero(t)]:[],String);e.enter().append("line").attr("class","nv-guideline").attr("x1",function(t){return t}).attr("x2",function(t){return t}).attr("y1",g).attr("y2",0),e.exit().remove()}})})}var e=n.models.tooltip(),r=null,i=null,o={left:0,top:0},s=d3.scale.linear(),a=(d3.scale.linear(),d3.dispatch("elementMousemove","elementMouseout","elementDblclick")),l=!0,u=null,c=-1!==navigator.userAgent.indexOf("MSIE");return t.dispatch=a,t.tooltip=e,t.margin=function(e){return arguments.length?(o.top="undefined"!=typeof e.top?e.top:o.top,o.left="undefined"!=typeof e.left?e.left:o.left,t):o},t.width=function(e){return arguments.length?(r=e,t):r},t.height=function(e){return arguments.length?(i=e,t):i},t.xScale=function(e){return arguments.length?(s=e,t):s},t.showGuideLine=function(e){return arguments.length?(l=e,t):l},t.svgContainer=function(e){return arguments.length?(u=e,t):u},t},n.interactiveBisect=function(t,e,n){"use strict";if(!t instanceof Array)return null;"function"!=typeof n&&(n=function(t){return t.x});var r=d3.bisector(n).left,i=d3.max([0,r(t,e)-1]),o=n(t[i],i);if("undefined"==typeof o&&(o=i),o===e)return i;var s=d3.min([i+1,t.length-1]),a=n(t[s],s);return"undefined"==typeof a&&(a=s),Math.abs(a-e)>=Math.abs(o-e)?i:s},n.nearestValueIndex=function(t,e,n){"use strict";var r=1/0,i=null;return t.forEach(function(t,o){var s=Math.abs(e-t);r>=s&&n>s&&(r=s,i=o)}),i},function(){"use strict";window.nv.tooltip={},window.nv.models.tooltip=function(){function t(){if(d){var t=d3.select(d);"svg"!==t.node().tagName&&(t=t.select("svg"));var e=t.node()?t.attr("viewBox"):null;if(e){e=e.split(" ");var n=parseInt(t.style("width"))/e[2];h.left=h.left*n,h.top=h.top*n}}}function e(t){var e;e=d3.select(d?d:"body");var n=e.select(".nvtooltip");return null===n.node()&&(n=e.append("div").attr("class","nvtooltip "+(c?c:"xy-tooltip")).attr("id",g)),n.node().innerHTML=t,n.style("top",0).style("left",0).style("opacity",0),n.selectAll("div, table, td, tr").classed(m,!0),n.classed(m,!0),n.node()}function r(){if(f&&_(o)){t();var i=h.left,c=null!=u?u:h.top,g=e(b(o));if(p=g,d){var m=d.getElementsByTagName("svg")[0],v=(m?m.getBoundingClientRect():d.getBoundingClientRect(),{left:0,top:0});if(m){var y=m.getBoundingClientRect(),w=d.getBoundingClientRect(),x=y.top;if(0>x){var k=d.getBoundingClientRect();x=Math.abs(x)>k.height?0:x}v.top=Math.abs(x-w.top),v.left=Math.abs(y.left-w.left)}i+=d.offsetLeft+v.left-2*d.scrollLeft,c+=d.offsetTop+v.top-2*d.scrollTop}return l&&l>0&&(c=Math.floor(c/l)*l),n.tooltip.calcTooltipPosition([i,c],s,a,g),r}}var i=null,o=null,s="w",a=50,l=25,u=null,c=null,d=null,p=null,h={left:null,top:null},f=!0,g="nvtooltip-"+Math.floor(1e5*Math.random()),m="nv-pointer-events-none",v=function(t){return t},y=function(t){return t},b=function(t){if(null!=i)return i;if(null==t)return"";var e=d3.select(document.createElement("table")),n=e.selectAll("thead").data([t]).enter().append("thead");n.append("tr").append("td").attr("colspan",3).append("strong").classed("x-value",!0).html(y(t.value));var r=e.selectAll("tbody").data([t]).enter().append("tbody"),o=r.selectAll("tr").data(function(t){return t.series}).enter().append("tr").classed("highlight",function(t){return t.highlight});o.append("td").classed("legend-color-guide",!0).append("div").style("background-color",function(t){return t.color}),o.append("td").classed("key",!0).html(function(t){return t.key}),o.append("td").classed("value",!0).html(function(t,e){return v(t.value,e)}),o.selectAll("td").each(function(t){if(t.highlight){var e=d3.scale.linear().domain([0,1]).range(["#fff",t.color]),n=.6;d3.select(this).style("border-bottom-color",e(n)).style("border-top-color",e(n))}});var s=e.node().outerHTML;return void 0!==t.footer&&(s+="<div class='footer'>"+t.footer+"</div>"),s},_=function(t){return t&&t.series&&t.series.length>0?!0:!1};return r.nvPointerEventsClass=m,r.content=function(t){return arguments.length?(i=t,r):i},r.tooltipElem=function(){return p},r.contentGenerator=function(t){return arguments.length?("function"==typeof t&&(b=t),r):b},r.data=function(t){return arguments.length?(o=t,r):o},r.gravity=function(t){return arguments.length?(s=t,r):s},r.distance=function(t){return arguments.length?(a=t,r):a},r.snapDistance=function(t){return arguments.length?(l=t,r):l},r.classes=function(t){return arguments.length?(c=t,r):c},r.chartContainer=function(t){return arguments.length?(d=t,r):d},r.position=function(t){return arguments.length?(h.left="undefined"!=typeof t.left?t.left:h.left,h.top="undefined"!=typeof t.top?t.top:h.top,r):h},r.fixedTop=function(t){return arguments.length?(u=t,r):u},r.enabled=function(t){return arguments.length?(f=t,r):f},r.valueFormatter=function(t){return arguments.length?("function"==typeof t&&(v=t),r):v},r.headerFormatter=function(t){return arguments.length?("function"==typeof t&&(y=t),r):y},r.id=function(){return g},r},n.tooltip.show=function(t,e,r,i,o,s){var a=document.createElement("div");a.className="nvtooltip "+(s?s:"xy-tooltip");var l=o;(!o||o.tagName.match(/g|svg/i))&&(l=document.getElementsByTagName("body")[0]),a.style.left=0,a.style.top=0,a.style.opacity=0,a.innerHTML=e,l.appendChild(a),o&&(t[0]=t[0]-o.scrollLeft,t[1]=t[1]-o.scrollTop),n.tooltip.calcTooltipPosition(t,r,i,a)},n.tooltip.findFirstNonSVGParent=function(t){for(;null!==t.tagName.match(/^g|svg$/i);)t=t.parentNode;
return t},n.tooltip.findTotalOffsetTop=function(t,e){var n=e;do isNaN(t.offsetTop)||(n+=t.offsetTop);while(t=t.offsetParent);return n},n.tooltip.findTotalOffsetLeft=function(t,e){var n=e;do isNaN(t.offsetLeft)||(n+=t.offsetLeft);while(t=t.offsetParent);return n},n.tooltip.calcTooltipPosition=function(t,e,r,i){var o,s,a=parseInt(i.offsetHeight),l=parseInt(i.offsetWidth),u=n.utils.windowSize().width,c=n.utils.windowSize().height,d=window.pageYOffset,p=window.pageXOffset;c=window.innerWidth>=document.body.scrollWidth?c:c-16,u=window.innerHeight>=document.body.scrollHeight?u:u-16,e=e||"s",r=r||20;var h=function(t){return n.tooltip.findTotalOffsetTop(t,s)},f=function(t){return n.tooltip.findTotalOffsetLeft(t,o)};switch(e){case"e":o=t[0]-l-r,s=t[1]-a/2;var g=f(i),m=h(i);p>g&&(o=t[0]+r>p?t[0]+r:p-g+o),d>m&&(s=d-m+s),m+a>d+c&&(s=d+c-m+s-a);break;case"w":o=t[0]+r,s=t[1]-a/2;var g=f(i),m=h(i);g+l>u&&(o=t[0]-l-r),d>m&&(s=d+5),m+a>d+c&&(s=d+c-m+s-a);break;case"n":o=t[0]-l/2-5,s=t[1]+r;var g=f(i),m=h(i);p>g&&(o=p+5),g+l>u&&(o=o-l/2+5),m+a>d+c&&(s=d+c-m+s-a);break;case"s":o=t[0]-l/2,s=t[1]-a-r;var g=f(i),m=h(i);p>g&&(o=p+5),g+l>u&&(o=o-l/2+5),d>m&&(s=d);break;case"none":o=t[0],s=t[1]-r;var g=f(i),m=h(i)}return i.style.left=o+"px",i.style.top=s+"px",i.style.opacity=1,i.style.position="absolute",i},n.tooltip.cleanup=function(){for(var t=document.getElementsByClassName("nvtooltip"),e=[];t.length;)e.push(t[0]),t[0].style.transitionDelay="0 !important",t[0].style.opacity=0,t[0].className="nvtooltip-pending-removal";setTimeout(function(){for(;e.length;){var t=e.pop();t.parentNode.removeChild(t)}},500)}}(),n.utils.windowSize=function(){var t={width:640,height:480};return document.body&&document.body.offsetWidth&&(t.width=document.body.offsetWidth,t.height=document.body.offsetHeight),"CSS1Compat"==document.compatMode&&document.documentElement&&document.documentElement.offsetWidth&&(t.width=document.documentElement.offsetWidth,t.height=document.documentElement.offsetHeight),window.innerWidth&&window.innerHeight&&(t.width=window.innerWidth,t.height=window.innerHeight),t},n.utils.windowResize=function(t){if(void 0!==t){var e=window.onresize;window.onresize=function(n){"function"==typeof e&&e(n),t(n)}}},n.utils.getColor=function(t){return arguments.length?"[object Array]"===Object.prototype.toString.call(t)?function(e,n){return e.color||t[n%t.length]}:t:n.utils.defaultColor()},n.utils.defaultColor=function(){var t=d3.scale.category20().range();return function(e,n){return e.color||t[n%t.length]}},n.utils.customTheme=function(t,e,n){e=e||function(t){return t.key},n=n||d3.scale.category20().range();var r=n.length;return function(i){var o=e(i);return r||(r=n.length),"undefined"!=typeof t[o]?"function"==typeof t[o]?t[o]():t[o]:n[--r]}},n.utils.pjax=function(t,e){function r(r){d3.html(r,function(r){var i=d3.select(e).node();i.parentNode.replaceChild(d3.select(r).select(e).node(),i),n.utils.pjax(t,e)})}d3.selectAll(t).on("click",function(){history.pushState(this.href,this.textContent,this.href),r(this.href),d3.event.preventDefault()}),d3.select(window).on("popstate",function(){d3.event.state&&r(d3.event.state)})},n.utils.calcApproxTextWidth=function(t){if(t instanceof d3.selection){var e=parseInt(t.style("font-size").replace("px","")),n=t.text().length;return n*e*.5}return 0},n.utils.NaNtoZero=function(t){return"number"!=typeof t||isNaN(t)||null===t||1/0===t?0:t},n.utils.optionsFunc=function(t){return t&&d3.map(t).forEach(function(t,e){"function"==typeof this[t]&&this[t](e)}.bind(this)),this},n.models.axis=function(){"use strict";function t(n){return n.each(function(t){var n=d3.select(this),o=n.selectAll("g.nv-wrap.nv-axis").data([t]),v=o.enter().append("g").attr("class","nvd3 nv-wrap nv-axis"),y=(v.append("g"),o.select("g"));null!==f?e.ticks(f):("top"==e.orient()||"bottom"==e.orient())&&e.ticks(Math.abs(s.range()[1]-s.range()[0])/100),y.transition().call(e),m=m||e.scale();var b=e.tickFormat();null==b&&(b=m.tickFormat());var _=y.selectAll("text.nv-axislabel").data([a||null]);switch(_.exit().remove(),e.orient()){case"top":_.enter().append("text").attr("class","nv-axislabel");var w=2==s.range().length?s.range()[1]:s.range()[s.range().length-1]+(s.range()[1]-s.range()[0]);if(_.attr("text-anchor","middle").attr("y",0).attr("x",w/2),l){var x=o.selectAll("g.nv-axisMaxMin").data(s.domain());x.enter().append("g").attr("class","nv-axisMaxMin").append("text"),x.exit().remove(),x.attr("transform",function(t){return"translate("+s(t)+",0)"}).select("text").attr("dy","0em").attr("y",-e.tickPadding()).attr("text-anchor","middle").text(function(t){var e=b(t);return(""+e).match("NaN")?"":e}),x.transition().attr("transform",function(t,e){return"translate("+s.range()[e]+",0)"})}break;case"bottom":var k=36,C=30,j=y.selectAll("g").select("text");if(c%360){j.each(function(){var t=this.getBBox().width;t>C&&(C=t)});var M=Math.abs(Math.sin(c*Math.PI/180)),k=(M?M*C:C)+30;j.attr("transform",function(){return"rotate("+c+" 0,0)"}).style("text-anchor",c%360>0?"start":"end")}_.enter().append("text").attr("class","nv-axislabel");var w=2==s.range().length?s.range()[1]:s.range()[s.range().length-1]+(s.range()[1]-s.range()[0]);if(_.attr("text-anchor","middle").attr("y",k).attr("x",w/2),l){var x=o.selectAll("g.nv-axisMaxMin").data([s.domain()[0],s.domain()[s.domain().length-1]]);x.enter().append("g").attr("class","nv-axisMaxMin").append("text"),x.exit().remove(),x.attr("transform",function(t){return"translate("+(s(t)+(h?s.rangeBand()/2:0))+",0)"}).select("text").attr("dy",".71em").attr("y",e.tickPadding()).attr("transform",function(){return"rotate("+c+" 0,0)"}).style("text-anchor",c?c%360>0?"start":"end":"middle").text(function(t){var e=b(t);return(""+e).match("NaN")?"":e}),x.transition().attr("transform",function(t){return"translate("+(s(t)+(h?s.rangeBand()/2:0))+",0)"})}p&&j.attr("transform",function(t,e){return"translate(0,"+(e%2==0?"0":"12")+")"});break;case"right":if(_.enter().append("text").attr("class","nv-axislabel"),_.style("text-anchor",d?"middle":"begin").attr("transform",d?"rotate(90)":"").attr("y",d?-Math.max(r.right,i)+12:-10).attr("x",d?s.range()[0]/2:e.tickPadding()),l){var x=o.selectAll("g.nv-axisMaxMin").data(s.domain());x.enter().append("g").attr("class","nv-axisMaxMin").append("text").style("opacity",0),x.exit().remove(),x.attr("transform",function(t){return"translate(0,"+s(t)+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",e.tickPadding()).style("text-anchor","start").text(function(t){var e=b(t);return(""+e).match("NaN")?"":e}),x.transition().attr("transform",function(t,e){return"translate(0,"+s.range()[e]+")"}).select("text").style("opacity",1)}break;case"left":if(_.enter().append("text").attr("class","nv-axislabel"),_.style("text-anchor",d?"middle":"end").attr("transform",d?"rotate(-90)":"").attr("y",d?-Math.max(r.left,i)+g:-10).attr("x",d?-s.range()[0]/2:-e.tickPadding()),l){var x=o.selectAll("g.nv-axisMaxMin").data(s.domain());x.enter().append("g").attr("class","nv-axisMaxMin").append("text").style("opacity",0),x.exit().remove(),x.attr("transform",function(t){return"translate(0,"+m(t)+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",-e.tickPadding()).attr("text-anchor","end").text(function(t){var e=b(t);return(""+e).match("NaN")?"":e}),x.transition().attr("transform",function(t,e){return"translate(0,"+s.range()[e]+")"}).select("text").style("opacity",1)}}if(_.text(function(t){return t}),!l||"left"!==e.orient()&&"right"!==e.orient()||(y.selectAll("g").each(function(t){d3.select(this).select("text").attr("opacity",1),(s(t)<s.range()[1]+10||s(t)>s.range()[0]-10)&&((t>1e-10||-1e-10>t)&&d3.select(this).attr("opacity",0),d3.select(this).select("text").attr("opacity",0))}),s.domain()[0]==s.domain()[1]&&0==s.domain()[0]&&o.selectAll("g.nv-axisMaxMin").style("opacity",function(t,e){return e?0:1})),l&&("top"===e.orient()||"bottom"===e.orient())){var S=[];o.selectAll("g.nv-axisMaxMin").each(function(t,e){try{S.push(e?s(t)-this.getBBox().width-4:s(t)+this.getBBox().width+4)}catch(n){S.push(e?s(t)-4:s(t)+4)}}),y.selectAll("g").each(function(t){(s(t)<S[0]||s(t)>S[1])&&(t>1e-10||-1e-10>t?d3.select(this).remove():d3.select(this).select("text").remove())})}u&&y.selectAll(".tick").filter(function(t){return!parseFloat(Math.round(1e5*t.__data__)/1e6)&&void 0!==t.__data__}).classed("zero",!0),m=s.copy()}),t}var e=d3.svg.axis(),r={top:0,right:0,bottom:0,left:0},i=75,o=60,s=d3.scale.linear(),a=null,l=!0,u=!0,c=0,d=!0,p=!1,h=!1,f=null,g=12;e.scale(s).orient("bottom").tickFormat(function(t){return t});var m;return t.axis=e,d3.rebind(t,e,"orient","tickValues","tickSubdivide","tickSize","tickPadding","tickFormat"),d3.rebind(t,s,"domain","range","rangeBand","rangeBands"),t.options=n.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(r.top="undefined"!=typeof e.top?e.top:r.top,r.right="undefined"!=typeof e.right?e.right:r.right,r.bottom="undefined"!=typeof e.bottom?e.bottom:r.bottom,r.left="undefined"!=typeof e.left?e.left:r.left,t):r},t.width=function(e){return arguments.length?(i=e,t):i},t.ticks=function(e){return arguments.length?(f=e,t):f},t.height=function(e){return arguments.length?(o=e,t):o},t.axisLabel=function(e){return arguments.length?(a=e,t):a},t.showMaxMin=function(e){return arguments.length?(l=e,t):l},t.highlightZero=function(e){return arguments.length?(u=e,t):u},t.scale=function(n){return arguments.length?(s=n,e.scale(s),h="function"==typeof s.rangeBands,d3.rebind(t,s,"domain","range","rangeBand","rangeBands"),t):s},t.rotateYLabel=function(e){return arguments.length?(d=e,t):d},t.rotateLabels=function(e){return arguments.length?(c=e,t):c},t.staggerLabels=function(e){return arguments.length?(p=e,t):p},t.axisLabelDistance=function(e){return arguments.length?(g=e,t):g},t},n.models.historicalBar=function(){"use strict";function t(w){return w.each(function(t){var w=a-s.left-s.right,x=l-s.top-s.bottom,k=d3.select(this);c.domain(e||d3.extent(t[0].values.map(p).concat(f))),c.range(m?i||[.5*w/t[0].values.length,w*(t[0].values.length-.5)/t[0].values.length]:i||[0,w]),d.domain(r||d3.extent(t[0].values.map(h).concat(g))).range(o||[x,0]),c.domain()[0]===c.domain()[1]&&c.domain(c.domain()[0]?[c.domain()[0]-.01*c.domain()[0],c.domain()[1]+.01*c.domain()[1]]:[-1,1]),d.domain()[0]===d.domain()[1]&&d.domain(d.domain()[0]?[d.domain()[0]+.01*d.domain()[0],d.domain()[1]-.01*d.domain()[1]]:[-1,1]);var C=k.selectAll("g.nv-wrap.nv-historicalBar-"+u).data([t[0].values]),j=C.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBar-"+u),M=j.append("defs"),S=j.append("g"),D=C.select("g");S.append("g").attr("class","nv-bars"),C.attr("transform","translate("+s.left+","+s.top+")"),k.on("click",function(t,e){b.chartClick({data:t,index:e,pos:d3.event,id:u})}),M.append("clipPath").attr("id","nv-chart-clip-path-"+u).append("rect"),C.select("#nv-chart-clip-path-"+u+" rect").attr("width",w).attr("height",x),D.attr("clip-path",v?"url(#nv-chart-clip-path-"+u+")":"");var z=C.select(".nv-bars").selectAll(".nv-bar").data(function(t){return t},function(t,e){return p(t,e)});z.exit().remove();z.enter().append("rect").attr("x",0).attr("y",function(t,e){return n.utils.NaNtoZero(d(Math.max(0,h(t,e))))}).attr("height",function(t,e){return n.utils.NaNtoZero(Math.abs(d(h(t,e))-d(0)))}).attr("transform",function(e,n){return"translate("+(c(p(e,n))-w/t[0].values.length*.45)+",0)"}).on("mouseover",function(e,n){_&&(d3.select(this).classed("hover",!0),b.elementMouseover({point:e,series:t[0],pos:[c(p(e,n)),d(h(e,n))],pointIndex:n,seriesIndex:0,e:d3.event}))}).on("mouseout",function(e,n){_&&(d3.select(this).classed("hover",!1),b.elementMouseout({point:e,series:t[0],pointIndex:n,seriesIndex:0,e:d3.event}))}).on("click",function(t,e){_&&(b.elementClick({value:h(t,e),data:t,index:e,pos:[c(p(t,e)),d(h(t,e))],e:d3.event,id:u}),d3.event.stopPropagation())}).on("dblclick",function(t,e){_&&(b.elementDblClick({value:h(t,e),data:t,index:e,pos:[c(p(t,e)),d(h(t,e))],e:d3.event,id:u}),d3.event.stopPropagation())});z.attr("fill",function(t,e){return y(t,e)}).attr("class",function(t,e,n){return(h(t,e)<0?"nv-bar negative":"nv-bar positive")+" nv-bar-"+n+"-"+e}).transition().attr("transform",function(e,n){return"translate("+(c(p(e,n))-w/t[0].values.length*.45)+",0)"}).attr("width",w/t[0].values.length*.9),z.transition().attr("y",function(t,e){var r=h(t,e)<0?d(0):d(0)-d(h(t,e))<1?d(0)-1:d(h(t,e));return n.utils.NaNtoZero(r)}).attr("height",function(t,e){return n.utils.NaNtoZero(Math.max(Math.abs(d(h(t,e))-d(0)),1))})}),t}var e,r,i,o,s={top:0,right:0,bottom:0,left:0},a=960,l=500,u=Math.floor(1e4*Math.random()),c=d3.scale.linear(),d=d3.scale.linear(),p=function(t){return t.x},h=function(t){return t.y},f=[],g=[0],m=!1,v=!0,y=n.utils.defaultColor(),b=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),_=!0;return t.highlightPoint=function(t,e){d3.select(".nv-historicalBar-"+u).select(".nv-bars .nv-bar-0-"+t).classed("hover",e)},t.clearHighlights=function(){d3.select(".nv-historicalBar-"+u).select(".nv-bars .nv-bar.hover").classed("hover",!1)},t.dispatch=b,t.options=n.utils.optionsFunc.bind(t),t.x=function(e){return arguments.length?(p=e,t):p},t.y=function(e){return arguments.length?(h=e,t):h},t.margin=function(e){return arguments.length?(s.top="undefined"!=typeof e.top?e.top:s.top,s.right="undefined"!=typeof e.right?e.right:s.right,s.bottom="undefined"!=typeof e.bottom?e.bottom:s.bottom,s.left="undefined"!=typeof e.left?e.left:s.left,t):s},t.width=function(e){return arguments.length?(a=e,t):a},t.height=function(e){return arguments.length?(l=e,t):l},t.xScale=function(e){return arguments.length?(c=e,t):c},t.yScale=function(e){return arguments.length?(d=e,t):d},t.xDomain=function(n){return arguments.length?(e=n,t):e},t.yDomain=function(e){return arguments.length?(r=e,t):r},t.xRange=function(e){return arguments.length?(i=e,t):i},t.yRange=function(e){return arguments.length?(o=e,t):o},t.forceX=function(e){return arguments.length?(f=e,t):f},t.forceY=function(e){return arguments.length?(g=e,t):g},t.padData=function(e){return arguments.length?(m=e,t):m},t.clipEdge=function(e){return arguments.length?(v=e,t):v},t.color=function(e){return arguments.length?(y=n.utils.getColor(e),t):y},t.id=function(e){return arguments.length?(u=e,t):u},t.interactive=function(){return arguments.length?(_=!1,t):_},t},n.models.bullet=function(){"use strict";function t(n){return n.each(function(t,n){{var r=p-e.left-e.right,f=h-e.top-e.bottom,v=d3.select(this),y=o.call(this,t,n).slice().sort(d3.descending),b=s.call(this,t,n).slice().sort(d3.descending),_=a.call(this,t,n).slice().sort(d3.descending),w=l.call(this,t,n).slice(),x=u.call(this,t,n).slice(),k=c.call(this,t,n).slice(),C=d3.scale.linear().domain(d3.extent(d3.merge([d,y]))).range(i?[r,0]:[0,r]);this.__chart__||d3.scale.linear().domain([0,1/0]).range(C.range())}this.__chart__=C;var j=d3.min(y),M=d3.max(y),S=y[1],D=v.selectAll("g.nv-wrap.nv-bullet").data([t]),z=D.enter().append("g").attr("class","nvd3 nv-wrap nv-bullet"),N=z.append("g"),T=D.select("g");N.append("rect").attr("class","nv-range nv-rangeMax"),N.append("rect").attr("class","nv-range nv-rangeAvg"),N.append("rect").attr("class","nv-range nv-rangeMin"),N.append("rect").attr("class","nv-measure"),N.append("path").attr("class","nv-markerTriangle"),D.attr("transform","translate("+e.left+","+e.top+")");var P=function(t){return Math.abs(C(t)-C(0))},L=function(t){return C(0>t?t:0)};T.select("rect.nv-rangeMax").attr("height",f).attr("width",P(M>0?M:j)).attr("x",L(M>0?M:j)).datum(M>0?M:j),T.select("rect.nv-rangeAvg").attr("height",f).attr("width",P(S)).attr("x",L(S)).datum(S),T.select("rect.nv-rangeMin").attr("height",f).attr("width",P(M)).attr("x",L(M)).attr("width",P(M>0?j:M)).attr("x",L(M>0?j:M)).datum(M>0?j:M),T.select("rect.nv-measure").style("fill",g).attr("height",f/3).attr("y",f/3).attr("width",0>_?C(0)-C(_[0]):C(_[0])-C(0)).attr("x",L(_)).on("mouseover",function(){m.elementMouseover({value:_[0],label:k[0]||"Current",pos:[C(_[0]),f/2]})}).on("mouseout",function(){m.elementMouseout({value:_[0],label:k[0]||"Current"})});var E=f/6;b[0]?T.selectAll("path.nv-markerTriangle").attr("transform",function(){return"translate("+C(b[0])+","+f/2+")"}).attr("d","M0,"+E+"L"+E+","+-E+" "+-E+","+-E+"Z").on("mouseover",function(){m.elementMouseover({value:b[0],label:x[0]||"Previous",pos:[C(b[0]),f/2]})}).on("mouseout",function(){m.elementMouseout({value:b[0],label:x[0]||"Previous"})}):T.selectAll("path.nv-markerTriangle").remove(),D.selectAll(".nv-range").on("mouseover",function(t,e){var n=w[e]||(e?1==e?"Mean":"Minimum":"Maximum");m.elementMouseover({value:t,label:n,pos:[C(t),f/2]})}).on("mouseout",function(t,e){var n=w[e]||(e?1==e?"Mean":"Minimum":"Maximum");m.elementMouseout({value:t,label:n})})}),t}var e={top:0,right:0,bottom:0,left:0},r="left",i=!1,o=function(t){return t.ranges},s=function(t){return t.markers},a=function(t){return t.measures},l=function(t){return t.rangeLabels?t.rangeLabels:[]},u=function(t){return t.markerLabels?t.markerLabels:[]},c=function(t){return t.measureLabels?t.measureLabels:[]},d=[0],p=380,h=30,f=null,g=n.utils.getColor(["#1f77b4"]),m=d3.dispatch("elementMouseover","elementMouseout");return t.dispatch=m,t.options=n.utils.optionsFunc.bind(t),t.orient=function(e){return arguments.length?(r=e,i="right"==r||"bottom"==r,t):r},t.ranges=function(e){return arguments.length?(o=e,t):o},t.markers=function(e){return arguments.length?(s=e,t):s},t.measures=function(e){return arguments.length?(a=e,t):a},t.forceX=function(e){return arguments.length?(d=e,t):d},t.width=function(e){return arguments.length?(p=e,t):p},t.height=function(e){return arguments.length?(h=e,t):h},t.margin=function(n){return arguments.length?(e.top="undefined"!=typeof n.top?n.top:e.top,e.right="undefined"!=typeof n.right?n.right:e.right,e.bottom="undefined"!=typeof n.bottom?n.bottom:e.bottom,e.left="undefined"!=typeof n.left?n.left:e.left,t):e},t.tickFormat=function(e){return arguments.length?(f=e,t):f},t.color=function(e){return arguments.length?(g=n.utils.getColor(e),t):g},t},n.models.bulletChart=function(){"use strict";function t(n){return n.each(function(r,h){var v=d3.select(this),y=(u||parseInt(v.style("width"))||960)-o.left-o.right,b=c-o.top-o.bottom,_=this;if(t.update=function(){t(n)},t.container=this,!r||!s.call(this,r,h)){var w=v.selectAll(".nv-noData").data([f]);return w.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),w.attr("x",o.left+y/2).attr("y",18+o.top+b/2).text(function(t){return t}),t}v.selectAll(".nv-noData").remove();var x=s.call(this,r,h).slice().sort(d3.descending),k=a.call(this,r,h).slice().sort(d3.descending),C=l.call(this,r,h).slice().sort(d3.descending),j=v.selectAll("g.nv-wrap.nv-bulletChart").data([r]),M=j.enter().append("g").attr("class","nvd3 nv-wrap nv-bulletChart"),S=M.append("g"),D=j.select("g");S.append("g").attr("class","nv-bulletWrap"),S.append("g").attr("class","nv-titles"),j.attr("transform","translate("+o.left+","+o.top+")");var z=d3.scale.linear().domain([0,Math.max(x[0],k[0],C[0])]).range(i?[y,0]:[0,y]),N=this.__chart__||d3.scale.linear().domain([0,1/0]).range(z.range());this.__chart__=z;var T=S.select(".nv-titles").append("g").attr("text-anchor","end").attr("transform","translate(-6,"+(c-o.top-o.bottom)/2+")");T.append("text").attr("class","nv-title").text(function(t){return t.title}),T.append("text").attr("class","nv-subtitle").attr("dy","1em").text(function(t){return t.subtitle}),e.width(y).height(b);var P=D.select(".nv-bulletWrap");d3.transition(P).call(e);var L=d||z.tickFormat(y/100),E=D.selectAll("g.nv-tick").data(z.ticks(y/50),function(t){return this.textContent||L(t)}),A=E.enter().append("g").attr("class","nv-tick").attr("transform",function(t){return"translate("+N(t)+",0)"}).style("opacity",1e-6);A.append("line").attr("y1",b).attr("y2",7*b/6),A.append("text").attr("text-anchor","middle").attr("dy","1em").attr("y",7*b/6).text(L);var O=d3.transition(E).attr("transform",function(t){return"translate("+z(t)+",0)"}).style("opacity",1);O.select("line").attr("y1",b).attr("y2",7*b/6),O.select("text").attr("y",7*b/6),d3.transition(E.exit()).attr("transform",function(t){return"translate("+z(t)+",0)"}).style("opacity",1e-6).remove(),g.on("tooltipShow",function(t){t.key=r.title,p&&m(t,_.parentNode)})}),d3.timer.flush(),t}var e=n.models.bullet(),r="left",i=!1,o={top:5,right:40,bottom:20,left:120},s=function(t){return t.ranges},a=function(t){return t.markers},l=function(t){return t.measures},u=null,c=55,d=null,p=!0,h=function(t,e,n){return"<h3>"+e+"</h3><p>"+n+"</p>"},f="No Data Available.",g=d3.dispatch("tooltipShow","tooltipHide"),m=function(e,r){var i=e.pos[0]+(r.offsetLeft||0)+o.left,s=e.pos[1]+(r.offsetTop||0)+o.top,a=h(e.key,e.label,e.value,e,t);n.tooltip.show([i,s],a,e.value<0?"e":"w",null,r)};return e.dispatch.on("elementMouseover.tooltip",function(t){g.tooltipShow(t)}),e.dispatch.on("elementMouseout.tooltip",function(t){g.tooltipHide(t)}),g.on("tooltipHide",function(){p&&n.tooltip.cleanup()}),t.dispatch=g,t.bullet=e,d3.rebind(t,e,"color"),t.options=n.utils.optionsFunc.bind(t),t.orient=function(e){return arguments.length?(r=e,i="right"==r||"bottom"==r,t):r},t.ranges=function(e){return arguments.length?(s=e,t):s},t.markers=function(e){return arguments.length?(a=e,t):a},t.measures=function(e){return arguments.length?(l=e,t):l},t.width=function(e){return arguments.length?(u=e,t):u},t.height=function(e){return arguments.length?(c=e,t):c},t.margin=function(e){return arguments.length?(o.top="undefined"!=typeof e.top?e.top:o.top,o.right="undefined"!=typeof e.right?e.right:o.right,o.bottom="undefined"!=typeof e.bottom?e.bottom:o.bottom,o.left="undefined"!=typeof e.left?e.left:o.left,t):o},t.tickFormat=function(e){return arguments.length?(d=e,t):d},t.tooltips=function(e){return arguments.length?(p=e,t):p},t.tooltipContent=function(e){return arguments.length?(h=e,t):h},t.noData=function(e){return arguments.length?(f=e,t):f},t},n.models.cumulativeLineChart=function(){"use strict";function t(k){return k.each(function(k){function E(){d3.select(t.container).style("cursor","ew-resize")}function A(){P.x=d3.event.x,P.i=Math.round(T.invert(P.x)),I()}function O(){d3.select(t.container).style("cursor","auto"),j.index=P.i,z.stateChange(j)}function I(){re.data([P]);var e=t.transitionDuration();t.transitionDuration(0),t.update(),t.transitionDuration(e)}var R=d3.select(this).classed("nv-chart-"+C,!0),$=this,F=(h||parseInt(R.style("width"))||960)-d.left-d.right,q=(f||parseInt(R.style("height"))||400)-d.top-d.bottom;if(t.update=function(){R.transition().duration(N).call(t)},t.container=this,j.disabled=k.map(function(t){return!!t.disabled}),!M){var H;M={};for(H in j)M[H]=j[H]instanceof Array?j[H].slice(0):j[H]}var W=d3.behavior.drag().on("dragstart",E).on("drag",A).on("dragend",O);if(!(k&&k.length&&k.filter(function(t){return t.values.length}).length)){var V=R.selectAll(".nv-noData").data([S]);return V.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),V.attr("x",d.left+F/2).attr("y",d.top+q/2).text(function(t){return t}),t}if(R.selectAll(".nv-noData").remove(),r=o.xScale(),i=o.yScale(),x)o.yDomain(null);else{var B=k.filter(function(t){return!t.disabled}).map(function(t){var e=d3.extent(t.values,o.y());return e[0]<-.95&&(e[0]=-.95),[(e[0]-e[1])/(1+e[1]),(e[1]-e[0])/(1+e[0])]}),Y=[d3.min(B,function(t){return t[0]}),d3.max(B,function(t){return t[1]})];o.yDomain(Y)}T.domain([0,k[0].values.length-1]).range([0,F]).clamp(!0);var k=e(P.i,k),U=w?"none":"all",Q=R.selectAll("g.nv-wrap.nv-cumulativeLine").data([k]),G=Q.enter().append("g").attr("class","nvd3 nv-wrap nv-cumulativeLine").append("g"),X=Q.select("g");if(G.append("g").attr("class","nv-interactive"),G.append("g").attr("class","nv-x nv-axis").style("pointer-events","none"),G.append("g").attr("class","nv-y nv-axis"),G.append("g").attr("class","nv-background"),G.append("g").attr("class","nv-linesWrap").style("pointer-events",U),G.append("g").attr("class","nv-avgLinesWrap").style("pointer-events","none"),G.append("g").attr("class","nv-legendWrap"),G.append("g").attr("class","nv-controlsWrap"),g&&(l.width(F),X.select(".nv-legendWrap").datum(k).call(l),d.top!=l.height()&&(d.top=l.height(),q=(f||parseInt(R.style("height"))||400)-d.top-d.bottom),X.select(".nv-legendWrap").attr("transform","translate(0,"+-d.top+")")),_){var Z=[{key:"Re-scale y-axis",disabled:!x}];u.width(140).color(["#444","#444","#444"]),X.select(".nv-controlsWrap").datum(Z).attr("transform","translate(0,"+-d.top+")").call(u)}Q.attr("transform","translate("+d.left+","+d.top+")"),y&&X.select(".nv-y.nv-axis").attr("transform","translate("+F+",0)");var J=k.filter(function(t){return t.tempDisabled});Q.select(".tempDisabled").remove(),J.length&&Q.append("text").attr("class","tempDisabled").attr("x",F/2).attr("y","-.71em").style("text-anchor","end").text(J.map(function(t){return t.key}).join(", ")+" values cannot be calculated for this time period."),w&&(c.width(F).height(q).margin({left:d.left,top:d.top}).svgContainer(R).xScale(r),Q.select(".nv-interactive").call(c)),G.select(".nv-background").append("rect"),X.select(".nv-background rect").attr("width",F).attr("height",q),o.y(function(t){return t.display.y}).width(F).height(q).color(k.map(function(t,e){return t.color||p(t,e)}).filter(function(t,e){return!k[e].disabled&&!k[e].tempDisabled}));var K=X.select(".nv-linesWrap").datum(k.filter(function(t){return!t.disabled&&!t.tempDisabled}));K.call(o),k.forEach(function(t,e){t.seriesIndex=e});var te=k.filter(function(t){return!t.disabled&&!!D(t)}),ee=X.select(".nv-avgLinesWrap").selectAll("line").data(te,function(t){return t.key}),ne=function(t){var e=i(D(t));return 0>e?0:e>q?q:e};ee.enter().append("line").style("stroke-width",2).style("stroke-dasharray","10,10").style("stroke",function(t){return o.color()(t,t.seriesIndex)}).attr("x1",0).attr("x2",F).attr("y1",ne).attr("y2",ne),ee.style("stroke-opacity",function(t){var e=i(D(t));return 0>e||e>q?0:1}).attr("x1",0).attr("x2",F).attr("y1",ne).attr("y2",ne),ee.exit().remove();var re=K.selectAll(".nv-indexLine").data([P]);re.enter().append("rect").attr("class","nv-indexLine").attr("width",3).attr("x",-2).attr("fill","red").attr("fill-opacity",.5).style("pointer-events","all").call(W),re.attr("transform",function(t){return"translate("+T(t.i)+",0)"}).attr("height",q),m&&(s.scale(r).ticks(Math.min(k[0].values.length,F/70)).tickSize(-q,0),X.select(".nv-x.nv-axis").attr("transform","translate(0,"+i.range()[0]+")"),d3.transition(X.select(".nv-x.nv-axis")).call(s)),v&&(a.scale(i).ticks(q/36).tickSize(-F,0),d3.transition(X.select(".nv-y.nv-axis")).call(a)),X.select(".nv-background rect").on("click",function(){P.x=d3.mouse(this)[0],P.i=Math.round(T.invert(P.x)),j.index=P.i,z.stateChange(j),I()}),o.dispatch.on("elementClick",function(t){P.i=t.pointIndex,P.x=T(P.i),j.index=P.i,z.stateChange(j),I()}),u.dispatch.on("legendClick",function(e){e.disabled=!e.disabled,x=!e.disabled,j.rescaleY=x,z.stateChange(j),t.update()}),l.dispatch.on("stateChange",function(e){j.disabled=e.disabled,z.stateChange(j),t.update()}),c.dispatch.on("elementMousemove",function(e){o.clearHighlights();var r,i,l,u=[];if(k.filter(function(t,e){return t.seriesIndex=e,!t.disabled}).forEach(function(s,a){i=n.interactiveBisect(s.values,e.pointXValue,t.x()),o.highlightPoint(a,i,!0);var c=s.values[i];"undefined"!=typeof c&&("undefined"==typeof r&&(r=c),"undefined"==typeof l&&(l=t.xScale()(t.x()(c,i))),u.push({key:s.key,value:t.y()(c,i),color:p(s,s.seriesIndex)}))}),u.length>2){var h=t.yScale().invert(e.mouseY),f=Math.abs(t.yScale().domain()[0]-t.yScale().domain()[1]),g=.03*f,m=n.nearestValueIndex(u.map(function(t){return t.value}),h,g);null!==m&&(u[m].highlight=!0)}var v=s.tickFormat()(t.x()(r,i),i);c.tooltip.position({left:l+d.left,top:e.mouseY+d.top}).chartContainer($.parentNode).enabled(b).valueFormatter(function(t){return a.tickFormat()(t)}).data({value:v,series:u})(),c.renderGuideLine(l)}),c.dispatch.on("elementMouseout",function(){z.tooltipHide(),o.clearHighlights()}),z.on("tooltipShow",function(t){b&&L(t,$.parentNode)}),z.on("changeState",function(e){"undefined"!=typeof e.disabled&&(k.forEach(function(t,n){t.disabled=e.disabled[n]}),j.disabled=e.disabled),"undefined"!=typeof e.index&&(P.i=e.index,P.x=T(P.i),j.index=e.index,re.data([P])),"undefined"!=typeof e.rescaleY&&(x=e.rescaleY),t.update()})}),t}function e(t,e){return e.map(function(e){if(!e.values)return e;var n=o.y()(e.values[t],t);return-.95>n?(e.tempDisabled=!0,e):(e.tempDisabled=!1,e.values=e.values.map(function(t,e){return t.display={y:(o.y()(t,e)-n)/(1+n)},t}),e)})}var r,i,o=n.models.line(),s=n.models.axis(),a=n.models.axis(),l=n.models.legend(),u=n.models.legend(),c=n.interactiveGuideline(),d={top:30,right:30,bottom:50,left:60},p=n.utils.defaultColor(),h=null,f=null,g=!0,m=!0,v=!0,y=!1,b=!0,_=!0,w=!1,x=!0,k=function(t,e,n){return"<h3>"+t+"</h3><p>"+n+" at "+e+"</p>"},C=o.id(),j={index:0,rescaleY:x},M=null,S="No Data Available.",D=function(t){return t.average},z=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),N=250;s.orient("bottom").tickPadding(7),a.orient(y?"right":"left"),u.updateState(!1);var T=d3.scale.linear(),P={i:0,x:0},L=function(e,r){var i=e.pos[0]+(r.offsetLeft||0),l=e.pos[1]+(r.offsetTop||0),u=s.tickFormat()(o.x()(e.point,e.pointIndex)),c=a.tickFormat()(o.y()(e.point,e.pointIndex)),d=k(e.series.key,u,c,e,t);n.tooltip.show([i,l],d,null,null,r)};return o.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+d.left,t.pos[1]+d.top],z.tooltipShow(t)}),o.dispatch.on("elementMouseout.tooltip",function(t){z.tooltipHide(t)}),z.on("tooltipHide",function(){b&&n.tooltip.cleanup()}),t.dispatch=z,t.lines=o,t.legend=l,t.xAxis=s,t.yAxis=a,t.interactiveLayer=c,d3.rebind(t,o,"defined","isArea","x","y","xScale","yScale","size","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","useVoronoi","id"),t.options=n.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(d.top="undefined"!=typeof e.top?e.top:d.top,d.right="undefined"!=typeof e.right?e.right:d.right,d.bottom="undefined"!=typeof e.bottom?e.bottom:d.bottom,d.left="undefined"!=typeof e.left?e.left:d.left,t):d},t.width=function(e){return arguments.length?(h=e,t):h},t.height=function(e){return arguments.length?(f=e,t):f},t.color=function(e){return arguments.length?(p=n.utils.getColor(e),l.color(p),t):p},t.rescaleY=function(e){return arguments.length?(x=e,t):x},t.showControls=function(e){return arguments.length?(_=e,t):_},t.useInteractiveGuideline=function(e){return arguments.length?(w=e,e===!0&&(t.interactive(!1),t.useVoronoi(!1)),t):w},t.showLegend=function(e){return arguments.length?(g=e,t):g},t.showXAxis=function(e){return arguments.length?(m=e,t):m},t.showYAxis=function(e){return arguments.length?(v=e,t):v},t.rightAlignYAxis=function(e){return arguments.length?(y=e,a.orient(e?"right":"left"),t):y},t.tooltips=function(e){return arguments.length?(b=e,t):b},t.tooltipContent=function(e){return arguments.length?(k=e,t):k},t.state=function(e){return arguments.length?(j=e,t):j},t.defaultState=function(e){return arguments.length?(M=e,t):M},t.noData=function(e){return arguments.length?(S=e,t):S},t.average=function(e){return arguments.length?(D=e,t):D},t.transitionDuration=function(e){return arguments.length?(N=e,t):N},t},n.models.discreteBar=function(){"use strict";function t(n){return n.each(function(t){var n=u-l.left-l.right,d=c-l.top-l.bottom,x=d3.select(this);t.forEach(function(t,e){t.values.forEach(function(t){t.series=e})});var k=e&&r?[]:t.map(function(t){return t.values.map(function(t,e){return{x:f(t,e),y:g(t,e),y0:t.y0}})});p.domain(e||d3.merge(k).map(function(t){return t.x})).rangeBands(i||[0,n],.1),h.domain(r||d3.extent(d3.merge(k).map(function(t){return t.y}).concat(m))),h.range(y?o||[d-(h.domain()[0]<0?12:0),h.domain()[1]>0?12:0]:o||[d,0]),s=s||p,a=a||h.copy().range([h(0),h(0)]);{var C=x.selectAll("g.nv-wrap.nv-discretebar").data([t]),j=C.enter().append("g").attr("class","nvd3 nv-wrap nv-discretebar"),M=j.append("g");
C.select("g")}M.append("g").attr("class","nv-groups"),C.attr("transform","translate("+l.left+","+l.top+")");var S=C.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t){return t.key});S.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),S.exit().transition().style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),S.attr("class",function(t,e){return"nv-group nv-series-"+e}).classed("hover",function(t){return t.hover}),S.transition().style("stroke-opacity",1).style("fill-opacity",.75);var D=S.selectAll("g.nv-bar").data(function(t){return t.values});D.exit().remove();var z=D.enter().append("g").attr("transform",function(t,e){return"translate("+(p(f(t,e))+.05*p.rangeBand())+", "+h(0)+")"}).on("mouseover",function(e,n){d3.select(this).classed("hover",!0),_.elementMouseover({value:g(e,n),point:e,series:t[e.series],pos:[p(f(e,n))+p.rangeBand()*(e.series+.5)/t.length,h(g(e,n))],pointIndex:n,seriesIndex:e.series,e:d3.event})}).on("mouseout",function(e,n){d3.select(this).classed("hover",!1),_.elementMouseout({value:g(e,n),point:e,series:t[e.series],pointIndex:n,seriesIndex:e.series,e:d3.event})}).on("click",function(e,n){_.elementClick({value:g(e,n),point:e,series:t[e.series],pos:[p(f(e,n))+p.rangeBand()*(e.series+.5)/t.length,h(g(e,n))],pointIndex:n,seriesIndex:e.series,e:d3.event}),d3.event.stopPropagation()}).on("dblclick",function(e,n){_.elementDblClick({value:g(e,n),point:e,series:t[e.series],pos:[p(f(e,n))+p.rangeBand()*(e.series+.5)/t.length,h(g(e,n))],pointIndex:n,seriesIndex:e.series,e:d3.event}),d3.event.stopPropagation()});z.append("rect").attr("height",0).attr("width",.9*p.rangeBand()/t.length),y?(z.append("text").attr("text-anchor","middle"),D.select("text").text(function(t,e){return b(g(t,e))}).transition().attr("x",.9*p.rangeBand()/2).attr("y",function(t,e){return g(t,e)<0?h(g(t,e))-h(0)+12:-4})):D.selectAll("text").remove(),D.attr("class",function(t,e){return g(t,e)<0?"nv-bar negative":"nv-bar positive"}).style("fill",function(t,e){return t.color||v(t,e)}).style("stroke",function(t,e){return t.color||v(t,e)}).select("rect").attr("class",w).transition().attr("width",.9*p.rangeBand()/t.length),D.transition().attr("transform",function(t,e){var n=p(f(t,e))+.05*p.rangeBand(),r=g(t,e)<0?h(0):h(0)-h(g(t,e))<1?h(0)-1:h(g(t,e));return"translate("+n+", "+r+")"}).select("rect").attr("height",function(t,e){return Math.max(Math.abs(h(g(t,e))-h(r&&r[0]||0))||1)}),s=p.copy(),a=h.copy()}),t}var e,r,i,o,s,a,l={top:0,right:0,bottom:0,left:0},u=960,c=500,d=Math.floor(1e4*Math.random()),p=d3.scale.ordinal(),h=d3.scale.linear(),f=function(t){return t.x},g=function(t){return t.y},m=[0],v=n.utils.defaultColor(),y=!1,b=d3.format(",.2f"),_=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),w="discreteBar";return t.dispatch=_,t.options=n.utils.optionsFunc.bind(t),t.x=function(e){return arguments.length?(f=e,t):f},t.y=function(e){return arguments.length?(g=e,t):g},t.margin=function(e){return arguments.length?(l.top="undefined"!=typeof e.top?e.top:l.top,l.right="undefined"!=typeof e.right?e.right:l.right,l.bottom="undefined"!=typeof e.bottom?e.bottom:l.bottom,l.left="undefined"!=typeof e.left?e.left:l.left,t):l},t.width=function(e){return arguments.length?(u=e,t):u},t.height=function(e){return arguments.length?(c=e,t):c},t.xScale=function(e){return arguments.length?(p=e,t):p},t.yScale=function(e){return arguments.length?(h=e,t):h},t.xDomain=function(n){return arguments.length?(e=n,t):e},t.yDomain=function(e){return arguments.length?(r=e,t):r},t.xRange=function(e){return arguments.length?(i=e,t):i},t.yRange=function(e){return arguments.length?(o=e,t):o},t.forceY=function(e){return arguments.length?(m=e,t):m},t.color=function(e){return arguments.length?(v=n.utils.getColor(e),t):v},t.id=function(e){return arguments.length?(d=e,t):d},t.showValues=function(e){return arguments.length?(y=e,t):y},t.valueFormat=function(e){return arguments.length?(b=e,t):b},t.rectClass=function(e){return arguments.length?(w=e,t):w},t},n.models.discreteBarChart=function(){"use strict";function t(n){return n.each(function(n){var c=d3.select(this),m=this,w=(l||parseInt(c.style("width"))||960)-a.left-a.right,x=(u||parseInt(c.style("height"))||400)-a.top-a.bottom;if(t.update=function(){y.beforeUpdate(),c.transition().duration(b).call(t)},t.container=this,!(n&&n.length&&n.filter(function(t){return t.values.length}).length)){var k=c.selectAll(".nv-noData").data([v]);return k.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),k.attr("x",a.left+w/2).attr("y",a.top+x/2).text(function(t){return t}),t}c.selectAll(".nv-noData").remove(),e=i.xScale(),r=i.yScale().clamp(!0);var C=c.selectAll("g.nv-wrap.nv-discreteBarWithAxes").data([n]),j=C.enter().append("g").attr("class","nvd3 nv-wrap nv-discreteBarWithAxes").append("g"),M=j.append("defs"),S=C.select("g");j.append("g").attr("class","nv-x nv-axis"),j.append("g").attr("class","nv-y nv-axis"),j.append("g").attr("class","nv-barsWrap"),S.attr("transform","translate("+a.left+","+a.top+")"),h&&S.select(".nv-y.nv-axis").attr("transform","translate("+w+",0)"),i.width(w).height(x);var D=S.select(".nv-barsWrap").datum(n.filter(function(t){return!t.disabled}));if(D.transition().call(i),M.append("clipPath").attr("id","nv-x-label-clip-"+i.id()).append("rect"),S.select("#nv-x-label-clip-"+i.id()+" rect").attr("width",e.rangeBand()*(f?2:1)).attr("height",16).attr("x",-e.rangeBand()/(f?1:2)),d){o.scale(e).ticks(w/100).tickSize(-x,0),S.select(".nv-x.nv-axis").attr("transform","translate(0,"+(r.range()[0]+(i.showValues()&&r.domain()[0]<0?16:0))+")"),S.select(".nv-x.nv-axis").transition().call(o);var z=S.select(".nv-x.nv-axis").selectAll("g");f&&z.selectAll("text").attr("transform",function(t,e,n){return"translate(0,"+(n%2==0?"5":"17")+")"})}p&&(s.scale(r).ticks(x/36).tickSize(-w,0),S.select(".nv-y.nv-axis").transition().call(s)),y.on("tooltipShow",function(t){g&&_(t,m.parentNode)})}),t}var e,r,i=n.models.discreteBar(),o=n.models.axis(),s=n.models.axis(),a={top:15,right:10,bottom:50,left:60},l=null,u=null,c=n.utils.getColor(),d=!0,p=!0,h=!1,f=!1,g=!0,m=function(t,e,n){return"<h3>"+e+"</h3><p>"+n+"</p>"},v="No Data Available.",y=d3.dispatch("tooltipShow","tooltipHide","beforeUpdate"),b=250;o.orient("bottom").highlightZero(!1).showMaxMin(!1).tickFormat(function(t){return t}),s.orient(h?"right":"left").tickFormat(d3.format(",.1f"));var _=function(e,r){var a=e.pos[0]+(r.offsetLeft||0),l=e.pos[1]+(r.offsetTop||0),u=o.tickFormat()(i.x()(e.point,e.pointIndex)),c=s.tickFormat()(i.y()(e.point,e.pointIndex)),d=m(e.series.key,u,c,e,t);n.tooltip.show([a,l],d,e.value<0?"n":"s",null,r)};return i.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+a.left,t.pos[1]+a.top],y.tooltipShow(t)}),i.dispatch.on("elementMouseout.tooltip",function(t){y.tooltipHide(t)}),y.on("tooltipHide",function(){g&&n.tooltip.cleanup()}),t.dispatch=y,t.discretebar=i,t.xAxis=o,t.yAxis=s,d3.rebind(t,i,"x","y","xDomain","yDomain","xRange","yRange","forceX","forceY","id","showValues","valueFormat"),t.options=n.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(a.top="undefined"!=typeof e.top?e.top:a.top,a.right="undefined"!=typeof e.right?e.right:a.right,a.bottom="undefined"!=typeof e.bottom?e.bottom:a.bottom,a.left="undefined"!=typeof e.left?e.left:a.left,t):a},t.width=function(e){return arguments.length?(l=e,t):l},t.height=function(e){return arguments.length?(u=e,t):u},t.color=function(e){return arguments.length?(c=n.utils.getColor(e),i.color(c),t):c},t.showXAxis=function(e){return arguments.length?(d=e,t):d},t.showYAxis=function(e){return arguments.length?(p=e,t):p},t.rightAlignYAxis=function(e){return arguments.length?(h=e,s.orient(e?"right":"left"),t):h},t.staggerLabels=function(e){return arguments.length?(f=e,t):f},t.tooltips=function(e){return arguments.length?(g=e,t):g},t.tooltipContent=function(e){return arguments.length?(m=e,t):m},t.noData=function(e){return arguments.length?(v=e,t):v},t.transitionDuration=function(e){return arguments.length?(b=e,t):b},t},n.models.distribution=function(){"use strict";function t(n){return n.each(function(t){var n=(i-("x"===s?r.left+r.right:r.top+r.bottom),"x"==s?"y":"x"),c=d3.select(this);e=e||u;var d=c.selectAll("g.nv-distribution").data([t]),p=d.enter().append("g").attr("class","nvd3 nv-distribution"),h=(p.append("g"),d.select("g"));d.attr("transform","translate("+r.left+","+r.top+")");var f=h.selectAll("g.nv-dist").data(function(t){return t},function(t){return t.key});f.enter().append("g"),f.attr("class",function(t,e){return"nv-dist nv-series-"+e}).style("stroke",function(t,e){return l(t,e)});var g=f.selectAll("line.nv-dist"+s).data(function(t){return t.values});g.enter().append("line").attr(s+"1",function(t,n){return e(a(t,n))}).attr(s+"2",function(t,n){return e(a(t,n))}),f.exit().selectAll("line.nv-dist"+s).transition().attr(s+"1",function(t,e){return u(a(t,e))}).attr(s+"2",function(t,e){return u(a(t,e))}).style("stroke-opacity",0).remove(),g.attr("class",function(t,e){return"nv-dist"+s+" nv-dist"+s+"-"+e}).attr(n+"1",0).attr(n+"2",o),g.transition().attr(s+"1",function(t,e){return u(a(t,e))}).attr(s+"2",function(t,e){return u(a(t,e))}),e=u.copy()}),t}var e,r={top:0,right:0,bottom:0,left:0},i=400,o=8,s="x",a=function(t){return t[s]},l=n.utils.defaultColor(),u=d3.scale.linear();return t.options=n.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(r.top="undefined"!=typeof e.top?e.top:r.top,r.right="undefined"!=typeof e.right?e.right:r.right,r.bottom="undefined"!=typeof e.bottom?e.bottom:r.bottom,r.left="undefined"!=typeof e.left?e.left:r.left,t):r},t.width=function(e){return arguments.length?(i=e,t):i},t.axis=function(e){return arguments.length?(s=e,t):s},t.size=function(e){return arguments.length?(o=e,t):o},t.getData=function(e){return arguments.length?(a=d3.functor(e),t):a},t.scale=function(e){return arguments.length?(u=e,t):u},t.color=function(e){return arguments.length?(l=n.utils.getColor(e),t):l},t},n.models.historicalBarChart=function(){"use strict";function t(n){return n.each(function(v){var C=d3.select(this),j=this,M=(c||parseInt(C.style("width"))||960)-l.left-l.right,S=(d||parseInt(C.style("height"))||400)-l.top-l.bottom;if(t.update=function(){C.transition().duration(x).call(t)},t.container=this,y.disabled=v.map(function(t){return!!t.disabled}),!b){var D;b={};for(D in y)b[D]=y[D]instanceof Array?y[D].slice(0):y[D]}if(!(v&&v.length&&v.filter(function(t){return t.values.length}).length)){var z=C.selectAll(".nv-noData").data([_]);return z.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),z.attr("x",l.left+M/2).attr("y",l.top+S/2).text(function(t){return t}),t}C.selectAll(".nv-noData").remove(),e=i.xScale(),r=i.yScale();var N=C.selectAll("g.nv-wrap.nv-historicalBarChart").data([v]),T=N.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBarChart").append("g"),P=N.select("g");T.append("g").attr("class","nv-x nv-axis"),T.append("g").attr("class","nv-y nv-axis"),T.append("g").attr("class","nv-barsWrap"),T.append("g").attr("class","nv-legendWrap"),p&&(a.width(M),P.select(".nv-legendWrap").datum(v).call(a),l.top!=a.height()&&(l.top=a.height(),S=(d||parseInt(C.style("height"))||400)-l.top-l.bottom),N.select(".nv-legendWrap").attr("transform","translate(0,"+-l.top+")")),N.attr("transform","translate("+l.left+","+l.top+")"),g&&P.select(".nv-y.nv-axis").attr("transform","translate("+M+",0)"),i.width(M).height(S).color(v.map(function(t,e){return t.color||u(t,e)}).filter(function(t,e){return!v[e].disabled}));var L=P.select(".nv-barsWrap").datum(v.filter(function(t){return!t.disabled}));L.transition().call(i),h&&(o.scale(e).tickSize(-S,0),P.select(".nv-x.nv-axis").attr("transform","translate(0,"+r.range()[0]+")"),P.select(".nv-x.nv-axis").transition().call(o)),f&&(s.scale(r).ticks(S/36).tickSize(-M,0),P.select(".nv-y.nv-axis").transition().call(s)),a.dispatch.on("legendClick",function(e){e.disabled=!e.disabled,v.filter(function(t){return!t.disabled}).length||v.map(function(t){return t.disabled=!1,N.selectAll(".nv-series").classed("disabled",!1),t}),y.disabled=v.map(function(t){return!!t.disabled}),w.stateChange(y),n.transition().call(t)}),a.dispatch.on("legendDblclick",function(e){v.forEach(function(t){t.disabled=!0}),e.disabled=!1,y.disabled=v.map(function(t){return!!t.disabled}),w.stateChange(y),t.update()}),w.on("tooltipShow",function(t){m&&k(t,j.parentNode)}),w.on("changeState",function(e){"undefined"!=typeof e.disabled&&(v.forEach(function(t,n){t.disabled=e.disabled[n]}),y.disabled=e.disabled),n.call(t)})}),t}var e,r,i=n.models.historicalBar(),o=n.models.axis(),s=n.models.axis(),a=n.models.legend(),l={top:30,right:90,bottom:50,left:90},u=n.utils.defaultColor(),c=null,d=null,p=!1,h=!0,f=!0,g=!1,m=!0,v=function(t,e,n){return"<h3>"+t+"</h3><p>"+n+" at "+e+"</p>"},y={},b=null,_="No Data Available.",w=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),x=250;o.orient("bottom").tickPadding(7),s.orient(g?"right":"left");var k=function(e,r){if(r){var a=d3.select(r).select("svg"),l=a.node()?a.attr("viewBox"):null;if(l){l=l.split(" ");var u=parseInt(a.style("width"))/l[2];e.pos[0]=e.pos[0]*u,e.pos[1]=e.pos[1]*u}}var c=e.pos[0]+(r.offsetLeft||0),d=e.pos[1]+(r.offsetTop||0),p=o.tickFormat()(i.x()(e.point,e.pointIndex)),h=s.tickFormat()(i.y()(e.point,e.pointIndex)),f=v(e.series.key,p,h,e,t);n.tooltip.show([c,d],f,null,null,r)};return i.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+l.left,t.pos[1]+l.top],w.tooltipShow(t)}),i.dispatch.on("elementMouseout.tooltip",function(t){w.tooltipHide(t)}),w.on("tooltipHide",function(){m&&n.tooltip.cleanup()}),t.dispatch=w,t.bars=i,t.legend=a,t.xAxis=o,t.yAxis=s,d3.rebind(t,i,"defined","isArea","x","y","size","xScale","yScale","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","id","interpolate","highlightPoint","clearHighlights","interactive"),t.options=n.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(l.top="undefined"!=typeof e.top?e.top:l.top,l.right="undefined"!=typeof e.right?e.right:l.right,l.bottom="undefined"!=typeof e.bottom?e.bottom:l.bottom,l.left="undefined"!=typeof e.left?e.left:l.left,t):l},t.width=function(e){return arguments.length?(c=e,t):c},t.height=function(e){return arguments.length?(d=e,t):d},t.color=function(e){return arguments.length?(u=n.utils.getColor(e),a.color(u),t):u},t.showLegend=function(e){return arguments.length?(p=e,t):p},t.showXAxis=function(e){return arguments.length?(h=e,t):h},t.showYAxis=function(e){return arguments.length?(f=e,t):f},t.rightAlignYAxis=function(e){return arguments.length?(g=e,s.orient(e?"right":"left"),t):g},t.tooltips=function(e){return arguments.length?(m=e,t):m},t.tooltipContent=function(e){return arguments.length?(v=e,t):v},t.state=function(e){return arguments.length?(y=e,t):y},t.defaultState=function(e){return arguments.length?(b=e,t):b},t.noData=function(e){return arguments.length?(_=e,t):_},t.transitionDuration=function(e){return arguments.length?(x=e,t):x},t},n.models.indentedTree=function(){"use strict";function t(e){return e.each(function(e){function n(e,r,i){return d3.event.stopPropagation(),d3.event.shiftKey&&!i?(d3.event.shiftKey=!1,e.values&&e.values.forEach(function(t){(t.values||t._values)&&n(t,0,!0)}),!0):s(e)?(e.values?(e._values=e.values,e.values=null):(e.values=e._values,e._values=null),void t.update()):!0}function r(t){return t._values&&t._values.length?h:t.values&&t.values.length?f:""}function o(t){return t._values&&t._values.length}function s(t){var e=t.values||t._values;return e&&e.length}var y=1,b=d3.select(this),_=d3.layout.tree().children(function(t){return t.values}).size([i,c]);t.update=function(){b.transition().duration(600).call(t)},e[0]||(e[0]={key:u});var w=_.nodes(e[0]),x=d3.select(this).selectAll("div").data([[w]]),k=x.enter().append("div").attr("class","nvd3 nv-wrap nv-indentedtree"),C=k.append("table"),j=x.select("table").attr("width","100%").attr("class",p);if(a){var M=C.append("thead"),S=M.append("tr");d.forEach(function(t){S.append("th").attr("width",t.width?t.width:"10%").style("text-align","numeric"==t.type?"right":"left").append("span").text(t.label)})}var D=j.selectAll("tbody").data(function(t){return t});D.enter().append("tbody"),y=d3.max(w,function(t){return t.depth}),_.size([i,y*c]);var z=D.selectAll("tr").data(function(t){return t.filter(function(t){return l&&!t.children?l(t):!0})},function(t){return t.id||t.id||++v});z.exit().remove(),z.select("img.nv-treeicon").attr("src",r).classed("folded",o);var N=z.enter().append("tr");d.forEach(function(t,e){var i=N.append("td").style("padding-left",function(t){return(e?0:t.depth*c+12+(r(t)?0:16))+"px"},"important").style("text-align","numeric"==t.type?"right":"left");0==e&&i.append("img").classed("nv-treeicon",!0).classed("nv-folded",o).attr("src",r).style("width","14px").style("height","14px").style("padding","0 1px").style("display",function(t){return r(t)?"inline-block":"none"}).on("click",n),i.each(function(n){!e&&m(n)?d3.select(this).append("a").attr("href",m).attr("class",d3.functor(t.classes)).append("span"):d3.select(this).append("span"),d3.select(this).select("span").attr("class",d3.functor(t.classes)).text(function(e){return t.format?t.format(e):e[t.key]||"-"})}),t.showCount&&(i.append("span").attr("class","nv-childrenCount"),z.selectAll("span.nv-childrenCount").text(function(t){return t.values&&t.values.length||t._values&&t._values.length?"("+(t.values&&t.values.filter(function(t){return l?l(t):!0}).length||t._values&&t._values.filter(function(t){return l?l(t):!0}).length||0)+")":""}))}),z.order().on("click",function(t){g.elementClick({row:this,data:t,pos:[t.x,t.y]})}).on("dblclick",function(t){g.elementDblclick({row:this,data:t,pos:[t.x,t.y]})}).on("mouseover",function(t){g.elementMouseover({row:this,data:t,pos:[t.x,t.y]})}).on("mouseout",function(t){g.elementMouseout({row:this,data:t,pos:[t.x,t.y]})})}),t}var e={top:0,right:0,bottom:0,left:0},r=960,i=500,o=n.utils.defaultColor(),s=Math.floor(1e4*Math.random()),a=!0,l=!1,u="No Data Available.",c=20,d=[{key:"key",label:"Name",type:"text"}],p=null,h="images/grey-plus.png",f="images/grey-minus.png",g=d3.dispatch("elementClick","elementDblclick","elementMouseover","elementMouseout"),m=function(t){return t.url},v=0;return t.options=n.utils.optionsFunc.bind(t),t.margin=function(n){return arguments.length?(e.top="undefined"!=typeof n.top?n.top:e.top,e.right="undefined"!=typeof n.right?n.right:e.right,e.bottom="undefined"!=typeof n.bottom?n.bottom:e.bottom,e.left="undefined"!=typeof n.left?n.left:e.left,t):e},t.width=function(e){return arguments.length?(r=e,t):r},t.height=function(e){return arguments.length?(i=e,t):i},t.color=function(e){return arguments.length?(o=n.utils.getColor(e),scatter.color(o),t):o},t.id=function(e){return arguments.length?(s=e,t):s},t.header=function(e){return arguments.length?(a=e,t):a},t.noData=function(e){return arguments.length?(u=e,t):u},t.filterZero=function(e){return arguments.length?(l=e,t):l},t.columns=function(e){return arguments.length?(d=e,t):d},t.tableClass=function(e){return arguments.length?(p=e,t):p},t.iconOpen=function(e){return arguments.length?(h=e,t):h},t.iconClose=function(e){return arguments.length?(f=e,t):f},t.getUrl=function(e){return arguments.length?(m=e,t):m},t},n.models.legend=function(){"use strict";function t(p){return p.each(function(t){var p=r-e.left-e.right,h=d3.select(this),f=h.selectAll("g.nv-legend").data([t]),g=(f.enter().append("g").attr("class","nvd3 nv-legend").append("g"),f.select("g"));f.attr("transform","translate("+e.left+","+e.top+")");var m=g.selectAll(".nv-series").data(function(t){return t}),v=m.enter().append("g").attr("class","nv-series").on("mouseover",function(t,e){d.legendMouseover(t,e)}).on("mouseout",function(t,e){d.legendMouseout(t,e)}).on("click",function(e,n){d.legendClick(e,n),u&&(c?(t.forEach(function(t){t.disabled=!0}),e.disabled=!1):(e.disabled=!e.disabled,t.every(function(t){return t.disabled})&&t.forEach(function(t){t.disabled=!1})),d.stateChange({disabled:t.map(function(t){return!!t.disabled})}))}).on("dblclick",function(e,n){d.legendDblclick(e,n),u&&(t.forEach(function(t){t.disabled=!0}),e.disabled=!1,d.stateChange({disabled:t.map(function(t){return!!t.disabled})}))});if(v.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5),v.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",".32em").attr("dx","8"),m.classed("disabled",function(t){return t.disabled}),m.exit().remove(),m.select("circle").style("fill",function(t,e){return t.color||s(t,e)}).style("stroke",function(t,e){return t.color||s(t,e)}),m.select("text").text(o),a){var y=[];m.each(function(){var t,e=d3.select(this).select("text");try{t=e.node().getComputedTextLength()}catch(r){t=n.utils.calcApproxTextWidth(e)}y.push(t+28)});for(var b=0,_=0,w=[];p>_&&b<y.length;)w[b]=y[b],_+=y[b++];for(0===b&&(b=1);_>p&&b>1;){w=[],b--;for(var x=0;x<y.length;x++)y[x]>(w[x%b]||0)&&(w[x%b]=y[x]);_=w.reduce(function(t,e){return t+e})}for(var k=[],C=0,j=0;b>C;C++)k[C]=j,j+=w[C];m.attr("transform",function(t,e){return"translate("+k[e%b]+","+(5+20*Math.floor(e/b))+")"}),l?g.attr("transform","translate("+(r-e.right-_)+","+e.top+")"):g.attr("transform","translate(0,"+e.top+")"),i=e.top+e.bottom+20*Math.ceil(y.length/b)}else{var M,S=5,D=5,z=0;m.attr("transform",function(){var t=d3.select(this).select("text").node().getComputedTextLength()+28;return M=D,r<e.left+e.right+M+t&&(D=M=5,S+=20),D+=t,D>z&&(z=D),"translate("+M+","+S+")"}),g.attr("transform","translate("+(r-e.right-z)+","+e.top+")"),i=e.top+e.bottom+S+15}}),t}var e={top:5,right:0,bottom:5,left:0},r=400,i=20,o=function(t){return t.key},s=n.utils.defaultColor(),a=!0,l=!0,u=!0,c=!1,d=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange");return t.dispatch=d,t.options=n.utils.optionsFunc.bind(t),t.margin=function(n){return arguments.length?(e.top="undefined"!=typeof n.top?n.top:e.top,e.right="undefined"!=typeof n.right?n.right:e.right,e.bottom="undefined"!=typeof n.bottom?n.bottom:e.bottom,e.left="undefined"!=typeof n.left?n.left:e.left,t):e},t.width=function(e){return arguments.length?(r=e,t):r},t.height=function(e){return arguments.length?(i=e,t):i},t.key=function(e){return arguments.length?(o=e,t):o},t.color=function(e){return arguments.length?(s=n.utils.getColor(e),t):s},t.align=function(e){return arguments.length?(a=e,t):a},t.rightAlign=function(e){return arguments.length?(l=e,t):l},t.updateState=function(e){return arguments.length?(u=e,t):u},t.radioButtonMode=function(e){return arguments.length?(c=e,t):c},t},n.models.line=function(){"use strict";function t(v){return v.each(function(t){var v=s-o.left-o.right,y=a-o.top-o.bottom,b=d3.select(this);e=i.xScale(),r=i.yScale(),g=g||e,m=m||r;var _=b.selectAll("g.nv-wrap.nv-line").data([t]),w=_.enter().append("g").attr("class","nvd3 nv-wrap nv-line"),x=w.append("defs"),k=w.append("g"),C=_.select("g");k.append("g").attr("class","nv-groups"),k.append("g").attr("class","nv-scatterWrap"),_.attr("transform","translate("+o.left+","+o.top+")"),i.width(v).height(y);var j=_.select(".nv-scatterWrap");j.transition().call(i),x.append("clipPath").attr("id","nv-edge-clip-"+i.id()).append("rect"),_.select("#nv-edge-clip-"+i.id()+" rect").attr("width",v).attr("height",y),C.attr("clip-path",h?"url(#nv-edge-clip-"+i.id()+")":""),j.attr("clip-path",h?"url(#nv-edge-clip-"+i.id()+")":"");var M=_.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t){return t.key});M.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),M.exit().transition().style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),M.attr("class",function(t,e){return"nv-group nv-series-"+e}).classed("hover",function(t){return t.hover}).style("fill",function(t,e){return l(t,e)}).style("stroke",function(t,e){return l(t,e)}),M.transition().style("stroke-opacity",1).style("fill-opacity",.5);var S=M.selectAll("path.nv-area").data(function(t){return p(t)?[t]:[]});S.enter().append("path").attr("class","nv-area").attr("d",function(t){return d3.svg.area().interpolate(f).defined(d).x(function(t,e){return n.utils.NaNtoZero(g(u(t,e)))}).y0(function(t,e){return n.utils.NaNtoZero(m(c(t,e)))}).y1(function(){return m(r.domain()[0]<=0?r.domain()[1]>=0?0:r.domain()[1]:r.domain()[0])}).apply(this,[t.values])}),M.exit().selectAll("path.nv-area").remove(),S.transition().attr("d",function(t){return d3.svg.area().interpolate(f).defined(d).x(function(t,r){return n.utils.NaNtoZero(e(u(t,r)))}).y0(function(t,e){return n.utils.NaNtoZero(r(c(t,e)))}).y1(function(){return r(r.domain()[0]<=0?r.domain()[1]>=0?0:r.domain()[1]:r.domain()[0])}).apply(this,[t.values])});var D=M.selectAll("path.nv-line").data(function(t){return[t.values]});D.enter().append("path").attr("class","nv-line").attr("d",d3.svg.line().interpolate(f).defined(d).x(function(t,e){return n.utils.NaNtoZero(g(u(t,e)))}).y(function(t,e){return n.utils.NaNtoZero(m(c(t,e)))})),M.exit().selectAll("path.nv-line").transition().attr("d",d3.svg.line().interpolate(f).defined(d).x(function(t,r){return n.utils.NaNtoZero(e(u(t,r)))}).y(function(t,e){return n.utils.NaNtoZero(r(c(t,e)))})),D.transition().attr("d",d3.svg.line().interpolate(f).defined(d).x(function(t,r){return n.utils.NaNtoZero(e(u(t,r)))}).y(function(t,e){return n.utils.NaNtoZero(r(c(t,e)))})),g=e.copy(),m=r.copy()}),t}var e,r,i=n.models.scatter(),o={top:0,right:0,bottom:0,left:0},s=960,a=500,l=n.utils.defaultColor(),u=function(t){return t.x},c=function(t){return t.y},d=function(t,e){return!isNaN(c(t,e))&&null!==c(t,e)},p=function(t){return t.area},h=!1,f="linear";i.size(16).sizeDomain([16,256]);var g,m;return t.dispatch=i.dispatch,t.scatter=i,d3.rebind(t,i,"id","interactive","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","forceX","forceY","forceSize","clipVoronoi","useVoronoi","clipRadius","padData","highlightPoint","clearHighlights"),t.options=n.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(o.top="undefined"!=typeof e.top?e.top:o.top,o.right="undefined"!=typeof e.right?e.right:o.right,o.bottom="undefined"!=typeof e.bottom?e.bottom:o.bottom,o.left="undefined"!=typeof e.left?e.left:o.left,t):o},t.width=function(e){return arguments.length?(s=e,t):s},t.height=function(e){return arguments.length?(a=e,t):a},t.x=function(e){return arguments.length?(u=e,i.x(e),t):u},t.y=function(e){return arguments.length?(c=e,i.y(e),t):c},t.clipEdge=function(e){return arguments.length?(h=e,t):h},t.color=function(e){return arguments.length?(l=n.utils.getColor(e),i.color(l),t):l},t.interpolate=function(e){return arguments.length?(f=e,t):f},t.defined=function(e){return arguments.length?(d=e,t):d},t.isArea=function(e){return arguments.length?(p=d3.functor(e),t):p},t},n.models.lineChart=function(){"use strict";function t(b){return b.each(function(b){var M=d3.select(this),S=this,D=(d||parseInt(M.style("width"))||960)-u.left-u.right,z=(p||parseInt(M.style("height"))||400)-u.top-u.bottom;if(t.update=function(){M.transition().duration(C).call(t)},t.container=this,_.disabled=b.map(function(t){return!!t.disabled}),!w){var N;w={};for(N in _)w[N]=_[N]instanceof Array?_[N].slice(0):_[N]}if(!(b&&b.length&&b.filter(function(t){return t.values.length}).length)){var T=M.selectAll(".nv-noData").data([x]);return T.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),T.attr("x",u.left+D/2).attr("y",u.top+z/2).text(function(t){return t}),t}M.selectAll(".nv-noData").remove(),e=i.xScale(),r=i.yScale();var P=M.selectAll("g.nv-wrap.nv-lineChart").data([b]),L=P.enter().append("g").attr("class","nvd3 nv-wrap nv-lineChart").append("g"),E=P.select("g");L.append("rect").style("opacity",0),L.append("g").attr("class","nv-x nv-axis"),L.append("g").attr("class","nv-y nv-axis"),L.append("g").attr("class","nv-linesWrap"),L.append("g").attr("class","nv-legendWrap"),L.append("g").attr("class","nv-interactive"),E.select("rect").attr("width",D).attr("height",z),h&&(a.width(D),E.select(".nv-legendWrap").datum(b).call(a),u.top!=a.height()&&(u.top=a.height(),z=(p||parseInt(M.style("height"))||400)-u.top-u.bottom),P.select(".nv-legendWrap").attr("transform","translate(0,"+-u.top+")")),P.attr("transform","translate("+u.left+","+u.top+")"),m&&E.select(".nv-y.nv-axis").attr("transform","translate("+D+",0)"),v&&(l.width(D).height(z).margin({left:u.left,top:u.top}).svgContainer(M).xScale(e),P.select(".nv-interactive").call(l)),i.width(D).height(z).color(b.map(function(t,e){return t.color||c(t,e)}).filter(function(t,e){return!b[e].disabled}));var A=E.select(".nv-linesWrap").datum(b.filter(function(t){return!t.disabled}));A.transition().call(i),f&&(o.scale(e).ticks(D/100).tickSize(-z,0),E.select(".nv-x.nv-axis").attr("transform","translate(0,"+r.range()[0]+")"),E.select(".nv-x.nv-axis").transition().call(o)),g&&(s.scale(r).ticks(z/36).tickSize(-D,0),E.select(".nv-y.nv-axis").transition().call(s)),a.dispatch.on("stateChange",function(e){_=e,k.stateChange(_),t.update()}),l.dispatch.on("elementMousemove",function(e){i.clearHighlights();var r,a,d,p=[];if(b.filter(function(t,e){return t.seriesIndex=e,!t.disabled}).forEach(function(o,s){a=n.interactiveBisect(o.values,e.pointXValue,t.x()),i.highlightPoint(s,a,!0);var l=o.values[a];"undefined"!=typeof l&&("undefined"==typeof r&&(r=l),"undefined"==typeof d&&(d=t.xScale()(t.x()(l,a))),p.push({key:o.key,value:t.y()(l,a),color:c(o,o.seriesIndex)}))}),p.length>2){var h=t.yScale().invert(e.mouseY),f=Math.abs(t.yScale().domain()[0]-t.yScale().domain()[1]),g=.03*f,m=n.nearestValueIndex(p.map(function(t){return t.value}),h,g);null!==m&&(p[m].highlight=!0)}var v=o.tickFormat()(t.x()(r,a));l.tooltip.position({left:d+u.left,top:e.mouseY+u.top}).chartContainer(S.parentNode).enabled(y).valueFormatter(function(t){return s.tickFormat()(t)}).data({value:v,series:p})(),l.renderGuideLine(d)}),l.dispatch.on("elementMouseout",function(){k.tooltipHide(),i.clearHighlights()}),k.on("tooltipShow",function(t){y&&j(t,S.parentNode)}),k.on("changeState",function(e){"undefined"!=typeof e.disabled&&(b.forEach(function(t,n){t.disabled=e.disabled[n]}),_.disabled=e.disabled),t.update()})}),t}var e,r,i=n.models.line(),o=n.models.axis(),s=n.models.axis(),a=n.models.legend(),l=n.interactiveGuideline(),u={top:30,right:20,bottom:50,left:60},c=n.utils.defaultColor(),d=null,p=null,h=!0,f=!0,g=!0,m=!1,v=!1,y=!0,b=function(t,e,n){return"<h3>"+t+"</h3><p>"+n+" at "+e+"</p>"},_={},w=null,x="No Data Available.",k=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),C=250;o.orient("bottom").tickPadding(7),s.orient(m?"right":"left");var j=function(e,r){var a=e.pos[0]+(r.offsetLeft||0),l=e.pos[1]+(r.offsetTop||0),u=o.tickFormat()(i.x()(e.point,e.pointIndex)),c=s.tickFormat()(i.y()(e.point,e.pointIndex)),d=b(e.series.key,u,c,e,t);n.tooltip.show([a,l],d,null,null,r)};return i.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+u.left,t.pos[1]+u.top],k.tooltipShow(t)}),i.dispatch.on("elementMouseout.tooltip",function(t){k.tooltipHide(t)}),k.on("tooltipHide",function(){y&&n.tooltip.cleanup()}),t.dispatch=k,t.lines=i,t.legend=a,t.xAxis=o,t.yAxis=s,t.interactiveLayer=l,d3.rebind(t,i,"defined","isArea","x","y","size","xScale","yScale","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","useVoronoi","id","interpolate"),t.options=n.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(u.top="undefined"!=typeof e.top?e.top:u.top,u.right="undefined"!=typeof e.right?e.right:u.right,u.bottom="undefined"!=typeof e.bottom?e.bottom:u.bottom,u.left="undefined"!=typeof e.left?e.left:u.left,t):u},t.width=function(e){return arguments.length?(d=e,t):d},t.height=function(e){return arguments.length?(p=e,t):p},t.color=function(e){return arguments.length?(c=n.utils.getColor(e),a.color(c),t):c
},t.showLegend=function(e){return arguments.length?(h=e,t):h},t.showXAxis=function(e){return arguments.length?(f=e,t):f},t.showYAxis=function(e){return arguments.length?(g=e,t):g},t.rightAlignYAxis=function(e){return arguments.length?(m=e,s.orient(e?"right":"left"),t):m},t.useInteractiveGuideline=function(e){return arguments.length?(v=e,e===!0&&(t.interactive(!1),t.useVoronoi(!1)),t):v},t.tooltips=function(e){return arguments.length?(y=e,t):y},t.tooltipContent=function(e){return arguments.length?(b=e,t):b},t.state=function(e){return arguments.length?(_=e,t):_},t.defaultState=function(e){return arguments.length?(w=e,t):w},t.noData=function(e){return arguments.length?(x=e,t):x},t.transitionDuration=function(e){return arguments.length?(C=e,t):C},t},n.models.linePlusBarChart=function(){"use strict";function t(n){return n.each(function(n){var f=d3.select(this),g=this,b=(p||parseInt(f.style("width"))||960)-d.left-d.right,j=(h||parseInt(f.style("height"))||400)-d.top-d.bottom;if(t.update=function(){f.transition().call(t)},_.disabled=n.map(function(t){return!!t.disabled}),!w){var M;w={};for(M in _)w[M]=_[M]instanceof Array?_[M].slice(0):_[M]}if(!(n&&n.length&&n.filter(function(t){return t.values.length}).length)){var S=f.selectAll(".nv-noData").data([x]);return S.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),S.attr("x",d.left+b/2).attr("y",d.top+j/2).text(function(t){return t}),t}f.selectAll(".nv-noData").remove();var D=n.filter(function(t){return!t.disabled&&t.bar}),z=n.filter(function(t){return!t.bar});e=z.filter(function(t){return!t.disabled}).length&&z.filter(function(t){return!t.disabled})[0].values.length?o.xScale():s.xScale(),r=s.yScale(),i=o.yScale();var N=d3.select(this).selectAll("g.nv-wrap.nv-linePlusBar").data([n]),T=N.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g"),P=N.select("g");T.append("g").attr("class","nv-x nv-axis"),T.append("g").attr("class","nv-y1 nv-axis"),T.append("g").attr("class","nv-y2 nv-axis"),T.append("g").attr("class","nv-barsWrap"),T.append("g").attr("class","nv-linesWrap"),T.append("g").attr("class","nv-legendWrap"),v&&(c.width(b/2),P.select(".nv-legendWrap").datum(n.map(function(t){return t.originalKey=void 0===t.originalKey?t.key:t.originalKey,t.key=t.originalKey+(t.bar?" (left axis)":" (right axis)"),t})).call(c),d.top!=c.height()&&(d.top=c.height(),j=(h||parseInt(f.style("height"))||400)-d.top-d.bottom),P.select(".nv-legendWrap").attr("transform","translate("+b/2+","+-d.top+")")),N.attr("transform","translate("+d.left+","+d.top+")"),o.width(b).height(j).color(n.map(function(t,e){return t.color||m(t,e)}).filter(function(t,e){return!n[e].disabled&&!n[e].bar})),s.width(b).height(j).color(n.map(function(t,e){return t.color||m(t,e)}).filter(function(t,e){return!n[e].disabled&&n[e].bar}));var L=P.select(".nv-barsWrap").datum(D.length?D:[{values:[]}]),E=P.select(".nv-linesWrap").datum(z[0]&&!z[0].disabled?z:[{values:[]}]);d3.transition(L).call(s),d3.transition(E).call(o),a.scale(e).ticks(b/100).tickSize(-j,0),P.select(".nv-x.nv-axis").attr("transform","translate(0,"+r.range()[0]+")"),d3.transition(P.select(".nv-x.nv-axis")).call(a),l.scale(r).ticks(j/36).tickSize(-b,0),d3.transition(P.select(".nv-y1.nv-axis")).style("opacity",D.length?1:0).call(l),u.scale(i).ticks(j/36).tickSize(D.length?0:-b,0),P.select(".nv-y2.nv-axis").style("opacity",z.length?1:0).attr("transform","translate("+b+",0)"),d3.transition(P.select(".nv-y2.nv-axis")).call(u),c.dispatch.on("stateChange",function(e){_=e,k.stateChange(_),t.update()}),k.on("tooltipShow",function(t){y&&C(t,g.parentNode)}),k.on("changeState",function(e){"undefined"!=typeof e.disabled&&(n.forEach(function(t,n){t.disabled=e.disabled[n]}),_.disabled=e.disabled),t.update()})}),t}var e,r,i,o=n.models.line(),s=n.models.historicalBar(),a=n.models.axis(),l=n.models.axis(),u=n.models.axis(),c=n.models.legend(),d={top:30,right:60,bottom:50,left:60},p=null,h=null,f=function(t){return t.x},g=function(t){return t.y},m=n.utils.defaultColor(),v=!0,y=!0,b=function(t,e,n){return"<h3>"+t+"</h3><p>"+n+" at "+e+"</p>"},_={},w=null,x="No Data Available.",k=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState");s.padData(!0),o.clipEdge(!1).padData(!0),a.orient("bottom").tickPadding(7).highlightZero(!1),l.orient("left"),u.orient("right");var C=function(e,r){var i=e.pos[0]+(r.offsetLeft||0),s=e.pos[1]+(r.offsetTop||0),c=a.tickFormat()(o.x()(e.point,e.pointIndex)),d=(e.series.bar?l:u).tickFormat()(o.y()(e.point,e.pointIndex)),p=b(e.series.key,c,d,e,t);n.tooltip.show([i,s],p,e.value<0?"n":"s",null,r)};return o.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+d.left,t.pos[1]+d.top],k.tooltipShow(t)}),o.dispatch.on("elementMouseout.tooltip",function(t){k.tooltipHide(t)}),s.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+d.left,t.pos[1]+d.top],k.tooltipShow(t)}),s.dispatch.on("elementMouseout.tooltip",function(t){k.tooltipHide(t)}),k.on("tooltipHide",function(){y&&n.tooltip.cleanup()}),t.dispatch=k,t.legend=c,t.lines=o,t.bars=s,t.xAxis=a,t.y1Axis=l,t.y2Axis=u,d3.rebind(t,o,"defined","size","clipVoronoi","interpolate"),t.options=n.utils.optionsFunc.bind(t),t.x=function(e){return arguments.length?(f=e,o.x(e),s.x(e),t):f},t.y=function(e){return arguments.length?(g=e,o.y(e),s.y(e),t):g},t.margin=function(e){return arguments.length?(d.top="undefined"!=typeof e.top?e.top:d.top,d.right="undefined"!=typeof e.right?e.right:d.right,d.bottom="undefined"!=typeof e.bottom?e.bottom:d.bottom,d.left="undefined"!=typeof e.left?e.left:d.left,t):d},t.width=function(e){return arguments.length?(p=e,t):p},t.height=function(e){return arguments.length?(h=e,t):h},t.color=function(e){return arguments.length?(m=n.utils.getColor(e),c.color(m),t):m},t.showLegend=function(e){return arguments.length?(v=e,t):v},t.tooltips=function(e){return arguments.length?(y=e,t):y},t.tooltipContent=function(e){return arguments.length?(b=e,t):b},t.state=function(e){return arguments.length?(_=e,t):_},t.defaultState=function(e){return arguments.length?(w=e,t):w},t.noData=function(e){return arguments.length?(x=e,t):x},t},n.models.lineWithFocusChart=function(){"use strict";function t(n){return n.each(function(n){function k(t){var e=+("e"==t),n=e?1:-1,r=E/3;return"M"+.5*n+","+r+"A6,6 0 0 "+e+" "+6.5*n+","+(r+6)+"V"+(2*r-6)+"A6,6 0 0 "+e+" "+.5*n+","+2*r+"ZM"+2.5*n+","+(r+8)+"V"+(2*r-8)+"M"+4.5*n+","+(r+8)+"V"+(2*r-8)}function D(){h.empty()||h.extent(w),H.data([h.empty()?i.domain():w]).each(function(t){var n=i(t[0])-e.range()[0],r=e.range()[1]-i(t[1]);d3.select(this).select(".left").attr("width",0>n?0:n),d3.select(this).select(".right").attr("x",i(t[1])).attr("width",0>r?0:r)})}function z(){w=h.empty()?null:h.extent();var t=h.empty()?i.domain():h.extent();if(!(Math.abs(t[0]-t[1])<=1)){j.brush({extent:t,brush:h}),D();var e=R.select(".nv-focus .nv-linesWrap").datum(n.filter(function(t){return!t.disabled}).map(function(e){return{key:e.key,values:e.values.filter(function(e,n){return s.x()(e,n)>=t[0]&&s.x()(e,n)<=t[1]})}}));e.transition().duration(M).call(s),R.select(".nv-focus .nv-x.nv-axis").transition().duration(M).call(l),R.select(".nv-focus .nv-y.nv-axis").transition().duration(M).call(u)}}var N=d3.select(this),T=this,P=(v||parseInt(N.style("width"))||960)-f.left-f.right,L=(y||parseInt(N.style("height"))||400)-f.top-f.bottom-b,E=b-g.top-g.bottom;if(t.update=function(){N.transition().duration(M).call(t)},t.container=this,!(n&&n.length&&n.filter(function(t){return t.values.length}).length)){var A=N.selectAll(".nv-noData").data([C]);return A.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),A.attr("x",f.left+P/2).attr("y",f.top+L/2).text(function(t){return t}),t}N.selectAll(".nv-noData").remove(),e=s.xScale(),r=s.yScale(),i=a.xScale(),o=a.yScale();var O=N.selectAll("g.nv-wrap.nv-lineWithFocusChart").data([n]),I=O.enter().append("g").attr("class","nvd3 nv-wrap nv-lineWithFocusChart").append("g"),R=O.select("g");I.append("g").attr("class","nv-legendWrap");var $=I.append("g").attr("class","nv-focus");$.append("g").attr("class","nv-x nv-axis"),$.append("g").attr("class","nv-y nv-axis"),$.append("g").attr("class","nv-linesWrap");var F=I.append("g").attr("class","nv-context");F.append("g").attr("class","nv-x nv-axis"),F.append("g").attr("class","nv-y nv-axis"),F.append("g").attr("class","nv-linesWrap"),F.append("g").attr("class","nv-brushBackground"),F.append("g").attr("class","nv-x nv-brush"),_&&(p.width(P),R.select(".nv-legendWrap").datum(n).call(p),f.top!=p.height()&&(f.top=p.height(),L=(y||parseInt(N.style("height"))||400)-f.top-f.bottom-b),R.select(".nv-legendWrap").attr("transform","translate(0,"+-f.top+")")),O.attr("transform","translate("+f.left+","+f.top+")"),s.width(P).height(L).color(n.map(function(t,e){return t.color||m(t,e)}).filter(function(t,e){return!n[e].disabled})),a.defined(s.defined()).width(P).height(E).color(n.map(function(t,e){return t.color||m(t,e)}).filter(function(t,e){return!n[e].disabled})),R.select(".nv-context").attr("transform","translate(0,"+(L+f.bottom+g.top)+")");var q=R.select(".nv-context .nv-linesWrap").datum(n.filter(function(t){return!t.disabled}));d3.transition(q).call(a),l.scale(e).ticks(P/100).tickSize(-L,0),u.scale(r).ticks(L/36).tickSize(-P,0),R.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+L+")"),h.x(i).on("brush",function(){var e=t.transitionDuration();t.transitionDuration(0),z(),t.transitionDuration(e)}),w&&h.extent(w);var H=R.select(".nv-brushBackground").selectAll("g").data([w||h.extent()]),W=H.enter().append("g");W.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",E),W.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",E);var V=R.select(".nv-x.nv-brush").call(h);V.selectAll("rect").attr("height",E),V.selectAll(".resize").append("path").attr("d",k),z(),c.scale(i).ticks(P/100).tickSize(-E,0),R.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+o.range()[0]+")"),d3.transition(R.select(".nv-context .nv-x.nv-axis")).call(c),d.scale(o).ticks(E/36).tickSize(-P,0),d3.transition(R.select(".nv-context .nv-y.nv-axis")).call(d),R.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+o.range()[0]+")"),p.dispatch.on("stateChange",function(){t.update()}),j.on("tooltipShow",function(t){x&&S(t,T.parentNode)})}),t}var e,r,i,o,s=n.models.line(),a=n.models.line(),l=n.models.axis(),u=n.models.axis(),c=n.models.axis(),d=n.models.axis(),p=n.models.legend(),h=d3.svg.brush(),f={top:30,right:30,bottom:30,left:60},g={top:0,right:30,bottom:20,left:60},m=n.utils.defaultColor(),v=null,y=null,b=100,_=!0,w=null,x=!0,k=function(t,e,n){return"<h3>"+t+"</h3><p>"+n+" at "+e+"</p>"},C="No Data Available.",j=d3.dispatch("tooltipShow","tooltipHide","brush"),M=250;s.clipEdge(!0),a.interactive(!1),l.orient("bottom").tickPadding(5),u.orient("left"),c.orient("bottom").tickPadding(5),d.orient("left");var S=function(e,r){var i=e.pos[0]+(r.offsetLeft||0),o=e.pos[1]+(r.offsetTop||0),a=l.tickFormat()(s.x()(e.point,e.pointIndex)),c=u.tickFormat()(s.y()(e.point,e.pointIndex)),d=k(e.series.key,a,c,e,t);n.tooltip.show([i,o],d,null,null,r)};return s.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+f.left,t.pos[1]+f.top],j.tooltipShow(t)}),s.dispatch.on("elementMouseout.tooltip",function(t){j.tooltipHide(t)}),j.on("tooltipHide",function(){x&&n.tooltip.cleanup()}),t.dispatch=j,t.legend=p,t.lines=s,t.lines2=a,t.xAxis=l,t.yAxis=u,t.x2Axis=c,t.y2Axis=d,d3.rebind(t,s,"defined","isArea","size","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","id"),t.options=n.utils.optionsFunc.bind(t),t.x=function(e){return arguments.length?(s.x(e),a.x(e),t):s.x},t.y=function(e){return arguments.length?(s.y(e),a.y(e),t):s.y},t.margin=function(e){return arguments.length?(f.top="undefined"!=typeof e.top?e.top:f.top,f.right="undefined"!=typeof e.right?e.right:f.right,f.bottom="undefined"!=typeof e.bottom?e.bottom:f.bottom,f.left="undefined"!=typeof e.left?e.left:f.left,t):f},t.margin2=function(e){return arguments.length?(g=e,t):g},t.width=function(e){return arguments.length?(v=e,t):v},t.height=function(e){return arguments.length?(y=e,t):y},t.height2=function(e){return arguments.length?(b=e,t):b},t.color=function(e){return arguments.length?(m=n.utils.getColor(e),p.color(m),t):m},t.showLegend=function(e){return arguments.length?(_=e,t):_},t.tooltips=function(e){return arguments.length?(x=e,t):x},t.tooltipContent=function(e){return arguments.length?(k=e,t):k},t.interpolate=function(e){return arguments.length?(s.interpolate(e),a.interpolate(e),t):s.interpolate()},t.noData=function(e){return arguments.length?(C=e,t):C},t.xTickFormat=function(e){return arguments.length?(l.tickFormat(e),c.tickFormat(e),t):l.tickFormat()},t.yTickFormat=function(e){return arguments.length?(u.tickFormat(e),d.tickFormat(e),t):u.tickFormat()},t.brushExtent=function(e){return arguments.length?(w=e,t):w},t.transitionDuration=function(e){return arguments.length?(M=e,t):M},t},n.models.linePlusBarWithFocusChart=function(){"use strict";function t(n){return n.each(function(n){function P(t){var e=+("e"==t),n=e?1:-1,r=W/3;return"M"+.5*n+","+r+"A6,6 0 0 "+e+" "+6.5*n+","+(r+6)+"V"+(2*r-6)+"A6,6 0 0 "+e+" "+.5*n+","+2*r+"ZM"+2.5*n+","+(r+8)+"V"+(2*r-8)+"M"+4.5*n+","+(r+8)+"V"+(2*r-8)}function I(){_.empty()||_.extent(N),ne.data([_.empty()?i.domain():N]).each(function(t){var e=i(t[0])-i.range()[0],n=i.range()[1]-i(t[1]);d3.select(this).select(".left").attr("width",0>e?0:e),d3.select(this).select(".right").attr("x",i(t[1])).attr("width",0>n?0:n)})}function R(){N=_.empty()?null:_.extent(),e=_.empty()?i.domain():_.extent(),E.brush({extent:e,brush:_}),I(),d.width(q).height(H).color(n.map(function(t,e){return t.color||D(t,e)}).filter(function(t,e){return!n[e].disabled&&n[e].bar})),u.width(q).height(H).color(n.map(function(t,e){return t.color||D(t,e)}).filter(function(t,e){return!n[e].disabled&&!n[e].bar}));var t=Z.select(".nv-focus .nv-barsWrap").datum(B.length?B.map(function(t){return{key:t.key,values:t.values.filter(function(t,n){return d.x()(t,n)>=e[0]&&d.x()(t,n)<=e[1]})}}):[{values:[]}]),a=Z.select(".nv-focus .nv-linesWrap").datum(Y[0].disabled?[{values:[]}]:Y.map(function(t){return{key:t.key,values:t.values.filter(function(t,n){return u.x()(t,n)>=e[0]&&u.x()(t,n)<=e[1]})}}));r=B.length?d.xScale():u.xScale(),h.scale(r).ticks(q/100).tickSize(-H,0),h.domain([Math.ceil(e[0]),Math.floor(e[1])]),Z.select(".nv-x.nv-axis").transition().duration(A).call(h),t.transition().duration(A).call(d),a.transition().duration(A).call(u),Z.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+o.range()[0]+")"),g.scale(o).ticks(H/36).tickSize(-q,0),Z.select(".nv-focus .nv-y1.nv-axis").style("opacity",B.length?1:0),m.scale(s).ticks(H/36).tickSize(B.length?0:-q,0),Z.select(".nv-focus .nv-y2.nv-axis").style("opacity",Y.length?1:0).attr("transform","translate("+r.range()[1]+",0)"),Z.select(".nv-focus .nv-y1.nv-axis").transition().duration(A).call(g),Z.select(".nv-focus .nv-y2.nv-axis").transition().duration(A).call(m)}var $=d3.select(this),F=this,q=(k||parseInt($.style("width"))||960)-w.left-w.right,H=(C||parseInt($.style("height"))||400)-w.top-w.bottom-j,W=j-x.top-x.bottom;if(t.update=function(){$.transition().duration(A).call(t)},t.container=this,!(n&&n.length&&n.filter(function(t){return t.values.length}).length)){var V=$.selectAll(".nv-noData").data([L]);return V.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),V.attr("x",w.left+q/2).attr("y",w.top+H/2).text(function(t){return t}),t}$.selectAll(".nv-noData").remove();var B=n.filter(function(t){return!t.disabled&&t.bar}),Y=n.filter(function(t){return!t.bar});r=d.xScale(),i=f.scale(),o=d.yScale(),s=u.yScale(),a=p.yScale(),l=c.yScale();var U=n.filter(function(t){return!t.disabled&&t.bar}).map(function(t){return t.values.map(function(t,e){return{x:M(t,e),y:S(t,e)}})}),Q=n.filter(function(t){return!t.disabled&&!t.bar}).map(function(t){return t.values.map(function(t,e){return{x:M(t,e),y:S(t,e)}})});r.range([0,q]),i.domain(d3.extent(d3.merge(U.concat(Q)),function(t){return t.x})).range([0,q]);var G=$.selectAll("g.nv-wrap.nv-linePlusBar").data([n]),X=G.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g"),Z=G.select("g");X.append("g").attr("class","nv-legendWrap");var J=X.append("g").attr("class","nv-focus");J.append("g").attr("class","nv-x nv-axis"),J.append("g").attr("class","nv-y1 nv-axis"),J.append("g").attr("class","nv-y2 nv-axis"),J.append("g").attr("class","nv-barsWrap"),J.append("g").attr("class","nv-linesWrap");var K=X.append("g").attr("class","nv-context");K.append("g").attr("class","nv-x nv-axis"),K.append("g").attr("class","nv-y1 nv-axis"),K.append("g").attr("class","nv-y2 nv-axis"),K.append("g").attr("class","nv-barsWrap"),K.append("g").attr("class","nv-linesWrap"),K.append("g").attr("class","nv-brushBackground"),K.append("g").attr("class","nv-x nv-brush"),z&&(b.width(q/2),Z.select(".nv-legendWrap").datum(n.map(function(t){return t.originalKey=void 0===t.originalKey?t.key:t.originalKey,t.key=t.originalKey+(t.bar?" (left axis)":" (right axis)"),t})).call(b),w.top!=b.height()&&(w.top=b.height(),H=(C||parseInt($.style("height"))||400)-w.top-w.bottom-j),Z.select(".nv-legendWrap").attr("transform","translate("+q/2+","+-w.top+")")),G.attr("transform","translate("+w.left+","+w.top+")"),p.width(q).height(W).color(n.map(function(t,e){return t.color||D(t,e)}).filter(function(t,e){return!n[e].disabled&&n[e].bar})),c.width(q).height(W).color(n.map(function(t,e){return t.color||D(t,e)}).filter(function(t,e){return!n[e].disabled&&!n[e].bar}));var te=Z.select(".nv-context .nv-barsWrap").datum(B.length?B:[{values:[]}]),ee=Z.select(".nv-context .nv-linesWrap").datum(Y[0].disabled?[{values:[]}]:Y);Z.select(".nv-context").attr("transform","translate(0,"+(H+w.bottom+x.top)+")"),te.transition().call(p),ee.transition().call(c),_.x(i).on("brush",R),N&&_.extent(N);var ne=Z.select(".nv-brushBackground").selectAll("g").data([N||_.extent()]),re=ne.enter().append("g");re.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",W),re.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",W);var ie=Z.select(".nv-x.nv-brush").call(_);ie.selectAll("rect").attr("height",W),ie.selectAll(".resize").append("path").attr("d",P),f.ticks(q/100).tickSize(-W,0),Z.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+a.range()[0]+")"),Z.select(".nv-context .nv-x.nv-axis").transition().call(f),v.scale(a).ticks(W/36).tickSize(-q,0),Z.select(".nv-context .nv-y1.nv-axis").style("opacity",B.length?1:0).attr("transform","translate(0,"+i.range()[0]+")"),Z.select(".nv-context .nv-y1.nv-axis").transition().call(v),y.scale(l).ticks(W/36).tickSize(B.length?0:-q,0),Z.select(".nv-context .nv-y2.nv-axis").style("opacity",Y.length?1:0).attr("transform","translate("+i.range()[1]+",0)"),Z.select(".nv-context .nv-y2.nv-axis").transition().call(y),b.dispatch.on("stateChange",function(){t.update()}),E.on("tooltipShow",function(t){T&&O(t,F.parentNode)}),R()}),t}var e,r,i,o,s,a,l,u=n.models.line(),c=n.models.line(),d=n.models.historicalBar(),p=n.models.historicalBar(),h=n.models.axis(),f=n.models.axis(),g=n.models.axis(),m=n.models.axis(),v=n.models.axis(),y=n.models.axis(),b=n.models.legend(),_=d3.svg.brush(),w={top:30,right:30,bottom:30,left:60},x={top:0,right:30,bottom:20,left:60},k=null,C=null,j=100,M=function(t){return t.x},S=function(t){return t.y},D=n.utils.defaultColor(),z=!0,N=null,T=!0,P=function(t,e,n){return"<h3>"+t+"</h3><p>"+n+" at "+e+"</p>"},L="No Data Available.",E=d3.dispatch("tooltipShow","tooltipHide","brush"),A=0;u.clipEdge(!0),c.interactive(!1),h.orient("bottom").tickPadding(5),g.orient("left"),m.orient("right"),f.orient("bottom").tickPadding(5),v.orient("left"),y.orient("right");var O=function(r,i){e&&(r.pointIndex+=Math.ceil(e[0]));var o=r.pos[0]+(i.offsetLeft||0),s=r.pos[1]+(i.offsetTop||0),a=h.tickFormat()(u.x()(r.point,r.pointIndex)),l=(r.series.bar?g:m).tickFormat()(u.y()(r.point,r.pointIndex)),c=P(r.series.key,a,l,r,t);n.tooltip.show([o,s],c,r.value<0?"n":"s",null,i)};return u.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+w.left,t.pos[1]+w.top],E.tooltipShow(t)}),u.dispatch.on("elementMouseout.tooltip",function(t){E.tooltipHide(t)}),d.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+w.left,t.pos[1]+w.top],E.tooltipShow(t)}),d.dispatch.on("elementMouseout.tooltip",function(t){E.tooltipHide(t)}),E.on("tooltipHide",function(){T&&n.tooltip.cleanup()}),t.dispatch=E,t.legend=b,t.lines=u,t.lines2=c,t.bars=d,t.bars2=p,t.xAxis=h,t.x2Axis=f,t.y1Axis=g,t.y2Axis=m,t.y3Axis=v,t.y4Axis=y,d3.rebind(t,u,"defined","size","clipVoronoi","interpolate"),t.options=n.utils.optionsFunc.bind(t),t.x=function(e){return arguments.length?(M=e,u.x(e),d.x(e),t):M},t.y=function(e){return arguments.length?(S=e,u.y(e),d.y(e),t):S},t.margin=function(e){return arguments.length?(w.top="undefined"!=typeof e.top?e.top:w.top,w.right="undefined"!=typeof e.right?e.right:w.right,w.bottom="undefined"!=typeof e.bottom?e.bottom:w.bottom,w.left="undefined"!=typeof e.left?e.left:w.left,t):w},t.width=function(e){return arguments.length?(k=e,t):k},t.height=function(e){return arguments.length?(C=e,t):C},t.color=function(e){return arguments.length?(D=n.utils.getColor(e),b.color(D),t):D},t.showLegend=function(e){return arguments.length?(z=e,t):z},t.tooltips=function(e){return arguments.length?(T=e,t):T},t.tooltipContent=function(e){return arguments.length?(P=e,t):P},t.noData=function(e){return arguments.length?(L=e,t):L},t.brushExtent=function(e){return arguments.length?(N=e,t):N},t},n.models.multiBar=function(){"use strict";function t(n){return n.each(function(t){var n=c-u.left-u.right,S=d-u.top-u.bottom,D=d3.select(this);x&&t.length&&(x=[{values:t[0].values.map(function(t){return{x:t.x,y:0,series:t.series,size:.01}})}]),b&&(t=d3.layout.stack().offset(_).values(function(t){return t.values}).y(m)(!t.length&&x?x:t)),t.forEach(function(t,e){t.values.forEach(function(t){t.series=e})}),b&&t[0].values.map(function(e,n){var r=0,i=0;t.map(function(t){var e=t.values[n];e.size=Math.abs(e.y),e.y<0?(e.y1=i,i-=e.size):(e.y1=e.size+r,r+=e.size)})});var z=r&&i?[]:t.map(function(t){return t.values.map(function(t,e){return{x:g(t,e),y:m(t,e),y0:t.y0,y1:t.y1}})});p.domain(r||d3.merge(z).map(function(t){return t.x})).rangeBands(o||[0,n],j),h.domain(i||d3.extent(d3.merge(z).map(function(t){return b?t.y>0?t.y1:t.y1+t.y:t.y}).concat(v))).range(s||[S,0]),p.domain()[0]===p.domain()[1]&&p.domain(p.domain()[0]?[p.domain()[0]-.01*p.domain()[0],p.domain()[1]+.01*p.domain()[1]]:[-1,1]),h.domain()[0]===h.domain()[1]&&h.domain(h.domain()[0]?[h.domain()[0]+.01*h.domain()[0],h.domain()[1]-.01*h.domain()[1]]:[-1,1]),a=a||p,l=l||h;var N=D.selectAll("g.nv-wrap.nv-multibar").data([t]),T=N.enter().append("g").attr("class","nvd3 nv-wrap nv-multibar"),P=T.append("defs"),L=T.append("g"),E=N.select("g");L.append("g").attr("class","nv-groups"),N.attr("transform","translate("+u.left+","+u.top+")"),P.append("clipPath").attr("id","nv-edge-clip-"+f).append("rect"),N.select("#nv-edge-clip-"+f+" rect").attr("width",n).attr("height",S),E.attr("clip-path",y?"url(#nv-edge-clip-"+f+")":"");var A=N.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t,e){return e});A.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),A.exit().transition().selectAll("rect.nv-bar").delay(function(e,n){return n*C/t[0].values.length}).attr("y",function(t){return l(b?t.y0:0)}).attr("height",0).remove(),A.attr("class",function(t,e){return"nv-group nv-series-"+e}).classed("hover",function(t){return t.hover}).style("fill",function(t,e){return w(t,e)}).style("stroke",function(t,e){return w(t,e)}),A.transition().style("stroke-opacity",1).style("fill-opacity",.75);var O=A.selectAll("rect.nv-bar").data(function(e){return x&&!t.length?x.values:e.values});O.exit().remove();O.enter().append("rect").attr("class",function(t,e){return m(t,e)<0?"nv-bar negative":"nv-bar positive"}).attr("x",function(e,n,r){return b?0:r*p.rangeBand()/t.length}).attr("y",function(t){return l(b?t.y0:0)}).attr("height",0).attr("width",p.rangeBand()/(b?1:t.length)).attr("transform",function(t,e){return"translate("+p(g(t,e))+",0)"});O.style("fill",function(t,e,n){return w(t,n,e)}).style("stroke",function(t,e,n){return w(t,n,e)}).on("mouseover",function(e,n){d3.select(this).classed("hover",!0),M.elementMouseover({value:m(e,n),point:e,series:t[e.series],pos:[p(g(e,n))+p.rangeBand()*(b?t.length/2:e.series+.5)/t.length,h(m(e,n)+(b?e.y0:0))],pointIndex:n,seriesIndex:e.series,e:d3.event})}).on("mouseout",function(e,n){d3.select(this).classed("hover",!1),M.elementMouseout({value:m(e,n),point:e,series:t[e.series],pointIndex:n,seriesIndex:e.series,e:d3.event})}).on("click",function(e,n){M.elementClick({value:m(e,n),point:e,series:t[e.series],pos:[p(g(e,n))+p.rangeBand()*(b?t.length/2:e.series+.5)/t.length,h(m(e,n)+(b?e.y0:0))],pointIndex:n,seriesIndex:e.series,e:d3.event}),d3.event.stopPropagation()}).on("dblclick",function(e,n){M.elementDblClick({value:m(e,n),point:e,series:t[e.series],pos:[p(g(e,n))+p.rangeBand()*(b?t.length/2:e.series+.5)/t.length,h(m(e,n)+(b?e.y0:0))],pointIndex:n,seriesIndex:e.series,e:d3.event}),d3.event.stopPropagation()}),O.attr("class",function(t,e){return m(t,e)<0?"nv-bar negative":"nv-bar positive"}).transition().attr("transform",function(t,e){return"translate("+p(g(t,e))+",0)"}),k&&(e||(e=t.map(function(){return!0})),O.style("fill",function(t,n,r){return d3.rgb(k(t,n)).darker(e.map(function(t,e){return e}).filter(function(t,n){return!e[n]})[r]).toString()}).style("stroke",function(t,n,r){return d3.rgb(k(t,n)).darker(e.map(function(t,e){return e}).filter(function(t,n){return!e[n]})[r]).toString()})),b?O.transition().delay(function(e,n){return n*C/t[0].values.length}).attr("y",function(t){return h(b?t.y1:0)}).attr("height",function(t){return Math.max(Math.abs(h(t.y+(b?t.y0:0))-h(b?t.y0:0)),1)}).attr("x",function(e){return b?0:e.series*p.rangeBand()/t.length}).attr("width",p.rangeBand()/(b?1:t.length)):O.transition().delay(function(e,n){return n*C/t[0].values.length}).attr("x",function(e){return e.series*p.rangeBand()/t.length}).attr("width",p.rangeBand()/t.length).attr("y",function(t,e){return m(t,e)<0?h(0):h(0)-h(m(t,e))<1?h(0)-1:h(m(t,e))||0}).attr("height",function(t,e){return Math.max(Math.abs(h(m(t,e))-h(0)),1)||0}),a=p.copy(),l=h.copy()}),t}var e,r,i,o,s,a,l,u={top:0,right:0,bottom:0,left:0},c=960,d=500,p=d3.scale.ordinal(),h=d3.scale.linear(),f=Math.floor(1e4*Math.random()),g=function(t){return t.x},m=function(t){return t.y},v=[0],y=!0,b=!1,_="zero",w=n.utils.defaultColor(),x=!1,k=null,C=1200,j=.1,M=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");return t.dispatch=M,t.options=n.utils.optionsFunc.bind(t),t.x=function(e){return arguments.length?(g=e,t):g},t.y=function(e){return arguments.length?(m=e,t):m},t.margin=function(e){return arguments.length?(u.top="undefined"!=typeof e.top?e.top:u.top,u.right="undefined"!=typeof e.right?e.right:u.right,u.bottom="undefined"!=typeof e.bottom?e.bottom:u.bottom,u.left="undefined"!=typeof e.left?e.left:u.left,t):u},t.width=function(e){return arguments.length?(c=e,t):c},t.height=function(e){return arguments.length?(d=e,t):d},t.xScale=function(e){return arguments.length?(p=e,t):p},t.yScale=function(e){return arguments.length?(h=e,t):h},t.xDomain=function(e){return arguments.length?(r=e,t):r},t.yDomain=function(e){return arguments.length?(i=e,t):i},t.xRange=function(e){return arguments.length?(o=e,t):o},t.yRange=function(e){return arguments.length?(s=e,t):s},t.forceY=function(e){return arguments.length?(v=e,t):v},t.stacked=function(e){return arguments.length?(b=e,t):b},t.stackOffset=function(e){return arguments.length?(_=e,t):_},t.clipEdge=function(e){return arguments.length?(y=e,t):y},t.color=function(e){return arguments.length?(w=n.utils.getColor(e),t):w},t.barColor=function(e){return arguments.length?(k=n.utils.getColor(e),t):k},t.disabled=function(n){return arguments.length?(e=n,t):e},t.id=function(e){return arguments.length?(f=e,t):f},t.hideable=function(e){return arguments.length?(x=e,t):x},t.delay=function(e){return arguments.length?(C=e,t):C},t.groupSpacing=function(e){return arguments.length?(j=e,t):j},t},n.models.multiBarChart=function(){"use strict";function t(n){return n.each(function(n){var x=d3.select(this),N=this,T=(c||parseInt(x.style("width"))||960)-u.left-u.right,P=(d||parseInt(x.style("height"))||400)-u.top-u.bottom;if(t.update=function(){x.transition().duration(D).call(t)},t.container=this,k.disabled=n.map(function(t){return!!t.disabled}),!C){var L;C={};for(L in k)C[L]=k[L]instanceof Array?k[L].slice(0):k[L]}if(!(n&&n.length&&n.filter(function(t){return t.values.length}).length)){var E=x.selectAll(".nv-noData").data([j]);return E.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),E.attr("x",u.left+T/2).attr("y",u.top+P/2).text(function(t){return t}),t}x.selectAll(".nv-noData").remove(),e=i.xScale(),r=i.yScale();var A=x.selectAll("g.nv-wrap.nv-multiBarWithLegend").data([n]),O=A.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarWithLegend").append("g"),I=A.select("g");if(O.append("g").attr("class","nv-x nv-axis"),O.append("g").attr("class","nv-y nv-axis"),O.append("g").attr("class","nv-barsWrap"),O.append("g").attr("class","nv-legendWrap"),O.append("g").attr("class","nv-controlsWrap"),f&&(a.width(T-S()),i.barColor()&&n.forEach(function(t,e){t.color=d3.rgb("#ccc").darker(1.5*e).toString()}),I.select(".nv-legendWrap").datum(n).call(a),u.top!=a.height()&&(u.top=a.height(),P=(d||parseInt(x.style("height"))||400)-u.top-u.bottom),I.select(".nv-legendWrap").attr("transform","translate("+S()+","+-u.top+")")),h){var R=[{key:"Grouped",disabled:i.stacked()},{key:"Stacked",disabled:!i.stacked()}];l.width(S()).color(["#444","#444","#444"]),I.select(".nv-controlsWrap").datum(R).attr("transform","translate(0,"+-u.top+")").call(l)}A.attr("transform","translate("+u.left+","+u.top+")"),v&&I.select(".nv-y.nv-axis").attr("transform","translate("+T+",0)"),i.disabled(n.map(function(t){return t.disabled})).width(T).height(P).color(n.map(function(t,e){return t.color||p(t,e)}).filter(function(t,e){return!n[e].disabled}));var $=I.select(".nv-barsWrap").datum(n.filter(function(t){return!t.disabled}));if($.transition().call(i),g){o.scale(e).ticks(T/100).tickSize(-P,0),I.select(".nv-x.nv-axis").attr("transform","translate(0,"+r.range()[0]+")"),I.select(".nv-x.nv-axis").transition().call(o);var F=I.select(".nv-x.nv-axis > g").selectAll("g");if(F.selectAll("line, text").style("opacity",1),b){var q=function(t,e){return"translate("+t+","+e+")"},H=5,W=17;F.selectAll("text").attr("transform",function(t,e,n){return q(0,n%2==0?H:W)});var V=d3.selectAll(".nv-x.nv-axis .nv-wrap g g text")[0].length;I.selectAll(".nv-x.nv-axis .nv-axisMaxMin text").attr("transform",function(t,e){return q(0,0===e||V%2!==0?W:H)})}y&&F.filter(function(t,e){return e%Math.ceil(n[0].values.length/(T/100))!==0}).selectAll("text, line").style("opacity",0),_&&F.selectAll(".tick text").attr("transform","rotate("+_+" 0,0)").style("text-anchor",_>0?"start":"end"),I.select(".nv-x.nv-axis").selectAll("g.nv-axisMaxMin text").style("opacity",1)}m&&(s.scale(r).ticks(P/36).tickSize(-T,0),I.select(".nv-y.nv-axis").transition().call(s)),a.dispatch.on("stateChange",function(e){k=e,M.stateChange(k),t.update()}),l.dispatch.on("legendClick",function(e){if(e.disabled){switch(R=R.map(function(t){return t.disabled=!0,t}),e.disabled=!1,e.key){case"Grouped":i.stacked(!1);break;case"Stacked":i.stacked(!0)}k.stacked=i.stacked(),M.stateChange(k),t.update()}}),M.on("tooltipShow",function(t){w&&z(t,N.parentNode)}),M.on("changeState",function(e){"undefined"!=typeof e.disabled&&(n.forEach(function(t,n){t.disabled=e.disabled[n]
}),k.disabled=e.disabled),"undefined"!=typeof e.stacked&&(i.stacked(e.stacked),k.stacked=e.stacked),t.update()})}),t}var e,r,i=n.models.multiBar(),o=n.models.axis(),s=n.models.axis(),a=n.models.legend(),l=n.models.legend(),u={top:30,right:20,bottom:50,left:60},c=null,d=null,p=n.utils.defaultColor(),h=!0,f=!0,g=!0,m=!0,v=!1,y=!0,b=!1,_=0,w=!0,x=function(t,e,n){return"<h3>"+t+"</h3><p>"+n+" on "+e+"</p>"},k={stacked:!1},C=null,j="No Data Available.",M=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),S=function(){return h?180:0},D=250;i.stacked(!1),o.orient("bottom").tickPadding(7).highlightZero(!0).showMaxMin(!1).tickFormat(function(t){return t}),s.orient(v?"right":"left").tickFormat(d3.format(",.1f")),l.updateState(!1);var z=function(e,r){var a=e.pos[0]+(r.offsetLeft||0),l=e.pos[1]+(r.offsetTop||0),u=o.tickFormat()(i.x()(e.point,e.pointIndex)),c=s.tickFormat()(i.y()(e.point,e.pointIndex)),d=x(e.series.key,u,c,e,t);n.tooltip.show([a,l],d,e.value<0?"n":"s",null,r)};return i.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+u.left,t.pos[1]+u.top],M.tooltipShow(t)}),i.dispatch.on("elementMouseout.tooltip",function(t){M.tooltipHide(t)}),M.on("tooltipHide",function(){w&&n.tooltip.cleanup()}),t.dispatch=M,t.multibar=i,t.legend=a,t.xAxis=o,t.yAxis=s,d3.rebind(t,i,"x","y","xDomain","yDomain","xRange","yRange","forceX","forceY","clipEdge","id","stacked","stackOffset","delay","barColor","groupSpacing"),t.options=n.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(u.top="undefined"!=typeof e.top?e.top:u.top,u.right="undefined"!=typeof e.right?e.right:u.right,u.bottom="undefined"!=typeof e.bottom?e.bottom:u.bottom,u.left="undefined"!=typeof e.left?e.left:u.left,t):u},t.width=function(e){return arguments.length?(c=e,t):c},t.height=function(e){return arguments.length?(d=e,t):d},t.color=function(e){return arguments.length?(p=n.utils.getColor(e),a.color(p),t):p},t.showControls=function(e){return arguments.length?(h=e,t):h},t.showLegend=function(e){return arguments.length?(f=e,t):f},t.showXAxis=function(e){return arguments.length?(g=e,t):g},t.showYAxis=function(e){return arguments.length?(m=e,t):m},t.rightAlignYAxis=function(e){return arguments.length?(v=e,s.orient(e?"right":"left"),t):v},t.reduceXTicks=function(e){return arguments.length?(y=e,t):y},t.rotateLabels=function(e){return arguments.length?(_=e,t):_},t.staggerLabels=function(e){return arguments.length?(b=e,t):b},t.tooltip=function(e){return arguments.length?(x=e,t):x},t.tooltips=function(e){return arguments.length?(w=e,t):w},t.tooltipContent=function(e){return arguments.length?(x=e,t):x},t.state=function(e){return arguments.length?(k=e,t):k},t.defaultState=function(e){return arguments.length?(C=e,t):C},t.noData=function(e){return arguments.length?(j=e,t):j},t.transitionDuration=function(e){return arguments.length?(D=e,t):D},t},n.models.multiBarHorizontal=function(){"use strict";function t(n){return n.each(function(t){{var n=c-u.left-u.right,p=d-u.top-u.bottom;d3.select(this)}_&&(t=d3.layout.stack().offset("zero").values(function(t){return t.values}).y(m)(t)),t.forEach(function(t,e){t.values.forEach(function(t){t.series=e})}),_&&t[0].values.map(function(e,n){var r=0,i=0;t.map(function(t){var e=t.values[n];e.size=Math.abs(e.y),e.y<0?(e.y1=i-e.size,i-=e.size):(e.y1=r,r+=e.size)})});var C=r&&i?[]:t.map(function(t){return t.values.map(function(t,e){return{x:g(t,e),y:m(t,e),y0:t.y0,y1:t.y1}})});h.domain(r||d3.merge(C).map(function(t){return t.x})).rangeBands(o||[0,p],.1),f.domain(i||d3.extent(d3.merge(C).map(function(t){return _?t.y>0?t.y1+t.y:t.y1:t.y}).concat(v))),f.range(w&&!_?s||[f.domain()[0]<0?x:0,n-(f.domain()[1]>0?x:0)]:s||[0,n]),a=a||h,l=l||d3.scale.linear().domain(f.domain()).range([f(0),f(0)]);{var M=d3.select(this).selectAll("g.nv-wrap.nv-multibarHorizontal").data([t]),S=M.enter().append("g").attr("class","nvd3 nv-wrap nv-multibarHorizontal"),D=(S.append("defs"),S.append("g"));M.select("g")}D.append("g").attr("class","nv-groups"),M.attr("transform","translate("+u.left+","+u.top+")");var z=M.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t,e){return e});z.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),z.exit().transition().style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),z.attr("class",function(t,e){return"nv-group nv-series-"+e}).classed("hover",function(t){return t.hover}).style("fill",function(t,e){return y(t,e)}).style("stroke",function(t,e){return y(t,e)}),z.transition().style("stroke-opacity",1).style("fill-opacity",.75);var N=z.selectAll("g.nv-bar").data(function(t){return t.values});N.exit().remove();var T=N.enter().append("g").attr("transform",function(e,n,r){return"translate("+l(_?e.y0:0)+","+(_?0:r*h.rangeBand()/t.length+h(g(e,n)))+")"});T.append("rect").attr("width",0).attr("height",h.rangeBand()/(_?1:t.length)),N.on("mouseover",function(e,n){d3.select(this).classed("hover",!0),j.elementMouseover({value:m(e,n),point:e,series:t[e.series],pos:[f(m(e,n)+(_?e.y0:0)),h(g(e,n))+h.rangeBand()*(_?t.length/2:e.series+.5)/t.length],pointIndex:n,seriesIndex:e.series,e:d3.event})}).on("mouseout",function(e,n){d3.select(this).classed("hover",!1),j.elementMouseout({value:m(e,n),point:e,series:t[e.series],pointIndex:n,seriesIndex:e.series,e:d3.event})}).on("click",function(e,n){j.elementClick({value:m(e,n),point:e,series:t[e.series],pos:[h(g(e,n))+h.rangeBand()*(_?t.length/2:e.series+.5)/t.length,f(m(e,n)+(_?e.y0:0))],pointIndex:n,seriesIndex:e.series,e:d3.event}),d3.event.stopPropagation()}).on("dblclick",function(e,n){j.elementDblClick({value:m(e,n),point:e,series:t[e.series],pos:[h(g(e,n))+h.rangeBand()*(_?t.length/2:e.series+.5)/t.length,f(m(e,n)+(_?e.y0:0))],pointIndex:n,seriesIndex:e.series,e:d3.event}),d3.event.stopPropagation()}),T.append("text"),w&&!_?(N.select("text").attr("text-anchor",function(t,e){return m(t,e)<0?"end":"start"}).attr("y",h.rangeBand()/(2*t.length)).attr("dy",".32em").text(function(t,e){return k(m(t,e))}),N.transition().select("text").attr("x",function(t,e){return m(t,e)<0?-4:f(m(t,e))-f(0)+4})):N.selectAll("text").text(""),N.attr("class",function(t,e){return m(t,e)<0?"nv-bar negative":"nv-bar positive"}),b&&(e||(e=t.map(function(){return!0})),N.style("fill",function(t,n,r){return d3.rgb(b(t,n)).darker(e.map(function(t,e){return e}).filter(function(t,n){return!e[n]})[r]).toString()}).style("stroke",function(t,n,r){return d3.rgb(b(t,n)).darker(e.map(function(t,e){return e}).filter(function(t,n){return!e[n]})[r]).toString()})),_?N.transition().attr("transform",function(t,e){return"translate("+f(t.y1)+","+h(g(t,e))+")"}).select("rect").attr("width",function(t,e){return Math.abs(f(m(t,e)+t.y0)-f(t.y0))}).attr("height",h.rangeBand()):N.transition().attr("transform",function(e,n){return"translate("+f(m(e,n)<0?m(e,n):0)+","+(e.series*h.rangeBand()/t.length+h(g(e,n)))+")"}).select("rect").attr("height",h.rangeBand()/t.length).attr("width",function(t,e){return Math.max(Math.abs(f(m(t,e))-f(0)),1)}),a=h.copy(),l=f.copy()}),t}var e,r,i,o,s,a,l,u={top:0,right:0,bottom:0,left:0},c=960,d=500,p=Math.floor(1e4*Math.random()),h=d3.scale.ordinal(),f=d3.scale.linear(),g=function(t){return t.x},m=function(t){return t.y},v=[0],y=n.utils.defaultColor(),b=null,_=!1,w=!1,x=60,k=d3.format(",.2f"),C=1200,j=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");return t.dispatch=j,t.options=n.utils.optionsFunc.bind(t),t.x=function(e){return arguments.length?(g=e,t):g},t.y=function(e){return arguments.length?(m=e,t):m},t.margin=function(e){return arguments.length?(u.top="undefined"!=typeof e.top?e.top:u.top,u.right="undefined"!=typeof e.right?e.right:u.right,u.bottom="undefined"!=typeof e.bottom?e.bottom:u.bottom,u.left="undefined"!=typeof e.left?e.left:u.left,t):u},t.width=function(e){return arguments.length?(c=e,t):c},t.height=function(e){return arguments.length?(d=e,t):d},t.xScale=function(e){return arguments.length?(h=e,t):h},t.yScale=function(e){return arguments.length?(f=e,t):f},t.xDomain=function(e){return arguments.length?(r=e,t):r},t.yDomain=function(e){return arguments.length?(i=e,t):i},t.xRange=function(e){return arguments.length?(o=e,t):o},t.yRange=function(e){return arguments.length?(s=e,t):s},t.forceY=function(e){return arguments.length?(v=e,t):v},t.stacked=function(e){return arguments.length?(_=e,t):_},t.color=function(e){return arguments.length?(y=n.utils.getColor(e),t):y},t.barColor=function(e){return arguments.length?(b=n.utils.getColor(e),t):b},t.disabled=function(n){return arguments.length?(e=n,t):e},t.id=function(e){return arguments.length?(p=e,t):p},t.delay=function(e){return arguments.length?(C=e,t):C},t.showValues=function(e){return arguments.length?(w=e,t):w},t.valueFormat=function(e){return arguments.length?(k=e,t):k},t.valuePadding=function(e){return arguments.length?(x=e,t):x},t},n.models.multiBarHorizontalChart=function(){"use strict";function t(n){return n.each(function(g){var v=d3.select(this),j=this,M=(c||parseInt(v.style("width"))||960)-u.left-u.right,S=(d||parseInt(v.style("height"))||400)-u.top-u.bottom;if(t.update=function(){v.transition().duration(k).call(t)},t.container=this,y.disabled=g.map(function(t){return!!t.disabled}),!b){var D;b={};for(D in y)b[D]=y[D]instanceof Array?y[D].slice(0):y[D]}if(!(g&&g.length&&g.filter(function(t){return t.values.length}).length)){var z=v.selectAll(".nv-noData").data([_]);return z.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),z.attr("x",u.left+M/2).attr("y",u.top+S/2).text(function(t){return t}),t}v.selectAll(".nv-noData").remove(),e=i.xScale(),r=i.yScale();var N=v.selectAll("g.nv-wrap.nv-multiBarHorizontalChart").data([g]),T=N.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarHorizontalChart").append("g"),P=N.select("g");if(T.append("g").attr("class","nv-x nv-axis"),T.append("g").attr("class","nv-y nv-axis"),T.append("g").attr("class","nv-barsWrap"),T.append("g").attr("class","nv-legendWrap"),T.append("g").attr("class","nv-controlsWrap"),f&&(a.width(M-x()),i.barColor()&&g.forEach(function(t,e){t.color=d3.rgb("#ccc").darker(1.5*e).toString()}),P.select(".nv-legendWrap").datum(g).call(a),u.top!=a.height()&&(u.top=a.height(),S=(d||parseInt(v.style("height"))||400)-u.top-u.bottom),P.select(".nv-legendWrap").attr("transform","translate("+x()+","+-u.top+")")),h){var L=[{key:"Grouped",disabled:i.stacked()},{key:"Stacked",disabled:!i.stacked()}];l.width(x()).color(["#444","#444","#444"]),P.select(".nv-controlsWrap").datum(L).attr("transform","translate(0,"+-u.top+")").call(l)}N.attr("transform","translate("+u.left+","+u.top+")"),i.disabled(g.map(function(t){return t.disabled})).width(M).height(S).color(g.map(function(t,e){return t.color||p(t,e)}).filter(function(t,e){return!g[e].disabled}));var E=P.select(".nv-barsWrap").datum(g.filter(function(t){return!t.disabled}));E.transition().call(i),o.scale(e).ticks(S/24).tickSize(-M,0),P.select(".nv-x.nv-axis").transition().call(o);var A=P.select(".nv-x.nv-axis").selectAll("g");A.selectAll("line, text").style("opacity",1),s.scale(r).ticks(M/100).tickSize(-S,0),P.select(".nv-y.nv-axis").attr("transform","translate(0,"+S+")"),P.select(".nv-y.nv-axis").transition().call(s),a.dispatch.on("stateChange",function(e){y=e,w.stateChange(y),t.update()}),l.dispatch.on("legendClick",function(e){if(e.disabled){switch(L=L.map(function(t){return t.disabled=!0,t}),e.disabled=!1,e.key){case"Grouped":i.stacked(!1);break;case"Stacked":i.stacked(!0)}y.stacked=i.stacked(),w.stateChange(y),t.update()}}),w.on("tooltipShow",function(t){m&&C(t,j.parentNode)}),w.on("changeState",function(e){"undefined"!=typeof e.disabled&&(g.forEach(function(t,n){t.disabled=e.disabled[n]}),y.disabled=e.disabled),"undefined"!=typeof e.stacked&&(i.stacked(e.stacked),y.stacked=e.stacked),n.call(t)})}),t}var e,r,i=n.models.multiBarHorizontal(),o=n.models.axis(),s=n.models.axis(),a=n.models.legend().height(30),l=n.models.legend().height(30),u={top:30,right:20,bottom:50,left:60},c=null,d=null,p=n.utils.defaultColor(),h=!0,f=!0,g=!1,m=!0,v=function(t,e,n){return"<h3>"+t+" - "+e+"</h3><p>"+n+"</p>"},y={stacked:g},b=null,_="No Data Available.",w=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),x=function(){return h?180:0},k=250;i.stacked(g),o.orient("left").tickPadding(5).highlightZero(!1).showMaxMin(!1).tickFormat(function(t){return t}),s.orient("bottom").tickFormat(d3.format(",.1f")),l.updateState(!1);var C=function(e,r){var a=e.pos[0]+(r.offsetLeft||0),l=e.pos[1]+(r.offsetTop||0),u=o.tickFormat()(i.x()(e.point,e.pointIndex)),c=s.tickFormat()(i.y()(e.point,e.pointIndex)),d=v(e.series.key,u,c,e,t);n.tooltip.show([a,l],d,e.value<0?"e":"w",null,r)};return i.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+u.left,t.pos[1]+u.top],w.tooltipShow(t)}),i.dispatch.on("elementMouseout.tooltip",function(t){w.tooltipHide(t)}),w.on("tooltipHide",function(){m&&n.tooltip.cleanup()}),t.dispatch=w,t.multibar=i,t.legend=a,t.xAxis=o,t.yAxis=s,d3.rebind(t,i,"x","y","xDomain","yDomain","xRange","yRange","forceX","forceY","clipEdge","id","delay","showValues","valueFormat","stacked","barColor"),t.options=n.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(u.top="undefined"!=typeof e.top?e.top:u.top,u.right="undefined"!=typeof e.right?e.right:u.right,u.bottom="undefined"!=typeof e.bottom?e.bottom:u.bottom,u.left="undefined"!=typeof e.left?e.left:u.left,t):u},t.width=function(e){return arguments.length?(c=e,t):c},t.height=function(e){return arguments.length?(d=e,t):d},t.color=function(e){return arguments.length?(p=n.utils.getColor(e),a.color(p),t):p},t.showControls=function(e){return arguments.length?(h=e,t):h},t.showLegend=function(e){return arguments.length?(f=e,t):f},t.tooltip=function(e){return arguments.length?(v=e,t):v},t.tooltips=function(e){return arguments.length?(m=e,t):m},t.tooltipContent=function(e){return arguments.length?(v=e,t):v},t.state=function(e){return arguments.length?(y=e,t):y},t.defaultState=function(e){return arguments.length?(b=e,t):b},t.noData=function(e){return arguments.length?(_=e,t):_},t.transitionDuration=function(e){return arguments.length?(k=e,t):k},t},n.models.multiChart=function(){"use strict";function t(n){return n.each(function(n){var d=d3.select(this),M=this;t.update=function(){d.transition().call(t)},t.container=this;var S=(a||parseInt(d.style("width"))||960)-o.left-o.right,D=(l||parseInt(d.style("height"))||400)-o.top-o.bottom,z=n.filter(function(t){return!t.disabled&&"line"==t.type&&1==t.yAxis}),N=n.filter(function(t){return!t.disabled&&"line"==t.type&&2==t.yAxis}),T=n.filter(function(t){return!t.disabled&&"bar"==t.type&&1==t.yAxis}),P=n.filter(function(t){return!t.disabled&&"bar"==t.type&&2==t.yAxis}),L=n.filter(function(t){return!t.disabled&&"area"==t.type&&1==t.yAxis}),E=n.filter(function(t){return!t.disabled&&"area"==t.type&&2==t.yAxis}),A=n.filter(function(t){return!t.disabled&&1==t.yAxis}).map(function(t){return t.values.map(function(t){return{x:t.x,y:t.y}})}),O=n.filter(function(t){return!t.disabled&&2==t.yAxis}).map(function(t){return t.values.map(function(t){return{x:t.x,y:t.y}})});e.domain(d3.extent(d3.merge(A.concat(O)),function(t){return t.x})).range([0,S]);var I=d.selectAll("g.wrap.multiChart").data([n]),R=I.enter().append("g").attr("class","wrap nvd3 multiChart").append("g");R.append("g").attr("class","x axis"),R.append("g").attr("class","y1 axis"),R.append("g").attr("class","y2 axis"),R.append("g").attr("class","lines1Wrap"),R.append("g").attr("class","lines2Wrap"),R.append("g").attr("class","bars1Wrap"),R.append("g").attr("class","bars2Wrap"),R.append("g").attr("class","stack1Wrap"),R.append("g").attr("class","stack2Wrap"),R.append("g").attr("class","legendWrap");var $=I.select("g");u&&(k.width(S/2),$.select(".legendWrap").datum(n.map(function(t){return t.originalKey=void 0===t.originalKey?t.key:t.originalKey,t.key=t.originalKey+(1==t.yAxis?"":" (right axis)"),t})).call(k),o.top!=k.height()&&(o.top=k.height(),D=(l||parseInt(d.style("height"))||400)-o.top-o.bottom),$.select(".legendWrap").attr("transform","translate("+S/2+","+-o.top+")")),f.width(S).height(D).interpolate("monotone").color(n.map(function(t,e){return t.color||s[e%s.length]}).filter(function(t,e){return!n[e].disabled&&1==n[e].yAxis&&"line"==n[e].type})),g.width(S).height(D).interpolate("monotone").color(n.map(function(t,e){return t.color||s[e%s.length]}).filter(function(t,e){return!n[e].disabled&&2==n[e].yAxis&&"line"==n[e].type})),m.width(S).height(D).color(n.map(function(t,e){return t.color||s[e%s.length]}).filter(function(t,e){return!n[e].disabled&&1==n[e].yAxis&&"bar"==n[e].type})),v.width(S).height(D).color(n.map(function(t,e){return t.color||s[e%s.length]}).filter(function(t,e){return!n[e].disabled&&2==n[e].yAxis&&"bar"==n[e].type})),y.width(S).height(D).color(n.map(function(t,e){return t.color||s[e%s.length]}).filter(function(t,e){return!n[e].disabled&&1==n[e].yAxis&&"area"==n[e].type})),b.width(S).height(D).color(n.map(function(t,e){return t.color||s[e%s.length]}).filter(function(t,e){return!n[e].disabled&&2==n[e].yAxis&&"area"==n[e].type})),$.attr("transform","translate("+o.left+","+o.top+")");var F=$.select(".lines1Wrap").datum(z),q=$.select(".bars1Wrap").datum(T),H=$.select(".stack1Wrap").datum(L),W=$.select(".lines2Wrap").datum(N),V=$.select(".bars2Wrap").datum(P),B=$.select(".stack2Wrap").datum(E),Y=L.length?L.map(function(t){return t.values}).reduce(function(t,e){return t.map(function(t,n){return{x:t.x,y:t.y+e[n].y}})}).concat([{x:0,y:0}]):[],U=E.length?E.map(function(t){return t.values}).reduce(function(t,e){return t.map(function(t,n){return{x:t.x,y:t.y+e[n].y}})}).concat([{x:0,y:0}]):[];p.domain(r||d3.extent(d3.merge(A).concat(Y),function(t){return t.y})).range([0,D]),h.domain(i||d3.extent(d3.merge(O).concat(U),function(t){return t.y})).range([0,D]),f.yDomain(p.domain()),m.yDomain(p.domain()),y.yDomain(p.domain()),g.yDomain(h.domain()),v.yDomain(h.domain()),b.yDomain(h.domain()),L.length&&d3.transition(H).call(y),E.length&&d3.transition(B).call(b),T.length&&d3.transition(q).call(m),P.length&&d3.transition(V).call(v),z.length&&d3.transition(F).call(f),N.length&&d3.transition(W).call(g),_.ticks(S/100).tickSize(-D,0),$.select(".x.axis").attr("transform","translate(0,"+D+")"),d3.transition($.select(".x.axis")).call(_),w.ticks(D/36).tickSize(-S,0),d3.transition($.select(".y1.axis")).call(w),x.ticks(D/36).tickSize(-S,0),d3.transition($.select(".y2.axis")).call(x),$.select(".y2.axis").style("opacity",O.length?1:0).attr("transform","translate("+e.range()[1]+",0)"),k.dispatch.on("stateChange",function(){t.update()}),C.on("tooltipShow",function(t){c&&j(t,M.parentNode)})}),t}var e,r,i,o={top:30,right:20,bottom:50,left:60},s=d3.scale.category20().range(),a=null,l=null,u=!0,c=!0,d=function(t,e,n){return"<h3>"+t+"</h3><p>"+n+" at "+e+"</p>"},e=d3.scale.linear(),p=d3.scale.linear(),h=d3.scale.linear(),f=n.models.line().yScale(p),g=n.models.line().yScale(h),m=n.models.multiBar().stacked(!1).yScale(p),v=n.models.multiBar().stacked(!1).yScale(h),y=n.models.stackedArea().yScale(p),b=n.models.stackedArea().yScale(h),_=n.models.axis().scale(e).orient("bottom").tickPadding(5),w=n.models.axis().scale(p).orient("left"),x=n.models.axis().scale(h).orient("right"),k=n.models.legend().height(30),C=d3.dispatch("tooltipShow","tooltipHide"),j=function(e,r){var i=e.pos[0]+(r.offsetLeft||0),o=e.pos[1]+(r.offsetTop||0),s=_.tickFormat()(f.x()(e.point,e.pointIndex)),a=(2==e.series.yAxis?x:w).tickFormat()(f.y()(e.point,e.pointIndex)),l=d(e.series.key,s,a,e,t);n.tooltip.show([i,o],l,void 0,void 0,r.offsetParent)};return f.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+o.left,t.pos[1]+o.top],C.tooltipShow(t)}),f.dispatch.on("elementMouseout.tooltip",function(t){C.tooltipHide(t)}),g.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+o.left,t.pos[1]+o.top],C.tooltipShow(t)}),g.dispatch.on("elementMouseout.tooltip",function(t){C.tooltipHide(t)}),m.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+o.left,t.pos[1]+o.top],C.tooltipShow(t)}),m.dispatch.on("elementMouseout.tooltip",function(t){C.tooltipHide(t)}),v.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+o.left,t.pos[1]+o.top],C.tooltipShow(t)}),v.dispatch.on("elementMouseout.tooltip",function(t){C.tooltipHide(t)}),y.dispatch.on("tooltipShow",function(t){return Math.round(100*y.y()(t.point))?(t.pos=[t.pos[0]+o.left,t.pos[1]+o.top],void C.tooltipShow(t)):(setTimeout(function(){d3.selectAll(".point.hover").classed("hover",!1)},0),!1)}),y.dispatch.on("tooltipHide",function(t){C.tooltipHide(t)}),b.dispatch.on("tooltipShow",function(t){return Math.round(100*b.y()(t.point))?(t.pos=[t.pos[0]+o.left,t.pos[1]+o.top],void C.tooltipShow(t)):(setTimeout(function(){d3.selectAll(".point.hover").classed("hover",!1)},0),!1)}),b.dispatch.on("tooltipHide",function(t){C.tooltipHide(t)}),f.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+o.left,t.pos[1]+o.top],C.tooltipShow(t)}),f.dispatch.on("elementMouseout.tooltip",function(t){C.tooltipHide(t)}),g.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+o.left,t.pos[1]+o.top],C.tooltipShow(t)}),g.dispatch.on("elementMouseout.tooltip",function(t){C.tooltipHide(t)}),C.on("tooltipHide",function(){c&&n.tooltip.cleanup()}),t.dispatch=C,t.lines1=f,t.lines2=g,t.bars1=m,t.bars2=v,t.stack1=y,t.stack2=b,t.xAxis=_,t.yAxis1=w,t.yAxis2=x,t.options=n.utils.optionsFunc.bind(t),t.x=function(e){return arguments.length?(getX=e,f.x(e),m.x(e),t):getX},t.y=function(e){return arguments.length?(getY=e,f.y(e),m.y(e),t):getY},t.yDomain1=function(e){return arguments.length?(r=e,t):r},t.yDomain2=function(e){return arguments.length?(i=e,t):i},t.margin=function(e){return arguments.length?(o=e,t):o},t.width=function(e){return arguments.length?(a=e,t):a},t.height=function(e){return arguments.length?(l=e,t):l},t.color=function(e){return arguments.length?(s=e,k.color(e),t):s},t.showLegend=function(e){return arguments.length?(u=e,t):u},t.tooltips=function(e){return arguments.length?(c=e,t):c},t.tooltipContent=function(e){return arguments.length?(d=e,t):d},t},n.models.ohlcBar=function(){"use strict";function t(n){return n.each(function(t){var n=a-s.left-s.right,x=l-s.top-s.bottom,C=d3.select(this);c.domain(e||d3.extent(t[0].values.map(p).concat(y))),c.range(_?i||[.5*n/t[0].values.length,n*(t[0].values.length-.5)/t[0].values.length]:i||[0,n]),d.domain(r||[d3.min(t[0].values.map(v).concat(b)),d3.max(t[0].values.map(m).concat(b))]).range(o||[x,0]),c.domain()[0]===c.domain()[1]&&c.domain(c.domain()[0]?[c.domain()[0]-.01*c.domain()[0],c.domain()[1]+.01*c.domain()[1]]:[-1,1]),d.domain()[0]===d.domain()[1]&&d.domain(d.domain()[0]?[d.domain()[0]+.01*d.domain()[0],d.domain()[1]-.01*d.domain()[1]]:[-1,1]);var j=d3.select(this).selectAll("g.nv-wrap.nv-ohlcBar").data([t[0].values]),M=j.enter().append("g").attr("class","nvd3 nv-wrap nv-ohlcBar"),S=M.append("defs"),D=M.append("g"),z=j.select("g");D.append("g").attr("class","nv-ticks"),j.attr("transform","translate("+s.left+","+s.top+")"),C.on("click",function(t,e){k.chartClick({data:t,index:e,pos:d3.event,id:u})}),S.append("clipPath").attr("id","nv-chart-clip-path-"+u).append("rect"),j.select("#nv-chart-clip-path-"+u+" rect").attr("width",n).attr("height",x),z.attr("clip-path",w?"url(#nv-chart-clip-path-"+u+")":"");var N=j.select(".nv-ticks").selectAll(".nv-tick").data(function(t){return t});N.exit().remove();N.enter().append("path").attr("class",function(t,e,n){return(f(t,e)>g(t,e)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+n+"-"+e}).attr("d",function(e,r){var i=n/t[0].values.length*.9;return"m0,0l0,"+(d(f(e,r))-d(m(e,r)))+"l"+-i/2+",0l"+i/2+",0l0,"+(d(v(e,r))-d(f(e,r)))+"l0,"+(d(g(e,r))-d(v(e,r)))+"l"+i/2+",0l"+-i/2+",0z"}).attr("transform",function(t,e){return"translate("+c(p(t,e))+","+d(m(t,e))+")"}).on("mouseover",function(e,n){d3.select(this).classed("hover",!0),k.elementMouseover({point:e,series:t[0],pos:[c(p(e,n)),d(h(e,n))],pointIndex:n,seriesIndex:0,e:d3.event})}).on("mouseout",function(e,n){d3.select(this).classed("hover",!1),k.elementMouseout({point:e,series:t[0],pointIndex:n,seriesIndex:0,e:d3.event})}).on("click",function(t,e){k.elementClick({value:h(t,e),data:t,index:e,pos:[c(p(t,e)),d(h(t,e))],e:d3.event,id:u}),d3.event.stopPropagation()}).on("dblclick",function(t,e){k.elementDblClick({value:h(t,e),data:t,index:e,pos:[c(p(t,e)),d(h(t,e))],e:d3.event,id:u}),d3.event.stopPropagation()});N.attr("class",function(t,e,n){return(f(t,e)>g(t,e)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+n+"-"+e}),d3.transition(N).attr("transform",function(t,e){return"translate("+c(p(t,e))+","+d(m(t,e))+")"}).attr("d",function(e,r){var i=n/t[0].values.length*.9;return"m0,0l0,"+(d(f(e,r))-d(m(e,r)))+"l"+-i/2+",0l"+i/2+",0l0,"+(d(v(e,r))-d(f(e,r)))+"l0,"+(d(g(e,r))-d(v(e,r)))+"l"+i/2+",0l"+-i/2+",0z"})}),t}var e,r,i,o,s={top:0,right:0,bottom:0,left:0},a=960,l=500,u=Math.floor(1e4*Math.random()),c=d3.scale.linear(),d=d3.scale.linear(),p=function(t){return t.x},h=function(t){return t.y},f=function(t){return t.open},g=function(t){return t.close},m=function(t){return t.high},v=function(t){return t.low},y=[],b=[],_=!1,w=!0,x=n.utils.defaultColor(),k=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");return t.dispatch=k,t.options=n.utils.optionsFunc.bind(t),t.x=function(e){return arguments.length?(p=e,t):p},t.y=function(e){return arguments.length?(h=e,t):h},t.open=function(e){return arguments.length?(f=e,t):f},t.close=function(e){return arguments.length?(g=e,t):g},t.high=function(e){return arguments.length?(m=e,t):m},t.low=function(e){return arguments.length?(v=e,t):v},t.margin=function(e){return arguments.length?(s.top="undefined"!=typeof e.top?e.top:s.top,s.right="undefined"!=typeof e.right?e.right:s.right,s.bottom="undefined"!=typeof e.bottom?e.bottom:s.bottom,s.left="undefined"!=typeof e.left?e.left:s.left,t):s},t.width=function(e){return arguments.length?(a=e,t):a},t.height=function(e){return arguments.length?(l=e,t):l},t.xScale=function(e){return arguments.length?(c=e,t):c},t.yScale=function(e){return arguments.length?(d=e,t):d},t.xDomain=function(n){return arguments.length?(e=n,t):e},t.yDomain=function(e){return arguments.length?(r=e,t):r},t.xRange=function(e){return arguments.length?(i=e,t):i},t.yRange=function(e){return arguments.length?(o=e,t):o},t.forceX=function(e){return arguments.length?(y=e,t):y},t.forceY=function(e){return arguments.length?(b=e,t):b},t.padData=function(e){return arguments.length?(_=e,t):_},t.clipEdge=function(e){return arguments.length?(w=e,t):w},t.color=function(e){return arguments.length?(x=n.utils.getColor(e),t):x},t.id=function(e){return arguments.length?(u=e,t):u},t},n.models.pie=function(){"use strict";function t(n){return n.each(function(t){function n(t){t.endAngle=isNaN(t.endAngle)?0:t.endAngle,t.startAngle=isNaN(t.startAngle)?0:t.startAngle,m||(t.innerRadius=0);var e=d3.interpolate(this._current,t);return this._current=e(0),function(t){return z(e(t))}}var a=r-e.left-e.right,c=i-e.top-e.bottom,x=Math.min(a,c)/2,k=x-x/5,C=d3.select(this),j=C.selectAll(".nv-wrap.nv-pie").data(t),M=j.enter().append("g").attr("class","nvd3 nv-wrap nv-pie nv-chart-"+l),S=M.append("g"),D=j.select("g");S.append("g").attr("class","nv-pie"),j.attr("transform","translate("+e.left+","+e.top+")"),D.select(".nv-pie").attr("transform","translate("+a/2+","+c/2+")"),C.on("click",function(t,e){w.chartClick({data:t,index:e,pos:d3.event,id:l})});var z=d3.svg.arc().outerRadius(k);y&&z.startAngle(y),b&&z.endAngle(b),m&&z.innerRadius(x*_);var N=d3.layout.pie().sort(null).value(function(t){return t.disabled?0:s(t)}),T=j.select(".nv-pie").selectAll(".nv-slice").data(N);T.exit().remove();var P=T.enter().append("g").attr("class","nv-slice").on("mouseover",function(t,e){d3.select(this).classed("hover",!0),w.elementMouseover({label:o(t.data),value:s(t.data),point:t.data,pointIndex:e,pos:[d3.event.pageX,d3.event.pageY],id:l})}).on("mouseout",function(t,e){d3.select(this).classed("hover",!1),w.elementMouseout({label:o(t.data),value:s(t.data),point:t.data,index:e,id:l})}).on("click",function(t,e){w.elementClick({label:o(t.data),value:s(t.data),point:t.data,index:e,pos:d3.event,id:l}),d3.event.stopPropagation()}).on("dblclick",function(t,e){w.elementDblClick({label:o(t.data),value:s(t.data),point:t.data,index:e,pos:d3.event,id:l}),d3.event.stopPropagation()});T.attr("fill",function(t,e){return u(t,e)}).attr("stroke",function(t,e){return u(t,e)});P.append("path").each(function(t){this._current=t});if(d3.transition(T.select("path")).attr("d",z).attrTween("d",n),d){var L=d3.svg.arc().innerRadius(0);p&&(L=z),h&&(L=d3.svg.arc().outerRadius(z.outerRadius())),P.append("g").classed("nv-label",!0).each(function(t){var e=d3.select(this);e.attr("transform",function(t){if(v){t.outerRadius=k+10,t.innerRadius=k+15;var e=(t.startAngle+t.endAngle)/2*(180/Math.PI);return(t.startAngle+t.endAngle)/2<Math.PI?e-=90:e+=90,"translate("+L.centroid(t)+") rotate("+e+")"}return t.outerRadius=x+10,t.innerRadius=x+15,"translate("+L.centroid(t)+")"}),e.append("rect").style("stroke","#fff").style("fill","#fff").attr("rx",3).attr("ry",3),e.append("text").style("text-anchor",v?(t.startAngle+t.endAngle)/2<Math.PI?"start":"end":"middle").style("fill","#000")}),T.select(".nv-label").transition().attr("transform",function(t){if(v){t.outerRadius=k+10,t.innerRadius=k+15;var e=(t.startAngle+t.endAngle)/2*(180/Math.PI);return(t.startAngle+t.endAngle)/2<Math.PI?e-=90:e+=90,"translate("+L.centroid(t)+") rotate("+e+")"}return t.outerRadius=x+10,t.innerRadius=x+15,"translate("+L.centroid(t)+")"}),T.each(function(t){var e=d3.select(this);e.select(".nv-label text").style("text-anchor",v?(t.startAngle+t.endAngle)/2<Math.PI?"start":"end":"middle").text(function(t){var e=(t.endAngle-t.startAngle)/(2*Math.PI),n={key:o(t.data),value:s(t.data),percent:d3.format("%")(e)};return t.value&&e>g?n[f]:""});var n=e.select("text").node().getBBox();e.select(".nv-label rect").attr("width",n.width+10).attr("height",n.height+10).attr("transform",function(){return"translate("+[n.x-5,n.y-5]+")"})})}}),t}var e={top:0,right:0,bottom:0,left:0},r=500,i=500,o=function(t){return t.x},s=function(t){return t.y},a=function(t){return t.description},l=Math.floor(1e4*Math.random()),u=n.utils.defaultColor(),c=d3.format(",.2f"),d=!0,p=!0,h=!1,f="key",g=.02,m=!1,v=!1,y=!1,b=!1,_=.5,w=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");return t.dispatch=w,t.options=n.utils.optionsFunc.bind(t),t.margin=function(n){return arguments.length?(e.top="undefined"!=typeof n.top?n.top:e.top,e.right="undefined"!=typeof n.right?n.right:e.right,e.bottom="undefined"!=typeof n.bottom?n.bottom:e.bottom,e.left="undefined"!=typeof n.left?n.left:e.left,t):e},t.width=function(e){return arguments.length?(r=e,t):r},t.height=function(e){return arguments.length?(i=e,t):i},t.values=function(){return n.log("pie.values() is no longer supported."),t},t.x=function(e){return arguments.length?(o=e,t):o},t.y=function(e){return arguments.length?(s=d3.functor(e),t):s},t.description=function(e){return arguments.length?(a=e,t):a},t.showLabels=function(e){return arguments.length?(d=e,t):d},t.labelSunbeamLayout=function(e){return arguments.length?(v=e,t):v},t.donutLabelsOutside=function(e){return arguments.length?(h=e,t):h},t.pieLabelsOutside=function(e){return arguments.length?(p=e,t):p},t.labelType=function(e){return arguments.length?(f=e,f=f||"key",t):f},t.donut=function(e){return arguments.length?(m=e,t):m},t.donutRatio=function(e){return arguments.length?(_=e,t):_},t.startAngle=function(e){return arguments.length?(y=e,t):y},t.endAngle=function(e){return arguments.length?(b=e,t):b},t.id=function(e){return arguments.length?(l=e,t):l},t.color=function(e){return arguments.length?(u=n.utils.getColor(e),t):u},t.valueFormat=function(e){return arguments.length?(c=e,t):c},t.labelThreshold=function(e){return arguments.length?(g=e,t):g
},t},n.models.pieChart=function(){"use strict";function t(n){return n.each(function(n){var l=d3.select(this),u=(o||parseInt(l.style("width"))||960)-i.left-i.right,c=(s||parseInt(l.style("height"))||400)-i.top-i.bottom;if(t.update=function(){l.transition().call(t)},t.container=this,d.disabled=n.map(function(t){return!!t.disabled}),!p){var g;p={};for(g in d)p[g]=d[g]instanceof Array?d[g].slice(0):d[g]}if(!n||!n.length){var m=l.selectAll(".nv-noData").data([h]);return m.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),m.attr("x",i.left+u/2).attr("y",i.top+c/2).text(function(t){return t}),t}l.selectAll(".nv-noData").remove();var v=l.selectAll("g.nv-wrap.nv-pieChart").data([n]),y=v.enter().append("g").attr("class","nvd3 nv-wrap nv-pieChart").append("g"),b=v.select("g");y.append("g").attr("class","nv-pieWrap"),y.append("g").attr("class","nv-legendWrap"),a&&(r.width(u).key(e.x()),v.select(".nv-legendWrap").datum(n).call(r),i.top!=r.height()&&(i.top=r.height(),c=(s||parseInt(l.style("height"))||400)-i.top-i.bottom),v.select(".nv-legendWrap").attr("transform","translate(0,"+-i.top+")")),v.attr("transform","translate("+i.left+","+i.top+")"),e.width(u).height(c);var _=b.select(".nv-pieWrap").datum([n]);d3.transition(_).call(e),r.dispatch.on("stateChange",function(e){d=e,f.stateChange(d),t.update()}),e.dispatch.on("elementMouseout.tooltip",function(t){f.tooltipHide(t)}),f.on("changeState",function(e){"undefined"!=typeof e.disabled&&(n.forEach(function(t,n){t.disabled=e.disabled[n]}),d.disabled=e.disabled),t.update()})}),t}var e=n.models.pie(),r=n.models.legend(),i={top:30,right:20,bottom:20,left:20},o=null,s=null,a=!0,l=n.utils.defaultColor(),u=!0,c=function(t,e){return"<h3>"+t+"</h3><p>"+e+"</p>"},d={},p=null,h="No Data Available.",f=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),g=function(r,i){var o=e.description()(r.point)||e.x()(r.point),s=r.pos[0]+(i&&i.offsetLeft||0),a=r.pos[1]+(i&&i.offsetTop||0),l=e.valueFormat()(e.y()(r.point)),u=c(o,l,r,t);n.tooltip.show([s,a],u,r.value<0?"n":"s",null,i)};return e.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+i.left,t.pos[1]+i.top],f.tooltipShow(t)}),f.on("tooltipShow",function(t){u&&g(t)}),f.on("tooltipHide",function(){u&&n.tooltip.cleanup()}),t.legend=r,t.dispatch=f,t.pie=e,d3.rebind(t,e,"valueFormat","values","x","y","description","id","showLabels","donutLabelsOutside","pieLabelsOutside","labelType","donut","donutRatio","labelThreshold"),t.options=n.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(i.top="undefined"!=typeof e.top?e.top:i.top,i.right="undefined"!=typeof e.right?e.right:i.right,i.bottom="undefined"!=typeof e.bottom?e.bottom:i.bottom,i.left="undefined"!=typeof e.left?e.left:i.left,t):i},t.width=function(e){return arguments.length?(o=e,t):o},t.height=function(e){return arguments.length?(s=e,t):s},t.color=function(i){return arguments.length?(l=n.utils.getColor(i),r.color(l),e.color(l),t):l},t.showLegend=function(e){return arguments.length?(a=e,t):a},t.tooltips=function(e){return arguments.length?(u=e,t):u},t.tooltipContent=function(e){return arguments.length?(c=e,t):c},t.state=function(e){return arguments.length?(d=e,t):d},t.defaultState=function(e){return arguments.length?(p=e,t):p},t.noData=function(e){return arguments.length?(h=e,t):h},t},n.models.scatter=function(){"use strict";function t(F){return F.each(function(t){function F(){if(!x)return!1;var e=d3.merge(t.map(function(t,e){return t.values.map(function(t,n){var r=f(t,n),i=g(t,n);return[d(r)+1e-7*Math.random(),p(i)+1e-7*Math.random(),e,n,t]}).filter(function(t,e){return C(t[4],e)})}));if(R===!0){if(D){var n=B.select("defs").selectAll(".nv-point-clips").data([c]).enter();n.append("clipPath").attr("class","nv-point-clips").attr("id","nv-points-clip-"+c);var r=B.select("#nv-points-clip-"+c).selectAll("circle").data(e);r.enter().append("circle").attr("r",z),r.exit().remove(),r.attr("cx",function(t){return t[0]}).attr("cy",function(t){return t[1]}),B.select(".nv-point-paths").attr("clip-path","url(#nv-points-clip-"+c+")")}e.length&&(e.push([d.range()[0]-20,p.range()[0]-20,null,null]),e.push([d.range()[1]+20,p.range()[1]+20,null,null]),e.push([d.range()[0]-20,p.range()[0]+20,null,null]),e.push([d.range()[1]+20,p.range()[1]-20,null,null]));var i=d3.geom.polygon([[-10,-10],[-10,l+10],[a+10,l+10],[a+10,-10]]),o=d3.geom.voronoi(e).map(function(t,n){return{data:i.clip(t),series:e[n][2],point:e[n][3]}}),u=B.select(".nv-point-paths").selectAll("path").data(o);u.enter().append("path").attr("class",function(t,e){return"nv-path-"+e}),u.exit().remove(),u.attr("d",function(t){return 0===t.data.length?"M 0 0":"M"+t.data.join("L")+"Z"});var h=function(e,n){if($)return 0;var r=t[e.series];if("undefined"!=typeof r){var i=r.values[e.point];n({point:i,series:r,pos:[d(f(i,e.point))+s.left,p(g(i,e.point))+s.top],seriesIndex:e.series,pointIndex:e.point})}};u.on("click",function(t){h(t,I.elementClick)}).on("mouseover",function(t){h(t,I.elementMouseover)}).on("mouseout",function(t){h(t,I.elementMouseout)})}else B.select(".nv-groups").selectAll(".nv-group").selectAll(".nv-point").on("click",function(e,n){if($||!t[e.series])return 0;var r=t[e.series],i=r.values[n];I.elementClick({point:i,series:r,pos:[d(f(i,n))+s.left,p(g(i,n))+s.top],seriesIndex:e.series,pointIndex:n})}).on("mouseover",function(e,n){if($||!t[e.series])return 0;var r=t[e.series],i=r.values[n];I.elementMouseover({point:i,series:r,pos:[d(f(i,n))+s.left,p(g(i,n))+s.top],seriesIndex:e.series,pointIndex:n})}).on("mouseout",function(e,n){if($||!t[e.series])return 0;var r=t[e.series],i=r.values[n];I.elementMouseout({point:i,series:r,seriesIndex:e.series,pointIndex:n})});$=!1}var q=a-s.left-s.right,H=l-s.top-s.bottom,W=d3.select(this);t.forEach(function(t,e){t.values.forEach(function(t){t.series=e})});var V=N&&T&&E?[]:d3.merge(t.map(function(t){return t.values.map(function(t,e){return{x:f(t,e),y:g(t,e),size:m(t,e)}})}));d.domain(N||d3.extent(V.map(function(t){return t.x}).concat(b))),d.range(j&&t[0]?P||[(q*M+q)/(2*t[0].values.length),q-q*(1+M)/(2*t[0].values.length)]:P||[0,q]),p.domain(T||d3.extent(V.map(function(t){return t.y}).concat(_))).range(L||[H,0]),h.domain(E||d3.extent(V.map(function(t){return t.size}).concat(w))).range(A||[16,256]),(d.domain()[0]===d.domain()[1]||p.domain()[0]===p.domain()[1])&&(O=!0),d.domain()[0]===d.domain()[1]&&d.domain(d.domain()[0]?[d.domain()[0]-.01*d.domain()[0],d.domain()[1]+.01*d.domain()[1]]:[-1,1]),p.domain()[0]===p.domain()[1]&&p.domain(p.domain()[0]?[p.domain()[0]-.01*p.domain()[0],p.domain()[1]+.01*p.domain()[1]]:[-1,1]),isNaN(d.domain()[0])&&d.domain([-1,1]),isNaN(p.domain()[0])&&p.domain([-1,1]),e=e||d,r=r||p,i=i||h;var B=W.selectAll("g.nv-wrap.nv-scatter").data([t]),Y=B.enter().append("g").attr("class","nvd3 nv-wrap nv-scatter nv-chart-"+c+(O?" nv-single-point":"")),U=Y.append("defs"),Q=Y.append("g"),G=B.select("g");Q.append("g").attr("class","nv-groups"),Q.append("g").attr("class","nv-point-paths"),B.attr("transform","translate("+s.left+","+s.top+")"),U.append("clipPath").attr("id","nv-edge-clip-"+c).append("rect"),B.select("#nv-edge-clip-"+c+" rect").attr("width",q).attr("height",H),G.attr("clip-path",S?"url(#nv-edge-clip-"+c+")":""),$=!0;var X=B.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t){return t.key});if(X.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),X.exit().remove(),X.attr("class",function(t,e){return"nv-group nv-series-"+e}).classed("hover",function(t){return t.hover}),X.transition().style("fill",function(t,e){return u(t,e)}).style("stroke",function(t,e){return u(t,e)}).style("stroke-opacity",1).style("fill-opacity",.5),y){var Z=X.selectAll("circle.nv-point").data(function(t){return t.values},k);Z.enter().append("circle").style("fill",function(t){return t.color}).style("stroke",function(t){return t.color}).attr("cx",function(t,r){return n.utils.NaNtoZero(e(f(t,r)))}).attr("cy",function(t,e){return n.utils.NaNtoZero(r(g(t,e)))}).attr("r",function(t,e){return Math.sqrt(h(m(t,e))/Math.PI)}),Z.exit().remove(),X.exit().selectAll("path.nv-point").transition().attr("cx",function(t,e){return n.utils.NaNtoZero(d(f(t,e)))}).attr("cy",function(t,e){return n.utils.NaNtoZero(p(g(t,e)))}).remove(),Z.each(function(t,e){d3.select(this).classed("nv-point",!0).classed("nv-point-"+e,!0).classed("hover",!1)}),Z.transition().attr("cx",function(t,e){return n.utils.NaNtoZero(d(f(t,e)))}).attr("cy",function(t,e){return n.utils.NaNtoZero(p(g(t,e)))}).attr("r",function(t,e){return Math.sqrt(h(m(t,e))/Math.PI)})}else{var Z=X.selectAll("path.nv-point").data(function(t){return t.values});Z.enter().append("path").style("fill",function(t){return t.color}).style("stroke",function(t){return t.color}).attr("transform",function(t,n){return"translate("+e(f(t,n))+","+r(g(t,n))+")"}).attr("d",d3.svg.symbol().type(v).size(function(t,e){return h(m(t,e))})),Z.exit().remove(),X.exit().selectAll("path.nv-point").transition().attr("transform",function(t,e){return"translate("+d(f(t,e))+","+p(g(t,e))+")"}).remove(),Z.each(function(t,e){d3.select(this).classed("nv-point",!0).classed("nv-point-"+e,!0).classed("hover",!1)}),Z.transition().attr("transform",function(t,e){return"translate("+d(f(t,e))+","+p(g(t,e))+")"}).attr("d",d3.svg.symbol().type(v).size(function(t,e){return h(m(t,e))}))}clearTimeout(o),o=setTimeout(F,300),e=d.copy(),r=p.copy(),i=h.copy()}),t}var e,r,i,o,s={top:0,right:0,bottom:0,left:0},a=960,l=500,u=n.utils.defaultColor(),c=Math.floor(1e5*Math.random()),d=d3.scale.linear(),p=d3.scale.linear(),h=d3.scale.linear(),f=function(t){return t.x},g=function(t){return t.y},m=function(t){return t.size||1},v=function(t){return t.shape||"circle"},y=!0,b=[],_=[],w=[],x=!0,k=null,C=function(t){return!t.notActive},j=!1,M=.1,S=!1,D=!0,z=function(){return 25},N=null,T=null,P=null,L=null,E=null,A=null,O=!1,I=d3.dispatch("elementClick","elementMouseover","elementMouseout"),R=!0,$=!1;return t.clearHighlights=function(){d3.selectAll(".nv-chart-"+c+" .nv-point.hover").classed("hover",!1)},t.highlightPoint=function(t,e,n){d3.select(".nv-chart-"+c+" .nv-series-"+t+" .nv-point-"+e).classed("hover",n)},I.on("elementMouseover.point",function(e){x&&t.highlightPoint(e.seriesIndex,e.pointIndex,!0)}),I.on("elementMouseout.point",function(e){x&&t.highlightPoint(e.seriesIndex,e.pointIndex,!1)}),t.dispatch=I,t.options=n.utils.optionsFunc.bind(t),t.x=function(e){return arguments.length?(f=d3.functor(e),t):f},t.y=function(e){return arguments.length?(g=d3.functor(e),t):g},t.size=function(e){return arguments.length?(m=d3.functor(e),t):m},t.margin=function(e){return arguments.length?(s.top="undefined"!=typeof e.top?e.top:s.top,s.right="undefined"!=typeof e.right?e.right:s.right,s.bottom="undefined"!=typeof e.bottom?e.bottom:s.bottom,s.left="undefined"!=typeof e.left?e.left:s.left,t):s},t.width=function(e){return arguments.length?(a=e,t):a},t.height=function(e){return arguments.length?(l=e,t):l},t.xScale=function(e){return arguments.length?(d=e,t):d},t.yScale=function(e){return arguments.length?(p=e,t):p},t.zScale=function(e){return arguments.length?(h=e,t):h},t.xDomain=function(e){return arguments.length?(N=e,t):N},t.yDomain=function(e){return arguments.length?(T=e,t):T},t.sizeDomain=function(e){return arguments.length?(E=e,t):E},t.xRange=function(e){return arguments.length?(P=e,t):P},t.yRange=function(e){return arguments.length?(L=e,t):L},t.sizeRange=function(e){return arguments.length?(A=e,t):A},t.forceX=function(e){return arguments.length?(b=e,t):b},t.forceY=function(e){return arguments.length?(_=e,t):_},t.forceSize=function(e){return arguments.length?(w=e,t):w},t.interactive=function(e){return arguments.length?(x=e,t):x},t.pointKey=function(e){return arguments.length?(k=e,t):k},t.pointActive=function(e){return arguments.length?(C=e,t):C},t.padData=function(e){return arguments.length?(j=e,t):j},t.padDataOuter=function(e){return arguments.length?(M=e,t):M},t.clipEdge=function(e){return arguments.length?(S=e,t):S},t.clipVoronoi=function(e){return arguments.length?(D=e,t):D},t.useVoronoi=function(e){return arguments.length?(R=e,R===!1&&(D=!1),t):R},t.clipRadius=function(e){return arguments.length?(z=e,t):z},t.color=function(e){return arguments.length?(u=n.utils.getColor(e),t):u},t.shape=function(e){return arguments.length?(v=e,t):v},t.onlyCircles=function(e){return arguments.length?(y=e,t):y},t.id=function(e){return arguments.length?(c=e,t):c},t.singlePoint=function(e){return arguments.length?(O=e,t):O},t},n.models.scatterChart=function(){"use strict";function t(n){return n.each(function(n){function S(){if(j)return Y.select(".nv-point-paths").style("pointer-events","all"),!1;Y.select(".nv-point-paths").style("pointer-events","none");var t=d3.mouse(this);h.distortion(C).focus(t[0]),f.distortion(C).focus(t[1]),Y.select(".nv-scatterWrap").call(e),_&&Y.select(".nv-x.nv-axis").call(r),w&&Y.select(".nv-y.nv-axis").call(i),Y.select(".nv-distributionX").datum(n.filter(function(t){return!t.disabled})).call(a),Y.select(".nv-distributionY").datum(n.filter(function(t){return!t.disabled})).call(l)}var D=d3.select(this),z=this,$=(c||parseInt(D.style("width"))||960)-u.left-u.right,F=(d||parseInt(D.style("height"))||400)-u.top-u.bottom;if(t.update=function(){D.transition().duration(E).call(t)},t.container=this,N.disabled=n.map(function(t){return!!t.disabled}),!T){var q;T={};for(q in N)T[q]=N[q]instanceof Array?N[q].slice(0):N[q]}if(!(n&&n.length&&n.filter(function(t){return t.values.length}).length)){var H=D.selectAll(".nv-noData").data([L]);return H.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),H.attr("x",u.left+$/2).attr("y",u.top+F/2).text(function(t){return t}),t}D.selectAll(".nv-noData").remove(),A=A||h,O=O||f;var W=D.selectAll("g.nv-wrap.nv-scatterChart").data([n]),V=W.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+e.id()),B=V.append("g"),Y=W.select("g");if(B.append("rect").attr("class","nvd3 nv-background"),B.append("g").attr("class","nv-x nv-axis"),B.append("g").attr("class","nv-y nv-axis"),B.append("g").attr("class","nv-scatterWrap"),B.append("g").attr("class","nv-distWrap"),B.append("g").attr("class","nv-legendWrap"),B.append("g").attr("class","nv-controlsWrap"),b){var U=k?$/2:$;o.width(U),W.select(".nv-legendWrap").datum(n).call(o),u.top!=o.height()&&(u.top=o.height(),F=(d||parseInt(D.style("height"))||400)-u.top-u.bottom),W.select(".nv-legendWrap").attr("transform","translate("+($-U)+","+-u.top+")")}if(k&&(s.width(180).color(["#444"]),Y.select(".nv-controlsWrap").datum(R).attr("transform","translate(0,"+-u.top+")").call(s)),W.attr("transform","translate("+u.left+","+u.top+")"),x&&Y.select(".nv-y.nv-axis").attr("transform","translate("+$+",0)"),e.width($).height(F).color(n.map(function(t,e){return t.color||p(t,e)}).filter(function(t,e){return!n[e].disabled})),0!==g&&e.xDomain(null),0!==m&&e.yDomain(null),W.select(".nv-scatterWrap").datum(n.filter(function(t){return!t.disabled})).call(e),0!==g){var Q=h.domain()[1]-h.domain()[0];e.xDomain([h.domain()[0]-g*Q,h.domain()[1]+g*Q])}if(0!==m){var G=f.domain()[1]-f.domain()[0];e.yDomain([f.domain()[0]-m*G,f.domain()[1]+m*G])}(0!==m||0!==g)&&W.select(".nv-scatterWrap").datum(n.filter(function(t){return!t.disabled})).call(e),_&&(r.scale(h).ticks(r.ticks()&&r.ticks().length?r.ticks():$/100).tickSize(-F,0),Y.select(".nv-x.nv-axis").attr("transform","translate(0,"+f.range()[0]+")").call(r)),w&&(i.scale(f).ticks(i.ticks()&&i.ticks().length?i.ticks():F/36).tickSize(-$,0),Y.select(".nv-y.nv-axis").call(i)),v&&(a.getData(e.x()).scale(h).width($).color(n.map(function(t,e){return t.color||p(t,e)}).filter(function(t,e){return!n[e].disabled})),B.select(".nv-distWrap").append("g").attr("class","nv-distributionX"),Y.select(".nv-distributionX").attr("transform","translate(0,"+f.range()[0]+")").datum(n.filter(function(t){return!t.disabled})).call(a)),y&&(l.getData(e.y()).scale(f).width(F).color(n.map(function(t,e){return t.color||p(t,e)}).filter(function(t,e){return!n[e].disabled})),B.select(".nv-distWrap").append("g").attr("class","nv-distributionY"),Y.select(".nv-distributionY").attr("transform","translate("+(x?$:-l.size())+",0)").datum(n.filter(function(t){return!t.disabled})).call(l)),d3.fisheye&&(Y.select(".nv-background").attr("width",$).attr("height",F),Y.select(".nv-background").on("mousemove",S),Y.select(".nv-background").on("click",function(){j=!j}),e.dispatch.on("elementClick.freezeFisheye",function(){j=!j})),s.dispatch.on("legendClick",function(n){n.disabled=!n.disabled,C=n.disabled?0:2.5,Y.select(".nv-background").style("pointer-events",n.disabled?"none":"all"),Y.select(".nv-point-paths").style("pointer-events",n.disabled?"all":"none"),n.disabled?(h.distortion(C).focus(0),f.distortion(C).focus(0),Y.select(".nv-scatterWrap").call(e),Y.select(".nv-x.nv-axis").call(r),Y.select(".nv-y.nv-axis").call(i)):j=!1,t.update()}),o.dispatch.on("stateChange",function(e){N.disabled=e.disabled,P.stateChange(N),t.update()}),e.dispatch.on("elementMouseover.tooltip",function(t){d3.select(".nv-chart-"+e.id()+" .nv-series-"+t.seriesIndex+" .nv-distx-"+t.pointIndex).attr("y1",function(){return t.pos[1]-F}),d3.select(".nv-chart-"+e.id()+" .nv-series-"+t.seriesIndex+" .nv-disty-"+t.pointIndex).attr("x2",t.pos[0]+a.size()),t.pos=[t.pos[0]+u.left,t.pos[1]+u.top],P.tooltipShow(t)}),P.on("tooltipShow",function(t){M&&I(t,z.parentNode)}),P.on("changeState",function(e){"undefined"!=typeof e.disabled&&(n.forEach(function(t,n){t.disabled=e.disabled[n]}),N.disabled=e.disabled),t.update()}),A=h.copy(),O=f.copy()}),t}var e=n.models.scatter(),r=n.models.axis(),i=n.models.axis(),o=n.models.legend(),s=n.models.legend(),a=n.models.distribution(),l=n.models.distribution(),u={top:30,right:20,bottom:50,left:75},c=null,d=null,p=n.utils.defaultColor(),h=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):e.xScale(),f=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):e.yScale(),g=0,m=0,v=!1,y=!1,b=!0,_=!0,w=!0,x=!1,k=!!d3.fisheye,C=0,j=!1,M=!0,S=function(t,e){return"<strong>"+e+"</strong>"},D=function(t,e,n){return"<strong>"+n+"</strong>"},z=null,N={},T=null,P=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),L="No Data Available.",E=250;e.xScale(h).yScale(f),r.orient("bottom").tickPadding(10),i.orient(x?"right":"left").tickPadding(10),a.axis("x"),l.axis("y"),s.updateState(!1);var A,O,I=function(o,s){var a=o.pos[0]+(s.offsetLeft||0),l=o.pos[1]+(s.offsetTop||0),c=o.pos[0]+(s.offsetLeft||0),d=f.range()[0]+u.top+(s.offsetTop||0),p=h.range()[0]+u.left+(s.offsetLeft||0),g=o.pos[1]+(s.offsetTop||0),m=r.tickFormat()(e.x()(o.point,o.pointIndex)),v=i.tickFormat()(e.y()(o.point,o.pointIndex));null!=S&&n.tooltip.show([c,d],S(o.series.key,m,v,o,t),"n",1,s,"x-nvtooltip"),null!=D&&n.tooltip.show([p,g],D(o.series.key,m,v,o,t),"e",1,s,"y-nvtooltip"),null!=z&&n.tooltip.show([a,l],z(o.series.key,m,v,o,t),o.value<0?"n":"s",null,s)},R=[{key:"Magnify",disabled:!0}];return e.dispatch.on("elementMouseout.tooltip",function(t){P.tooltipHide(t),d3.select(".nv-chart-"+e.id()+" .nv-series-"+t.seriesIndex+" .nv-distx-"+t.pointIndex).attr("y1",0),d3.select(".nv-chart-"+e.id()+" .nv-series-"+t.seriesIndex+" .nv-disty-"+t.pointIndex).attr("x2",l.size())}),P.on("tooltipHide",function(){M&&n.tooltip.cleanup()}),t.dispatch=P,t.scatter=e,t.legend=o,t.controls=s,t.xAxis=r,t.yAxis=i,t.distX=a,t.distY=l,d3.rebind(t,e,"id","interactive","pointActive","x","y","shape","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","sizeRange","forceX","forceY","forceSize","clipVoronoi","clipRadius","useVoronoi"),t.options=n.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(u.top="undefined"!=typeof e.top?e.top:u.top,u.right="undefined"!=typeof e.right?e.right:u.right,u.bottom="undefined"!=typeof e.bottom?e.bottom:u.bottom,u.left="undefined"!=typeof e.left?e.left:u.left,t):u},t.width=function(e){return arguments.length?(c=e,t):c},t.height=function(e){return arguments.length?(d=e,t):d},t.color=function(e){return arguments.length?(p=n.utils.getColor(e),o.color(p),a.color(p),l.color(p),t):p},t.showDistX=function(e){return arguments.length?(v=e,t):v},t.showDistY=function(e){return arguments.length?(y=e,t):y},t.showControls=function(e){return arguments.length?(k=e,t):k},t.showLegend=function(e){return arguments.length?(b=e,t):b},t.showXAxis=function(e){return arguments.length?(_=e,t):_},t.showYAxis=function(e){return arguments.length?(w=e,t):w},t.rightAlignYAxis=function(e){return arguments.length?(x=e,i.orient(e?"right":"left"),t):x},t.fisheye=function(e){return arguments.length?(C=e,t):C},t.xPadding=function(e){return arguments.length?(g=e,t):g},t.yPadding=function(e){return arguments.length?(m=e,t):m},t.tooltips=function(e){return arguments.length?(M=e,t):M},t.tooltipContent=function(e){return arguments.length?(z=e,t):z},t.tooltipXContent=function(e){return arguments.length?(S=e,t):S},t.tooltipYContent=function(e){return arguments.length?(D=e,t):D},t.state=function(e){return arguments.length?(N=e,t):N},t.defaultState=function(e){return arguments.length?(T=e,t):T},t.noData=function(e){return arguments.length?(L=e,t):L},t.transitionDuration=function(e){return arguments.length?(E=e,t):E},t},n.models.scatterPlusLineChart=function(){"use strict";function t(n){return n.each(function(n){function j(){if(k)return V.select(".nv-point-paths").style("pointer-events","all"),!1;V.select(".nv-point-paths").style("pointer-events","none");var t=d3.mouse(this);h.distortion(x).focus(t[0]),f.distortion(x).focus(t[1]),V.select(".nv-scatterWrap").datum(n.filter(function(t){return!t.disabled})).call(e),y&&V.select(".nv-x.nv-axis").call(r),b&&V.select(".nv-y.nv-axis").call(i),V.select(".nv-distributionX").datum(n.filter(function(t){return!t.disabled})).call(a),V.select(".nv-distributionY").datum(n.filter(function(t){return!t.disabled})).call(l)}var M=d3.select(this),S=this,I=(c||parseInt(M.style("width"))||960)-u.left-u.right,R=(d||parseInt(M.style("height"))||400)-u.top-u.bottom;if(t.update=function(){M.transition().duration(P).call(t)},t.container=this,D.disabled=n.map(function(t){return!!t.disabled}),!z){var $;z={};for($ in D)z[$]=D[$]instanceof Array?D[$].slice(0):D[$]}if(!(n&&n.length&&n.filter(function(t){return t.values.length}).length)){var F=M.selectAll(".nv-noData").data([T]);return F.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),F.attr("x",u.left+I/2).attr("y",u.top+R/2).text(function(t){return t}),t}M.selectAll(".nv-noData").remove(),h=e.xScale(),f=e.yScale(),L=L||h,E=E||f;var q=M.selectAll("g.nv-wrap.nv-scatterChart").data([n]),H=q.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+e.id()),W=H.append("g"),V=q.select("g");W.append("rect").attr("class","nvd3 nv-background").style("pointer-events","none"),W.append("g").attr("class","nv-x nv-axis"),W.append("g").attr("class","nv-y nv-axis"),W.append("g").attr("class","nv-scatterWrap"),W.append("g").attr("class","nv-regressionLinesWrap"),W.append("g").attr("class","nv-distWrap"),W.append("g").attr("class","nv-legendWrap"),W.append("g").attr("class","nv-controlsWrap"),q.attr("transform","translate("+u.left+","+u.top+")"),_&&V.select(".nv-y.nv-axis").attr("transform","translate("+I+",0)"),v&&(o.width(I/2),q.select(".nv-legendWrap").datum(n).call(o),u.top!=o.height()&&(u.top=o.height(),R=(d||parseInt(M.style("height"))||400)-u.top-u.bottom),q.select(".nv-legendWrap").attr("transform","translate("+I/2+","+-u.top+")")),w&&(s.width(180).color(["#444"]),V.select(".nv-controlsWrap").datum(O).attr("transform","translate(0,"+-u.top+")").call(s)),e.width(I).height(R).color(n.map(function(t,e){return t.color||p(t,e)}).filter(function(t,e){return!n[e].disabled})),q.select(".nv-scatterWrap").datum(n.filter(function(t){return!t.disabled})).call(e),q.select(".nv-regressionLinesWrap").attr("clip-path","url(#nv-edge-clip-"+e.id()+")");var B=q.select(".nv-regressionLinesWrap").selectAll(".nv-regLines").data(function(t){return t});B.enter().append("g").attr("class","nv-regLines");{var Y=B.selectAll(".nv-regLine").data(function(t){return[t]});Y.enter().append("line").attr("class","nv-regLine").style("stroke-opacity",0)}Y.transition().attr("x1",h.range()[0]).attr("x2",h.range()[1]).attr("y1",function(t){return f(h.domain()[0]*t.slope+t.intercept)}).attr("y2",function(t){return f(h.domain()[1]*t.slope+t.intercept)}).style("stroke",function(t,e,n){return p(t,n)}).style("stroke-opacity",function(t){return t.disabled||"undefined"==typeof t.slope||"undefined"==typeof t.intercept?0:1}),y&&(r.scale(h).ticks(r.ticks()?r.ticks():I/100).tickSize(-R,0),V.select(".nv-x.nv-axis").attr("transform","translate(0,"+f.range()[0]+")").call(r)),b&&(i.scale(f).ticks(i.ticks()?i.ticks():R/36).tickSize(-I,0),V.select(".nv-y.nv-axis").call(i)),g&&(a.getData(e.x()).scale(h).width(I).color(n.map(function(t,e){return t.color||p(t,e)}).filter(function(t,e){return!n[e].disabled})),W.select(".nv-distWrap").append("g").attr("class","nv-distributionX"),V.select(".nv-distributionX").attr("transform","translate(0,"+f.range()[0]+")").datum(n.filter(function(t){return!t.disabled})).call(a)),m&&(l.getData(e.y()).scale(f).width(R).color(n.map(function(t,e){return t.color||p(t,e)}).filter(function(t,e){return!n[e].disabled})),W.select(".nv-distWrap").append("g").attr("class","nv-distributionY"),V.select(".nv-distributionY").attr("transform","translate("+(_?I:-l.size())+",0)").datum(n.filter(function(t){return!t.disabled})).call(l)),d3.fisheye&&(V.select(".nv-background").attr("width",I).attr("height",R),V.select(".nv-background").on("mousemove",j),V.select(".nv-background").on("click",function(){k=!k}),e.dispatch.on("elementClick.freezeFisheye",function(){k=!k})),s.dispatch.on("legendClick",function(n){n.disabled=!n.disabled,x=n.disabled?0:2.5,V.select(".nv-background").style("pointer-events",n.disabled?"none":"all"),V.select(".nv-point-paths").style("pointer-events",n.disabled?"all":"none"),n.disabled?(h.distortion(x).focus(0),f.distortion(x).focus(0),V.select(".nv-scatterWrap").call(e),V.select(".nv-x.nv-axis").call(r),V.select(".nv-y.nv-axis").call(i)):k=!1,t.update()}),o.dispatch.on("stateChange",function(e){D=e,N.stateChange(D),t.update()}),e.dispatch.on("elementMouseover.tooltip",function(t){d3.select(".nv-chart-"+e.id()+" .nv-series-"+t.seriesIndex+" .nv-distx-"+t.pointIndex).attr("y1",t.pos[1]-R),d3.select(".nv-chart-"+e.id()+" .nv-series-"+t.seriesIndex+" .nv-disty-"+t.pointIndex).attr("x2",t.pos[0]+a.size()),t.pos=[t.pos[0]+u.left,t.pos[1]+u.top],N.tooltipShow(t)}),N.on("tooltipShow",function(t){C&&A(t,S.parentNode)}),N.on("changeState",function(e){"undefined"!=typeof e.disabled&&(n.forEach(function(t,n){t.disabled=e.disabled[n]}),D.disabled=e.disabled),t.update()}),L=h.copy(),E=f.copy()}),t}var e=n.models.scatter(),r=n.models.axis(),i=n.models.axis(),o=n.models.legend(),s=n.models.legend(),a=n.models.distribution(),l=n.models.distribution(),u={top:30,right:20,bottom:50,left:75},c=null,d=null,p=n.utils.defaultColor(),h=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):e.xScale(),f=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):e.yScale(),g=!1,m=!1,v=!0,y=!0,b=!0,_=!1,w=!!d3.fisheye,x=0,k=!1,C=!0,j=function(t,e){return"<strong>"+e+"</strong>"},M=function(t,e,n){return"<strong>"+n+"</strong>"},S=function(t,e,n,r){return"<h3>"+t+"</h3><p>"+r+"</p>"},D={},z=null,N=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),T="No Data Available.",P=250;e.xScale(h).yScale(f),r.orient("bottom").tickPadding(10),i.orient(_?"right":"left").tickPadding(10),a.axis("x"),l.axis("y"),s.updateState(!1);var L,E,A=function(o,s){var a=o.pos[0]+(s.offsetLeft||0),l=o.pos[1]+(s.offsetTop||0),c=o.pos[0]+(s.offsetLeft||0),d=f.range()[0]+u.top+(s.offsetTop||0),p=h.range()[0]+u.left+(s.offsetLeft||0),g=o.pos[1]+(s.offsetTop||0),m=r.tickFormat()(e.x()(o.point,o.pointIndex)),v=i.tickFormat()(e.y()(o.point,o.pointIndex));null!=j&&n.tooltip.show([c,d],j(o.series.key,m,v,o,t),"n",1,s,"x-nvtooltip"),null!=M&&n.tooltip.show([p,g],M(o.series.key,m,v,o,t),"e",1,s,"y-nvtooltip"),null!=S&&n.tooltip.show([a,l],S(o.series.key,m,v,o.point.tooltip,o,t),o.value<0?"n":"s",null,s)},O=[{key:"Magnify",disabled:!0}];return e.dispatch.on("elementMouseout.tooltip",function(t){N.tooltipHide(t),d3.select(".nv-chart-"+e.id()+" .nv-series-"+t.seriesIndex+" .nv-distx-"+t.pointIndex).attr("y1",0),d3.select(".nv-chart-"+e.id()+" .nv-series-"+t.seriesIndex+" .nv-disty-"+t.pointIndex).attr("x2",l.size())}),N.on("tooltipHide",function(){C&&n.tooltip.cleanup()}),t.dispatch=N,t.scatter=e,t.legend=o,t.controls=s,t.xAxis=r,t.yAxis=i,t.distX=a,t.distY=l,d3.rebind(t,e,"id","interactive","pointActive","x","y","shape","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","sizeRange","forceX","forceY","forceSize","clipVoronoi","clipRadius","useVoronoi"),t.options=n.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(u.top="undefined"!=typeof e.top?e.top:u.top,u.right="undefined"!=typeof e.right?e.right:u.right,u.bottom="undefined"!=typeof e.bottom?e.bottom:u.bottom,u.left="undefined"!=typeof e.left?e.left:u.left,t):u},t.width=function(e){return arguments.length?(c=e,t):c},t.height=function(e){return arguments.length?(d=e,t):d},t.color=function(e){return arguments.length?(p=n.utils.getColor(e),o.color(p),a.color(p),l.color(p),t):p},t.showDistX=function(e){return arguments.length?(g=e,t):g},t.showDistY=function(e){return arguments.length?(m=e,t):m},t.showControls=function(e){return arguments.length?(w=e,t):w},t.showLegend=function(e){return arguments.length?(v=e,t):v},t.showXAxis=function(e){return arguments.length?(y=e,t):y},t.showYAxis=function(e){return arguments.length?(b=e,t):b},t.rightAlignYAxis=function(e){return arguments.length?(_=e,i.orient(e?"right":"left"),t):_},t.fisheye=function(e){return arguments.length?(x=e,t):x},t.tooltips=function(e){return arguments.length?(C=e,t):C},t.tooltipContent=function(e){return arguments.length?(S=e,t):S},t.tooltipXContent=function(e){return arguments.length?(j=e,t):j},t.tooltipYContent=function(e){return arguments.length?(M=e,t):M},t.state=function(e){return arguments.length?(D=e,t):D},t.defaultState=function(e){return arguments.length?(z=e,t):z},t.noData=function(e){return arguments.length?(T=e,t):T},t.transitionDuration=function(e){return arguments.length?(P=e,t):P},t},n.models.sparkline=function(){"use strict";function t(n){return n.each(function(t){var n=a-s.left-s.right,u=l-s.top-s.bottom,g=d3.select(this);c.domain(e||d3.extent(t,p)).range(i||[0,n]),d.domain(r||d3.extent(t,h)).range(o||[u,0]);{var m=g.selectAll("g.nv-wrap.nv-sparkline").data([t]),v=m.enter().append("g").attr("class","nvd3 nv-wrap nv-sparkline");v.append("g"),m.select("g")}m.attr("transform","translate("+s.left+","+s.top+")");var y=m.selectAll("path").data(function(t){return[t]});y.enter().append("path"),y.exit().remove(),y.style("stroke",function(t,e){return t.color||f(t,e)}).attr("d",d3.svg.line().x(function(t,e){return c(p(t,e))}).y(function(t,e){return d(h(t,e))}));var b=m.selectAll("circle.nv-point").data(function(t){function e(e){if(-1!=e){var n=t[e];return n.pointIndex=e,n}return null}var n=t.map(function(t,e){return h(t,e)}),r=e(n.lastIndexOf(d.domain()[1])),i=e(n.indexOf(d.domain()[0])),o=e(n.length-1);return[i,r,o].filter(function(t){return null!=t})});b.enter().append("circle"),b.exit().remove(),b.attr("cx",function(t){return c(p(t,t.pointIndex))}).attr("cy",function(t){return d(h(t,t.pointIndex))}).attr("r",2).attr("class",function(t){return p(t,t.pointIndex)==c.domain()[1]?"nv-point nv-currentValue":h(t,t.pointIndex)==d.domain()[0]?"nv-point nv-minValue":"nv-point nv-maxValue"})}),t}var e,r,i,o,s={top:2,right:0,bottom:2,left:0},a=400,l=32,u=!0,c=d3.scale.linear(),d=d3.scale.linear(),p=function(t){return t.x},h=function(t){return t.y},f=n.utils.getColor(["#000"]);return t.options=n.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(s.top="undefined"!=typeof e.top?e.top:s.top,s.right="undefined"!=typeof e.right?e.right:s.right,s.bottom="undefined"!=typeof e.bottom?e.bottom:s.bottom,s.left="undefined"!=typeof e.left?e.left:s.left,t):s
},t.width=function(e){return arguments.length?(a=e,t):a},t.height=function(e){return arguments.length?(l=e,t):l},t.x=function(e){return arguments.length?(p=d3.functor(e),t):p},t.y=function(e){return arguments.length?(h=d3.functor(e),t):h},t.xScale=function(e){return arguments.length?(c=e,t):c},t.yScale=function(e){return arguments.length?(d=e,t):d},t.xDomain=function(n){return arguments.length?(e=n,t):e},t.yDomain=function(e){return arguments.length?(r=e,t):r},t.xRange=function(e){return arguments.length?(i=e,t):i},t.yRange=function(e){return arguments.length?(o=e,t):o},t.animate=function(e){return arguments.length?(u=e,t):u},t.color=function(e){return arguments.length?(f=n.utils.getColor(e),t):f},t},n.models.sparklinePlus=function(){"use strict";function t(n){return n.each(function(p){function m(){if(!u){var t=M.selectAll(".nv-hoverValue").data(l),n=t.enter().append("g").attr("class","nv-hoverValue").style("stroke-opacity",0).style("fill-opacity",0);t.exit().transition().duration(250).style("stroke-opacity",0).style("fill-opacity",0).remove(),t.attr("transform",function(t){return"translate("+e(i.x()(p[t],t))+",0)"}).transition().duration(250).style("stroke-opacity",1).style("fill-opacity",1),l.length&&(n.append("line").attr("x1",0).attr("y1",-o.top).attr("x2",0).attr("y2",_),n.append("text").attr("class","nv-xValue").attr("x",-6).attr("y",-o.top).attr("text-anchor","end").attr("dy",".9em"),M.select(".nv-hoverValue .nv-xValue").text(c(i.x()(p[l[0]],l[0]))),n.append("text").attr("class","nv-yValue").attr("x",6).attr("y",-o.top).attr("text-anchor","start").attr("dy",".9em"),M.select(".nv-hoverValue .nv-yValue").text(d(i.y()(p[l[0]],l[0]))))}}function v(){function t(t,e){for(var n=Math.abs(i.x()(t[0],0)-e),r=0,o=0;o<t.length;o++)Math.abs(i.x()(t[o],o)-e)<n&&(n=Math.abs(i.x()(t[o],o)-e),r=o);return r}if(!u){var n=d3.mouse(this)[0]-o.left;l=[t(p,Math.round(e.invert(n)))],m()}}var y=d3.select(this),b=(s||parseInt(y.style("width"))||960)-o.left-o.right,_=(a||parseInt(y.style("height"))||400)-o.top-o.bottom;if(t.update=function(){t(n)},t.container=this,!p||!p.length){var w=y.selectAll(".nv-noData").data([g]);return w.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),w.attr("x",o.left+b/2).attr("y",o.top+_/2).text(function(t){return t}),t}y.selectAll(".nv-noData").remove();var x=i.y()(p[p.length-1],p.length-1);e=i.xScale(),r=i.yScale();var k=y.selectAll("g.nv-wrap.nv-sparklineplus").data([p]),C=k.enter().append("g").attr("class","nvd3 nv-wrap nv-sparklineplus"),j=C.append("g"),M=k.select("g");j.append("g").attr("class","nv-sparklineWrap"),j.append("g").attr("class","nv-valueWrap"),j.append("g").attr("class","nv-hoverArea"),k.attr("transform","translate("+o.left+","+o.top+")");var S=M.select(".nv-sparklineWrap");i.width(b).height(_),S.call(i);var D=M.select(".nv-valueWrap"),z=D.selectAll(".nv-currentValue").data([x]);z.enter().append("text").attr("class","nv-currentValue").attr("dx",f?-8:8).attr("dy",".9em").style("text-anchor",f?"end":"start"),z.attr("x",b+(f?o.right:0)).attr("y",h?function(t){return r(t)}:0).style("fill",i.color()(p[p.length-1],p.length-1)).text(d(x)),j.select(".nv-hoverArea").append("rect").on("mousemove",v).on("click",function(){u=!u}).on("mouseout",function(){l=[],m()}),M.select(".nv-hoverArea rect").attr("transform",function(){return"translate("+-o.left+","+-o.top+")"}).attr("width",b+o.left+o.right).attr("height",_+o.top)}),t}var e,r,i=n.models.sparkline(),o={top:15,right:100,bottom:10,left:50},s=null,a=null,l=[],u=!1,c=d3.format(",r"),d=d3.format(",.2f"),p=!0,h=!0,f=!1,g="No Data Available.";return t.sparkline=i,d3.rebind(t,i,"x","y","xScale","yScale","color"),t.options=n.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(o.top="undefined"!=typeof e.top?e.top:o.top,o.right="undefined"!=typeof e.right?e.right:o.right,o.bottom="undefined"!=typeof e.bottom?e.bottom:o.bottom,o.left="undefined"!=typeof e.left?e.left:o.left,t):o},t.width=function(e){return arguments.length?(s=e,t):s},t.height=function(e){return arguments.length?(a=e,t):a},t.xTickFormat=function(e){return arguments.length?(c=e,t):c},t.yTickFormat=function(e){return arguments.length?(d=e,t):d},t.showValue=function(e){return arguments.length?(p=e,t):p},t.alignValue=function(e){return arguments.length?(h=e,t):h},t.rightAlignValue=function(e){return arguments.length?(f=e,t):f},t.noData=function(e){return arguments.length?(g=e,t):g},t},n.models.stackedArea=function(){"use strict";function t(n){return n.each(function(n){var d=o-i.left-i.right,y=s-i.top-i.bottom,b=d3.select(this);e=m.xScale(),r=m.yScale();var _=n;n.forEach(function(t,e){t.seriesIndex=e,t.values=t.values.map(function(t,n){return t.index=n,t.seriesIndex=e,t})});var w=n.filter(function(t){return!t.disabled});n=d3.layout.stack().order(h).offset(p).values(function(t){return t.values}).x(u).y(c).out(function(t,e,n){var r=0===c(t)?0:n;t.display={y:r,y0:e}})(w);var x=b.selectAll("g.nv-wrap.nv-stackedarea").data([n]),k=x.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedarea"),C=k.append("defs"),j=k.append("g"),M=x.select("g");j.append("g").attr("class","nv-areaWrap"),j.append("g").attr("class","nv-scatterWrap"),x.attr("transform","translate("+i.left+","+i.top+")"),m.width(d).height(y).x(u).y(function(t){return t.display.y+t.display.y0}).forceY([0]).color(n.map(function(t){return t.color||a(t,t.seriesIndex)}));var S=M.select(".nv-scatterWrap").datum(n);S.call(m),C.append("clipPath").attr("id","nv-edge-clip-"+l).append("rect"),x.select("#nv-edge-clip-"+l+" rect").attr("width",d).attr("height",y),M.attr("clip-path",g?"url(#nv-edge-clip-"+l+")":"");var D=d3.svg.area().x(function(t,n){return e(u(t,n))}).y0(function(t){return r(t.display.y0)}).y1(function(t){return r(t.display.y+t.display.y0)}).interpolate(f),z=d3.svg.area().x(function(t,n){return e(u(t,n))}).y0(function(t){return r(t.display.y0)}).y1(function(t){return r(t.display.y0)}),N=M.select(".nv-areaWrap").selectAll("path.nv-area").data(function(t){return t});N.enter().append("path").attr("class",function(t,e){return"nv-area nv-area-"+e}).attr("d",function(t){return z(t.values,t.seriesIndex)}).on("mouseover",function(t,e){d3.select(this).classed("hover",!0),v.areaMouseover({point:t,series:t.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:e})}).on("mouseout",function(t,e){d3.select(this).classed("hover",!1),v.areaMouseout({point:t,series:t.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:e})}).on("click",function(t,e){d3.select(this).classed("hover",!1),v.areaClick({point:t,series:t.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:e})}),N.exit().transition().attr("d",function(t,e){return z(t.values,e)}).remove(),N.style("fill",function(t){return t.color||a(t,t.seriesIndex)}).style("stroke",function(t){return t.color||a(t,t.seriesIndex)}),N.transition().attr("d",function(t,e){return D(t.values,e)}),m.dispatch.on("elementMouseover.area",function(t){M.select(".nv-chart-"+l+" .nv-area-"+t.seriesIndex).classed("hover",!0)}),m.dispatch.on("elementMouseout.area",function(t){M.select(".nv-chart-"+l+" .nv-area-"+t.seriesIndex).classed("hover",!1)}),t.d3_stackedOffset_stackPercent=function(t){var e,n,r,i=t.length,o=t[0].length,s=1/i,a=[];for(n=0;o>n;++n){for(e=0,r=0;e<_.length;e++)r+=c(_[e].values[n]);if(r)for(e=0;i>e;e++)t[e][n][1]/=r;else for(e=0;i>e;e++)t[e][n][1]=s}for(n=0;o>n;++n)a[n]=0;return a}}),t}var e,r,i={top:0,right:0,bottom:0,left:0},o=960,s=500,a=n.utils.defaultColor(),l=Math.floor(1e5*Math.random()),u=function(t){return t.x},c=function(t){return t.y},d="stack",p="zero",h="default",f="linear",g=!1,m=n.models.scatter(),v=d3.dispatch("tooltipShow","tooltipHide","areaClick","areaMouseover","areaMouseout");return m.size(2.2).sizeDomain([2.2,2.2]),m.dispatch.on("elementClick.area",function(t){v.areaClick(t)}),m.dispatch.on("elementMouseover.tooltip",function(t){t.pos=[t.pos[0]+i.left,t.pos[1]+i.top],v.tooltipShow(t)}),m.dispatch.on("elementMouseout.tooltip",function(t){v.tooltipHide(t)}),t.dispatch=v,t.scatter=m,d3.rebind(t,m,"interactive","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","forceX","forceY","forceSize","clipVoronoi","useVoronoi","clipRadius","highlightPoint","clearHighlights"),t.options=n.utils.optionsFunc.bind(t),t.x=function(e){return arguments.length?(u=d3.functor(e),t):u},t.y=function(e){return arguments.length?(c=d3.functor(e),t):c},t.margin=function(e){return arguments.length?(i.top="undefined"!=typeof e.top?e.top:i.top,i.right="undefined"!=typeof e.right?e.right:i.right,i.bottom="undefined"!=typeof e.bottom?e.bottom:i.bottom,i.left="undefined"!=typeof e.left?e.left:i.left,t):i},t.width=function(e){return arguments.length?(o=e,t):o},t.height=function(e){return arguments.length?(s=e,t):s},t.clipEdge=function(e){return arguments.length?(g=e,t):g},t.color=function(e){return arguments.length?(a=n.utils.getColor(e),t):a},t.offset=function(e){return arguments.length?(p=e,t):p},t.order=function(e){return arguments.length?(h=e,t):h},t.style=function(e){if(!arguments.length)return d;switch(d=e){case"stack":t.offset("zero"),t.order("default");break;case"stream":t.offset("wiggle"),t.order("inside-out");break;case"stream-center":t.offset("silhouette"),t.order("inside-out");break;case"expand":t.offset("expand"),t.order("default");break;case"stack_percent":t.offset(t.d3_stackedOffset_stackPercent),t.order("default")}return t},t.interpolate=function(e){return arguments.length?(f=e,t):f},t},n.models.stackedAreaChart=function(){"use strict";function t(w){return w.each(function(w){var P=d3.select(this),L=this,E=(d||parseInt(P.style("width"))||960)-c.left-c.right,A=(p||parseInt(P.style("height"))||400)-c.top-c.bottom;if(t.update=function(){P.transition().duration(N).call(t)},t.container=this,k.disabled=w.map(function(t){return!!t.disabled}),!C){var O;C={};for(O in k)C[O]=k[O]instanceof Array?k[O].slice(0):k[O]}if(!(w&&w.length&&w.filter(function(t){return t.values.length}).length)){var I=P.selectAll(".nv-noData").data([j]);return I.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),I.attr("x",c.left+E/2).attr("y",c.top+A/2).text(function(t){return t}),t}P.selectAll(".nv-noData").remove(),e=i.xScale(),r=i.yScale();var R=P.selectAll("g.nv-wrap.nv-stackedAreaChart").data([w]),$=R.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedAreaChart").append("g"),F=R.select("g");if($.append("rect").style("opacity",0),$.append("g").attr("class","nv-x nv-axis"),$.append("g").attr("class","nv-y nv-axis"),$.append("g").attr("class","nv-stackedWrap"),$.append("g").attr("class","nv-legendWrap"),$.append("g").attr("class","nv-controlsWrap"),$.append("g").attr("class","nv-interactive"),F.select("rect").attr("width",E).attr("height",A),g){var q=f?E-S:E;a.width(q),F.select(".nv-legendWrap").datum(w).call(a),c.top!=a.height()&&(c.top=a.height(),A=(p||parseInt(P.style("height"))||400)-c.top-c.bottom),F.select(".nv-legendWrap").attr("transform","translate("+(E-q)+","+-c.top+")")}if(f){var H=[{key:z.stacked||"Stacked",metaKey:"Stacked",disabled:"stack"!=i.style(),style:"stack"},{key:z.stream||"Stream",metaKey:"Stream",disabled:"stream"!=i.style(),style:"stream"},{key:z.expanded||"Expanded",metaKey:"Expanded",disabled:"expand"!=i.style(),style:"expand"},{key:z.stack_percent||"Stack %",metaKey:"Stack_Percent",disabled:"stack_percent"!=i.style(),style:"stack_percent"}];S=D.length/3*260,H=H.filter(function(t){return-1!==D.indexOf(t.metaKey)}),l.width(S).color(["#444","#444","#444"]),F.select(".nv-controlsWrap").datum(H).call(l),c.top!=Math.max(l.height(),a.height())&&(c.top=Math.max(l.height(),a.height()),A=(p||parseInt(P.style("height"))||400)-c.top-c.bottom),F.select(".nv-controlsWrap").attr("transform","translate(0,"+-c.top+")")}R.attr("transform","translate("+c.left+","+c.top+")"),y&&F.select(".nv-y.nv-axis").attr("transform","translate("+E+",0)"),b&&(u.width(E).height(A).margin({left:c.left,top:c.top}).svgContainer(P).xScale(e),R.select(".nv-interactive").call(u)),i.width(E).height(A);var W=F.select(".nv-stackedWrap").datum(w);W.transition().call(i),m&&(o.scale(e).ticks(E/100).tickSize(-A,0),F.select(".nv-x.nv-axis").attr("transform","translate(0,"+A+")"),F.select(".nv-x.nv-axis").transition().duration(0).call(o)),v&&(s.scale(r).ticks("wiggle"==i.offset()?0:A/36).tickSize(-E,0).setTickFormat("expand"==i.style()||"stack_percent"==i.style()?d3.format("%"):x),F.select(".nv-y.nv-axis").transition().duration(0).call(s)),i.dispatch.on("areaClick.toggle",function(e){w.forEach(1===w.filter(function(t){return!t.disabled}).length?function(t){t.disabled=!1}:function(t,n){t.disabled=n!=e.seriesIndex}),k.disabled=w.map(function(t){return!!t.disabled}),M.stateChange(k),t.update()}),a.dispatch.on("stateChange",function(e){k.disabled=e.disabled,M.stateChange(k),t.update()}),l.dispatch.on("legendClick",function(e){e.disabled&&(H=H.map(function(t){return t.disabled=!0,t}),e.disabled=!1,i.style(e.style),k.style=i.style(),M.stateChange(k),t.update())}),u.dispatch.on("elementMousemove",function(e){i.clearHighlights();var r,a,l,d=[];if(w.filter(function(t,e){return t.seriesIndex=e,!t.disabled}).forEach(function(o,s){a=n.interactiveBisect(o.values,e.pointXValue,t.x()),i.highlightPoint(s,a,!0);var u=o.values[a];if("undefined"!=typeof u){"undefined"==typeof r&&(r=u),"undefined"==typeof l&&(l=t.xScale()(t.x()(u,a)));var c="expand"==i.style()?u.display.y:t.y()(u,a);d.push({key:o.key,value:c,color:h(o,o.seriesIndex),stackedValue:u.display})}}),d.reverse(),d.length>2){var p=t.yScale().invert(e.mouseY),f=null;d.forEach(function(t,e){return p>=t.stackedValue.y0&&p<=t.stackedValue.y0+t.stackedValue.y?void(f=e):void 0}),null!=f&&(d[f].highlight=!0)}var g=o.tickFormat()(t.x()(r,a)),m="expand"==i.style()?function(t){return d3.format(".1%")(t)}:function(t){return s.tickFormat()(t)};u.tooltip.position({left:l+c.left,top:e.mouseY+c.top}).chartContainer(L.parentNode).enabled(_).valueFormatter(m).data({value:g,series:d})(),u.renderGuideLine(l)}),u.dispatch.on("elementMouseout",function(){M.tooltipHide(),i.clearHighlights()}),M.on("tooltipShow",function(t){_&&T(t,L.parentNode)}),M.on("changeState",function(e){"undefined"!=typeof e.disabled&&(w.forEach(function(t,n){t.disabled=e.disabled[n]}),k.disabled=e.disabled),"undefined"!=typeof e.style&&i.style(e.style),t.update()})}),t}var e,r,i=n.models.stackedArea(),o=n.models.axis(),s=n.models.axis(),a=n.models.legend(),l=n.models.legend(),u=n.interactiveGuideline(),c={top:30,right:25,bottom:50,left:60},d=null,p=null,h=n.utils.defaultColor(),f=!0,g=!0,m=!0,v=!0,y=!1,b=!1,_=!0,w=function(t,e,n){return"<h3>"+t+"</h3><p>"+n+" on "+e+"</p>"},x=d3.format(",.2f"),k={style:i.style()},C=null,j="No Data Available.",M=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),S=250,D=["Stacked","Stream","Expanded"],z={},N=250;o.orient("bottom").tickPadding(7),s.orient(y?"right":"left"),l.updateState(!1);var T=function(e,r){var a=e.pos[0]+(r.offsetLeft||0),l=e.pos[1]+(r.offsetTop||0),u=o.tickFormat()(i.x()(e.point,e.pointIndex)),c=s.tickFormat()(i.y()(e.point,e.pointIndex)),d=w(e.series.key,u,c,e,t);n.tooltip.show([a,l],d,e.value<0?"n":"s",null,r)};return i.dispatch.on("tooltipShow",function(t){t.pos=[t.pos[0]+c.left,t.pos[1]+c.top],M.tooltipShow(t)}),i.dispatch.on("tooltipHide",function(t){M.tooltipHide(t)}),M.on("tooltipHide",function(){_&&n.tooltip.cleanup()}),t.dispatch=M,t.stacked=i,t.legend=a,t.controls=l,t.xAxis=o,t.yAxis=s,t.interactiveLayer=u,d3.rebind(t,i,"x","y","size","xScale","yScale","xDomain","yDomain","xRange","yRange","sizeDomain","interactive","useVoronoi","offset","order","style","clipEdge","forceX","forceY","forceSize","interpolate"),t.options=n.utils.optionsFunc.bind(t),t.margin=function(e){return arguments.length?(c.top="undefined"!=typeof e.top?e.top:c.top,c.right="undefined"!=typeof e.right?e.right:c.right,c.bottom="undefined"!=typeof e.bottom?e.bottom:c.bottom,c.left="undefined"!=typeof e.left?e.left:c.left,t):c},t.width=function(e){return arguments.length?(d=e,t):d},t.height=function(e){return arguments.length?(p=e,t):p},t.color=function(e){return arguments.length?(h=n.utils.getColor(e),a.color(h),i.color(h),t):h},t.showControls=function(e){return arguments.length?(f=e,t):f},t.showLegend=function(e){return arguments.length?(g=e,t):g},t.showXAxis=function(e){return arguments.length?(m=e,t):m},t.showYAxis=function(e){return arguments.length?(v=e,t):v},t.rightAlignYAxis=function(e){return arguments.length?(y=e,s.orient(e?"right":"left"),t):y},t.useInteractiveGuideline=function(e){return arguments.length?(b=e,e===!0&&(t.interactive(!1),t.useVoronoi(!1)),t):b},t.tooltip=function(e){return arguments.length?(w=e,t):w},t.tooltips=function(e){return arguments.length?(_=e,t):_},t.tooltipContent=function(e){return arguments.length?(w=e,t):w},t.state=function(e){return arguments.length?(k=e,t):k},t.defaultState=function(e){return arguments.length?(C=e,t):C},t.noData=function(e){return arguments.length?(j=e,t):j},t.transitionDuration=function(e){return arguments.length?(N=e,t):N},t.controlsData=function(e){return arguments.length?(D=e,t):D},t.controlLabels=function(e){return arguments.length?"object"!=typeof e?z:(z=e,t):z},s.setTickFormat=s.tickFormat,s.tickFormat=function(t){return arguments.length?(x=t,s):x},t}}(),define("nvd3",["d3"],function(t){return function(){var e;return e||t.nv}}(this)),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function r(){this.constructor=t}for(var i in e)n.call(e,i)&&(t[i]=e[i]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},n={}.hasOwnProperty;define("views/reporting/dashboard/counts_chart",["require","j!reporting/dashboard/counts_chart","b","nvd3","underscore"],function(n){var r,i,o,s,a,l;return s=n("j!reporting/dashboard/counts_chart"),r=n("b"),a=n("nvd3"),o=n("underscore"),l=function(t,e,n,r){return["<h3>"+t+"</h3>","<dl>","<dt>Range</dt>","<dd>",moment(r.point.start_time).zone(0).format("MMM D HH:mm")," - ",moment(r.point.end_time).zone(0).format("MMM D HH:mm"),"</dd>","<dt>Count</dt>","<dd>"+n+"</dd>","</dl>"].join("\n")},i=function(n){function r(){return this.onPointClick=t(this.onPointClick,this),r.__super__.constructor.apply(this,arguments)}return e(r,n),r.prototype.template=s,r.prototype.events={"click .legend span":"onLegendClick"},r.prototype.initialize=function(){return this.data=[]},r.prototype.afterRender=function(){return a.addGraph(function(t){return function(){return t.data=[],t.chart=a.models.lineChart().options({x:function(t){return moment(t.start_time).zone(t.start_time).unix()},y:function(t){return t.runcount},showLegend:!1,showXAxis:!0,showYAxis:!0,transitionDuration:250,color:t.options.colors,tooltipContent:l}),t.chart.xAxis.options({axisLabel:"Time",tickFormat:function(t){return moment.unix(t).zone(0).format("MMM D HH:mm")},scale:d3.scale.ordinal(),showMaxMin:!1}),t.chart.yAxis.options({axisLabel:"Counts",axisLabelDistance:35,tickFormat:d3.format(","),showMaxMin:!1}),d3.select(t.$(".counts-chart svg").get(0)).datum(t.data).call(t.chart),a.utils.windowResize(t.chart.update),t.chart.lines.dispatch.on("elementClick.point",t.onPointClick),t.chart}}(this))},r.prototype.formatData=function(t){var e,n;return e=[],t&&(n=["success","failure","aborted"],e=d3.nest().key(function(t){return t.status}).sortKeys(function(t,e){return n.indexOf(t)-n.indexOf(e)}).entries(t)),e},r.prototype.setData=function(t){var e,n;return this.clearOldData(t),e=this.data,n=this.formatData(t),e.length=0,Array.prototype.push.apply(e,n),this.chart?(this.chart.yDomain(this.getYDomain(t)),this.chart.update()):void 0},r.prototype.clearOldData=function(t){return 0===t.length?d3.select(this.$(".counts-chart svg").get(0)).html(""):void 0},r.prototype.getYDomain=function(t){return[0,d3.max(t,function(t){return 1.1*t.runcount})]},r.prototype.onLegendClick=function(t){var e,n,r,i,s;return n=this.$(".legend > span"),e=$(t.currentTarget),e.toggleClass("disabled"),r=this.$(".legend .disabled").map(function(t,e){return $.trim($(e).text())}).get(),r.length===n.length?(n.removeClass("disabled"),o(this.data).forEach(function(t){return t.disabled=!1})):o(this.data).forEach(function(t){return t.disabled=o(r).contains(t.key)}),i=o(this.data).reject(function(t){return t.disabled}),s=[],o(i).forEach(function(t){return s=s.concat(t.values)}),this.chart.yDomain(this.getYDomain(s)),this.chart.update()},r.prototype.onPointClick=function(t){return this.trigger("pointSelected",t.point)},r}(r.Layout)})}.call(this),function(){define("utils/dash_query",["require","jquery","underscore"],function(t){var e,n,r;return e=t("jquery"),r=t("underscore"),n=function(){function t(t){this.baseUrl=t}return t.prototype.query=function(t){return e.ajax({url:this.baseUrl+"/runs_query",dataType:"json",data:t}).then(function(t){return t})},t.prototype.getDashCountsData=function(t,n){return e.when(this.getCountsData(t,n)).then(function(t){return t})},t.prototype.getDashDurationsData=function(t,n){return e.when(this.getDurationsData(t,n)).then(function(t){return t})},t.prototype.getGranularity=function(t,e){var n;return n="hour",e-t>86400&&(n="day"),e-t>2592e3&&(n="week"),n},t.prototype.getCountsData=function(t,e){var n,i,o;return n=this.getGranularity(t,e),o={dashboard:!0,startTime:t,endTime:e,granularity:n},i=function(t){var e,i,o,s,a,l,u;if(e="YYYY-MM-DD[T]HH:mm:ss[Z]",o=[],l=["success","failure","aborted"],i={},u=moment(t.start_bucket).zone(0),a=moment(t.end_bucket).zone(0),s=function(t,e){return{runcount:0,start_time:e,status:t}},r(t.run_counts).isEmpty())return o;for(;u.isBefore(a)||u.isSame(a);)i[u.zone(0).format(e)]=[],u=u.zone(0).add(n,1);return r(t.run_counts).forEach(function(t){return i[t.start_time].push(t)}),r(i).forEach(function(t,e){return r(l).forEach(function(i){var a;return a=r(t).findWhere({status:i})||s(i,e),a.end_time=moment(e).zone(0).add(n,1),o.push(a)})}),o},this.query(o).then(function(t){return i(t)},function(){return[]})},t.prototype.getDurationsData=function(t,e){var n,r;return n=this.getGranularity(t,e),r={bucketing:"duration",dashboard:!0,startTime:t,endTime:e,granularity:n},this.query(r).then(function(t){return t.run_durations},function(){return[]})},t}()})}.call(this),!function(t){var e=function(e,n,r){var i,o="object"==typeof n;this.startDate=moment().startOf("day"),this.endDate=moment().startOf("day"),this.minDate=!1,this.maxDate=!1,this.dateLimit=!1,this.showDropdowns=!1,this.showWeekNumbers=!1,this.timePicker=!1,this.timePickerIncrement=30,this.timePicker12Hour=!0,this.ranges={},this.opens="right",this.buttonClasses=["btn","btn-small"],this.applyClass="btn-success",this.cancelClass="btn-default",this.format="MM/DD/YYYY",this.separator=" - ",this.locale={applyLabel:"Apply",cancelLabel:"Cancel",fromLabel:"From",toLabel:"To",weekLabel:"W",customRangeLabel:"Custom Range",daysOfWeek:moment()._lang._weekdaysMin.slice(),monthNames:moment()._lang._monthsShort.slice(),firstDay:0},this.cb=function(){},this.parentEl="body",this.element=t(e),this.element.hasClass("pull-right")&&(this.opens="left"),this.element.is("input")?this.element.on({click:t.proxy(this.show,this),focus:t.proxy(this.show,this)}):this.element.on("click",t.proxy(this.show,this)),i=this.locale,o&&("object"==typeof n.locale&&t.each(i,function(t,e){i[t]=n.locale[t]||e}),n.applyClass&&(this.applyClass=n.applyClass),n.cancelClass&&(this.cancelClass=n.cancelClass));var s='<div class="daterangepicker dropdown-menu"><div class="calendar left"></div><div class="calendar right"></div><div class="ranges"><div class="range_inputs"><div class="daterangepicker_start_input" style="float: left"><label for="daterangepicker_start">'+this.locale.fromLabel+'</label><input class="input-mini" type="text" name="daterangepicker_start" value="" disabled="disabled" /></div><div class="daterangepicker_end_input" style="float: left; padding-left: 11px"><label for="daterangepicker_end">'+this.locale.toLabel+'</label><input class="input-mini" type="text" name="daterangepicker_end" value="" disabled="disabled" /></div><button class="'+this.applyClass+' applyBtn" disabled="disabled">'+this.locale.applyLabel+'</button>&nbsp;<button class="'+this.cancelClass+' cancelBtn">'+this.locale.cancelLabel+"</button></div></div></div>";if(this.parentEl=o&&n.parentEl&&t(n.parentEl)||t(this.parentEl),this.container=t(s).appendTo(this.parentEl),o){if("string"==typeof n.format&&(this.format=n.format),"string"==typeof n.separator&&(this.separator=n.separator),"string"==typeof n.startDate&&(this.startDate=moment(n.startDate,this.format)),"string"==typeof n.endDate&&(this.endDate=moment(n.endDate,this.format)),"string"==typeof n.minDate&&(this.minDate=moment(n.minDate,this.format)),"string"==typeof n.maxDate&&(this.maxDate=moment(n.maxDate,this.format)),"object"==typeof n.startDate&&(this.startDate=moment(n.startDate)),"object"==typeof n.endDate&&(this.endDate=moment(n.endDate)),"object"==typeof n.minDate&&(this.minDate=moment(n.minDate)),"object"==typeof n.maxDate&&(this.maxDate=moment(n.maxDate)),"object"==typeof n.ranges){for(var a in n.ranges){var l=moment(n.ranges[a][0]),u=moment(n.ranges[a][1]);this.minDate&&l.isBefore(this.minDate)&&(l=moment(this.minDate)),this.maxDate&&u.isAfter(this.maxDate)&&(u=moment(this.maxDate)),this.minDate&&u.isBefore(this.minDate)||this.maxDate&&l.isAfter(this.maxDate)||(this.ranges[a]=[l,u])}var c="<ul>";for(var a in this.ranges)c+="<li>"+a+"</li>";c+="<li>"+this.locale.customRangeLabel+"</li>",c+="</ul>",this.container.find(".ranges").prepend(c)}if("object"==typeof n.dateLimit&&(this.dateLimit=n.dateLimit),"object"==typeof n.locale&&"number"==typeof n.locale.firstDay){this.locale.firstDay=n.locale.firstDay;for(var d=n.locale.firstDay;d>0;)this.locale.daysOfWeek.push(this.locale.daysOfWeek.shift()),d--}"string"==typeof n.opens&&(this.opens=n.opens),"boolean"==typeof n.showWeekNumbers&&(this.showWeekNumbers=n.showWeekNumbers),"string"==typeof n.buttonClasses&&(this.buttonClasses=[n.buttonClasses]),"object"==typeof n.buttonClasses&&(this.buttonClasses=n.buttonClasses),"boolean"==typeof n.showDropdowns&&(this.showDropdowns=n.showDropdowns),"boolean"==typeof n.timePicker&&(this.timePicker=n.timePicker),"number"==typeof n.timePickerIncrement&&(this.timePickerIncrement=n.timePickerIncrement),"boolean"==typeof n.timePicker12Hour&&(this.timePicker12Hour=n.timePicker12Hour)}this.timePicker||(this.startDate=this.startDate.startOf("day"),this.endDate=this.endDate.startOf("day"));var p=this.container;if(t.each(this.buttonClasses,function(t,e){p.find("button").addClass(e)}),"right"==this.opens){var h=this.container.find(".calendar.left"),f=this.container.find(".calendar.right");h.removeClass("left").addClass("right"),f.removeClass("right").addClass("left")}if(("undefined"==typeof n||"undefined"==typeof n.ranges)&&(this.container.find(".calendar").show(),this.move()),"function"==typeof r&&(this.cb=r),this.container.addClass("opens"+this.opens),(!o||"undefined"==typeof n.startDate&&"undefined"==typeof n.endDate)&&t(this.element).is("input[type=text]")){var l,u,g=t(this.element).val(),m=g.split(this.separator);2==m.length&&(l=moment(m[0],this.format),u=moment(m[1],this.format)),null!=l&&null!=u&&(this.startDate=l,this.endDate=u)}this.oldStartDate=this.startDate.clone(),this.oldEndDate=this.endDate.clone(),this.leftCalendar={month:moment([this.startDate.year(),this.startDate.month(),1,this.startDate.hour(),this.startDate.minute()]),calendar:[]},this.rightCalendar={month:moment([this.endDate.year(),this.endDate.month(),1,this.endDate.hour(),this.endDate.minute()]),calendar:[]},this.container.on("mousedown",t.proxy(this.mousedown,this)),this.container.find(".calendar").on("click",".prev",t.proxy(this.clickPrev,this)),this.container.find(".calendar").on("click",".next",t.proxy(this.clickNext,this)),this.container.find(".ranges").on("click","button.applyBtn",t.proxy(this.clickApply,this)),this.container.find(".ranges").on("click","button.cancelBtn",t.proxy(this.clickCancel,this)),this.container.find(".ranges").on("click",".daterangepicker_start_input",t.proxy(this.showCalendars,this)),this.container.find(".ranges").on("click",".daterangepicker_end_input",t.proxy(this.showCalendars,this)),this.container.find(".calendar").on("click","td.available",t.proxy(this.clickDate,this)),this.container.find(".calendar").on("mouseenter","td.available",t.proxy(this.enterDate,this)),this.container.find(".calendar").on("mouseleave","td.available",t.proxy(this.updateView,this)),this.container.find(".ranges").on("click","li",t.proxy(this.clickRange,this)),this.container.find(".ranges").on("mouseenter","li",t.proxy(this.enterRange,this)),this.container.find(".ranges").on("mouseleave","li",t.proxy(this.updateView,this)),this.container.find(".calendar").on("change","select.yearselect",t.proxy(this.updateMonthYear,this)),this.container.find(".calendar").on("change","select.monthselect",t.proxy(this.updateMonthYear,this)),this.container.find(".calendar").on("change","select.hourselect",t.proxy(this.updateTime,this)),this.container.find(".calendar").on("change","select.minuteselect",t.proxy(this.updateTime,this)),this.container.find(".calendar").on("change","select.ampmselect",t.proxy(this.updateTime,this)),this.element.on("keyup",t.proxy(this.updateFromControl,this)),this.updateView(),this.updateCalendars()};e.prototype={constructor:e,mousedown:function(t){t.stopPropagation()},updateView:function(){this.leftCalendar.month.month(this.startDate.month()).year(this.startDate.year()),this.rightCalendar.month.month(this.endDate.month()).year(this.endDate.year()),this.container.find("input[name=daterangepicker_start]").val(this.startDate.format(this.format)),this.container.find("input[name=daterangepicker_end]").val(this.endDate.format(this.format)),this.startDate.isSame(this.endDate)||this.startDate.isBefore(this.endDate)?this.container.find("button.applyBtn").removeAttr("disabled"):this.container.find("button.applyBtn").attr("disabled","disabled")},updateFromControl:function(){if(this.element.is("input")&&this.element.val().length){var t=this.element.val().split(this.separator),e=moment(t[0],this.format),n=moment(t[1],this.format);null!=e&&null!=n&&(n.isBefore(e)||(this.oldStartDate=this.startDate.clone(),this.oldEndDate=this.endDate.clone(),this.startDate=e,this.endDate=n,this.startDate.isSame(this.oldStartDate)&&this.endDate.isSame(this.oldEndDate)||this.notify(),this.updateCalendars()))}},notify:function(){this.updateView(),this.cb(this.startDate,this.endDate)},move:function(){var e={top:this.parentEl.offset().top-(this.parentEl.is("body")?0:this.parentEl.scrollTop()),left:this.parentEl.offset().left-(this.parentEl.is("body")?0:this.parentEl.scrollLeft())};"left"==this.opens?(this.container.css({top:this.element.offset().top+this.element.outerHeight()-e.top,right:t(window).width()-this.element.offset().left-this.element.outerWidth()-e.left,left:"auto"}),this.container.offset().left<0&&this.container.css({right:"auto",left:9})):(this.container.css({top:this.element.offset().top+this.element.outerHeight()-e.top,left:this.element.offset().left-e.left,right:"auto"}),this.container.offset().left+this.container.outerWidth()>t(window).width()&&this.container.css({left:"auto",right:0}))},show:function(e){this.container.show(),this.move(),e&&(e.stopPropagation(),e.preventDefault()),t(document).on("mousedown",t.proxy(this.hide,this)),this.element.trigger("shown",{target:e.target,picker:this})},hide:function(){this.container.hide(),this.startDate.isSame(this.oldStartDate)&&this.endDate.isSame(this.oldEndDate)||this.notify(),this.oldStartDate=this.startDate.clone(),this.oldEndDate=this.endDate.clone(),t(document).off("mousedown",this.hide),this.element.trigger("hidden",{picker:this})},enterRange:function(t){var e=t.target.innerHTML;if(e==this.locale.customRangeLabel)this.updateView();else{var n=this.ranges[e];this.container.find("input[name=daterangepicker_start]").val(n[0].format(this.format)),this.container.find("input[name=daterangepicker_end]").val(n[1].format(this.format))
}},showCalendars:function(){this.container.find(".calendar").show(),this.move()},updateInputText:function(){this.element.is("input")&&this.element.val(this.startDate.format(this.format)+this.separator+this.endDate.format(this.format))},clickRange:function(t){var e=t.target.innerHTML;if(e==this.locale.customRangeLabel)this.showCalendars();else{var n=this.ranges[e];this.startDate=n[0],this.endDate=n[1],this.timePicker||(this.startDate.startOf("day"),this.endDate.startOf("day")),this.leftCalendar.month.month(this.startDate.month()).year(this.startDate.year()).hour(this.startDate.hour()).minute(this.startDate.minute()),this.rightCalendar.month.month(this.endDate.month()).year(this.endDate.year()).hour(this.endDate.hour()).minute(this.endDate.minute()),this.updateCalendars(),this.updateInputText(),this.container.find(".calendar").hide(),this.hide()}},clickPrev:function(e){var n=t(e.target).parents(".calendar");n.hasClass("left")?this.leftCalendar.month.subtract("month",1):this.rightCalendar.month.subtract("month",1),this.updateCalendars()},clickNext:function(e){var n=t(e.target).parents(".calendar");n.hasClass("left")?this.leftCalendar.month.add("month",1):this.rightCalendar.month.add("month",1),this.updateCalendars()},enterDate:function(e){var n=t(e.target).attr("data-title"),r=n.substr(1,1),i=n.substr(3,1),o=t(e.target).parents(".calendar");o.hasClass("left")?this.container.find("input[name=daterangepicker_start]").val(this.leftCalendar.calendar[r][i].format(this.format)):this.container.find("input[name=daterangepicker_end]").val(this.rightCalendar.calendar[r][i].format(this.format))},clickDate:function(e){var n=t(e.target).attr("data-title"),r=n.substr(1,1),i=n.substr(3,1),o=t(e.target).parents(".calendar");if(o.hasClass("left")){var s=this.leftCalendar.calendar[r][i],a=this.endDate;if("object"==typeof this.dateLimit){var l=moment(s).add(this.dateLimit).startOf("day");a.isAfter(l)&&(a=l)}}else{var s=this.startDate,a=this.rightCalendar.calendar[r][i];if("object"==typeof this.dateLimit){var u=moment(a).subtract(this.dateLimit).startOf("day");s.isBefore(u)&&(s=u)}}o.find("td").removeClass("active"),s.isSame(a)||s.isBefore(a)?(t(e.target).addClass("active"),this.startDate=s,this.endDate=a):s.isAfter(a)&&(t(e.target).addClass("active"),this.startDate=s,this.endDate=moment(s).add("day",1).startOf("day")),this.leftCalendar.month.month(this.startDate.month()).year(this.startDate.year()),this.rightCalendar.month.month(this.endDate.month()).year(this.endDate.year()),this.updateCalendars()},clickApply:function(){this.updateInputText(),this.hide()},clickCancel:function(){this.startDate=this.oldStartDate,this.endDate=this.oldEndDate,this.updateView(),this.updateCalendars(),this.hide()},updateMonthYear:function(e){var n=t(e.target).closest(".calendar").hasClass("left"),r=this.container.find(".calendar.left");n||(r=this.container.find(".calendar.right"));var i=parseInt(r.find(".monthselect").val()),o=r.find(".yearselect").val();n?this.leftCalendar.month.month(i).year(o):this.rightCalendar.month.month(i).year(o),this.updateCalendars()},updateTime:function(e){var n=t(e.target).closest(".calendar").hasClass("left"),r=this.container.find(".calendar.left");n||(r=this.container.find(".calendar.right"));var i=parseInt(r.find(".hourselect").val()),o=parseInt(r.find(".minuteselect").val());if(this.timePicker12Hour){var s=r.find(".ampmselect").val();"PM"==s&&12>i&&(i+=12),"AM"==s&&12==i&&(i=0)}if(n){var a=this.startDate.clone();a.hour(i),a.minute(o),this.startDate=a,this.leftCalendar.month.hour(i).minute(o)}else{var l=this.endDate.clone();l.hour(i),l.minute(o),this.endDate=l,this.rightCalendar.month.hour(i).minute(o)}this.updateCalendars()},updateCalendars:function(){this.leftCalendar.calendar=this.buildCalendar(this.leftCalendar.month.month(),this.leftCalendar.month.year(),this.leftCalendar.month.hour(),this.leftCalendar.month.minute(),"left"),this.rightCalendar.calendar=this.buildCalendar(this.rightCalendar.month.month(),this.rightCalendar.month.year(),this.rightCalendar.month.hour(),this.rightCalendar.month.minute(),"right"),this.container.find(".calendar.left").html(this.renderCalendar(this.leftCalendar.calendar,this.startDate,this.minDate,this.maxDate)),this.container.find(".calendar.right").html(this.renderCalendar(this.rightCalendar.calendar,this.endDate,this.startDate,this.maxDate)),this.container.find(".ranges li").removeClass("active");var t=!0,e=0;for(var n in this.ranges)this.timePicker?this.startDate.isSame(this.ranges[n][0])&&this.endDate.isSame(this.ranges[n][1])&&(t=!1,this.container.find(".ranges li:eq("+e+")").addClass("active")):this.startDate.format("YYYY-MM-DD")==this.ranges[n][0].format("YYYY-MM-DD")&&this.endDate.format("YYYY-MM-DD")==this.ranges[n][1].format("YYYY-MM-DD")&&(t=!1,this.container.find(".ranges li:eq("+e+")").addClass("active")),e++;t&&this.container.find(".ranges li:last").addClass("active")},buildCalendar:function(t,e,n,r){for(var i=moment([e,t,1]),o=moment(i).subtract("month",1).month(),s=moment(i).subtract("month",1).year(),a=moment([s,o]).daysInMonth(),l=i.day(),u=[],c=0;6>c;c++)u[c]=[];var d=a-l+this.locale.firstDay+1;d>a&&(d-=7),l==this.locale.firstDay&&(d=a-6);for(var p=moment([s,o,d,12,r]),c=0,h=0,f=0;42>c;c++,h++,p=moment(p).add("hour",24))c>0&&h%7==0&&(h=0,f++),u[f][h]=p.clone().hour(n),p.hour(12);return u},renderDropdowns:function(t,e,n){for(var r=t.month(),i='<select class="monthselect">',o=!1,s=!1,a=0;12>a;a++)(!o||a>=e.month())&&(!s||a<=n.month())&&(i+="<option value='"+a+"'"+(a===r?" selected='selected'":"")+">"+this.locale.monthNames[a]+"</option>");i+="</select>";for(var l=t.year(),u=n&&n.year()||l+5,c=e&&e.year()||l-50,d='<select class="yearselect">',p=c;u>=p;p++)d+='<option value="'+p+'"'+(p===l?' selected="selected"':"")+">"+p+"</option>";return d+="</select>",i+d},renderCalendar:function(e,n,r,i){var o='<div class="calendar-date">';o+='<table class="table-condensed">',o+="<thead>",o+="<tr>",this.showWeekNumbers&&(o+="<th></th>"),o+=!r||r.isBefore(e[1][1])?'<th class="prev available"><i class="icon-arrow-left glyphicon glyphicon-arrow-left"></i></th>':"<th></th>";var s=this.locale.monthNames[e[1][1].month()]+e[1][1].format(" YYYY");this.showDropdowns&&(s=this.renderDropdowns(e[1][1],r,i)),o+='<th colspan="5" style="width: auto">'+s+"</th>",o+=!i||i.isAfter(e[1][1])?'<th class="next available"><i class="icon-arrow-right glyphicon glyphicon-arrow-right"></i></th>':"<th></th>",o+="</tr>",o+="<tr>",this.showWeekNumbers&&(o+='<th class="week">'+this.locale.weekLabel+"</th>"),t.each(this.locale.daysOfWeek,function(t,e){o+="<th>"+e+"</th>"}),o+="</tr>",o+="</thead>",o+="<tbody>";for(var a=0;6>a;a++){o+="<tr>",this.showWeekNumbers&&(o+='<td class="week">'+e[a][0].week()+"</td>");for(var l=0;7>l;l++){var u="available ";u+=e[a][l].month()==e[1][1].month()?"":"off",r&&e[a][l].isBefore(r)||i&&e[a][l].isAfter(i)?u=" off disabled ":e[a][l].format("YYYY-MM-DD")==n.format("YYYY-MM-DD")?(u+=" active ",e[a][l].format("YYYY-MM-DD")==this.startDate.format("YYYY-MM-DD")&&(u+=" start-date "),e[a][l].format("YYYY-MM-DD")==this.endDate.format("YYYY-MM-DD")&&(u+=" end-date ")):e[a][l]>=this.startDate&&e[a][l]<=this.endDate&&(u+=" in-range ",e[a][l].isSame(this.startDate)&&(u+=" start-date "),e[a][l].isSame(this.endDate)&&(u+=" end-date "));var c="r"+a+"c"+l;o+='<td class="'+u.replace(/\s+/g," ").replace(/^\s?(.*?)\s?$/,"$1")+'" data-title="'+c+'">'+e[a][l].date()+"</td>"}o+="</tr>"}if(o+="</tbody>",o+="</table>",o+="</div>",this.timePicker){o+='<div class="calendar-time">',o+='<select class="hourselect">';var d=0,p=23,h=n.hour();this.timePicker12Hour&&(d=1,p=12,h>=12&&(h-=12),0==h&&(h=12));for(var f=d;p>=f;f++)o+=f==h?'<option value="'+f+'" selected="selected">'+f+"</option>":'<option value="'+f+'">'+f+"</option>";o+="</select> : ",o+='<select class="minuteselect">';for(var f=0;60>f;f+=this.timePickerIncrement){var g=f;10>g&&(g="0"+g),o+=f==n.minute()?'<option value="'+f+'" selected="selected">'+g+"</option>":'<option value="'+f+'">'+g+"</option>"}o+="</select> ",this.timePicker12Hour&&(o+='<select class="ampmselect">',o+=n.hour()>=12?'<option value="AM">AM</option><option value="PM" selected="selected">PM</option>':'<option value="AM" selected="selected">AM</option><option value="PM">PM</option>',o+="</select>"),o+="</div>"}return o}},t.fn.daterangepicker=function(n,r){return this.each(function(){var i=t(this);i.data("daterangepicker")||i.data("daterangepicker",new e(i,n,r))}),this}}(window.jQuery),define("daterangepicker",function(){}),define("templates/reporting/dashboard/dashboard_controls",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<label>Showing chef-client runs for&nbsp;<strong class="date-range"></strong><div class="small-spinner"></div></label>')}return buf.join("")}}),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function r(){this.constructor=t}for(var i in e)n.call(e,i)&&(t[i]=e[i]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},n={}.hasOwnProperty;define("views/reporting/dashboard/dashboard_controls",["require","b","daterangepicker","j!reporting/dashboard/dashboard_controls"],function(n){var r,i,o,s;return r=n("b"),o=n("daterangepicker"),s=n("j!reporting/dashboard/dashboard_controls"),i=function(n){function r(){return this.removeSpinner=t(this.removeSpinner,this),this.renderSpinner=t(this.renderSpinner,this),this.onRangeChange=t(this.onRangeChange,this),r.__super__.constructor.apply(this,arguments)}return e(r,n),r.prototype.template=s,r.prototype.initialize=function(t){return this.baseUrl=t.baseUrl,this.from=t.from,this.until=t.until,this.enabled=t.enabled},r.prototype.afterRender=function(){return this.enabled?this.renderPicker():this.$(".date-range").addClass("disabled")},r.prototype.renderPicker=function(){var t;return t={startDate:this.from,endDate:this.until,maxDate:moment(),minDate:moment().subtract(1,"year"),ranges:{"Last day":[moment().subtract(1,"day"),moment()],"Last week":[moment().subtract(1,"week"),moment()],"Last month":[moment().subtract(1,"month"),moment()],"Last 3 months":[moment().subtract(3,"month"),moment()]},applyClass:"btn-primary"},this.$(".date-range").daterangepicker(t,this.onRangeChange)},r.prototype.onRangeChange=function(t,e){return this.setDates(t,e),this.trigger("date_changed",this.fromSeconds,this.untilSeconds)},r.prototype.renderSpinner=function(){return this.$(".small-spinner").html('<i class="icon-spinner icon-spin icon-large"></i>')},r.prototype.removeSpinner=function(){return this.$(".small-spinner").html("")},r.prototype.setDates=function(t,e){return this.from=t.startOf("day"),this.until=e.endOf("day"),this.until.isAfter()&&(this.until=moment()),this.range=this.from.format("MM/DD/YYYY")+" - "+this.until.format("MM/DD/YYYY"),this.fromSeconds=this.from.zone(0).unix(),this.untilSeconds=this.until.zone(0).unix(),this.$(".date-range").text(this.range)},r}(r.Layout)})}.call(this),define("templates/reporting/dashboard/durations_chart",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<div class="panel"><header><h1>Run Durations</h1></header><nav class="legend"><span class="mainsuccess"><i class="legend-color"> </i>success</span><span class="mainfailure"><i class="legend-color"> </i>failure</span><span class="mainaborted"><i class="legend-color"></i>aborted</span></nav><div class="content"><div class="durations-chart"><svg></svg></div></div></div>')}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/reporting/dashboard/durations_chart",["require","j!reporting/dashboard/durations_chart","b","nvd3","underscore"],function(e){var n,r,i,o,s;return o=e("j!reporting/dashboard/durations_chart"),n=e("b"),s=e("nvd3"),i=e("underscore"),r=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.template=o,n.prototype.events={"click .legend span":"onLegendClick"},n.prototype.initialize=function(){return this.data=[]},n.prototype.afterRender=function(){return s.addGraph(function(t){return function(){return t.data=[],t.chart=s.models.multiBarHorizontalChart().options({x:function(t){return t.duration_bucket},y:function(t){return t.runcounts},showLegend:!1,showControls:!1,showXAxis:!0,showYAxis:!0,isOrdinal:!0,transitionDuration:250,color:t.options.colors}),t.chart.xAxis.axisLabel("Durations"),t.chart.yAxis.axisLabel("Run Counts").axisLabelDistance(35).tickFormat(d3.format(",")),d3.select(t.$(".durations-chart svg").get(0)).datum(t.data).call(t.chart),s.utils.windowResize(t.chart.update),t.chart}}(this))},n.prototype.formatData=function(t){var e,n;return e=[],t&&(n=["success","failure","aborted"],e=d3.nest().key(function(t){return t.status}).sortKeys(function(t,e){return n.indexOf(t)-n.indexOf(e)}).entries(t)),e},n.prototype.setData=function(t){var e,n;return this.clearOldData(t),e=this.data,n=this.formatData(t),e.length=0,Array.prototype.push.apply(e,n),this.chart?(this.chart.yDomain(this.getYDomain(t)),this.chart.update()):void 0},n.prototype.getYDomain=function(t){return[0,d3.max(t,function(t){return t.runcounts})]},n.prototype.onLegendClick=function(t){var e,n,r,o,s;return n=this.$(".legend > span"),e=$(t.currentTarget),e.toggleClass("disabled"),r=this.$(".legend .disabled").map(function(t,e){return $.trim($(e).text())}).get(),r.length===n.length?(n.removeClass("disabled"),i(this.data).forEach(function(t){return t.disabled=!1})):i(this.data).forEach(function(t){return t.disabled=i(r).contains(t.key)}),o=i(this.data).reject(function(t){return t.disabled}),s=[],i(o).forEach(function(t){return s=s.concat(t.values)}),this.chart.yDomain(this.getYDomain(s)),this.chart.update()},n.prototype.clearOldData=function(t){return 0===t.length?d3.select(this.$(".durations-chart svg").get(0)).html(""):void 0},n}(n.Layout)})}.call(this),define("templates/controls/alerts/info",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<div class="alert alert-info alert-block"><h4><i class="icon-info-sign"></i>&nbsp;');var __val__=title;buf.push(escape(null==__val__?"":__val__)),buf.push("</h4>");var __val__=body;buf.push(null==__val__?"":__val__),buf.push("</div>")}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/controls/alerts/info",["require","b","j!controls/alerts/info"],function(e){var n,r,i;return n=e("b"),i=e("j!controls/alerts/info"),r=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.template=i,n.prototype.initialize=function(){var t,e;return null==this.title&&(this.title=null!=(t=this.options.title)?t:"Info"),null!=this.body?this.body:this.body=null!=(e=this.options.body)?e:""},n.prototype.serialize=function(){return{title:this.title,body:this.body}},n}(n.Layout)})}.call(this),define("templates/reporting/dashboard/summary_chart",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<div class="panel"><header><h1>Runs Summary</h1></header><div class="content"><div class="summary-chart"><svg></svg></div></div></div>')}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/reporting/dashboard/summary_chart",["require","j!reporting/dashboard/summary_chart","b","nvd3","underscore"],function(e){var n,r,i,o,s;return s=e("j!reporting/dashboard/summary_chart"),n=e("b"),o=e("nvd3"),i=e("underscore"),r=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.template=s,n.prototype.initialize=function(){return this.data=[]},n.prototype.afterRender=function(){return o.addGraph(function(t){return function(){return t.data=[],t.chart=o.models.discreteBarChart().options({x:function(t){return t.status},y:function(t){return t.percentage},showLegend:!1,showControls:!1,showValues:!0,tooltips:!1,valueFormat:d3.format("%"),yDomain:[0,1],transitionDuration:250,color:t.options.colors,margin:{top:10,right:0,bottom:20,left:0}}),t.chart.xAxis.axisLabel("Status"),t.chart.yAxis.axisLabel("Percentage").axisLabelDistance(35).tickFormat(d3.format("%")),d3.select(t.$(".summary-chart svg").get(0)).datum(t.data).call(t.chart),o.utils.windowResize(t.chart.update),t.chart}}(this))},n.prototype.formatData=function(t){var e,n,r,o,s,a;return e=[],t&&(o=["success","failure","aborted"],s=i(t).reduce(function(t,e){return t+e.runcount},0),a=i(t).chain().groupBy("status").map(function(t,e){var n,r;return n=i(t).reduce(function(t,e){return t+e.runcount},0),r=n/s*100,{status:e,total:n,percentage:r}}).sortBy(function(t){return o.indexOf(t.status)}).value(),n=function(t,e){var n,r;return r=e-i(t).reduce(function(t,e){return t+Math.round(e)},0),n=i(t).map(function(t,e){return[t,e]}),i.chain(n).sortBy(function(t){return Math.round(t[0])-t[0]}).map(function(e,n){return[Math.round(e[0])+(r>n)-(n>=t.length+r),e[1]]}).sortBy(function(t){return t[1]}).map(function(t){return t[0]}).value()},r=n(i(a).pluck("percentage"),100),i(r).forEach(function(t,e){return a[e].percentage=t/100}),e=[{key:"summary",values:a}]),e},n.prototype.setData=function(t){var e,n;return this.clearOldData(t),e=this.data,n=this.formatData(t),e.length=0,Array.prototype.push.apply(e,n),this.chart?this.chart.update():void 0},n.prototype.clearOldData=function(t){return 0===t.length?d3.select(this.$(".summary-chart svg").get(0)).html(""):void 0},n}(n.Layout)})}.call(this),define("templates/reporting/dashboard",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<div id="dashboard_controls"></div><div class="dashboard-message"></div><div id="object-pane" class="dashboard-charts"><div class="row-fluid"><div class="span3"><div class="summary-chart-container"></div><div class="durations-chart-container"></div></div><div class="span9"><div class="counts-chart-container"></div></div></div></div>')}return buf.join("")}}),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function r(){this.constructor=t}for(var i in e)n.call(e,i)&&(t[i]=e[i]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},n={}.hasOwnProperty;define("views/reporting/dashboard",["require","b","views/reporting/dashboard/counts_chart","utils/dash_query","views/reporting/dashboard/dashboard_controls","views/reporting/dashboard/durations_chart","views/controls/alerts/error","views/controls/alerts/info","views/reporting/dashboard/summary_chart","underscore","router","state","j!reporting/dashboard"],function(n){var r,i,o,s,a,l,u,c,d,p,h,f,g;return r=n("b"),i=n("views/reporting/dashboard/counts_chart"),o=n("utils/dash_query"),s=n("views/reporting/dashboard/dashboard_controls"),l=n("views/reporting/dashboard/durations_chart"),u=n("views/controls/alerts/error"),c=n("views/controls/alerts/info"),d=n("views/reporting/dashboard/summary_chart"),p=n("underscore"),h=n("router"),f=n("state"),g=n("j!reporting/dashboard"),a=function(n){function r(){return this.onPointSelected=t(this.onPointSelected,this),this.setDurationsChartData=t(this.setDurationsChartData,this),this.setCountsChartData=t(this.setCountsChartData,this),r.__super__.constructor.apply(this,arguments)}return e(r,n),r.prototype.template=g,r.prototype.initialize=function(){var t;return this.app=this.options.app,this.collection=f.get("controller").collection,this.baseUrl=this.options.baseUrl,this.billingTier=this.app.currentOrg.reportingBillingTier(),this.dashQuery=new o(this.baseUrl),this.dashControls=new s({baseUrl:this.baseUrl+"/dashboard",collection:this.collection,app:this.app,from:moment.unix(this.collection.startTime),until:moment.unix(this.collection.endTime),enabled:!0}),this.dashControls.on("date_changed",this.refresh,this),t=["#2ca02c","#1f77b4","#aec7e8"],this.summaryChart=new d({colors:t}),this.durationsChart=new l({colors:t}),this.countsChart=new i({colors:t}),this.countsChart.on("pointSelected",this.onPointSelected)},r.prototype.afterRender=function(){return this.setView("#dashboard_controls",this.dashControls).render(),this.setView(".summary-chart-container",this.summaryChart).render(),this.setView(".counts-chart-container",this.countsChart).render(),this.setView(".durations-chart-container",this.durationsChart).render(),this.dashControls.setDates(moment.unix(this.collection.startTime),moment.unix(this.collection.endTime)),this.refresh(this.collection.startTime,this.collection.endTime)},r.prototype.refresh=function(t,e){return h.navigate(this.baseUrl+"/dashboard?endTime="+e+"&startTime="+t),this.dashControls.renderSpinner(),this.removeView(".dashboard-message"),$.when(this.dashQuery.getDashCountsData(t,e).then(this.setCountsChartData),this.dashQuery.getDashDurationsData(t,e).then(this.setDurationsChartData)).then(this.$(".dashboard-charts").show()).always(this.dashControls.removeSpinner)},r.prototype.setCountsChartData=function(t){return this.summaryChart.setData(t),this.countsChart.setData(t)},r.prototype.setDurationsChartData=function(t){return this.durationsChart.setData(t)},r.prototype.onPointSelected=function(t){var e,n,r,i;return e=moment(t.start_time).zone(0).unix(),r=moment(t.end_time).zone(0).unix(),n=t.status,i=this.baseUrl+"/runs?endTime="+r+"&startTime="+e+"&status="+n,h.navigate(i,{trigger:!0})},r}(r.Layout)})}.call(this),function(){define("utils/time",["moment"],function(){var t;return t={daysFromStart:function(t,e){var n;return t=86400*t,n=e-t}}})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("controllers/reporting_dashboard",["require","controllers/base","views/reporting/dashboard","utils/i18n","utils/i18n.gettext","utils/time"],function(e){var n,r,i,o,s,a;return n=e("controllers/base"),r=e("views/reporting/dashboard"),a=e("utils/i18n"),o=e("utils/i18n.gettext"),s=e("utils/time"),i=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.id="reporting_dashboard",n.prototype.split_pane=!1,n.prototype.messages={label:function(){return o("Dashboard")}},n.prototype.routes={"organizations/:org/dashboard":"index"},n.prototype.url=function(t){return t||(t=this.app.organizations.last()),t.url()+"/dashboard"},n.prototype.paneView=function(){return new r({app:this.app,baseUrl:this.app.organizations.last().url()})},n.prototype.checkAccess=function(t){return t||(t=this.app.organizations.last()),t.isFeatureEnabled("reporting")},n.prototype.route_index=function(t,e){return null!=(null!=e?e.startTime:void 0)&&null!=(null!=e?e.endTime:void 0)?(this.collection.endTime=parseInt(e.endTime,10),this.collection.startTime=parseInt(e.startTime,10)):(this.collection.endTime=Math.round(moment.utc().unix()),this.collection.startTime=s.daysFromStart(1,this.collection.endTime))},n}(n)})}.call(this),define("templates/reporting/runs/list_header",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){if(isSolrSearchable&&(buf.push('<div class="search-filter input-append pull-right"><input'),buf.push(attrs({id:"solr-search",type:"text",placeholder:searchMessage+"&hellip;",value:filter},{type:!0,placeholder:!0,value:!0})),buf.push('/><button type="button" class="btn"><i class="icon-search"></i></button></div>'),darklaunch.search_dashboard)){buf.push('<br clear="right"/><div>');var link=window.location.href.split("/");link[link.length-1]="search",buf.push("<a"),buf.push(attrs({href:link.join("/"),"class":"pull-right"},{href:!0})),buf.push(">Try experimental new search</a></div>")}}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/reporting/runs/list_header",["require","views/controls/list_header","j!reporting/runs/list_header"],function(e){var n,r,i;return n=e("views/controls/list_header"),i=e("j!reporting/runs/list_header"),r=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.template=i,n}(n)})}.call(this),define("templates/reporting/runs/meta_header",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<div class="alert reporting-coming-soon">Run history is temporarily limited to a single day but more will be available in the future. Stay tuned!</div><div class="meta-header-container"><div id="dashboard_controls" class="clearfix"></div><div id="filter-box" class="clearfix">'),search_enabled&&buf.push('<div id="search-container" class="pull-right"></div>'),buf.push('<div id="environments-label" class="dashboard_control pull-left select-label">Filter by environment</div><select id="environments-select" disabled="disabled" class="pull-left runs-select"></select><i class="icon-spinner icon-spin pull-left"></i><div id="status-label" class="dashboard_control pull-left select-label">Filter by status</div><select id="status-select" class="pull-left runs-select"><option value="all">All</option><option value="success">Success</option><option value="failure">Failure</option><option value="aborted">Aborted</option></select></div><div id="dashboard_message" class="hide_visibility"></div></div>')}return buf.join("")}}),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function r(){this.constructor=t}for(var i in e)n.call(e,i)&&(t[i]=e[i]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},n={}.hasOwnProperty;define("views/reporting/runs/meta_header",["require","jquery","b","views/reporting/dashboard/dashboard_controls","views/reporting/runs/list_header","moment","router","j!reporting/runs/meta_header"],function(n){var r,i,o,s,a,l,u,c;return r=n("jquery"),i=n("b"),o=n("views/reporting/dashboard/dashboard_controls"),a=n("views/reporting/runs/list_header"),l=n("moment"),u=n("router"),c=n("j!reporting/runs/meta_header"),s=function(n){function i(){return this.updateEnvDropdown=t(this.updateEnvDropdown,this),i.__super__.constructor.apply(this,arguments)}return e(i,n),i.prototype.template=c,i.prototype.initialize=function(){return this.listView=this.options.listView,this.collection=this.options.collection,this.dashControls=new o({baseUrl:this.listView.baseUrl,collection:this.collection,from:l.unix(this.collection.server_api.startTime),until:l.unix(this.collection.server_api.endTime),enabled:"free"!==this.listView.app.currentOrg.reportingBillingTier()}),this.dashControls.on("date_changed",this.handleRangeChange,this),this.listHeaderView=new a({collection:this.collection,listView:this.listView}),this.setView("#search-container",this.listHeaderView),this.setView("#dashboard_controls",this.dashControls)},i.prototype.updateEnvDropdown=function(){var t,e,n,i;for(this.$("#environments-select").append(r("<option></option>").attr("value","null").text("All Environments")),i=this.collection.organization.environments.models,t=0,e=i.length;e>t;t++)n=i[t],this.$("#environments-select").append(r("<option></option>").attr("value",n.id).text(n.id));return this.$(".icon-spinner").remove(),this.$("#environments-select").removeAttr("disabled")},i.prototype.cleanup=function(){return this.listHeaderView.off(null,null,this),u.off("route:runs:index",null,this),u.off("route:runs:show",null,this),this.collection.organization.environments.off("sync",null,this)},i.prototype.serialize=function(){return{search_enabled:this.collection.organization.isFeatureEnabled("reporting_solr_search")}},i.prototype.events={"change #environments-select":"handleEnvChange","change #status-select":"handleStatusChange","click  #dashboard-link":"handleDashboardClick"},i.prototype.afterRender=function(){return this.setProperUiFilterState(),this.collection.organization.environments.on("sync",this.updateEnvDropdown,this),0===this.collection.organization.environments.length?this.collection.organization.environments.fetch():this.updateEnvDropdown(),this.collection.server_api.endTime&&this.collection.server_api.startTime?this.dashControls.setDates(l.unix(this.collection.server_api.startTime),l.unix(this.collection.server_api.endTime)):void 0},i.prototype.setProperUiFilterState=function(){return this.$("#environments-select").val(null!=this.collection.server_api.env&&"null"!==this.collection.server_api.env?this.collection.server_api.env:"null"),null!=this.collection.server_api.status&&this.collection.server_api.status.length>0?(r("#status-select").data("init_val",this.collection.server_api.status),r("#status-select").children("option").each(function(){var t;return t=r("#status-select").data("init_val"),r(this).val()===t?(r(this).prop("selected",!0),r("#status-select").val(t)):void 0})):r("#status-select").val("all")},i.prototype.handleEnvChange=function(){return"null"!==this.$("#environments-select").val()?this.collection.server_api.env=this.$("#environments-select").val():delete this.collection.server_api.env,this.listHeaderView.resetListAndCollectionState()},i.prototype.handleStatusChange=function(){return"all"!==r("#status-select").val()?this.collection.server_api.status=r("#status-select").val():delete this.collection.server_api.status,this.listHeaderView.resetListAndCollectionState()},i.prototype.handleRangeChange=function(t,e){return this.collection.set_time_params(t,e),this.listHeaderView.resetListAndCollectionState()},i.prototype.resetListAndCollectionState=function(){},i.prototype.updateTitleText=function(){},i}(i.Layout)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/reporting/runs/list",["require","jquery","views/controls/alerts/error","views/controls/list","views/reporting/runs/list_header","views/reporting/runs/meta_header","utils/i18n.gettext"],function(e){var n,r,i,o,s,a,l;return n=e("jquery"),r=e("views/controls/alerts/error"),i=e("views/controls/list"),s=e("views/reporting/runs/list_header"),o=e("views/reporting/runs/meta_header"),l=e("utils/i18n.gettext"),a=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.actionColumn=!1,n.prototype.headerClass=o,n.prototype.initialize=function(){return this.app=this.options.app,this.baseUrl=this.app.currentOrg.url()+"/runs",n.__super__.initialize.apply(this,arguments)},n.prototype.showError=function(t,e){var i;return e.status&&404===e.status?(i=new r,i.body=e.responseJSON.error,this.setView(".grid",i).render()):n.__super__.showError.apply(this,arguments)
},n.prototype.afterRender=function(){return n.__super__.afterRender.apply(this,arguments),"free"===this.app.currentOrg.reportingBillingTier()?this.$(".reporting-coming-soon").css("display","block"):void 0},n.prototype.columns=[{id:"start_time",name:l("Start Time"),field:"start_time",formatter:function(t,e,n){return n.utc().format("YYYY-MM-DD HH:mm:ss")}},{id:"finish_time",name:l("Finish Time"),field:"end_time",formatter:function(t,e,n,r,i){return"started"===i.attributes.status?"":n.utc().format("YYYY-MM-DD HH:mm:ss")}},{id:"node",name:l("Node"),field:"node_name"},{id:"duration",name:l("Duration"),field:"duration"},{id:"total_resources",name:l("Resources Executed / Total"),field:"resource_summary",formatter:function(t,e,n,r,i){return"started"===i.attributes.status?"":n}},{id:"status",name:l("Status"),field:"status",formatter:function(t,e,n){return"success"===n?"<span><i class='icon-ok-sign pull-left'></i><div class='pull-left status-descriptor'>"+n+"</div></span>":"failure"===n?"<span><i class='icon-minus-sign pull-left'></i><div class='pull-left status-descriptor'>"+n+"</div></span>":"aborted"===n?"<span><i class='icon-exclamation-sign pull-left'></i><div class='pull-left status-descriptor'>"+n+"</div></span>":"started"===n?"<span><i class='icon-retweet pull-left'></i><div class='pull-left status-descriptor'>"+n+"</div></span>":"<span>"+n+"</span>"}}],n}(i)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("models/run_step",["require","b","moment"],function(e){var n,r,i;return n=e("b"),i=e("moment"),r=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.idAttribute="step",n.prototype.initialize=function(){var t;return n.__super__.initialize.apply(this,arguments),this.get("duration")?(t=this.get("duration"),t=i.duration(t).humanize(),this.set("duration",t)):this.set("duration","N/A")},n}(n.Model)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("collections/run_steps",["require","collections/base","models/run_step"],function(e){var n,r,i;return n=e("collections/base"),r=e("models/run_step"),i=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.model=r,n.prototype.webuiUrl="runs_query",n.prototype.set_params=function(t){return this.server_api.node_id=t.node_id,this.server_api.detail=t.detail,this.server_api.startTime=t.startTime,this.server_api.endTime=t.endTime,this.server_api.run_id=t.run_id},n.prototype.server_api={page:function(){return this.currentPage},count:function(){return this.perPage},start_row:function(){return this.currentPage*this.perPage},num_rows:function(){return this.perPage}},n}(n)})}.call(this),define("templates/controls/modals/run_details",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<div class="modal-header">'),"started"!==state&&buf.push('<i data-dismiss="modal" aria-hidden="true" class="icon-remove"></i>'),buf.push('<h3 id="modal-label">');var __val__=title;buf.push(escape(null==__val__?"":__val__)),buf.push('</h3></div><div class="modal-subheader">');var __val__=i18n.gettext("Resource "+run_step.get("type")+"["+run_step.get("id")+']  received action "'+run_step.get("result")+'"');if(buf.push(escape(null==__val__?"":__val__)),buf.push('</div><div class="modal-body">'),"finished"===state)buf.push("Success!");else if("error"===state){buf.push('<div class="alert alert-error alert-block"><h4><i class="icon-exclamation-sign"></i>&nbsp;Server Error</h4>');var __val__=message;buf.push(null==__val__?"":__val__),buf.push("</div>")}else if("queued"===state||"started"===state){var __val__=logo();buf.push(null==__val__?"":__val__)}else{buf.push('<table class="modal-table"><tr class="slick-header"><td class="table-entry slick-header-column">');var __val__=i18n.gettext("Parameters");buf.push(escape(null==__val__?"":__val__)),buf.push('</td><td class="table-entry slick-header-column">');var __val__=i18n.gettext("Initial State");buf.push(escape(null==__val__?"":__val__)),buf.push('</td><td class="table-entry slick-header-column">');var __val__=i18n.gettext("Final State");buf.push(escape(null==__val__?"":__val__)),buf.push("</td></tr>"),function(){if("number"==typeof keys.length)for(var t=0,e=keys.length;e>t;t++){var n=keys[t];buf.push('<tr class="sub-entry-column"><td class="table-entry">');var r=n;buf.push(escape(null==r?"":r)),buf.push('</td><td class="table-entry">');var r=run_step.get("initial_state")[n];buf.push(escape(null==r?"":r)),buf.push('</td><td class="table-entry">');var r=run_step.get("final_state")[n];buf.push(escape(null==r?"":r)),buf.push("</td></tr>")}else for(var t in keys){var n=keys[t];buf.push('<tr class="sub-entry-column"><td class="table-entry">');var r=n;buf.push(escape(null==r?"":r)),buf.push('</td><td class="table-entry">');var r=run_step.get("initial_state")[n];buf.push(escape(null==r?"":r)),buf.push('</td><td class="table-entry">');var r=run_step.get("final_state")[n];buf.push(escape(null==r?"":r)),buf.push("</td></tr>")}}.call(this),buf.push("</table>")}buf.push('</div><div class="modal-list"></div><div class="modal-footer"><button'),buf.push(attrs({"data-dismiss":"modal","aria-hidden":"true",disabled:"started"===state,"class":"btn btn-close"},{"data-dismiss":!0,"aria-hidden":!0,disabled:!0})),buf.push(">");var __val__=closeButtonText;buf.push(escape(null==__val__?"":__val__)),buf.push("</button></div>")}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/controls/modals/run_details",["require","views/controls/modals/base","j!controls/modals/run_details","utils/i18n.gettext","underscore","views/controls/empty"],function(e){var n,r,i,o,s,a;return r=e("views/controls/modals/base"),a=e("j!controls/modals/run_details"),o=e("utils/i18n.gettext"),s=e("underscore"),n=e("views/controls/empty"),i=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype.className=r.prototype.className+" modal-run-details",r.prototype.template=a,r.prototype.events={"click .btn-close":"clickClose","mouseover .sub-entry-column":"handleMouseOver","mouseout .sub-entry-column":"handleMouseOut"},r.prototype.initialize=function(){var t,e;return null==(t=this.options).title&&(t.title=o("Resource Parameters")),null==(e=this.options).message&&(e.message=o("The object you were viewing was deleted")),this.keys=Object.keys(s.extend({},this.options.run_step.get("initial_state"),this.options.run_step.get("final_state"))),r.__super__.initialize.apply(this,arguments)},r.prototype.serialize=function(){return s.extend({keys:this.keys,run_step:this.options.run_step},r.__super__.serialize.apply(this,arguments))},r.prototype.afterRender=function(){return r.__super__.afterRender.call(this),0===this.keys.length?this.setView(".modal-body",new n).render():void 0},r.prototype.clickClose=function(t){return t.preventDefault(),this.trigger("modalCloseEvent"),this.remove()},r.prototype.handleMouseOver=function(t){return this.$(t.target).parent().eq(0).addClass("highlighted")},r.prototype.handleMouseOut=function(t){return this.$(t.target).parent().eq(0).removeClass("highlighted")},r}(r)})}.call(this),define("templates/controls/modals/information",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<div class="modal-header">'),"started"!==state&&buf.push('<i data-dismiss="modal" aria-hidden="true" class="icon-remove"></i>'),buf.push('<h3 id="modal-label">');var __val__=title;if(buf.push(escape(null==__val__?"":__val__)),buf.push('</h3></div><div class="modal-subheader"></div><div class="modal-body">'),"finished"===state)buf.push("Success!");else if("error"===state){buf.push('<div class="alert alert-error alert-block"><h4><i class="icon-exclamation-sign"></i>&nbsp;Server Error</h4>');var __val__=message;buf.push(null==__val__?"":__val__),buf.push("</div>")}else if("queued"===state||"started"===state){var __val__=logo();buf.push(null==__val__?"":__val__)}else{var __val__=message;buf.push(null==__val__?"":__val__)}buf.push('</div><div class="modal-list"></div><div class="modal-footer"><button'),buf.push(attrs({"data-dismiss":"modal","aria-hidden":"true",disabled:"started"===state,"class":"btn btn-close"},{"data-dismiss":!0,"aria-hidden":!0,disabled:!0})),buf.push(">");var __val__=closeButtonText;buf.push(escape(null==__val__?"":__val__)),buf.push("</button></div>")}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/controls/modals/information",["require","views/controls/modals/base","utils/i18n.gettext","j!controls/modals/information"],function(e){var n,r,i,o;return r=e("views/controls/modals/base"),i=e("utils/i18n.gettext"),o=e("j!controls/modals/information"),n=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.closeButtonText=i("Close"),n.prototype.template=o,n}(r)})}.call(this),define("templates/reporting/runs/diff",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<div class="modal-header">'),"started"!==state&&buf.push('<i data-dismiss="modal" aria-hidden="true" class="icon-remove"></i>'),buf.push('<h3 id="modal-label">');var __val__=title;if(buf.push(escape(null==__val__?"":__val__)),buf.push('</h3></div><div class="modal-subheader"></div><div class="modal-body">'),"finished"===state)buf.push("Success!");else if("error"===state){buf.push('<div class="alert alert-error alert-block"><h4><i class="icon-exclamation-sign"></i>&nbsp;Server Error</h4>');var __val__=message;buf.push(null==__val__?"":__val__),buf.push("</div>")}else if("queued"===state||"started"===state){var __val__=logo();buf.push(null==__val__?"":__val__)}else buf.push('<div id="diff-parent"></div>');buf.push('</div><div class="modal-list"></div><div class="modal-footer"><button class="btn btn-small btn-close">Close</button></div>')}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/reporting/runs/diff",["require","views/controls/modals/base","underscore","j!reporting/runs/diff"],function(e){var n,r,i,o;return n=e("views/controls/modals/base"),i=e("underscore"),o=e("j!reporting/runs/diff"),r=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.initialize=function(){return n.__super__.initialize.apply(this,arguments),this.diff=this.options.diff},n.prototype.template=o,n.prototype.events={"click .btn-close":"close"},n.prototype.close=function(){return this.trigger("modalCloseEvent"),this.remove()},n.prototype.afterRender=function(){var t;return n.__super__.afterRender.apply(this,arguments),$(".modal").addClass("diff-modal"),t=this.formatDiff(this.diff),this.$("#diff-parent").append(t)},n.prototype.cleanup=function(){return this.$(".modal").removeClass("diff-modal"),n.__super__.cleanup.apply(this,arguments)},n.prototype.formatDiff=function(t){var e,n,r,o,s;return t="<pre>"+i.escape(t)+"</pre>",t=t.split("\\n").join("</pre><pre>"),r=$(document.createElement("div")),s=$(document.createElement("div")),s.html(t),e=null,n=null,o=$(document.createElement("table")),o.toggleClass("diff_table"),s.children("pre").each(function(t,r){var i,s,a,l,u,c,d,p,h,f,g,m;return a=$(r).html().substring(0,3),d=null,"---"!==a&&"+++"!==a?(l=$(r).html().substring(0,2),m=$(document.createElement("tr")),m.toggleClass("diff_row"),f=$(document.createElement("td")),f.toggleClass("diff_number"),i=$(document.createElement("td")),i.toggleClass("diff_number"),"@@"===l?(p=/\@\@ -(\d+)[,\d+]* \+(\d+)[,\d+]*/,h=$(r).html().match(p),null!=h&&(e=h[2]-1,n=h[1]-1),g="diff_header",f.html("...."),i.html("...."),s=$(r).html()):"+"===$(r).html()[0]?(e++,g="diff_addition",f.html(""),i.html(e),s=$(r).html()):"-"===$(r).html()[0]?(n++,g="diff_subtraction",f.html(n),i.html(""),s=$(r).html()):(e++,n++,f.html(n),i.html(e),g="diff_normal",s=$(r).html()),c=$(document.createElement("td")),u=$(document.createElement("pre")),u.html(s),c.append(u),c.toggleClass(g),m.append(f).append(i).append(c),o.append(m)):void 0}),r.append(o)},n}(n)})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function r(){this.constructor=t}for(var i in e)n.call(e,i)&&(t[i]=e[i]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},n={}.hasOwnProperty;define("views/reporting/run_steps/grid",["require","views/controls/scroll_grid","views/controls/modals/run_details","views/controls/modals/information","views/reporting/runs/diff","b","jquery","utils/i18n.gettext"],function(n){var r,i,o,s,a,l,u,c;return u=n("views/controls/scroll_grid"),a=n("views/controls/modals/run_details"),s=n("views/controls/modals/information"),o=n("views/reporting/runs/diff"),i=n("b"),r=n("jquery"),c=n("utils/i18n.gettext"),l=function(n){function i(){return this.handleModalCloseEvent=t(this.handleModalCloseEvent,this),i.__super__.constructor.apply(this,arguments)}var l;return e(i,n),i.prototype.className="run-steps-grid",i.prototype.events={"click .icon-eye-open":"handleRowClickEvent","click .icon-file-alt":"handleDiffClickEvent","mouseover .slick-row":"handleMouseOver","mouseout .slick-row":"handleMouseOut","click .slick-cell":"overrideParent"},l=function(t,e,n,r){return"<div class="+r.id+">"+n+"</div>"},i.prototype.columns=[{id:"step",name:c("Step"),field:"index",width:80,formatter:l},{id:"type",name:c("Type"),field:"type",width:80},{id:"name",name:c("Name"),field:"name",width:80},{id:"action",name:c("Action"),field:"result",width:80},{id:"duration",name:c("Duration"),field:"duration",width:80},{id:"diff",name:c("Diff"),field:"uri",width:80,formatter:function(t,e,n,r,i){var o;return _.contains(["file","template","cookbook_file","remote_file"],i.get("type"))?(o=n.split("/"),"<div class='diff-button' data-node_id='"+o[7]+"' data-run_id='"+o[9]+"' data-run_step_index='"+o[10]+"'></div>"):void 0}},{id:"parameters",name:c("Parameters"),field:null,width:80,formatter:function(){return"<div class='click-here-div'></div>"}}],i.prototype.initialize=function(){return this.collection=this.options.collection,this.parent_div_str=this.options.parent_div_str,this.app=this.options.app,this.base_url=this.app.organizations.last().url(),this.scroll_grid=new u({collection:this.collection,columns:this.columns,gridOptions:{rowHeight:25}}),this.resize()},i.prototype.afterRender=function(){return this.resize()},i.prototype.resize=function(){return this.$el.height(r(this.parent_div_str).height()),this.$el.width(r(this.parent_div_str).width()),this.setView(this.scroll_grid).render()},i.prototype.handleRowClickEvent=function(t){var e,n,i,o;return i=this.$(t.target).parents(".slick-row")[0],o=r(i).append("<div class='run-step-details'><div>")[0],e=this.collection.at(parseInt(r(this.$(i).find(".step")[0]).html())-1),n=new a({app:this.app,controller:null,run_step:e}),n.on("modalCloseEvent",this.handleModalCloseEvent)},i.prototype.handleDiffClickEvent=function(t){var e;return e={diff:!0,run_id:this.$(t.target).data("run_id"),node_id:this.$(t.target).data("node_id"),resource_index:this.$(t.target).data("run_step_index")},r.ajax(this.base_url+"/runs_query",{dataType:"json",data:e,success:function(t){return function(e){return e.diff_data.length<1?new s({app:t.app,collection:null,title:c("File Diff"),message:c("There was no content change for this resource.")}):new o({app:t.app,collection:null,title:c("File Diff"),message:null,diff:e.diff_data}).render()}}(this)})},i.prototype.handleModalCloseEvent=function(){return this.scroll_grid.resetSelection()},i.prototype.handleMouseOver=function(t){var e;return e=this.$(t.target).parents(".slick-row")[0],this.$(e).find(".click-here-div").eq(0).addClass("icon-eye-open"),this.$(e).find(".diff-button").eq(0).addClass("icon-file-alt")},i.prototype.handleMouseOut=function(t){var e;return e=this.$(t.target).parents(".slick-row")[0],this.$(e).find(".click-here-div").eq(0).removeClass("icon-eye-open"),this.$(e).find(".diff-button").eq(0).removeClass("icon-file-alt")},i.prototype.overrideParent=function(t){return t.preventDefault(),this.$(".selected").removeClass("selected")},i}(i.Layout)})}.call(this),define("templates/reporting/runs/details",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<div id="details_root"><div class="step_header"><div class="clearfix"><div class="node_text pull-left"><a'),buf.push(attrs({value:node_url,"class":"node_link"},{value:!0})),buf.push(">");var __val__=node;buf.push(escape(null==__val__?"":__val__)),buf.push('</a></div><div class="resource_details pull-right clearfix"><div class="pull-left">Resources (Executed / Total):</div><div id="resource_header" class="header_text pull-left">');var __val__=resource_summary;if(buf.push(escape(null==__val__?"":__val__)),buf.push('</div></div><div class="status_field pull-right clearfix"><div class="pull-left">Status:</div>'),"failure"===status){buf.push('<div id="status_field" class="header_text failure_text pull-left">');var __val__=status;buf.push(escape(null==__val__?"":__val__)),buf.push("</div>")}else if("success"===status){buf.push('<div id="status_field" class="header_text success_text pull-left">');var __val__=status;buf.push(escape(null==__val__?"":__val__)),buf.push("</div>")}else if("started"===status){buf.push('<div id="status_field" class="header_text running_text pull-left">');var __val__=status;buf.push(escape(null==__val__?"":__val__)),buf.push("</div>")}else if("aborted"===status){buf.push('<div id="status_field" class="header_text aborted_text pull-left">');var __val__=status;buf.push(escape(null==__val__?"":__val__)),buf.push("</div>")}else{buf.push('<div id="status_field" class="header_text pull-left">');var __val__=status;buf.push(escape(null==__val__?"":__val__)),buf.push("</div>")}buf.push('</div></div></div><hr/><div id="details_table" class="temp">Processing&hellip;<div class="details_table_content"></div></div></div>')}return buf.join("")}}),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function r(){this.constructor=t}for(var i in e)n.call(e,i)&&(t[i]=e[i]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},n={}.hasOwnProperty;define("views/reporting/runs/details",["require","jquery","b","models/run_step","collections/run_steps","views/reporting/run_steps/grid","views/controls/spinner","utils/i18n.gettext","underscore","router","j!reporting/runs/details"],function(n){var r,i,o,s,a,l,u,c,d,p,h;return r=n("jquery"),i=n("b"),o=n("models/run_step"),s=n("collections/run_steps"),a=n("views/reporting/run_steps/grid"),u=n("views/controls/spinner"),c=n("utils/i18n.gettext"),d=n("underscore"),p=n("router"),h=n("j!reporting/runs/details"),l=function(n){function i(){return this.errorServerResponse=t(this.errorServerResponse,this),this.successfulServerResponse=t(this.successfulServerResponse,this),this.resizeEvent=t(this.resizeEvent,this),this.resize=t(this.resize,this),i.__super__.constructor.apply(this,arguments)}return e(i,n),i.prototype.template=h,i.prototype.initialized=!1,i.prototype.initialize=function(){return this.app=this.options.app,this.timeout=500,this.baseUrl=this.app.organizations.last().url()+"/"+this.model.get("node_name"),this.nodeUrl=this.app.organizations.last().url()+"/nodes/"+this.model.get("node_name"),this.org=this.options.app.organizations.last(),this.collection=new s([],{organization:this.org}),d.bindAll(this,"resize"),this.resizeBound=!1},i.prototype.events={"click .node_link":"clickNodeLink"},i.prototype.clickNodeLink=function(t){return p.navigate(r(t.target).attr("value"),{trigger:!0})},i.prototype.onResize=function(){return this.resizeEvent()},i.prototype.resize=function(){return this.collection.length>0?(clearTimeout(this.timeout),this.timeout=setTimeout(function(t){return function(){return t.resizeEvent()}}(this),200)):void 0},i.prototype.resizeEvent=function(){var t,e;return t=38,r("#details_table").height(r(document).height()-r("#details_table").offset().top-r(".step_header").height()-t),e=40,r("#details_table").width(r(document).width()-r("#sidebar").width()-e),this.initialized?(this.step_grid.resize(),this.setView("#details_table",this.step_grid).render()):void 0},i.prototype.serialize=function(){return{node:this.model.get("node_name"),status:this.model.get("status"),resource_summary:this.model.get("resource_summary"),node_url:this.nodeUrl}},i.prototype.beforeRender=function(){return this.resizeBound?void 0:(r(window).bind("resize",this.resize),this.resizeBound=!0)},i.prototype.cleanup=function(){return this.resizeBound?(r(window).unbind("resize",this.resize),this.resizeEvent=!1):void 0},i.prototype.afterRender=function(){var t;return this.resizeEvent(),this.setView(".details_table_content",new u).render(),t={node_id:this.model.get("node_name"),details:!0,startTime:null,endTime:null,start_row:0,num_rows:20,run_id:this.model.id},this.collection.reset([]),this.collection.set_params(t),this.collection.fetch().then(this.successfulServerResponse,this.errorServerResponse)},i.prototype.successfulServerResponse=function(){return this.collection.length>0?(this.step_grid=new a({collection:this.collection,parent_div_str:"#details_table",app:this.app,run_id:this.run_id}),this.setView("#details_table",this.step_grid).render(),this.initialized=!0):this.$("#details_root").html(c("There were no resources executed for this run."))},i.prototype.errorServerResponse=function(t,e,n){var r;return r=404===t.status?"It looks like this node no longer exists":n,this.$("#details_root").html('<div class="alert alert-error empty"><i class="icon-warning-sign"></i>&nbsp;Error: '+r+".</div>")},i}(i.Layout)})}.call(this),define("templates/reporting/runs/error_log",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){if("failure"===status){buf.push('<div class="error_header"><div class="class_error">');var __val__=class_str;buf.push(escape(null==__val__?"":__val__)),buf.push('</div><div class="error_message">');var __val__=message;buf.push(escape(null==__val__?"":__val__)),buf.push('</div></div><div class="accordion_container"></div>')}else buf.push("There were no errors for this run.")}return buf.join("")}}),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function r(){this.constructor=t}for(var i in e)n.call(e,i)&&(t[i]=e[i]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},n={}.hasOwnProperty;define("views/reporting/runs/error_accordion",["require","views/controls/accordion"],function(n){var r,i;return r=n("views/controls/accordion"),i=function(n){function r(){return this.clickHeading=t(this.clickHeading,this),r.__super__.constructor.apply(this,arguments)}return e(r,n),r.prototype.initialize=function(){return this.multi=!0,this.allowClick=!0,r.__super__.initialize.call(this)},r.prototype.afterRender=function(){var t,e,n,r,i,o;for(r=this.sections,i=[],e=0,n=r.length;n>e;e++)o=r[e],t=o.$el.find(".collapse"),t.on("hidden",function(t){return function(){return t.allowClick=!0}}(this)),t.on("shown",function(t){return function(){return t.allowClick=!0}}(this)),t.on("show",function(t){return function(){t.allowClick=!1}}(this)),i.push(t.on("hide",function(t){return function(){t.allowClick=!1}}(this)));return i},r.prototype.clickHeading=function(t){var e;return this.allowClick?(r.__super__.clickHeading.apply(this,arguments),e=this.$(t.currentTarget).parents(".accordion-group"),this.$(t.currentTarget).find(".icon-div").toggleClass("icon-caret-right icon-caret-down")):void 0},r}(r)})}.call(this),define("templates/reporting/runs/details_accordion",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<div class="accordion-heading"><div class="accordion-toggle error-toggle"><div class="clearfix"><div class="icon-div icon-caret-right pull-left"></div><div class="heading pull-left">');var __val__="Description: "+body.title;buf.push(escape(null==__val__?"":__val__)),buf.push('</div></div></div></div><div class="accordion-body collapse">'),function(){if("number"==typeof body.sections.length)for(var t=0,e=body.sections.length;e>t;t++){var n=body.sections[t];(function(){if("number"==typeof n.length)for(var t=0,e=n.length;e>t;t++){var r=n[t];buf.push('<div class="error_heading">');var i=t;buf.push(escape(null==i?"":i)),buf.push('</div><div class="error_text"><pre class="error_pre_block">');var i=r;buf.push(escape(null==i?"":i)),buf.push("</pre></div>")}else for(var t in n){var r=n[t];buf.push('<div class="error_heading">');var i=t;buf.push(escape(null==i?"":i)),buf.push('</div><div class="error_text"><pre class="error_pre_block">');var i=r;buf.push(escape(null==i?"":i)),buf.push("</pre></div>")}}).call(this)}else for(var t in body.sections){var n=body.sections[t];(function(){if("number"==typeof n.length)for(var t=0,e=n.length;e>t;t++){var r=n[t];buf.push('<div class="error_heading">');var i=t;buf.push(escape(null==i?"":i)),buf.push('</div><div class="error_text"><pre class="error_pre_block">');var i=r;buf.push(escape(null==i?"":i)),buf.push("</pre></div>")}else for(var t in n){var r=n[t];buf.push('<div class="error_heading">');var i=t;buf.push(escape(null==i?"":i)),buf.push('</div><div class="error_text"><pre class="error_pre_block">');var i=r;buf.push(escape(null==i?"":i)),buf.push("</pre></div>")}}).call(this)}}.call(this),buf.push("</div>")}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/reporting/runs/error_details_accordion_section",["require","views/controls/accordion_section","j!reporting/runs/details_accordion"],function(e){var n,r,i;return n=e("views/controls/accordion_section"),i=e("j!reporting/runs/details_accordion"),r=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.initialize=function(){return this.body=this.options.body,n.__super__.initialize.apply(this,arguments)},n.prototype.template=i,n.prototype.serialize=function(){return{body:this.body}},n}(n)})}.call(this),define("templates/reporting/runs/stacktrace_accordion",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<div class="accordion-heading"><div class="accordion-toggle error-toggle"><div class="clearfix"><div class="icon-div icon-caret-right pull-left"></div><div class="heading float-left">Stacktrace</div></div></div></div><div class="accordion-body collapse"><pre>'),function(){if("number"==typeof body.length)for(var t=0,e=body.length;e>t;t++){var n=body[t];buf.push('<div class="errorline">'+escape(null==(interp=n)?"":interp)+"</div>")}else for(var t in body){var n=body[t];buf.push('<div class="errorline">'+escape(null==(interp=n)?"":interp)+"</div>")}}.call(this),buf.push("</pre></div>")}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/reporting/runs/stacktrace_accordion_section",["require","views/reporting/runs/error_details_accordion_section","j!reporting/runs/stacktrace_accordion"],function(e){var n,r,i;return n=e("views/reporting/runs/error_details_accordion_section"),i=e("j!reporting/runs/stacktrace_accordion"),r=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.template=i,n}(n)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/reporting/runs/error_log",["require","b","j!reporting/runs/error_log","utils/i18n.gettext","views/reporting/runs/error_accordion","views/reporting/runs/error_details_accordion_section","views/reporting/runs/stacktrace_accordion_section"],function(e){var n,r,i,o,s,a,l;return n=e("b"),l=e("j!reporting/runs/error_log"),a=e("utils/i18n.gettext"),r=e("views/reporting/runs/error_accordion"),i=e("views/reporting/runs/error_details_accordion_section"),s=e("views/reporting/runs/stacktrace_accordion_section"),o=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.template=l,n.prototype.serialize=function(){return"failure"===this.model.get("status")?{status:this.model.get("status"),class_str:this.model.get("data").exception["class"]+a(" had an error:"),message:this.model.get("data").exception.message}:void 0},n.prototype.afterRender=function(){var t;return"failure"===this.model.get("status")?(t=[],null!=this.model.get("data").exception.description.title&&t.push(new i({name:"error_details",body:this.model.get("data").exception.description})),t.push(new s({name:"error_stacktrace",body:this.model.get("data").exception.backtrace})),this.setView(".accordion_container",new r({parent:!1,sections:t})).render()):void 0},n}(n.Layout)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/reporting/runs/run_list",["require","b","views/controls/run_list","views/controls/empty","utils/i18n.gettext"],function(e){var n,r,i,o,s;return n=e("b"),i=e("views/controls/run_list"),r=e("views/controls/empty"),s=e("utils/i18n.gettext"),o=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.className="run-runlist runlist standalone panel",o.prototype.beforeRender=function(){var t,e,r,o,s,a,l,u;if(t=new n.Model({id:"_default"}),u=[],this.model.get("run_list").length>0){for(r=0,l=this.model.get("run_list"),o=0,s=l.length;s>o;o++)e=l[o],a={name:e[1],position:r,type:e[0]},u.push(a),"role"!==e[0]&&r++;return t.set("run_list",u),this.model.run_lists().push(t),this.setView(new i({collection:this.model.run_lists(),editable:!1}))}},o.prototype.afterRender=function(){return this.model.get("run_list").length>0?this.$("span.runlist-tree-version").html(""):this.setView(new r).render()},o}(n.Layout)
})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("controllers/runs",["require","controllers/base","collections/runs","views/reporting/runs/list","views/reporting/runs/details","views/reporting/runs/error_log","views/reporting/runs/run_list","utils/time","moment","utils/i18n","utils/i18n.gettext"],function(e){var n,r,i,o,s,a,l,u,c,d,p;return n=e("controllers/base"),i=e("collections/runs"),r=e("views/reporting/runs/list"),s=e("views/reporting/runs/details"),a=e("views/reporting/runs/error_log"),l=e("views/reporting/runs/run_list"),c=e("utils/time"),p=e("moment"),d=e("utils/i18n"),u=e("utils/i18n.gettext"),o=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.id="runs",n.prototype.messages={label:function(t){return d.ngettext("Run ID","Run History",null!=t?t:1)},selectEmpty:function(){return u("Please select a run")},selectMulti:function(){return u("%d runs selected")},showingAllObjects:function(){return u("Showing <strong>All Runs</strong>")},searchingObjects:function(){return u("Searching Runs...")},searchMessage:u("Search Runs"),showingNObjects:function(t){return d.sprintf(d.ngettext("Showing <strong>%d run</strong>","Showing <strong>%d runs</strong>",null!=t?t:1),t)}},n.prototype.listViewClass=r,n.prototype.tabs=[{id:"details",label:u("Details"),viewClass:s},{id:"run_list",label:u("Run List"),viewClass:l},{id:"error_log",label:u("Error Log"),viewClass:a}],n.prototype.checkAccess=function(t){return t||(t=this.app.organizations.last()),t.isFeatureEnabled("reporting")},n.prototype.routes={"organizations/:org/runs":"index","organizations/:org/runs/:id":"show.tab","organizations/:org/runs/:id/:tabId":"show.tab"},n.prototype.route_show=function(t,e){var n;return n=this.collection.get(e),this.collection.queryStatus.resting=!1,this.collection.set_time_params(n.get("start_time").zone(0).unix(),n.get("end_time").zone(0).unix()),null!=n?[n]:[]},n.prototype.route_index=function(t,e){var n,r,i,o,s,a;return this.collection.cleanServerApi(),i=p.utc().subtract("days",1).unix(),r=p.utc().unix(),null!=(null!=e?e.startTime:void 0)&&null!=(null!=e?e.endTime:void 0)?(a=parseInt(e.startTime,10),o=parseInt(e.endTime,10),n=this.app.currentOrg.reportingBillingTier(),s=p().diff(p.unix(a),"days"),"free"===n&&s>1&&(a=i,o=r)):(a=i,o=r),this.collection.set_time_params(a,o),null!=(null!=e?e.status:void 0)?this.collection.set_status_param(e.status):delete this.collection.server_api.status,null!=(null!=e?e.q:void 0)?this.collection.server_api.filter=e.q:delete this.collection.server_api.filter,null!=(null!=e?e.env:void 0)?this.collection.server_api.env=e.env:delete this.collection.server_api.env,this.collection.fetch({reset:!0}),[]},n.prototype.getCollection=function(t){var e,n;return e=null!=(n=t.runs)?n:new i},n}(n)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("controllers/reporting",["require","controllers/base","controllers/reporting_dashboard","controllers/runs","utils/i18n"],function(e){var n,r,i,o,s;return n=e("controllers/base"),i=e("controllers/reporting_dashboard"),o=e("controllers/runs"),s=e("utils/i18n"),r=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.id="reporting",n.prototype.messages={label:function(){return s.gettext("Reports")}},n.prototype.children=[i,o],n}(n)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/application/split_pane/empty_object",["require","b"],function(e){var n,r;return n=e("b"),r=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.className="object-oneline",n.prototype.template=function(t){return t.message},n.prototype.serialize=function(){return{message:this.options.message}},n}(n.Layout)})}.call(this),function(t){t.widget("ui.draggable",t.ui.mouse,{version:"1.10.3",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(e){var n=this.options;return this.helper||n.disabled||t(e.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(e),this.handle?(t(n.iframeFix===!0?"iframe":n.iframeFix).each(function(){t("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(t(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(e){var n=this.options;return this.helper=this._createHelper(e),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),this._setContainment(),this._trigger("start",e)===!1?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!n.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_mouseDrag:function(e,n){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),!n){var r=this._uiHash();if(this._trigger("drag",e,r)===!1)return this._mouseUp({}),!1;this.position=r.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var n=this,r=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(r=t.ui.ddmanager.drop(this,e)),this.dropped&&(r=this.dropped,this.dropped=!1),"original"!==this.options.helper||t.contains(this.element[0].ownerDocument,this.element[0])?("invalid"===this.options.revert&&!r||"valid"===this.options.revert&&r||this.options.revert===!0||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,r)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){n._trigger("stop",e)!==!1&&n._clear()}):this._trigger("stop",e)!==!1&&this._clear(),!1):!1},_mouseUp:function(e){return t("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(e){return this.options.handle?!!t(e.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(e){var n=this.options,r=t.isFunction(n.helper)?t(n.helper.apply(this.element[0],[e])):"clone"===n.helper?this.element.clone().removeAttr("id"):this.element;return r.parents("body").length||r.appendTo("parent"===n.appendTo?this.element[0].parentNode:n.appendTo),r[0]===this.element[0]||/(fixed|absolute)/.test(r.css("position"))||r.css("position","absolute"),r},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.element.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,n,r,i=this.options;return i.containment?"window"===i.containment?void(this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===i.containment?void(this.containment=[0,0,t(document).width()-this.helperProportions.width-this.margins.left,(t(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):i.containment.constructor===Array?void(this.containment=i.containment):("parent"===i.containment&&(i.containment=this.helper[0].parentNode),n=t(i.containment),r=n[0],void(r&&(e="hidden"!==n.css("overflow"),this.containment=[(parseInt(n.css("borderLeftWidth"),10)||0)+(parseInt(n.css("paddingLeft"),10)||0),(parseInt(n.css("borderTopWidth"),10)||0)+(parseInt(n.css("paddingTop"),10)||0),(e?Math.max(r.scrollWidth,r.offsetWidth):r.offsetWidth)-(parseInt(n.css("borderRightWidth"),10)||0)-(parseInt(n.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(r.scrollHeight,r.offsetHeight):r.offsetHeight)-(parseInt(n.css("borderBottomWidth"),10)||0)-(parseInt(n.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=n))):void(this.containment=null)},_convertPositionTo:function(e,n){n||(n=this.position);var r="absolute"===e?1:-1,i="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:i.scrollTop(),left:i.scrollLeft()}),{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*r,left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*r}},_generatePosition:function(e){var n,r,i,o,s=this.options,a="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=e.pageX,u=e.pageY;return this.offset.scroll||(this.offset.scroll={top:a.scrollTop(),left:a.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(r=this.relative_container.offset(),n=[this.containment[0]+r.left,this.containment[1]+r.top,this.containment[2]+r.left,this.containment[3]+r.top]):n=this.containment,e.pageX-this.offset.click.left<n[0]&&(l=n[0]+this.offset.click.left),e.pageY-this.offset.click.top<n[1]&&(u=n[1]+this.offset.click.top),e.pageX-this.offset.click.left>n[2]&&(l=n[2]+this.offset.click.left),e.pageY-this.offset.click.top>n[3]&&(u=n[3]+this.offset.click.top)),s.grid&&(i=s.grid[1]?this.originalPageY+Math.round((u-this.originalPageY)/s.grid[1])*s.grid[1]:this.originalPageY,u=n?i-this.offset.click.top>=n[1]||i-this.offset.click.top>n[3]?i:i-this.offset.click.top>=n[1]?i-s.grid[1]:i+s.grid[1]:i,o=s.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/s.grid[0])*s.grid[0]:this.originalPageX,l=n?o-this.offset.click.left>=n[0]||o-this.offset.click.left>n[2]?o:o-this.offset.click.left>=n[0]?o-s.grid[0]:o+s.grid[0]:o)),{top:u-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(e,n,r){return r=r||this._uiHash(),t.ui.plugin.call(this,e,[n,r]),"drag"===e&&(this.positionAbs=this._convertPositionTo("absolute")),t.Widget.prototype._trigger.call(this,e,n,r)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,n){var r=t(this).data("ui-draggable"),i=r.options,o=t.extend({},n,{item:r.element});r.sortables=[],t(i.connectToSortable).each(function(){var n=t.data(this,"ui-sortable");n&&!n.options.disabled&&(r.sortables.push({instance:n,shouldRevert:n.options.revert}),n.refreshPositions(),n._trigger("activate",e,o))})},stop:function(e,n){var r=t(this).data("ui-draggable"),i=t.extend({},n,{item:r.element});t.each(r.sortables,function(){this.instance.isOver?(this.instance.isOver=0,r.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(e),this.instance.options.helper=this.instance.options._helper,"original"===r.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",e,i))})},drag:function(e,n){var r=t(this).data("ui-draggable"),i=this;t.each(r.sortables,function(){var o=!1,s=this;this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(o=!0,t.each(r.sortables,function(){return this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this!==s&&this.instance._intersectsWith(this.instance.containerCache)&&t.contains(s.instance.element[0],this.instance.element[0])&&(o=!1),o})),o?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=t(i).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return n.helper[0]},e.target=this.instance.currentItem[0],this.instance._mouseCapture(e,!0),this.instance._mouseStart(e,!0,!0),this.instance.offset.click.top=r.offset.click.top,this.instance.offset.click.left=r.offset.click.left,this.instance.offset.parent.left-=r.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=r.offset.parent.top-this.instance.offset.parent.top,r._trigger("toSortable",e),r.dropped=this.instance.element,r.currentItem=r.element,this.instance.fromOutside=r),this.instance.currentItem&&this.instance._mouseDrag(e)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",e,this.instance._uiHash(this.instance)),this.instance._mouseStop(e,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),r._trigger("fromSortable",e),r.dropped=!1)})}}),t.ui.plugin.add("draggable","cursor",{start:function(){var e=t("body"),n=t(this).data("ui-draggable").options;e.css("cursor")&&(n._cursor=e.css("cursor")),e.css("cursor",n.cursor)},stop:function(){var e=t(this).data("ui-draggable").options;e._cursor&&t("body").css("cursor",e._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,n){var r=t(n.helper),i=t(this).data("ui-draggable").options;r.css("opacity")&&(i._opacity=r.css("opacity")),r.css("opacity",i.opacity)},stop:function(e,n){var r=t(this).data("ui-draggable").options;r._opacity&&t(n.helper).css("opacity",r._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(){var e=t(this).data("ui-draggable");e.scrollParent[0]!==document&&"HTML"!==e.scrollParent[0].tagName&&(e.overflowOffset=e.scrollParent.offset())},drag:function(e){var n=t(this).data("ui-draggable"),r=n.options,i=!1;n.scrollParent[0]!==document&&"HTML"!==n.scrollParent[0].tagName?(r.axis&&"x"===r.axis||(n.overflowOffset.top+n.scrollParent[0].offsetHeight-e.pageY<r.scrollSensitivity?n.scrollParent[0].scrollTop=i=n.scrollParent[0].scrollTop+r.scrollSpeed:e.pageY-n.overflowOffset.top<r.scrollSensitivity&&(n.scrollParent[0].scrollTop=i=n.scrollParent[0].scrollTop-r.scrollSpeed)),r.axis&&"y"===r.axis||(n.overflowOffset.left+n.scrollParent[0].offsetWidth-e.pageX<r.scrollSensitivity?n.scrollParent[0].scrollLeft=i=n.scrollParent[0].scrollLeft+r.scrollSpeed:e.pageX-n.overflowOffset.left<r.scrollSensitivity&&(n.scrollParent[0].scrollLeft=i=n.scrollParent[0].scrollLeft-r.scrollSpeed))):(r.axis&&"x"===r.axis||(e.pageY-t(document).scrollTop()<r.scrollSensitivity?i=t(document).scrollTop(t(document).scrollTop()-r.scrollSpeed):t(window).height()-(e.pageY-t(document).scrollTop())<r.scrollSensitivity&&(i=t(document).scrollTop(t(document).scrollTop()+r.scrollSpeed))),r.axis&&"y"===r.axis||(e.pageX-t(document).scrollLeft()<r.scrollSensitivity?i=t(document).scrollLeft(t(document).scrollLeft()-r.scrollSpeed):t(window).width()-(e.pageX-t(document).scrollLeft())<r.scrollSensitivity&&(i=t(document).scrollLeft(t(document).scrollLeft()+r.scrollSpeed)))),i!==!1&&t.ui.ddmanager&&!r.dropBehaviour&&t.ui.ddmanager.prepareOffsets(n,e)}}),t.ui.plugin.add("draggable","snap",{start:function(){var e=t(this).data("ui-draggable"),n=e.options;e.snapElements=[],t(n.snap.constructor!==String?n.snap.items||":data(ui-draggable)":n.snap).each(function(){var n=t(this),r=n.offset();this!==e.element[0]&&e.snapElements.push({item:this,width:n.outerWidth(),height:n.outerHeight(),top:r.top,left:r.left})})},drag:function(e,n){var r,i,o,s,a,l,u,c,d,p,h=t(this).data("ui-draggable"),f=h.options,g=f.snapTolerance,m=n.offset.left,v=m+h.helperProportions.width,y=n.offset.top,b=y+h.helperProportions.height;for(d=h.snapElements.length-1;d>=0;d--)a=h.snapElements[d].left,l=a+h.snapElements[d].width,u=h.snapElements[d].top,c=u+h.snapElements[d].height,a-g>v||m>l+g||u-g>b||y>c+g||!t.contains(h.snapElements[d].item.ownerDocument,h.snapElements[d].item)?(h.snapElements[d].snapping&&h.options.snap.release&&h.options.snap.release.call(h.element,e,t.extend(h._uiHash(),{snapItem:h.snapElements[d].item})),h.snapElements[d].snapping=!1):("inner"!==f.snapMode&&(r=Math.abs(u-b)<=g,i=Math.abs(c-y)<=g,o=Math.abs(a-v)<=g,s=Math.abs(l-m)<=g,r&&(n.position.top=h._convertPositionTo("relative",{top:u-h.helperProportions.height,left:0}).top-h.margins.top),i&&(n.position.top=h._convertPositionTo("relative",{top:c,left:0}).top-h.margins.top),o&&(n.position.left=h._convertPositionTo("relative",{top:0,left:a-h.helperProportions.width}).left-h.margins.left),s&&(n.position.left=h._convertPositionTo("relative",{top:0,left:l}).left-h.margins.left)),p=r||i||o||s,"outer"!==f.snapMode&&(r=Math.abs(u-y)<=g,i=Math.abs(c-b)<=g,o=Math.abs(a-m)<=g,s=Math.abs(l-v)<=g,r&&(n.position.top=h._convertPositionTo("relative",{top:u,left:0}).top-h.margins.top),i&&(n.position.top=h._convertPositionTo("relative",{top:c-h.helperProportions.height,left:0}).top-h.margins.top),o&&(n.position.left=h._convertPositionTo("relative",{top:0,left:a}).left-h.margins.left),s&&(n.position.left=h._convertPositionTo("relative",{top:0,left:l-h.helperProportions.width}).left-h.margins.left)),!h.snapElements[d].snapping&&(r||i||o||s||p)&&h.options.snap.snap&&h.options.snap.snap.call(h.element,e,t.extend(h._uiHash(),{snapItem:h.snapElements[d].item})),h.snapElements[d].snapping=r||i||o||s||p)}}),t.ui.plugin.add("draggable","stack",{start:function(){var e,n=this.data("ui-draggable").options,r=t.makeArray(t(n.stack)).sort(function(e,n){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(n).css("zIndex"),10)||0)});r.length&&(e=parseInt(t(r[0]).css("zIndex"),10)||0,t(r).each(function(n){t(this).css("zIndex",e+n)}),this.css("zIndex",e+r.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,n){var r=t(n.helper),i=t(this).data("ui-draggable").options;r.css("zIndex")&&(i._zIndex=r.css("zIndex")),r.css("zIndex",i.zIndex)},stop:function(e,n){var r=t(this).data("ui-draggable").options;r._zIndex&&t(n.helper).css("zIndex",r._zIndex)}})}(jQuery),define("jquery.ui/draggable",["jquery","jquery.ui/core","jquery.ui/widget","jquery.ui/mouse"],function(t){return function(){var e;return e||t.jQuery.ui.draggable}}(this)),function($){var min=Math.min,max=Math.max,round=Math.floor,isStr=function(t){return"string"===$.type(t)},runPluginCallbacks=function(Instance,a_fn){function g(t){return t}if($.isArray(a_fn))for(var i=0,c=a_fn.length;c>i;i++){var fn=a_fn[i];try{isStr(fn)&&(fn=eval(fn)),$.isFunction(fn)&&g(fn)(Instance)}catch(ex){}}};$.layout={version:"1.3.rc30.79",revision:.033007,browser:{},effects:{slide:{all:{duration:"fast"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},west:{direction:"left"}},drop:{all:{duration:"slow"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},west:{direction:"left"}},scale:{all:{duration:"fast"}},blind:{},clip:{},explode:{},fade:{},fold:{},puff:{},size:{all:{easing:"swing"}}},config:{optionRootKeys:"effects,panes,north,south,west,east,center".split(","),allPanes:"north,south,west,east,center".split(","),borderPanes:"north,south,west,east".split(","),oppositeEdge:{north:"south",south:"north",east:"west",west:"east"},offscreenCSS:{left:"-99999px",right:"auto"},offscreenReset:"offscreenReset",hidden:{visibility:"hidden"},visible:{visibility:"visible"},resizers:{cssReq:{position:"absolute",padding:0,margin:0,fontSize:"1px",textAlign:"left",overflow:"hidden"},cssDemo:{background:"#DDD",border:"none"}},togglers:{cssReq:{position:"absolute",display:"block",padding:0,margin:0,overflow:"hidden",textAlign:"center",fontSize:"1px",cursor:"pointer",zIndex:1},cssDemo:{background:"#AAA"}},content:{cssReq:{position:"relative"},cssDemo:{overflow:"auto",padding:"10px"},cssDemoPane:{overflow:"hidden",padding:0}},panes:{cssReq:{position:"absolute",margin:0},cssDemo:{padding:"10px",background:"#FFF",border:"1px solid #BBB",overflow:"auto"}},north:{side:"top",sizeType:"Height",dir:"horz",cssReq:{top:0,bottom:"auto",left:0,right:0,width:"auto"}},south:{side:"bottom",sizeType:"Height",dir:"horz",cssReq:{top:"auto",bottom:0,left:0,right:0,width:"auto"}},east:{side:"right",sizeType:"Width",dir:"vert",cssReq:{left:"auto",right:0,top:"auto",bottom:"auto",height:"auto"}},west:{side:"left",sizeType:"Width",dir:"vert",cssReq:{left:0,right:"auto",top:"auto",bottom:"auto",height:"auto"}},center:{dir:"center",cssReq:{left:"auto",right:"auto",top:"auto",bottom:"auto",height:"auto",width:"auto"}}},callbacks:{},getParentPaneElem:function(t){var e=$(t),n=e.data("layout")||e.data("parentLayout");if(n){var r=n.container;if(r.data("layoutPane"))return r;var i=r.closest("."+$.layout.defaults.panes.paneClass);if(i.data("layoutPane"))return i}return null},getParentPaneInstance:function(t){var e=$.layout.getParentPaneElem(t);return e?e.data("layoutPane"):null},getParentLayoutInstance:function(t){var e=$.layout.getParentPaneElem(t);return e?e.data("parentLayout"):null},getEventObject:function(t){return"object"==typeof t&&t.stopPropagation?t:null},parsePaneName:function(t){var e=$.layout.getEventObject(t),n=t;return e&&(e.stopPropagation(),n=$(this).data("layoutEdge")),n&&!/^(west|east|north|south|center)$/.test(n)&&($.layout.msg('LAYOUT ERROR - Invalid pane-name: "'+n+'"'),n="error"),n},plugins:{draggable:!!$.fn.draggable,effects:{core:!!$.effects,slide:$.effects&&($.effects.slide||$.effects.effect&&$.effects.effect.slide)}},onCreate:[],onLoad:[],onReady:[],onDestroy:[],onUnload:[],afterOpen:[],afterClose:[],scrollbarWidth:function(){return window.scrollbarWidth||$.layout.getScrollbarSize("width")},scrollbarHeight:function(){return window.scrollbarHeight||$.layout.getScrollbarSize("height")},getScrollbarSize:function(t){var e=$('<div style="position: absolute; top: -10000px; left: -10000px; width: 100px; height: 100px; overflow: scroll;"></div>').appendTo("body"),n={width:e.css("width")-e[0].clientWidth,height:e.height()-e[0].clientHeight};return e.remove(),window.scrollbarWidth=n.width,window.scrollbarHeight=n.height,t.match(/^(width|height)$/)?n[t]:n},showInvisibly:function(t,e){if(t&&t.length&&(e||"none"===t.css("display"))){var n=t[0].style,r={display:n.display||"",visibility:n.visibility||""};return t.css({display:"block",visibility:"hidden"}),r}return{}},getElementDimensions:function(t,e){var n,r,i,o={css:{},inset:{}},s=o.css,a={bottom:0},l=$.layout.cssNum,u=t.offset();return o.offsetLeft=u.left,o.offsetTop=u.top,e||(e={}),$.each("Left,Right,Top,Bottom".split(","),function(l,u){n=s["border"+u]=$.layout.borderWidth(t,u),r=s["padding"+u]=$.layout.cssNum(t,"padding"+u),i=u.toLowerCase(),o.inset[i]=e[i]>=0?e[i]:r,a[i]=o.inset[i]+n}),s.width=t.width(),s.height=t.height(),s.top=l(t,"top",!0),s.bottom=l(t,"bottom",!0),s.left=l(t,"left",!0),s.right=l(t,"right",!0),o.outerWidth=t.outerWidth(),o.outerHeight=t.outerHeight(),o.innerWidth=max(0,o.outerWidth-a.left-a.right),o.innerHeight=max(0,o.outerHeight-a.top-a.bottom),o.layoutWidth=t.innerWidth(),o.layoutHeight=t.innerHeight(),o},getElementStyles:function(t,e){var n,r,i,o,s,a,l={},u=t[0].style,c=e.split(","),d="Top,Bottom,Left,Right".split(","),p="Color,Style,Width".split(",");for(o=0;o<c.length;o++)if(n=c[o],n.match(/(border|padding|margin)$/))for(s=0;4>s;s++)if(r=d[s],"border"===n)for(a=0;3>a;a++)i=p[a],l[n+r+i]=u[n+r+i];else l[n+r]=u[n+r];else l[n]=u[n];return l},cssWidth:function(t,e){if(0>=e)return 0;var n=$.layout.browser.boxModel?$.support.boxSizing?t.css("boxSizing"):"content-box":"border-box",r=$.layout.borderWidth,i=$.layout.cssNum,o=e;return"border-box"!==n&&(o-=r(t,"Left")+r(t,"Right")),"content-box"===n&&(o-=i(t,"paddingLeft")+i(t,"paddingRight")),max(0,o)},cssHeight:function(t,e){if(0>=e)return 0;var n=$.layout.browser.boxModel?$.support.boxSizing?t.css("boxSizing"):"content-box":"border-box",r=$.layout.borderWidth,i=$.layout.cssNum,o=e;return"border-box"!==n&&(o-=r(t,"Top")+r(t,"Bottom")),"content-box"===n&&(o-=i(t,"paddingTop")+i(t,"paddingBottom")),max(0,o)},cssNum:function(t,e,n){t.jquery||(t=$(t));var r=$.layout.showInvisibly(t),i=$.css(t[0],e,!0),o=n&&"auto"==i?i:Math.round(parseFloat(i)||0);return t.css(r),o},borderWidth:function(t,e){t.jquery&&(t=t[0]);var n="border"+e.substr(0,1).toUpperCase()+e.substr(1);return"none"===$.css(t,n+"Style",!0)?0:Math.round(parseFloat($.css(t,n+"Width",!0))||0)},isMouseOverElem:function(t,e){var n=$(e||this),r=n.offset(),i=r.top,o=r.left,s=o+n.outerWidth(),a=i+n.outerHeight(),l=t.pageX,u=t.pageY;return $.layout.browser.msie&&0>l&&0>u||l>=o&&s>=l&&u>=i&&a>=u},msg:function(t,e,n,r){function i(){var t=$.support.fixedPosition?"fixed":"absolute",e=$('<div id="layoutLogger" style="position: '+t+'; top: 5px; z-index: 999999; max-width: 25%; overflow: hidden; border: 1px solid #000; border-radius: 5px; background: #FBFBFB; box-shadow: 0 2px 10px rgba(0,0,0,0.3);"><div style="font-size: 13px; font-weight: bold; padding: 5px 10px; background: #F6F6F6; border-radius: 5px 5px 0 0; cursor: move;"><span style="float: right; padding-left: 7px; cursor: pointer;" title="Remove Console" onclick="$(this).closest(\'#layoutLogger\').remove()">X</span>Layout console.log</div><ul style="font-size: 13px; font-weight: none; list-style: none; margin: 0; padding: 0 0 2px;"></ul></div>').appendTo("body");return e.css("left",$(window).width()-e.outerWidth()-5),$.ui.draggable&&e.draggable({handle:":first-child"}),e}if($.isPlainObject(t)&&window.debugData){"string"==typeof e?(r=n,n=e):"object"==typeof n&&(r=n,n=null);var o=n||"log( <object> )",s=$.extend({sort:!1,returnHTML:!1,display:!1},r);e===!0||s.display?debugData(t,o,s):window.console&&console.log(debugData(t,o,s))}else if(e)alert(t);else if(window.console)console.log(t);else{var a="#layoutLogger",l=$(a);l.length||(l=i()),l.children("ul").append('<li style="padding: 4px 10px; margin: 0; border-top: 1px solid #CCC;">'+t.replace(/\</g,"&lt;").replace(/\>/g,"&gt;")+"</li>")}}};var u=navigator.userAgent.toLowerCase(),m=/(chrome)[ \/]([\w.]+)/.exec(u)||/(webkit)[ \/]([\w.]+)/.exec(u)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(u)||/(msie) ([\w.]+)/.exec(u)||u.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(u)||[],b=m[1]||"",v=m[2]||0,ie="msie"===b;$.layout.browser={version:v,safari:"webkit"===b,webkit:"chrome"===b,msie:ie,isIE6:ie&&6==v,boxModel:!ie||$.support.boxModel!==!1},b&&($.layout.browser[b]=!0),ie&&$(function(){$.layout.browser.boxModel=$.support.boxModel}),$.layout.defaults={name:"",containerClass:"ui-layout-container",inset:null,scrollToBookmarkOnLoad:!0,resizeWithWindow:!0,resizeWithWindowDelay:200,resizeWithWindowMaxDelay:0,maskPanesEarly:!1,onresizeall_start:null,onresizeall_end:null,onload_start:null,onload_end:null,onunload_start:null,onunload_end:null,initPanes:!0,showErrorMessages:!0,showDebugMessages:!1,zIndex:null,zIndexes:{pane_normal:0,content_mask:1,resizer_normal:2,pane_sliding:100,pane_animate:1e3,resizer_drag:1e4},errors:{pane:"pane",selector:"selector",addButtonError:"Error Adding Button\nInvalid ",containerMissing:"UI Layout Initialization Error\nThe specified layout-container does not exist.",centerPaneMissing:"UI Layout Initialization Error\nThe center-pane element does not exist.\nThe center-pane is a required element.",noContainerHeight:"UI Layout Initialization Warning\nThe layout-container \"CONTAINER\" has no height.\nTherefore the layout is 0-height and hence 'invisible'!",callbackError:"UI Layout Callback Error\nThe EVENT callback is not a valid function."},panes:{applyDemoStyles:!1,closable:!0,resizable:!0,slidable:!0,initClosed:!1,initHidden:!1,contentSelector:".ui-layout-content",contentIgnoreSelector:".ui-layout-ignore",findNestedContent:!1,paneClass:"ui-layout-pane",resizerClass:"ui-layout-resizer",togglerClass:"ui-layout-toggler",buttonClass:"ui-layout-button",minSize:0,maxSize:0,spacing_open:6,spacing_closed:6,togglerLength_open:50,togglerLength_closed:50,togglerAlign_open:"center",togglerAlign_closed:"center",togglerContent_open:"",togglerContent_closed:"",resizerDblClickToggle:!0,autoResize:!0,autoReopen:!0,resizerDragOpacity:1,maskContents:!1,maskObjects:!1,maskZindex:null,resizingGrid:!1,livePaneResizing:!1,liveContentResizing:!1,liveResizingTolerance:1,sliderCursor:"pointer",slideTrigger_open:"click",slideTrigger_close:"mouseleave",slideDelay_open:300,slideDelay_close:300,hideTogglerOnSlide:!1,preventQuickSlideClose:$.layout.browser.webkit,preventPrematureSlideClose:!1,tips:{Open:"Open",Close:"Close",Resize:"Resize",Slide:"Slide Open",Pin:"Pin",Unpin:"Un-Pin",noRoomToOpen:"Not enough room to show this panel.",minSizeWarning:"Panel has reached its minimum size",maxSizeWarning:"Panel has reached its maximum size"},showOverflowOnHover:!1,enableCursorHotkey:!0,customHotkeyModifier:"SHIFT",fxName:"slide",fxSpeed:null,fxSettings:{},fxOpacityFix:!0,animatePaneSizing:!1,children:null,containerSelector:"",initChildren:!0,destroyChildren:!0,resizeChildren:!0,triggerEventsOnLoad:!1,triggerEventsDuringLiveResize:!0,onshow_start:null,onshow_end:null,onhide_start:null,onhide_end:null,onopen_start:null,onopen_end:null,onclose_start:null,onclose_end:null,onresize_start:null,onresize_end:null,onsizecontent_start:null,onsizecontent_end:null,onswap_start:null,onswap_end:null,ondrag_start:null,ondrag_end:null},north:{paneSelector:".ui-layout-north",size:"auto",resizerCursor:"n-resize",customHotkey:""},south:{paneSelector:".ui-layout-south",size:"auto",resizerCursor:"s-resize",customHotkey:""},east:{paneSelector:".ui-layout-east",size:200,resizerCursor:"e-resize",customHotkey:""},west:{paneSelector:".ui-layout-west",size:200,resizerCursor:"w-resize",customHotkey:""},center:{paneSelector:".ui-layout-center",minWidth:0,minHeight:0}},$.layout.optionsMap={layout:"name,instanceKey,stateManagement,effects,inset,zIndexes,errors,zIndex,scrollToBookmarkOnLoad,showErrorMessages,maskPanesEarly,outset,resizeWithWindow,resizeWithWindowDelay,resizeWithWindowMaxDelay,onresizeall,onresizeall_start,onresizeall_end,onload,onload_start,onload_end,onunload,onunload_start,onunload_end".split(","),center:"paneClass,contentSelector,contentIgnoreSelector,findNestedContent,applyDemoStyles,triggerEventsOnLoad,showOverflowOnHover,maskContents,maskObjects,liveContentResizing,containerSelector,children,initChildren,resizeChildren,destroyChildren,onresize,onresize_start,onresize_end,onsizecontent,onsizecontent_start,onsizecontent_end".split(","),noDefault:"paneSelector,resizerCursor,customHotkey".split(",")},$.layout.transformData=function(t,e){var n,r,i,o,s,a,l,u=e?{panes:{},center:{}}:{};
if("object"!=typeof t)return u;for(r in t)for(n=u,s=t[r],i=r.split("__"),l=i.length-1,a=0;l>=a;a++)o=i[a],a===l?n[o]=$.isPlainObject(s)?$.layout.transformData(s):s:(n[o]||(n[o]={}),n=n[o]);return u},$.layout.backwardCompatibility={map:{applyDefaultStyles:"applyDemoStyles",childOptions:"children",initChildLayout:"initChildren",destroyChildLayout:"destroyChildren",resizeChildLayout:"resizeChildren",resizeNestedLayout:"resizeChildren",resizeWhileDragging:"livePaneResizing",resizeContentWhileDragging:"liveContentResizing",triggerEventsWhileDragging:"triggerEventsDuringLiveResize",maskIframesOnResize:"maskContents",useStateCookie:"stateManagement.enabled","cookie.autoLoad":"stateManagement.autoLoad","cookie.autoSave":"stateManagement.autoSave","cookie.keys":"stateManagement.stateKeys","cookie.name":"stateManagement.cookie.name","cookie.domain":"stateManagement.cookie.domain","cookie.path":"stateManagement.cookie.path","cookie.expires":"stateManagement.cookie.expires","cookie.secure":"stateManagement.cookie.secure",noRoomToOpenTip:"tips.noRoomToOpen",togglerTip_open:"tips.Close",togglerTip_closed:"tips.Open",resizerTip:"tips.Resize",sliderTip:"tips.Slide"},renameOptions:function(t){function e(e,n){for(var r,i=e.split("."),o=i.length-1,s={branch:t,key:i[o]},a=0;o>a;a++)r=i[a],s.branch=void 0==s.branch[r]?n?s.branch[r]={}:{}:s.branch[r];return s}var n,r,i,o=$.layout.backwardCompatibility.map;for(var s in o)n=e(s),i=n.branch[n.key],void 0!==i&&(r=e(o[s],!0),r.branch[r.key]=i,delete n.branch[n.key])},renameAllOptions:function(t){var e=$.layout.backwardCompatibility.renameOptions;return e(t),t.defaults&&("object"!=typeof t.panes&&(t.panes={}),$.extend(!0,t.panes,t.defaults),delete t.defaults),t.panes&&e(t.panes),$.each($.layout.config.allPanes,function(n,r){t[r]&&e(t[r])}),t}},$.fn.layout=function(opts){function keyDown(t){if(!t)return!0;var e=t.keyCode;if(33>e)return!0;var n,r,i,o,s={38:"north",40:"south",37:"west",39:"east"},a=(t.altKey,t.shiftKey),l=t.ctrlKey,u=l&&e>=37&&40>=e;return u&&options[s[e]].enableCursorHotkey?o=s[e]:(l||a)&&$.each(_c.borderPanes,function(t,s){return n=options[s],r=n.customHotkey,i=n.customHotkeyModifier,(a&&"SHIFT"==i||l&&"CTRL"==i||l&&a)&&r&&e===(isNaN(r)||9>=r?r.toUpperCase().charCodeAt(0):r)?(o=s,!1):void 0}),o&&$Ps[o]&&options[o].closable&&!state[o].isHidden?(toggle(o),t.stopPropagation(),t.returnValue=!1,!1):!0}function allowOverflow(t){if(isInitialized()){this&&this.tagName&&(t=this);var e;if(isStr(t)?e=$Ps[t]:$(t).data("layoutRole")?e=$(t):$(t).parents().each(function(){return $(this).data("layoutRole")?(e=$(this),!1):void 0}),e&&e.length){var n=e.data("layoutEdge"),r=state[n];if(r.cssSaved&&resetOverflow(n),r.isSliding||r.isResizing||r.isClosed)return void(r.cssSaved=!1);var i={zIndex:options.zIndexes.resizer_normal+1},o={},s=e.css("overflow"),a=e.css("overflowX"),l=e.css("overflowY");"visible"!=s&&(o.overflow=s,i.overflow="visible"),a&&!a.match(/(visible|auto)/)&&(o.overflowX=a,i.overflowX="visible"),l&&!l.match(/(visible|auto)/)&&(o.overflowY=a,i.overflowY="visible"),r.cssSaved=o,e.css(i),$.each(_c.allPanes,function(t,e){e!=n&&resetOverflow(e)})}}}function resetOverflow(t){if(isInitialized()){this&&this.tagName&&(t=this);var e;if(isStr(t)?e=$Ps[t]:$(t).data("layoutRole")?e=$(t):$(t).parents().each(function(){return $(this).data("layoutRole")?(e=$(this),!1):void 0}),e&&e.length){var n=e.data("layoutEdge"),r=state[n],i=r.cssSaved||{};r.isSliding||r.isResizing||e.css("zIndex",options.zIndexes.pane_normal),e.css(i),r.cssSaved=!1}}}var browser=$.layout.browser,_c=$.layout.config,cssW=$.layout.cssWidth,cssH=$.layout.cssHeight,elDims=$.layout.getElementDimensions,styles=$.layout.getElementStyles,evtObj=$.layout.getEventObject,evtPane=$.layout.parsePaneName,options=$.extend(!0,{},$.layout.defaults),effects=options.effects=$.extend(!0,{},$.layout.effects),state={id:"layout"+$.now(),initialized:!1,paneResizing:!1,panesSliding:{},container:{innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0,layoutWidth:0,layoutHeight:0},north:{childIdx:0},south:{childIdx:0},east:{childIdx:0},west:{childIdx:0},center:{childIdx:0}},children={north:null,south:null,east:null,west:null,center:null},timer={data:{},set:function(t,e,n){timer.clear(t),timer.data[t]=setTimeout(e,n)},clear:function(t){var e=timer.data;e[t]&&(clearTimeout(e[t]),delete e[t])}},_log=function(t,e,n){var r=options;return(r.showErrorMessages&&!n||n&&r.showDebugMessages)&&$.layout.msg(r.name+" / "+t,e!==!1),!1},_runCallbacks=function(evtName,pane,skipBoundEvents){function g(t){return t}var hasPane=pane&&isStr(pane),s=hasPane?state[pane]:state,o=hasPane?options[pane]:options,lName=options.name,lng=evtName+(evtName.match(/_/)?"":"_end"),shrt=lng.match(/_end$/)?lng.substr(0,lng.length-4):"",fn=o[lng]||o[shrt],retVal="NC",args=[],$P;if(hasPane||"boolean"!==$.type(pane)||(skipBoundEvents=pane,pane=""),fn)try{isStr(fn)&&(fn.match(/,/)?(args=fn.split(","),fn=eval(args[0])):fn=eval(fn)),$.isFunction(fn)&&(retVal=args.length?g(fn)(args[1]):hasPane?g(fn)(pane,$Ps[pane],s,o,lName):g(fn)(Instance,s,o,lName))}catch(ex){_log(options.errors.callbackError.replace(/EVENT/,$.trim((pane||"")+" "+lng)),!1),"string"===$.type(ex)&&string.length&&_log("Exception:  "+ex,!1)}return skipBoundEvents||retVal===!1||(hasPane?($P=$Ps[pane],o=options[pane],s=state[pane],$P.triggerHandler("layoutpane"+lng,[pane,$P,s,o,lName]),shrt&&$P.triggerHandler("layoutpane"+shrt,[pane,$P,s,o,lName])):($N.triggerHandler("layout"+lng,[Instance,s,o,lName]),shrt&&$N.triggerHandler("layout"+shrt,[Instance,s,o,lName]))),hasPane&&"onresize_end"===evtName&&resizeChildren(pane+"",!0),retVal},_fixIframe=function(t){if(!browser.mozilla){var e=$Ps[t];"IFRAME"===state[t].tagName?e.css(_c.hidden).css(_c.visible):e.find("IFRAME").css(_c.hidden).css(_c.visible)}},cssSize=function(t,e){var n="horz"==_c[t].dir?cssH:cssW;return n($Ps[t],e)},cssMinDims=function(t){var e=$Ps[t],n=_c[t].dir,r={minWidth:1001-cssW(e,1e3),minHeight:1001-cssH(e,1e3)};return"horz"===n&&(r.minSize=r.minHeight),"vert"===n&&(r.minSize=r.minWidth),r},setOuterWidth=function(t,e,n){var r,i=t;isStr(t)?i=$Ps[t]:t.jquery||(i=$(t)),r=cssW(i,e),i.css({width:r}),r>0?n&&i.data("autoHidden")&&i.innerHeight()>0&&(i.show().data("autoHidden",!1),browser.mozilla||i.css(_c.hidden).css(_c.visible)):n&&!i.data("autoHidden")&&i.hide().data("autoHidden",!0)},setOuterHeight=function(t,e,n){var r,i=t;isStr(t)?i=$Ps[t]:t.jquery||(i=$(t)),r=cssH(i,e),i.css({height:r,visibility:"visible"}),r>0&&i.innerWidth()>0?n&&i.data("autoHidden")&&(i.show().data("autoHidden",!1),browser.mozilla||i.css(_c.hidden).css(_c.visible)):n&&!i.data("autoHidden")&&i.hide().data("autoHidden",!0)},_parseSize=function(t,e,n){if(n||(n=_c[t].dir),isStr(e)&&e.match(/%/)&&(e="100%"===e?-1:parseInt(e,10)/100),0===e)return 0;if(e>=1)return parseInt(e,10);var r=options,i=0;if("horz"==n?i=sC.innerHeight-($Ps.north?r.north.spacing_open:0)-($Ps.south?r.south.spacing_open:0):"vert"==n&&(i=sC.innerWidth-($Ps.west?r.west.spacing_open:0)-($Ps.east?r.east.spacing_open:0)),-1===e)return i;if(e>0)return round(i*e);if("center"==t)return 0;var o="horz"===n?"height":"width",s=$Ps[t],a="height"===o?$Cs[t]:!1,l=$.layout.showInvisibly(s),u=s.css(o),c=a?a.css(o):0;return s.css(o,"auto"),a&&a.css(o,"auto"),e="height"===o?s.outerHeight():s.outerWidth(),s.css(o,u).css(l),a&&a.css(o,c),e},getPaneSize=function(t,e){var n=$Ps[t],r=options[t],i=state[t],o=e?r.spacing_open:0,s=e?r.spacing_closed:0;return!n||i.isHidden?0:i.isClosed||i.isSliding&&e?s:"horz"===_c[t].dir?n.outerHeight()+o:n.outerWidth()+o},setSizeLimits=function(t,e){if(isInitialized()){var n=options[t],r=state[t],i=_c[t],o=i.dir,s=(i.sizeType.toLowerCase(),void 0!=e?e:r.isSliding),a=($Ps[t],n.spacing_open),l=_c.oppositeEdge[t],u=state[l],c=$Ps[l],d=!c||u.isVisible===!1||u.isSliding?0:"horz"==o?c.outerHeight():c.outerWidth(),p=(!c||u.isHidden?0:options[l][u.isClosed!==!1?"spacing_closed":"spacing_open"])||0,h="horz"==o?sC.innerHeight:sC.innerWidth,f=cssMinDims("center"),g="horz"==o?max(options.center.minHeight,f.minHeight):max(options.center.minWidth,f.minWidth),m=h-a-(s?0:_parseSize("center",g,o)+d+p),v=r.minSize=max(_parseSize(t,n.minSize),cssMinDims(t).minSize),y=r.maxSize=min(n.maxSize?_parseSize(t,n.maxSize):1e5,m),b=r.resizerPosition={},_=sC.inset.top,w=sC.inset.left,x=sC.innerWidth,k=sC.innerHeight,C=n.spacing_open;switch(t){case"north":b.min=_+v,b.max=_+y;break;case"west":b.min=w+v,b.max=w+y;break;case"south":b.min=_+k-y-C,b.max=_+k-v-C;break;case"east":b.min=w+x-y-C,b.max=w+x-v-C}}},calcNewCenterPaneDims=function(){var t={top:getPaneSize("north",!0),bottom:getPaneSize("south",!0),left:getPaneSize("west",!0),right:getPaneSize("east",!0),width:0,height:0};return t.width=sC.innerWidth-t.left-t.right,t.height=sC.innerHeight-t.bottom-t.top,t.top+=sC.inset.top,t.bottom+=sC.inset.bottom,t.left+=sC.inset.left,t.right+=sC.inset.right,t},getHoverClasses=function(t,e){var n=$(t),r=n.data("layoutRole"),i=n.data("layoutEdge"),o=options[i],s=o[r+"Class"],a="-"+i,l="-open",u="-closed",c="-sliding",d="-hover ",p=n.hasClass(s+u)?u:l,h=p===u?l:u,f=s+d+(s+a+d)+(s+p+d)+(s+a+p+d);return e&&(f+=s+h+d+(s+a+h+d)),"resizer"==r&&n.hasClass(s+c)&&(f+=s+c+d+(s+a+c+d)),$.trim(f)},addHover=function(t,e){var n=$(e||this);t&&"toggler"===n.data("layoutRole")&&t.stopPropagation(),n.addClass(getHoverClasses(n))},removeHover=function(t,e){var n=$(e||this);n.removeClass(getHoverClasses(n,!0))},onResizerEnter=function(){var t=$(this).data("layoutEdge"),e=state[t];e.isClosed||e.isResizing||state.paneResizing||($.fn.disableSelection&&$("body").disableSelection(),options.maskPanesEarly&&showMasks(t,{resizing:!0}))},onResizerLeave=function(t,e){var n=e||this,r=$(n).data("layoutEdge"),i=r+"ResizerLeave";timer.clear(r+"_openSlider"),timer.clear(i),e?state.paneResizing||($.fn.enableSelection&&$("body").enableSelection(),options.maskPanesEarly&&hideMasks()):timer.set(i,function(){onResizerLeave(t,n)},200)},_create=function(){initOptions();var t=options,e=state;return e.creatingLayout=!0,runPluginCallbacks(Instance,$.layout.onCreate),!1===_runCallbacks("onload_start")?"cancel":(_initContainer(),initHotkeys(),$(window).bind("unload."+sID,unload),runPluginCallbacks(Instance,$.layout.onLoad),t.initPanes&&_initLayoutElements(),delete e.creatingLayout,state.initialized)},isInitialized=function(){return state.initialized||state.creatingLayout?!0:_initLayoutElements()},_initLayoutElements=function(t){var e=options;if(!$N.is(":visible"))return!t&&browser.webkit&&"BODY"===$N[0].tagName&&setTimeout(function(){_initLayoutElements(!0)},50),!1;if(!getPane("center").length)return _log(e.errors.centerPaneMissing);if(state.creatingLayout=!0,$.extend(sC,elDims($N,e.inset)),initPanes(),e.scrollToBookmarkOnLoad){var n=self.location;n.hash&&n.replace(n.hash)}return Instance.hasParentLayout?e.resizeWithWindow=!1:e.resizeWithWindow&&$(window).bind("resize."+sID,windowResize),delete state.creatingLayout,state.initialized=!0,runPluginCallbacks(Instance,$.layout.onReady),_runCallbacks("onload_end"),!0},createChildren=function(t,e){var n=evtPane.call(this,t),r=$Ps[n];if(r){var i=$Cs[n],o=state[n],s=options[n],a=options.stateManagement||{},l=e?s.children=e:s.children;if($.isPlainObject(l))l=[l];else if(!l||!$.isArray(l))return;$.each(l,function(t,e){if($.isPlainObject(e)){var s=e.containerSelector?r.find(e.containerSelector):i||r;s.each(function(){var t=$(this),r=t.data("layout");if(!r){if(setInstanceKey({container:t,options:e},o),a.includeChildren&&state.stateData[n]){var i=state.stateData[n].children||{},s=i[e.instanceKey],l=e.stateManagement||(e.stateManagement={autoLoad:!0});l.autoLoad===!0&&s&&(l.autoSave=!1,l.includeChildren=!0,l.autoLoad=$.extend(!0,{},s))}r=t.layout(e),r&&refreshChildren(n,r)}})}})}},setInstanceKey=function(t,e){var n=t.container,r=t.options,i=r.stateManagement,o=r.instanceKey||n.data("layoutInstanceKey");return o||(o=(i&&i.cookie?i.cookie.name:"")||r.name),o=o?o.replace(/[^\w-]/gi,"_").replace(/_{2,}/g,"_"):"layout"+ ++e.childIdx,r.instanceKey=o,n.data("layoutInstanceKey",o),o},refreshChildren=function(t,e){var n,r=$Ps[t],i=children[t],o=state[t];$.isPlainObject(i)&&($.each(i,function(t,e){e.destroyed&&delete i[t]}),$.isEmptyObject(i)&&(i=children[t]=null)),e||i||(e=r.data("layout")),e&&(e.hasParentLayout=!0,n=e.options,setInstanceKey(e,o),i||(i=children[t]={}),i[n.instanceKey]=e.container.data("layout")),Instance[t].children=children[t],e||createChildren(t)},windowResize=function(){var t=options,e=Number(t.resizeWithWindowDelay);10>e&&(e=100),timer.clear("winResize"),timer.set("winResize",function(){timer.clear("winResize"),timer.clear("winResizeRepeater");var e=elDims($N,t.inset);(e.innerWidth!==sC.innerWidth||e.innerHeight!==sC.innerHeight)&&resizeAll()},e),timer.data.winResizeRepeater||setWindowResizeRepeater()},setWindowResizeRepeater=function(){var t=Number(options.resizeWithWindowMaxDelay);t>0&&timer.set("winResizeRepeater",function(){setWindowResizeRepeater(),resizeAll()},t)},unload=function(){_runCallbacks("onunload_start"),runPluginCallbacks(Instance,$.layout.onUnload),_runCallbacks("onunload_end")},_initContainer=function(){var t,e,n=$N[0],r=$("html"),i=sC.tagName=n.tagName,o=sC.id=n.id,s=sC.className=n.className,a=options,l=a.name,u="position,margin,padding,border",c="layoutCSS",d={},p="hidden",h=$N.data("parentLayout"),f=$N.data("layoutEdge"),g=h&&f,m=$.layout.cssNum;sC.selector=$N.selector.split(".slice")[0],sC.ref=(a.name?a.name+" layout / ":"")+i+(o?"#"+o:s?".["+s+"]":""),sC.isBody="BODY"===i,g||sC.isBody||(t=$N.closest("."+$.layout.defaults.panes.paneClass),h=t.data("parentLayout"),f=t.data("layoutEdge"),g=h&&f),$N.data({layout:Instance,layoutContainer:sID}).addClass(a.containerClass);var v={destroy:"",initPanes:"",resizeAll:"resizeAll",resize:"resizeAll"};for(l in v)$N.bind("layout"+l.toLowerCase()+"."+sID,Instance[v[l]||l]);g&&(Instance.hasParentLayout=!0,h.refreshChildren(f,Instance)),$N.data(c)||(sC.isBody?($N.data(c,$.extend(styles($N,u),{height:$N.css("height"),overflow:$N.css("overflow"),overflowX:$N.css("overflowX"),overflowY:$N.css("overflowY")})),r.data(c,$.extend(styles(r,"padding"),{height:"auto",overflow:r.css("overflow"),overflowX:r.css("overflowX"),overflowY:r.css("overflowY")}))):$N.data(c,styles($N,u+",top,bottom,left,right,width,height,overflow,overflowX,overflowY")));try{if(d={overflow:p,overflowX:p,overflowY:p},$N.css(d),a.inset&&!$.isPlainObject(a.inset)&&(e=parseInt(a.inset,10)||0,a.inset={top:e,bottom:e,left:e,right:e}),sC.isBody)a.outset?$.isPlainObject(a.outset)||(e=parseInt(a.outset,10)||0,a.outset={top:e,bottom:e,left:e,right:e}):a.outset={top:m(r,"paddingTop"),bottom:m(r,"paddingBottom"),left:m(r,"paddingLeft"),right:m(r,"paddingRight")},r.css(d).css({height:"100%",border:"none",padding:0,margin:0}),browser.isIE6?($N.css({width:"100%",height:"100%",border:"none",padding:0,margin:0,position:"relative"}),a.inset||(a.inset=elDims($N).inset)):($N.css({width:"auto",height:"auto",margin:0,position:"absolute"}),$N.css(a.outset)),$.extend(sC,elDims($N,a.inset));else{var y=$N.css("position");y&&y.match(/(fixed|absolute|relative)/)||$N.css("position","relative"),$N.is(":visible")&&($.extend(sC,elDims($N,a.inset)),sC.innerHeight<1&&_log(a.errors.noContainerHeight.replace(/CONTAINER/,sC.ref)))}m($N,"minWidth")&&$N.parent().css("overflowX","auto"),m($N,"minHeight")&&$N.parent().css("overflowY","auto")}catch(b){}},initHotkeys=function(t){t=t?t.split(","):_c.borderPanes,$.each(t,function(t,e){var n=options[e];return n.enableCursorHotkey||n.customHotkey?($(document).bind("keydown."+sID,keyDown),!1):void 0})},initOptions=function(){function t(t){var e=options[t],n=options.panes;e.fxSettings||(e.fxSettings={}),n.fxSettings||(n.fxSettings={}),$.each(["_open","_close","_size"],function(r,i){var o="fxName"+i,s="fxSpeed"+i,a="fxSettings"+i,l=e[o]=e[o]||n[o]||e.fxName||n.fxName||"none",u=$.effects&&($.effects[l]||$.effects.effect&&$.effects.effect[l]);"none"!==l&&options.effects[l]&&u||(l=e[o]="none");var c=options.effects[l]||{},d=c.all||null,p=c[t]||null;e[s]=e[s]||n[s]||e.fxSpeed||n.fxSpeed||null,e[a]=$.extend(!0,{},d,p,n.fxSettings,e.fxSettings,n[a],e[a])}),delete e.fxName,delete e.fxSpeed,delete e.fxSettings}var e,n,r,i,o,s,a;if(opts=$.layout.transformData(opts,!0),opts=$.layout.backwardCompatibility.renameAllOptions(opts),!$.isEmptyObject(opts.panes)){for(e=$.layout.optionsMap.noDefault,o=0,s=e.length;s>o;o++)r=e[o],delete opts.panes[r];for(e=$.layout.optionsMap.layout,o=0,s=e.length;s>o;o++)r=e[o],delete opts.panes[r]}e=$.layout.optionsMap.layout;var l=$.layout.config.optionRootKeys;for(r in opts)i=opts[r],$.inArray(r,l)<0&&$.inArray(r,e)<0&&(opts.panes[r]||(opts.panes[r]=$.isPlainObject(i)?$.extend(!0,{},i):i),delete opts[r]);$.extend(!0,options,opts),$.each(_c.allPanes,function(i,o){if(_c[o]=$.extend(!0,{},_c.panes,_c[o]),n=options.panes,a=options[o],"center"===o)for(e=$.layout.optionsMap.center,i=0,s=e.length;s>i;i++)r=e[i],opts.center[r]||!opts.panes[r]&&a[r]||(a[r]=n[r]);else a=options[o]=$.extend(!0,{},n,a),t(o),a.resizerClass||(a.resizerClass="ui-layout-resizer"),a.togglerClass||(a.togglerClass="ui-layout-toggler");a.paneClass||(a.paneClass="ui-layout-pane")});var u=opts.zIndex,c=options.zIndexes;u>0&&(c.pane_normal=u,c.content_mask=max(u+1,c.content_mask),c.resizer_normal=max(u+2,c.resizer_normal)),delete options.panes},getPane=function(t){var e=options[t].paneSelector;if("#"===e.substr(0,1))return $N.find(e).eq(0);var n=$N.children(e).eq(0);return n.length?n:$N.children("form:first").children(e).eq(0)},initPanes=function(t){evtPane(t),$.each(_c.allPanes,function(t,e){addPane(e,!0)}),initHandles(),$.each(_c.borderPanes,function(t,e){$Ps[e]&&state[e].isVisible&&(setSizeLimits(e),makePaneFit(e))}),sizeMidPanes("center"),$.each(_c.allPanes,function(t,e){afterInitPane(e)})},addPane=function(t,e){if(e||isInitialized()){var n,r,i,o=options[t],s=state[t],a=_c[t],l=a.dir,u=(s.fx,o.spacing_open||0,"center"===t),c={},d=$Ps[t];if(d?removePane(t,!1,!0,!1):$Cs[t]=!1,d=$Ps[t]=getPane(t),!d.length)return void($Ps[t]=!1);if(!d.data("layoutCSS")){var p="position,top,left,bottom,right,width,height,overflow,zIndex,display,backgroundColor,padding,margin,border";d.data("layoutCSS",styles(d,p))}Instance[t]={name:t,pane:$Ps[t],content:$Cs[t],options:options[t],state:state[t],children:children[t]},d.data({parentLayout:Instance,layoutPane:Instance[t],layoutEdge:t,layoutRole:"pane"}).css(a.cssReq).css("zIndex",options.zIndexes.pane_normal).css(o.applyDemoStyles?a.cssDemo:{}).addClass(o.paneClass+" "+o.paneClass+"-"+t).bind("mouseenter."+sID,addHover).bind("mouseleave."+sID,removeHover);var h,f={hide:"",show:"",toggle:"",close:"",open:"",slideOpen:"",slideClose:"",slideToggle:"",size:"sizePane",sizePane:"sizePane",sizeContent:"",sizeHandles:"",enableClosable:"",disableClosable:"",enableSlideable:"",disableSlideable:"",enableResizable:"",disableResizable:"",swapPanes:"swapPanes",swap:"swapPanes",move:"swapPanes",removePane:"removePane",remove:"removePane",createChildren:"",resizeChildren:"",resizeAll:"resizeAll",resizeLayout:"resizeAll"};for(h in f)d.bind("layoutpane"+h.toLowerCase()+"."+sID,Instance[f[h]||h]);initContent(t,!1),u||(n=s.size=_parseSize(t,o.size),r=_parseSize(t,o.minSize)||1,i=_parseSize(t,o.maxSize)||1e5,n>0&&(n=max(min(n,i),r)),s.autoResize=o.autoResize,s.isClosed=!1,s.isSliding=!1,s.isResizing=!1,s.isHidden=!1,s.pins||(s.pins=[])),s.tagName=d[0].tagName,s.edge=t,s.noRoom=!1,s.isVisible=!0,setPanePosition(t),"horz"===l?c.height=cssH(d,n):"vert"===l&&(c.width=cssW(d,n)),d.css(c),"horz"!=l&&sizeMidPanes(t,!0),state.initialized&&(initHandles(t),initHotkeys(t)),o.initClosed&&o.closable&&!o.initHidden?close(t,!0,!0):o.initHidden||o.initClosed?hide(t):s.noRoom||d.css("display","block"),d.css("visibility","visible"),o.showOverflowOnHover&&d.hover(allowOverflow,resetOverflow),state.initialized&&afterInitPane(t)}},afterInitPane=function(t){var e=$Ps[t],n=state[t],r=options[t];e&&(e.data("layout")&&refreshChildren(t,e.data("layout")),n.isVisible&&(state.initialized?resizeAll():sizeContent(t),r.triggerEventsOnLoad?_runCallbacks("onresize_end",t):resizeChildren(t,!0)),r.initChildren&&r.children&&createChildren(t))},setPanePosition=function(t){t=t?t.split(","):_c.borderPanes,$.each(t,function(t,e){var n=$Ps[e],r=$Rs[e],i=(options[e],state[e]),o=_c[e].side,s={};if(n){switch(e){case"north":s.top=sC.inset.top,s.left=sC.inset.left,s.right=sC.inset.right;break;case"south":s.bottom=sC.inset.bottom,s.left=sC.inset.left,s.right=sC.inset.right;break;case"west":s.left=sC.inset.left;break;case"east":s.right=sC.inset.right;break;case"center":}n.css(s),r&&i.isClosed?r.css(o,sC.inset[o]):r&&!i.isHidden&&r.css(o,sC.inset[o]+getPaneSize(e))}})},initHandles=function(t){t=t?t.split(","):_c.borderPanes,$.each(t,function(t,e){var n=$Ps[e];if($Rs[e]=!1,$Ts[e]=!1,n){var r=options[e],i=state[e],o=(_c[e],"#"===r.paneSelector.substr(0,1)?r.paneSelector.substr(1):""),s=r.resizerClass,a=r.togglerClass,l=(i.isVisible?r.spacing_open:r.spacing_closed,"-"+e),u=(i.isVisible?"-open":"-closed",Instance[e]),c=u.resizer=$Rs[e]=$("<div></div>"),d=u.toggler=r.closable?$Ts[e]=$("<div></div>"):!1;!i.isVisible&&r.slidable&&c.attr("title",r.tips.Slide).css("cursor",r.sliderCursor),c.attr("id",o?o+"-resizer":"").data({parentLayout:Instance,layoutPane:Instance[e],layoutEdge:e,layoutRole:"resizer"}).css(_c.resizers.cssReq).css("zIndex",options.zIndexes.resizer_normal).css(r.applyDemoStyles?_c.resizers.cssDemo:{}).addClass(s+" "+s+l).hover(addHover,removeHover).hover(onResizerEnter,onResizerLeave).appendTo($N),r.resizerDblClickToggle&&c.bind("dblclick."+sID,toggle),d&&(d.attr("id",o?o+"-toggler":"").data({parentLayout:Instance,layoutPane:Instance[e],layoutEdge:e,layoutRole:"toggler"}).css(_c.togglers.cssReq).css(r.applyDemoStyles?_c.togglers.cssDemo:{}).addClass(a+" "+a+l).hover(addHover,removeHover).bind("mouseenter",onResizerEnter).appendTo(c),r.togglerContent_open&&$("<span>"+r.togglerContent_open+"</span>").data({layoutEdge:e,layoutRole:"togglerContent"}).data("layoutRole","togglerContent").data("layoutEdge",e).addClass("content content-open").css("display","none").appendTo(d),r.togglerContent_closed&&$("<span>"+r.togglerContent_closed+"</span>").data({layoutEdge:e,layoutRole:"togglerContent"}).addClass("content content-closed").css("display","none").appendTo(d),enableClosable(e)),initResizable(e),i.isVisible?setAsOpen(e):(setAsClosed(e),bindStartSlidingEvents(e,!0))}}),sizeHandles()},initContent=function(t,e){if(isInitialized()){var n,r=options[t],i=r.contentSelector,o=Instance[t],s=$Ps[t];i&&(n=o.content=$Cs[t]=r.findNestedContent?s.find(i).eq(0):s.children(i).eq(0)),n&&n.length?(n.data("layoutRole","content"),n.data("layoutCSS")||n.data("layoutCSS",styles(n,"height")),n.css(_c.content.cssReq),r.applyDemoStyles&&(n.css(_c.content.cssDemo),s.css(_c.content.cssDemoPane)),s.css("overflowX").match(/(scroll|auto)/)&&s.css("overflow","hidden"),state[t].content={},e!==!1&&sizeContent(t)):o.content=$Cs[t]=!1}},initResizable=function(t){var e=$.layout.plugins.draggable;t=t?t.split(","):_c.borderPanes,$.each(t,function(t,r){var i=options[r];if(!e||!$Ps[r]||!i.resizable)return i.resizable=!1,!0;var o,s,a=state[r],l=options.zIndexes,u=_c[r],c="horz"==u.dir?"top":"left",d=($Ps[r],$Rs[r]),p=i.resizerClass,h=0,f=p+"-drag",g=p+"-"+r+"-drag",m=p+"-dragging",v=p+"-"+r+"-dragging",y=p+"-dragging-limit",b=p+"-"+r+"-dragging-limit",_=!1;a.isClosed||d.attr("title",i.tips.Resize).css("cursor",i.resizerCursor),d.draggable({containment:$N[0],axis:"horz"==u.dir?"y":"x",delay:0,distance:1,grid:i.resizingGrid,helper:"clone",opacity:i.resizerDragOpacity,addClasses:!1,zIndex:l.resizer_drag,start:function(t,e){return i=options[r],a=state[r],s=i.livePaneResizing,!1===_runCallbacks("ondrag_start",r)?!1:(a.isResizing=!0,state.paneResizing=r,timer.clear(r+"_closeSlider"),setSizeLimits(r),o=a.resizerPosition,h=e.position[c],d.addClass(f+" "+g),_=!1,$("body").disableSelection(),void showMasks(r,{resizing:!0}))},drag:function(t,e){_||(e.helper.addClass(m+" "+v).css({right:"auto",bottom:"auto"}).children().css("visibility","hidden"),_=!0,a.isSliding&&$Ps[r].css("zIndex",l.pane_sliding));var u=0;e.position[c]<o.min?(e.position[c]=o.min,u=-1):e.position[c]>o.max&&(e.position[c]=o.max,u=1),u?(e.helper.addClass(y+" "+b),window.defaultStatus=u>0&&r.match(/(north|west)/)||0>u&&r.match(/(south|east)/)?i.tips.maxSizeWarning:i.tips.minSizeWarning):(e.helper.removeClass(y+" "+b),window.defaultStatus=""),s&&Math.abs(e.position[c]-h)>=i.liveResizingTolerance&&(h=e.position[c],n(t,e,r))},stop:function(t,e){$("body").enableSelection(),window.defaultStatus="",d.removeClass(f+" "+g),a.isResizing=!1,state.paneResizing=!1,n(t,e,r,!0)}})});var n=function(t,e,n,r){var i,o=e.position,s=_c[n],a=options[n],l=state[n];switch(n){case"north":i=o.top;break;case"west":i=o.left;break;case"south":i=sC.layoutHeight-o.top-a.spacing_open;break;case"east":i=sC.layoutWidth-o.left-a.spacing_open}var u=i-sC.inset[s.side];if(r)!1!==_runCallbacks("ondrag_end",n)&&manualSizePane(n,u,!1,!0),hideMasks(!0),l.isSliding&&showMasks(n,{resizing:!0});else{if(Math.abs(u-l.size)<a.liveResizingTolerance)return;manualSizePane(n,u,!1,!0),sizeMasks()}}},sizeMask=function(){var t=$(this),e=t.data("layoutMask"),n=state[e];"IFRAME"==n.tagName&&n.isVisible&&t.css({top:n.offsetTop,left:n.offsetLeft,width:n.outerWidth,height:n.outerHeight})},sizeMasks=function(){$Ms.each(sizeMask)},showMasks=function(t,e){var n,r,i=_c[t],o=["center"],s=options.zIndexes,a=$.extend({objectsOnly:!1,animation:!1,resizing:!0,sliding:state[t].isSliding},e);a.resizing&&o.push(t),a.sliding&&o.push(_c.oppositeEdge[t]),"horz"===i.dir&&(o.push("west"),o.push("east")),$.each(o,function(t,e){r=state[e],n=options[e],r.isVisible&&(n.maskObjects||!a.objectsOnly&&n.maskContents)&&getMasks(e).each(function(){sizeMask.call(this),this.style.zIndex=r.isSliding?s.pane_sliding+1:s.pane_normal+1,this.style.display="block"})})},hideMasks=function(t){if(t||!state.paneResizing)$Ms.hide();else if(!t&&!$.isEmptyObject(state.panesSliding))for(var e,n,r=$Ms.length-1;r>=0;r--)n=$Ms.eq(r),e=n.data("layoutMask"),options[e].maskObjects||n.hide()},getMasks=function(t){for(var e,n=$([]),r=0,i=$Ms.length;i>r;r++)e=$Ms.eq(r),e.data("layoutMask")===t&&(n=n.add(e));return n.length?n:createMasks(t)},createMasks=function(t){var e,n,r,i,o,s=$Ps[t],a=state[t],l=options[t],u=options.zIndexes,c=$([]);if(!l.maskContents&&!l.maskObjects)return c;for(o=0;o<(l.maskObjects?2:1);o++)e=l.maskObjects&&0==o,n=document.createElement(e?"iframe":"div"),r=$(n).data("layoutMask",t),n.className="ui-layout-mask ui-layout-mask-"+t,i=n.style,i.display="block",i.position="absolute",i.background="#FFF",e&&(n.frameborder=0,n.src="about:blank",i.opacity=0,i.filter="Alpha(Opacity='0')",i.border=0),"IFRAME"==a.tagName?(i.zIndex=u.pane_normal+1,$N.append(n)):(r.addClass("ui-layout-mask-inside-pane"),i.zIndex=l.maskZindex||u.content_mask,i.top=0,i.left=0,i.width="100%",i.height="100%",s.append(n)),c=c.add(n),$Ms=$Ms.add(n);return c},destroy=function(t,e){$(window).unbind("."+sID),$(document).unbind("."+sID),"object"==typeof t?evtPane(t):e=t,$N.clearQueue().removeData("layout").removeData("layoutContainer").removeClass(options.containerClass).unbind("."+sID),$Ms.remove(),$.each(_c.allPanes,function(t,n){removePane(n,!1,!0,e)});var n="layoutCSS";$N.data(n)&&!$N.data("layoutRole")&&$N.css($N.data(n)).removeData(n),"BODY"===sC.tagName&&($N=$("html")).data(n)&&$N.css($N.data(n)).removeData(n),runPluginCallbacks(Instance,$.layout.onDestroy),unload();for(var r in Instance)r.match(/^(container|options)$/)||delete Instance[r];return Instance.destroyed=!0,Instance},removePane=function(t,e,n,r){if(isInitialized()){var i=evtPane.call(this,t),o=$Ps[i],s=$Cs[i],a=$Rs[i],l=$Ts[i];o&&$.isEmptyObject(o.data())&&(o=!1),s&&$.isEmptyObject(s.data())&&(s=!1),a&&$.isEmptyObject(a.data())&&(a=!1),l&&$.isEmptyObject(l.data())&&(l=!1),o&&o.stop(!0,!0);var u=options[i],c=state[i],d="layout",p="layoutCSS",h=children[i],f=$.isPlainObject(h)&&!$.isEmptyObject(h),g=void 0!==r?r:u.destroyChildren;if(f&&g&&($.each(h,function(t,e){e.destroyed||e.destroy(!0),e.destroyed&&delete h[t]}),$.isEmptyObject(h)&&(h=children[i]=null,f=!1)),o&&e&&!f)o.remove();else if(o&&o[0]){var m=u.paneClass,v=m+"-"+i,y="-open",b="-sliding",_="-closed",w=[m,m+y,m+_,m+b,v,v+y,v+_,v+b];$.merge(w,getHoverClasses(o,!0)),o.removeClass(w.join(" ")).removeData("parentLayout").removeData("layoutPane").removeData("layoutRole").removeData("layoutEdge").removeData("autoHidden").unbind("."+sID),f&&s?(s.width(s.width()),$.each(h,function(t,e){e.resizeAll()})):s&&s.css(s.data(p)).removeData(p).removeData("layoutRole"),o.data(d)||o.css(o.data(p)).removeData(p)}l&&l.remove(),a&&a.remove(),Instance[i]=$Ps[i]=$Cs[i]=$Rs[i]=$Ts[i]=!1,c={removed:!0},n||resizeAll()}},_hidePane=function(t){var e=$Ps[t],n=options[t],r=e[0].style;n.useOffscreenClose?(e.data(_c.offscreenReset)||e.data(_c.offscreenReset,{left:r.left,right:r.right}),e.css(_c.offscreenCSS)):e.hide().removeData(_c.offscreenReset)},_showPane=function(t){var e=$Ps[t],n=options[t],r=_c.offscreenCSS,i=e.data(_c.offscreenReset),o=e[0].style;e.show().removeData(_c.offscreenReset),n.useOffscreenClose&&i&&(o.left==r.left&&(o.left=i.left),o.right==r.right&&(o.right=i.right))},hide=function(t,e){if(isInitialized()){var n=evtPane.call(this,t),r=options[n],i=state[n],o=$Ps[n],s=$Rs[n];o&&!i.isHidden&&(state.initialized&&!1===_runCallbacks("onhide_start",n)||(i.isSliding=!1,delete state.panesSliding[n],s&&s.hide(),!state.initialized||i.isClosed?(i.isClosed=!0,i.isHidden=!0,i.isVisible=!1,state.initialized||_hidePane(n),sizeMidPanes("horz"===_c[n].dir?"":"center"),(state.initialized||r.triggerEventsOnLoad)&&_runCallbacks("onhide_end",n)):(i.isHiding=!0,close(n,!1,e))))}},show=function(t,e,n,r){if(isInitialized()){{var i=evtPane.call(this,t),o=(options[i],state[i]),s=$Ps[i];$Rs[i]}s&&o.isHidden&&!1!==_runCallbacks("onshow_start",i)&&(o.isShowing=!0,o.isSliding=!1,delete state.panesSliding[i],e===!1?close(i,!0):open(i,!1,n,r))}},toggle=function(t,e){if(isInitialized()){var n=evtObj(t),r=evtPane.call(this,t),i=state[r];n&&n.stopImmediatePropagation(),i.isHidden?show(r):i.isClosed?open(r,!!e):close(r)}},_closePane=function(t,e){var n=($Ps[t],state[t]);_hidePane(t),n.isClosed=!0,n.isVisible=!1,e&&setAsClosed(t)},close=function(t,e,n,r){function i(){p.isMoving=!1,bindStartSlidingEvents(o,!0);var t=_c.oppositeEdge[o];state[t].noRoom&&(setSizeLimits(t),makePaneFit(t)),r||!state.initialized&&!d.triggerEventsOnLoad||(a||_runCallbacks("onclose_end",o),a&&_runCallbacks("onshow_end",o),l&&_runCallbacks("onhide_end",o))}var o=evtPane.call(this,t);if(!state.initialized&&$Ps[o])return void _closePane(o,!0);if(isInitialized()){{var s,a,l,u,c=$Ps[o],d=($Rs[o],$Ts[o],options[o]),p=state[o];_c[o]}$N.queue(function(t){if(!c||!d.closable&&!p.isShowing&&!p.isHiding||!e&&p.isClosed&&!p.isShowing)return t();var r=!p.isShowing&&!1===_runCallbacks("onclose_start",o);return a=p.isShowing,l=p.isHiding,u=p.isSliding,delete p.isShowing,delete p.isHiding,r?t():(s=!n&&!p.isClosed&&"none"!=d.fxName_close,p.isMoving=!0,p.isClosed=!0,p.isVisible=!1,l?p.isHidden=!0:a&&(p.isHidden=!1),p.isSliding?bindStopSlidingEvents(o,!1):sizeMidPanes("horz"===_c[o].dir?"":"center",!1),setAsClosed(o),void(s?(lockPaneForFX(o,!0),c.hide(d.fxName_close,d.fxSettings_close,d.fxSpeed_close,function(){lockPaneForFX(o,!1),p.isClosed&&i(),t()})):(_hidePane(o),i(),t())))})}},setAsClosed=function(t){if($Rs[t]){var e=($Ps[t],$Rs[t]),n=$Ts[t],r=options[t],i=(state[t],_c[t].side),o=r.resizerClass,s=r.togglerClass,a="-"+t,l="-open",u="-sliding",c="-closed";e.css(i,sC.inset[i]).removeClass(o+l+" "+o+a+l).removeClass(o+u+" "+o+a+u).addClass(o+c+" "+o+a+c),r.resizable&&$.layout.plugins.draggable&&e.draggable("disable").removeClass("ui-state-disabled").css("cursor","default").attr("title",""),n&&(n.removeClass(s+l+" "+s+a+l).addClass(s+c+" "+s+a+c).attr("title",r.tips.Open),n.children(".content-open").hide(),n.children(".content-closed").css("display","block")),syncPinBtns(t,!1),state.initialized&&sizeHandles()
}},open=function(t,e,n,r){function i(){c.isMoving=!1,_fixIframe(a),c.isSliding||sizeMidPanes("vert"==_c[a].dir?"center":"",!1),setAsOpen(a)}if(isInitialized()){{var o,s,a=evtPane.call(this,t),l=$Ps[a],u=($Rs[a],$Ts[a],options[a]),c=state[a];_c[a]}$N.queue(function(t){if(!l||!u.resizable&&!u.closable&&!c.isShowing||c.isVisible&&!c.isSliding)return t();if(c.isHidden&&!c.isShowing)return t(),void show(a,!0);c.autoResize&&c.size!=u.size?sizePane(a,u.size,!0,!0,!0):setSizeLimits(a,e);var d=_runCallbacks("onopen_start",a);return"abort"===d?t():("NC"!==d&&setSizeLimits(a,e),c.minSize>c.maxSize?(syncPinBtns(a,!1),!r&&u.tips.noRoomToOpen&&alert(u.tips.noRoomToOpen),t()):(e?bindStopSlidingEvents(a,!0):c.isSliding?bindStopSlidingEvents(a,!1):u.slidable&&bindStartSlidingEvents(a,!1),c.noRoom=!1,makePaneFit(a),s=c.isShowing,delete c.isShowing,o=!n&&c.isClosed&&"none"!=u.fxName_open,c.isMoving=!0,c.isVisible=!0,c.isClosed=!1,s&&(c.isHidden=!1),void(o?(lockPaneForFX(a,!0),l.show(u.fxName_open,u.fxSettings_open,u.fxSpeed_open,function(){lockPaneForFX(a,!1),c.isVisible&&i(),t()})):(_showPane(a),i(),t()))))})}},setAsOpen=function(t,e){var n=$Ps[t],r=$Rs[t],i=$Ts[t],o=options[t],s=state[t],a=_c[t].side,l=o.resizerClass,u=o.togglerClass,c="-"+t,d="-open",p="-closed",h="-sliding";r.css(a,sC.inset[a]+getPaneSize(t)).removeClass(l+p+" "+l+c+p).addClass(l+d+" "+l+c+d),s.isSliding?r.addClass(l+h+" "+l+c+h):r.removeClass(l+h+" "+l+c+h),removeHover(0,r),o.resizable&&$.layout.plugins.draggable?r.draggable("enable").css("cursor",o.resizerCursor).attr("title",o.tips.Resize):s.isSliding||r.css("cursor","default"),i&&(i.removeClass(u+p+" "+u+c+p).addClass(u+d+" "+u+c+d).attr("title",o.tips.Close),removeHover(0,i),i.children(".content-closed").hide(),i.children(".content-open").css("display","block")),syncPinBtns(t,!s.isSliding),$.extend(s,elDims(n)),state.initialized&&(sizeHandles(),sizeContent(t,!0)),!e&&(state.initialized||o.triggerEventsOnLoad)&&n.is(":visible")&&(_runCallbacks("onopen_end",t),s.isShowing&&_runCallbacks("onshow_end",t),state.initialized&&_runCallbacks("onresize_end",t))},slideOpen=function(t){function e(){i.isClosed?i.isMoving||open(r,!0):bindStopSlidingEvents(r,!0)}if(isInitialized()){var n=evtObj(t),r=evtPane.call(this,t),i=state[r],o=options[r].slideDelay_open;n&&n.stopImmediatePropagation(),i.isClosed&&n&&"mouseenter"===n.type&&o>0?timer.set(r+"_openSlider",e,o):e()}},slideClose=function(t){function e(){o.isClosed?bindStopSlidingEvents(r,!1):o.isMoving||close(r)}if(isInitialized()){var n=evtObj(t),r=evtPane.call(this,t),i=options[r],o=state[r],s=o.isMoving?1e3:300;if(!o.isClosed&&!o.isResizing)if("click"===i.slideTrigger_close)e();else{if(i.preventQuickSlideClose&&o.isMoving)return;if(i.preventPrematureSlideClose&&n&&$.layout.isMouseOverElem(n,$Ps[r]))return;n?timer.set(r+"_closeSlider",e,max(i.slideDelay_close,s)):e()}}},slideToggle=function(t){var e=evtPane.call(this,t);toggle(e,!0)},lockPaneForFX=function(t,e){var n=$Ps[t],r=state[t],i=options[t],o=options.zIndexes;e?(showMasks(t,{animation:!0,objectsOnly:!0}),n.css({zIndex:o.pane_animate}),"south"==t?n.css({top:sC.inset.top+sC.innerHeight-n.outerHeight()}):"east"==t&&n.css({left:sC.inset.left+sC.innerWidth-n.outerWidth()})):(hideMasks(),n.css({zIndex:r.isSliding?o.pane_sliding:o.pane_normal}),"south"==t?n.css({top:"auto"}):"east"!=t||n.css("left").match(/\-99999/)||n.css({left:"auto"}),browser.msie&&i.fxOpacityFix&&"slide"!=i.fxName_open&&n.css("filter")&&1==n.css("opacity")&&n[0].style.removeAttribute("filter"))},bindStartSlidingEvents=function(t,e){var n=options[t],r=($Ps[t],$Rs[t]),i=n.slideTrigger_open.toLowerCase();!r||e&&!n.slidable||(i.match(/mouseover/)?i=n.slideTrigger_open="mouseenter":i.match(/(click|dblclick|mouseenter)/)||(i=n.slideTrigger_open="click"),n.resizerDblClickToggle&&i.match(/click/)&&r[e?"unbind":"bind"]("dblclick."+sID,toggle),r[e?"bind":"unbind"](i+"."+sID,slideOpen).css("cursor",e?n.sliderCursor:"default").attr("title",e?n.tips.Slide:""))},bindStopSlidingEvents=function(t,e){function n(e){timer.clear(t+"_closeSlider"),e.stopPropagation()}var r=options[t],i=state[t],o=(_c[t],options.zIndexes),s=r.slideTrigger_close.toLowerCase(),a=e?"bind":"unbind",l=$Ps[t],u=$Rs[t];timer.clear(t+"_closeSlider"),e?(i.isSliding=!0,state.panesSliding[t]=!0,bindStartSlidingEvents(t,!1)):(i.isSliding=!1,delete state.panesSliding[t]),l.css("zIndex",e?o.pane_sliding:o.pane_normal),u.css("zIndex",e?o.pane_sliding+2:o.resizer_normal),s.match(/(click|mouseleave)/)||(s=r.slideTrigger_close="mouseleave"),u[a](s,slideClose),"mouseleave"===s&&(l[a]("mouseleave."+sID,slideClose),u[a]("mouseenter."+sID,n),l[a]("mouseenter."+sID,n)),e?"click"!==s||r.resizable||(u.css("cursor",e?r.sliderCursor:"default"),u.attr("title",e?r.tips.Close:"")):timer.clear(t+"_closeSlider")},makePaneFit=function(t,e,n,r){var i=options[t],o=state[t],s=_c[t],a=$Ps[t],l=$Rs[t],u="vert"===s.dir,c=!1;if(("center"===t||u&&o.noVerticalRoom)&&(c=o.maxHeight>=0,c&&o.noRoom?(_showPane(t),l&&l.show(),o.isVisible=!0,o.noRoom=!1,u&&(o.noVerticalRoom=!1),_fixIframe(t)):c||o.noRoom||(_hidePane(t),l&&l.hide(),o.isVisible=!1,o.noRoom=!0)),"center"===t);else if(o.minSize<=o.maxSize){if(c=!0,o.size>o.maxSize)sizePane(t,o.maxSize,n,!0,r);else if(o.size<o.minSize)sizePane(t,o.minSize,n,!0,r);else if(l&&o.isVisible&&a.is(":visible")){var d=o.size+sC.inset[s.side];$.layout.cssNum(l,s.side)!=d&&l.css(s.side,d)}o.noRoom&&(o.wasOpen&&i.closable?i.autoReopen?open(t,!1,!0,!0):o.noRoom=!1:show(t,o.wasOpen,!0,!0))}else o.noRoom||(o.noRoom=!0,o.wasOpen=!o.isClosed&&!o.isSliding,o.isClosed||(i.closable?close(t,!0,!0):hide(t,!0)))},manualSizePane=function(t,e,n,r,i){if(isInitialized()){var o=evtPane.call(this,t),s=options[o],a=state[o],l=i||s.livePaneResizing&&!a.isResizing;a.autoResize=!1,sizePane(o,e,n,r,l)}},sizePane=function(t,e,n,r,i){function o(){for(var t="width"===f?d.outerWidth():d.outerHeight(),r=[{pane:l,count:1,target:e,actual:t,correct:e===t,attempt:e,cssSize:a}],o=r[0],u={},m="Inaccurate size after resizing the "+l+"-pane.";!(o.correct||(u={pane:l,count:o.count+1,target:e},u.attempt=o.actual>e?max(0,o.attempt-(o.actual-e)):max(0,o.attempt+(e-o.actual)),u.cssSize=cssSize(l,u.attempt),d.css(f,u.cssSize),u.actual="width"==f?d.outerWidth():d.outerHeight(),u.correct=e===u.actual,1===r.length&&(_log(m,!1,!0),_log(o,!1,!0)),_log(u,!1,!0),r.length>3));)r.push(u),o=r[r.length-1];c.size=e,$.extend(c,elDims(d)),c.isVisible&&d.is(":visible")&&(p&&p.css(h,e+sC.inset[h]),sizeContent(l)),!n&&!g&&state.initialized&&c.isVisible&&_runCallbacks("onresize_end",l),n||(c.isSliding||sizeMidPanes("horz"==_c[l].dir?"":"center",g,i),sizeHandles());var v=_c.oppositeEdge[l];s>e&&state[v].noRoom&&(setSizeLimits(v),makePaneFit(v,!1,n)),r.length>1&&_log(m+"\nSee the Error Console for details.",!0,!0)}if(isInitialized()){var s,a,l=evtPane.call(this,t),u=options[l],c=state[l],d=$Ps[l],p=$Rs[l],h=_c[l].side,f=_c[l].sizeType.toLowerCase(),g=c.isResizing&&!u.triggerEventsDuringLiveResize,m=r!==!0&&u.animatePaneSizing;$N.queue(function(t){if(setSizeLimits(l),s=c.size,e=_parseSize(l,e),e=max(e,_parseSize(l,u.minSize)),e=min(e,c.maxSize),e<c.minSize)return t(),void makePaneFit(l,!1,n);if(!i&&e===s)return t();if(c.newSize=e,!n&&state.initialized&&c.isVisible&&_runCallbacks("onresize_start",l),a=cssSize(l,e),m&&d.is(":visible")){var r=$.layout.effects.size[l]||$.layout.effects.size.all,p=u.fxSettings_size.easing||r.easing,h=options.zIndexes,g={};g[f]=a+"px",c.isMoving=!0,d.css({zIndex:h.pane_animate}).show().animate(g,u.fxSpeed_size,p,function(){d.css({zIndex:c.isSliding?h.pane_sliding:h.pane_normal}),c.isMoving=!1,delete c.newSize,o(),t()})}else d.css(f,a),delete c.newSize,d.is(":visible")?o():(c.size=e,$.extend(c,elDims(d))),t()})}},sizeMidPanes=function(t,e,n){t=(t?t:"east,west,center").split(","),$.each(t,function(t,r){if($Ps[r]){var i=options[r],o=state[r],s=$Ps[r],a=($Rs[r],!0),l={},u=$.layout.showInvisibly(s),c=calcNewCenterPaneDims();if($.extend(o,elDims(s)),"center"===r){if(!n&&o.isVisible&&c.width===o.outerWidth&&c.height===o.outerHeight)return s.css(u),!0;if($.extend(o,cssMinDims(r),{maxWidth:c.width,maxHeight:c.height}),l=c,o.newWidth=l.width,o.newHeight=l.height,l.width=cssW(s,l.width),l.height=cssH(s,l.height),a=l.width>=0&&l.height>=0,!state.initialized&&i.minWidth>c.width){var d=i.minWidth-o.outerWidth,p=options.east.minSize||0,h=options.west.minSize||0,f=state.east.size,g=state.west.size,m=f,v=g;if(d>0&&state.east.isVisible&&f>p&&(m=max(f-p,f-d),d-=f-m),d>0&&state.west.isVisible&&g>h&&(v=max(g-h,g-d),d-=g-v),0===d)return f&&f!=p&&sizePane("east",m,!0,!0,n),g&&g!=h&&sizePane("west",v,!0,!0,n),sizeMidPanes("center",e,n),void s.css(u)}}else{if(o.isVisible&&!o.noVerticalRoom&&$.extend(o,elDims(s),cssMinDims(r)),!n&&!o.noVerticalRoom&&c.height===o.outerHeight)return s.css(u),!0;l.top=c.top,l.bottom=c.bottom,o.newSize=c.height,l.height=cssH(s,c.height),o.maxHeight=l.height,a=o.maxHeight>=0,a||(o.noVerticalRoom=!0)}if(a?(!e&&state.initialized&&_runCallbacks("onresize_start",r),s.css(l),"center"!==r&&sizeHandles(r),!o.noRoom||o.isClosed||o.isHidden||makePaneFit(r),o.isVisible&&($.extend(o,elDims(s)),state.initialized&&sizeContent(r))):!o.noRoom&&o.isVisible&&makePaneFit(r),s.css(u),delete o.newSize,delete o.newWidth,delete o.newHeight,!o.isVisible)return!0;if("center"===r){var y=browser.isIE6||!browser.boxModel;$Ps.north&&(y||"IFRAME"==state.north.tagName)&&$Ps.north.css("width",cssW($Ps.north,sC.innerWidth)),$Ps.south&&(y||"IFRAME"==state.south.tagName)&&$Ps.south.css("width",cssW($Ps.south,sC.innerWidth))}!e&&state.initialized&&_runCallbacks("onresize_end",r)}})},resizeAll=function(t){var e=sC.innerWidth,n=sC.innerHeight;if(evtPane(t),$N.is(":visible")){if(!state.initialized)return void _initLayoutElements();if(t===!0&&$.isPlainObject(options.outset)&&$N.css(options.outset),$.extend(sC,elDims($N,options.inset)),sC.outerHeight){if(t===!0&&setPanePosition(),!1===_runCallbacks("onresizeall_start"))return!1;{var r,i,o;sC.innerHeight<n,sC.innerWidth<e}$.each(["south","north","east","west"],function(t,e){$Ps[e]&&(i=options[e],o=state[e],o.autoResize&&o.size!=i.size?sizePane(e,i.size,!0,!0,!0):(setSizeLimits(e),makePaneFit(e,!1,!0,!0)))}),sizeMidPanes("",!0,!0),sizeHandles(),$.each(_c.allPanes,function(t,e){r=$Ps[e],r&&state[e].isVisible&&_runCallbacks("onresize_end",e)}),_runCallbacks("onresizeall_end")}}},resizeChildren=function(t,e){var n=evtPane.call(this,t);if(options[n].resizeChildren){e||refreshChildren(n);var r=children[n];$.isPlainObject(r)&&$.each(r,function(t,e){e.destroyed||e.resizeAll()})}},sizeContent=function(t,e){if(isInitialized()){var n=evtPane.call(this,t);n=n?n.split(","):_c.allPanes,$.each(n,function(t,n){function r(t){return max(l.css.paddingBottom,parseInt(t.css("marginBottom"),10)||0)}function i(){var t=options[n].contentIgnoreSelector,e=s.nextAll().not(".ui-layout-mask").not(t||":lt(0)"),i=e.filter(":visible"),o=i.filter(":last");u={top:s[0].offsetTop,height:s.outerHeight(),numFooters:e.length,hiddenFooters:e.length-i.length,spaceBelow:0},u.spaceAbove=u.top,u.bottom=u.top+u.height,u.spaceBelow=o.length?o[0].offsetTop+o.outerHeight()-u.bottom+r(o):r(s)}var o=$Ps[n],s=$Cs[n],a=options[n],l=state[n],u=l.content;if(!o||!s||!o.is(":visible"))return!0;if((s.length||(initContent(n,!1),s))&&!1!==_runCallbacks("onsizecontent_start",n)){(!l.isMoving&&!l.isResizing||a.liveContentResizing||e||void 0==u.top)&&(i(),u.hiddenFooters>0&&"hidden"===o.css("overflow")&&(o.css("overflow","visible"),i(),o.css("overflow","hidden")));var c=l.innerHeight-(u.spaceAbove-l.css.paddingTop)-(u.spaceBelow-l.css.paddingBottom);s.is(":visible")&&u.height==c||(setOuterHeight(s,c,!0),u.height=c),state.initialized&&_runCallbacks("onsizecontent_end",n)}})}},sizeHandles=function(t){var e=evtPane.call(this,t);e=e?e.split(","):_c.borderPanes,$.each(e,function(t,e){var n,r=options[e],i=state[e],o=$Ps[e],s=$Rs[e],a=$Ts[e];if(o&&s){var l,u,c,d=_c[e].dir,p=i.isClosed?"_closed":"_open",h=r["spacing"+p],f=r["togglerAlign"+p],g=r["togglerLength"+p];if(0===h)return void s.hide();if(i.noRoom||i.isHidden||s.show(),"horz"===d?(l=sC.innerWidth,i.resizerLength=l,u=$.layout.cssNum(o,"left"),s.css({width:cssW(s,l),height:cssH(s,h),left:u>-9999?u:sC.inset.left})):(l=o.outerHeight(),i.resizerLength=l,s.css({height:cssH(s,l),width:cssW(s,h),top:sC.inset.top+getPaneSize("north",!0)})),removeHover(r,s),a){if(0===g||i.isSliding&&r.hideTogglerOnSlide)return void a.hide();if(a.show(),!(g>0)||"100%"===g||g>l)g=l,c=0;else if(isStr(f))switch(f){case"top":case"left":c=0;break;case"bottom":case"right":c=l-g;break;case"middle":case"center":default:c=round((l-g)/2)}else{var m=parseInt(f,10);c=f>=0?m:l-g+m}if("horz"===d){var v=cssW(a,g);a.css({width:v,height:cssH(a,h),left:c,top:0}),a.children(".content").each(function(){n=$(this),n.css("marginLeft",round((v-n.outerWidth())/2))})}else{var y=cssH(a,g);a.css({height:y,width:cssW(a,h),top:c,left:0}),a.children(".content").each(function(){n=$(this),n.css("marginTop",round((y-n.outerHeight())/2))})}removeHover(0,a)}state.initialized||!r.initHidden&&!i.isHidden||(s.hide(),a&&a.hide())}})},enableClosable=function(t){if(isInitialized()){var e=evtPane.call(this,t),n=$Ts[e],r=options[e];n&&(r.closable=!0,n.bind("click."+sID,function(t){t.stopPropagation(),toggle(e)}).css("visibility","visible").css("cursor","pointer").attr("title",state[e].isClosed?r.tips.Open:r.tips.Close).show())}},disableClosable=function(t,e){if(isInitialized()){var n=evtPane.call(this,t),r=$Ts[n];r&&(options[n].closable=!1,state[n].isClosed&&open(n,!1,!0),r.unbind("."+sID).css("visibility",e?"hidden":"visible").css("cursor","default").attr("title",""))}},enableSlidable=function(t){if(isInitialized()){var e=evtPane.call(this,t),n=$Rs[e];n&&n.data("draggable")&&(options[e].slidable=!0,state[e].isClosed&&bindStartSlidingEvents(e,!0))}},disableSlidable=function(t){if(isInitialized()){var e=evtPane.call(this,t),n=$Rs[e];n&&(options[e].slidable=!1,state[e].isSliding?close(e,!1,!0):(bindStartSlidingEvents(e,!1),n.css("cursor","default").attr("title",""),removeHover(null,n[0])))}},enableResizable=function(t){if(isInitialized()){var e=evtPane.call(this,t),n=$Rs[e],r=options[e];n&&n.data("draggable")&&(r.resizable=!0,n.draggable("enable"),state[e].isClosed||n.css("cursor",r.resizerCursor).attr("title",r.tips.Resize))}},disableResizable=function(t){if(isInitialized()){var e=evtPane.call(this,t),n=$Rs[e];n&&n.data("draggable")&&(options[e].resizable=!1,n.draggable("disable").css("cursor","default").attr("title",""),removeHover(null,n[0]))}},swapPanes=function(t,e){function n(t){var e=$Ps[t],n=$Cs[t];return e?{pane:t,P:e?e[0]:!1,C:n?n[0]:!1,state:$.extend(!0,{},state[t]),options:$.extend(!0,{},options[t])}:!1}function r(t,e){if(t){var n,r,i=t.P,o=t.C,s=t.pane,l=_c[e],u=$.extend(!0,{},state[e]),c=options[e],d={resizerCursor:c.resizerCursor};$.each("fxName,fxSpeed,fxSettings".split(","),function(t,e){d[e+"_open"]=c[e+"_open"],d[e+"_close"]=c[e+"_close"],d[e+"_size"]=c[e+"_size"]}),$Ps[e]=$(i).data({layoutPane:Instance[e],layoutEdge:e}).css(_c.hidden).css(l.cssReq),$Cs[e]=o?$(o):!1,options[e]=$.extend(!0,{},t.options,d),state[e]=$.extend(!0,{},t.state),n=new RegExp(c.paneClass+"-"+s,"g"),i.className=i.className.replace(n,c.paneClass+"-"+e),initHandles(e),l.dir!=_c[s].dir?(r=a[e]||0,setSizeLimits(e),r=max(r,state[e].minSize),manualSizePane(e,r,!0,!0)):$Rs[e].css(l.side,sC.inset[l.side]+(state[e].isVisible?getPaneSize(e):0)),t.state.isVisible&&!u.isVisible?setAsOpen(e,!0):(setAsClosed(e),bindStartSlidingEvents(e,!0)),t=null}}if(isInitialized()){var i=evtPane.call(this,t);if(state[i].edge=e,state[e].edge=i,!1===_runCallbacks("onswap_start",i)||!1===_runCallbacks("onswap_start",e))return state[i].edge=i,void(state[e].edge=e);var o=n(i),s=n(e),a={};a[i]=o?o.state.size:0,a[e]=s?s.state.size:0,$Ps[i]=!1,$Ps[e]=!1,state[i]={},state[e]={},$Ts[i]&&$Ts[i].remove(),$Ts[e]&&$Ts[e].remove(),$Rs[i]&&$Rs[i].remove(),$Rs[e]&&$Rs[e].remove(),$Rs[i]=$Rs[e]=$Ts[i]=$Ts[e]=!1,r(o,e),r(s,i),o=s=a=null,$Ps[i]&&$Ps[i].css(_c.visible),$Ps[e]&&$Ps[e].css(_c.visible),resizeAll(),_runCallbacks("onswap_end",i),_runCallbacks("onswap_end",e)}},syncPinBtns=function(t,e){$.layout.plugins.buttons&&$.each(state[t].pins,function(n,r){$.layout.buttons.setPinState(Instance,$(r),t,e)})},$N=$(this).eq(0);if(!$N.length)return _log(options.errors.containerMissing);if($N.data("layoutContainer")&&$N.data("layout"))return $N.data("layout");var $Ps={},$Cs={},$Rs={},$Ts={},$Ms=$([]),sC=state.container,sID=state.id,Instance={options:options,state:state,container:$N,panes:$Ps,contents:$Cs,resizers:$Rs,togglers:$Ts,hide:hide,show:show,toggle:toggle,open:open,close:close,slideOpen:slideOpen,slideClose:slideClose,slideToggle:slideToggle,setSizeLimits:setSizeLimits,_sizePane:sizePane,sizePane:manualSizePane,sizeContent:sizeContent,swapPanes:swapPanes,showMasks:showMasks,hideMasks:hideMasks,initContent:initContent,addPane:addPane,removePane:removePane,createChildren:createChildren,refreshChildren:refreshChildren,enableClosable:enableClosable,disableClosable:disableClosable,enableSlidable:enableSlidable,disableSlidable:disableSlidable,enableResizable:enableResizable,disableResizable:disableResizable,allowOverflow:allowOverflow,resetOverflow:resetOverflow,destroy:destroy,initPanes:isInitialized,resizeAll:resizeAll,runCallbacks:_runCallbacks,hasParentLayout:!1,children:children,north:!1,south:!1,west:!1,east:!1,center:!1};return"cancel"===_create()?null:Instance}}(jQuery),function(t){t.ui||(t.ui={}),t.ui.cookie={acceptsCookies:!!navigator.cookieEnabled,read:function(e){for(var n,r=document.cookie,i=r?r.split(";"):[],o=0,s=i.length;s>o;o++)if(n=t.trim(i[o]).split("="),n[0]==e)return decodeURIComponent(n[1]);return null},write:function(e,n,r){var i="",o="",s=!1,a=r||{},l=a.expires||null,u=t.type(l);"date"===u?o=l:"string"===u&&l>0&&(l=parseInt(l,10),u="number"),"number"===u&&(o=new Date,l>0?o.setDate(o.getDate()+l):(o.setFullYear(1970),s=!0)),o&&(i+=";expires="+o.toUTCString()),a.path&&(i+=";path="+a.path),a.domain&&(i+=";domain="+a.domain),a.secure&&(i+=";secure"),document.cookie=e+"="+(s?"":encodeURIComponent(n))+i},clear:function(e){t.ui.cookie.write(e,"",{expires:-1})}},t.cookie||(t.cookie=function(e,n,r){var i=t.ui.cookie;if(null===n)i.clear(e);else{if(void 0===n)return i.read(e);i.write(e,n,r)}}),t.layout.plugins.stateManagement=!0,t.layout.config.optionRootKeys.push("stateManagement"),t.layout.defaults.stateManagement={enabled:!1,autoSave:!0,autoLoad:!0,animateLoad:!0,includeChildren:!0,stateKeys:"north.size,south.size,east.size,west.size,north.isClosed,south.isClosed,east.isClosed,west.isClosed,north.isHidden,south.isHidden,east.isHidden,west.isHidden",cookie:{name:"",domain:"",path:"",expires:"",secure:!1}},t.layout.optionsMap.layout.push("stateManagement"),t.layout.state={saveCookie:function(e,n,r){var i=e.options,o=i.stateManagement,s=t.extend(!0,{},o.cookie,r||null),a=e.state.stateData=e.readState(n||o.stateKeys);return t.ui.cookie.write(s.name||i.name||"Layout",t.layout.state.encodeJSON(a),s),t.extend(!0,{},a)},deleteCookie:function(e){var n=e.options;t.ui.cookie.clear(n.stateManagement.cookie.name||n.name||"Layout")},readCookie:function(e){var n=e.options,r=t.ui.cookie.read(n.stateManagement.cookie.name||n.name||"Layout");return r?t.layout.state.decodeJSON(r):{}},loadCookie:function(e){var n=t.layout.state.readCookie(e);return n&&(e.state.stateData=t.extend(!0,{},n),e.loadState(n)),n},loadState:function(e,n,r){if(t.isPlainObject(n)&&!t.isEmptyObject(n)){n=e.state.stateData=t.layout.transformData(n);var i=e.options.stateManagement;if(r=t.extend({animateLoad:!1,includeChildren:i.includeChildren},r),e.state.initialized){var o,a,l,u,c,d=!r.animateLoad;if(t.each(t.layout.config.borderPanes,function(r,i){o=n[i],t.isPlainObject(o)&&(s=o.size,a=o.initClosed,l=o.initHidden,ar=o.autoResize,u=e.state[i],c=u.isVisible,ar&&(u.autoResize=ar),c||e._sizePane(i,s,!1,!1,!1),l===!0?e.hide(i,d):a===!0?e.close(i,!1,d):a===!1?e.open(i,!1,d):l===!1&&e.show(i,!1,d),c&&e._sizePane(i,s,!1,!1,d))}),r.includeChildren){var p,h;t.each(e.children,function(e,r){p=n[e]?n[e].children:0,p&&r&&t.each(r,function(t,e){h=p[t],e&&h&&e.loadState(h)})})}}else{var o=t.extend(!0,{},n);t.each(t.layout.config.allPanes,function(t,e){o[e]&&delete o[e].children}),t.extend(!0,e.options,o)}}},readState:function(e,n){"string"===t.type(n)&&(n={keys:n}),n||(n={});var r,i,o,s,a,l,u,c=e.options.stateManagement,d=n.includeChildren,p=void 0!==d?d:c.includeChildren,h=n.stateKeys||c.stateKeys,f={isClosed:"initClosed",isHidden:"initHidden"},g=e.state,m=t.layout.config.allPanes,v={};t.isArray(h)&&(h=h.join(",")),h=h.replace(/__/g,".").split(",");for(var y=0,b=h.length;b>y;y++)r=h[y].split("."),i=r[0],o=r[1],t.inArray(i,m)<0||(s=g[i][o],void 0!=s&&("isClosed"==o&&g[i].isSliding&&(s=!0),(v[i]||(v[i]={}))[f[o]?f[o]:o]=s));return p&&t.each(m,function(n,r){l=e.children[r],a=g.stateData[r],t.isPlainObject(l)&&!t.isEmptyObject(l)&&(u=v[r]||(v[r]={}),u.children||(u.children={}),t.each(l,function(e,n){n.state.initialized?u.children[e]=t.layout.state.readState(n):a&&a.children&&a.children[e]&&(u.children[e]=t.extend(!0,{},a.children[e]))}))}),v},encodeJSON:function(e){function n(e){var r,i,o,s=[],a=0,l=t.isArray(e);for(r in e)i=e[r],o=typeof i,"string"==o?i='"'+i+'"':"object"==o&&(i=n(i)),s[a++]=(l?"":'"'+r+'":')+i;return(l?"[":"{")+s.join(",")+(l?"]":"}")}return n(e)},decodeJSON:function(e){try{return t.parseJSON?t.parseJSON(e):window.eval("("+e+")")||{}}catch(n){return{}}},_create:function(e){var n=t.layout.state,r=e.options,i=r.stateManagement;if(t.extend(e,{readCookie:function(){return n.readCookie(e)},deleteCookie:function(){n.deleteCookie(e)},saveCookie:function(t,r){return n.saveCookie(e,t,r)},loadCookie:function(){return n.loadCookie(e)},loadState:function(t,r){n.loadState(e,t,r)},readState:function(t){return n.readState(e,t)},encodeJSON:n.encodeJSON,decodeJSON:n.decodeJSON}),e.state.stateData={},i.autoLoad)if(t.isPlainObject(i.autoLoad))t.isEmptyObject(i.autoLoad)||e.loadState(i.autoLoad);else if(i.enabled)if(t.isFunction(i.autoLoad)){var o={};try{o=i.autoLoad(e,e.state,e.options,e.options.name||"")}catch(s){}o&&t.isPlainObject(o)&&!t.isEmptyObject(o)&&e.loadState(o)}else e.loadCookie()},_unload:function(e){var n=e.options.stateManagement;if(n.enabled&&n.autoSave)if(t.isFunction(n.autoSave))try{n.autoSave(e,e.state,e.options,e.options.name||"")}catch(r){}else e.saveCookie()}},t.layout.onCreate.push(t.layout.state._create),t.layout.onUnload.push(t.layout.state._unload),t.layout.plugins.buttons=!0,t.layout.defaults.autoBindCustomButtons=!1,t.layout.optionsMap.layout.push("autoBindCustomButtons"),t.layout.buttons={init:function(e){var n,r="ui-layout-button-",i=e.options.name||"";t.each("toggle,open,close,pin,toggle-slide,open-slide".split(","),function(o,s){t.each(t.layout.config.borderPanes,function(o,a){t("."+r+s+"-"+a).each(function(){n=t(this).data("layoutName")||t(this).attr("layoutName"),(void 0==n||n===i)&&e.bindButton(this,s,a)})})})},get:function(e,n,r,i){var o=t(n),s=e.options,a=s.errors.addButtonError;if(o.length)if(t.inArray(r,t.layout.config.borderPanes)<0)t.layout.msg(a+" "+s.errors.pane+": "+r,!0),o=t("");else{var l=s[r].buttonClass+"-"+i;o.addClass(l+" "+l+"-"+r).data("layoutName",s.name)}else t.layout.msg(a+" "+s.errors.selector+": "+n,!0);return o},bind:function(e,n,r,i){var o=t.layout.buttons;switch(r.toLowerCase()){case"toggle":o.addToggle(e,n,i);break;case"open":o.addOpen(e,n,i);break;case"close":o.addClose(e,n,i);break;case"pin":o.addPin(e,n,i);break;case"toggle-slide":o.addToggle(e,n,i,!0);break;case"open-slide":o.addOpen(e,n,i,!0)}return e},addToggle:function(e,n,r,i){return t.layout.buttons.get(e,n,r,"toggle").click(function(t){e.toggle(r,!!i),t.stopPropagation()}),e},addOpen:function(e,n,r,i){return t.layout.buttons.get(e,n,r,"open").attr("title",e.options[r].tips.Open).click(function(t){e.open(r,!!i),t.stopPropagation()}),e},addClose:function(e,n,r){return t.layout.buttons.get(e,n,r,"close").attr("title",e.options[r].tips.Close).click(function(t){e.close(r),t.stopPropagation()}),e},addPin:function(e,n,r){var i=t.layout.buttons,o=i.get(e,n,r,"pin");if(o.length){var s=e.state[r];o.click(function(n){i.setPinState(e,t(this),r,s.isSliding||s.isClosed),s.isSliding||s.isClosed?e.open(r):e.close(r),n.stopPropagation()}),i.setPinState(e,o,r,!s.isClosed&&!s.isSliding),s.pins.push(n)}return e},setPinState:function(t,e,n,r){var i=e.attr("pin");if(!i||r!==("down"==i)){var o=t.options[n],s=o.buttonClass+"-pin",a=s+"-"+n,l=s+"-up "+a+"-up",u=s+"-down "+a+"-down";e.attr("pin",r?"down":"up").attr("title",r?o.tips.Unpin:o.tips.Pin).removeClass(r?l:u).addClass(r?u:l)}},syncPinBtns:function(e,n,r){t.each(e.state[n].pins,function(i,o){t.layout.buttons.setPinState(e,t(o),n,r)})},_load:function(e){var n=t.layout.buttons;t.extend(e,{bindButton:function(t,r,i){return n.bind(e,t,r,i)},addToggleBtn:function(t,r,i){return n.addToggle(e,t,r,i)},addOpenBtn:function(t,r,i){return n.addOpen(e,t,r,i)},addCloseBtn:function(t,r){return n.addClose(e,t,r)},addPinBtn:function(t,r){return n.addPin(e,t,r)}});for(var r=0;4>r;r++){var i=t.layout.config.borderPanes[r];e.state[i].pins=[]}e.options.autoBindCustomButtons&&n.init(e)},_unload:function(){}},t.layout.onLoad.push(t.layout.buttons._load),t.layout.plugins.browserZoom=!0,t.layout.defaults.browserZoomCheckInterval=1e3,t.layout.optionsMap.layout.push("browserZoomCheckInterval"),t.layout.browserZoom={_init:function(e){t.layout.browserZoom.ratio()!==!1&&t.layout.browserZoom._setTimer(e)},_setTimer:function(e){if(!e.destroyed){var n=e.options,r=e.state,i=e.hasParentLayout?5e3:Math.max(n.browserZoomCheckInterval,100);setTimeout(function(){if(!e.destroyed&&n.resizeWithWindow){var i=t.layout.browserZoom.ratio();i!==r.browserZoom&&(r.browserZoom=i,e.resizeAll()),t.layout.browserZoom._setTimer(e)}},i)}},ratio:function(){function e(t,e){return(parseInt(t,10)/parseInt(e,10)*100).toFixed()}var n,r,i,o=window,s=screen,a=document,l=a.documentElement||a.body,u=t.layout.browser,c=u.version;return u.msie&&c>8||!u.msie?!1:s.deviceXDPI&&s.systemXDPI?e(s.deviceXDPI,s.systemXDPI):u.webkit&&(n=a.body.getBoundingClientRect)?e(n.left-n.right,a.body.offsetWidth):u.webkit&&(r=o.outerWidth)?e(r,o.innerWidth):(r=s.width)&&(i=l.clientWidth)?e(r,i):!1}},t.layout.onReady.push(t.layout.browserZoom._init)}(jQuery),define("jquery.layout",["jquery","jquery.ui/core","jquery.ui/draggable"],function(t){return function(){var e;return e||t.jQuery.layout}}(this)),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty,n=[].slice;define("views/controls/layout",["require","b","utils/i18n.gettext","underscore","jquery.layout"],function(e){var r,i,o,s;return r=e("b"),o=e("utils/i18n.gettext"),s=e("underscore"),e("jquery.layout"),i=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype.defaultOptions={defaults:{resizerTip:o("Resize"),sliderTip:o("Slide Open"),togglerTip_open:o("Close"),togglerTip_closed:o("Open"),togglerContent_closed:"▼",togglerContent_open:"▲",togglerLength_open:100,togglerLength_closed:100}},r.prototype.initialize=function(){var t,e,n,r,i,o,a;this.layoutOptions=null!=(n=this.options.layoutOptions)?n:{},r=this.defaultOptions;for(e in r)a=r[e],s.isObject(a)?this.layoutOptions[e]=s.defaults(null!=(i=this.layoutOptions[e])?i:{},a):null==(t=this.layoutOptions)[e]&&(t[e]=a);return this.layoutOptions.onresize=s.bind(this.onResize,this),this.setViews(null!=(o=this.options.xviews)?o:{})},r.prototype.cleanup=function(){var t;return this.instance.destroyed||null!=(t=this.instance)&&t.destroy(),this.instance=void 0},r.prototype.afterRender=function(){var t;return null!=(t=this.instance)&&t.destroy(),this.instance=this.$el.css({width:"100%",height:"100%"}).layout(this.layoutOptions)},r.prototype.onResize=function(){var t;return t=1<=arguments.length?n.call(arguments,0):[],this.trigger.apply(this,["resize"].concat(n.call(t)))},r}(r.Layout)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/application/split_pane/multi_object",["require","b","utils/i18n"],function(e){var n,r,i;return n=e("b"),i=e("utils/i18n"),r=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.className="object-oneline",n.prototype.template=function(t){return i.sprintf(t.message,t.selection.length)},n.prototype.serialize=function(){return{selection:this.options.selection,message:this.options.message}},n}(n.Layout)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty,n=[].slice;define("views/application/split_pane",["require","views/application/split_pane/empty_object","views/controls/layout","views/application/split_pane/multi_object"],function(e){var r,i,o,s;return r=e("views/application/split_pane/empty_object"),i=e("views/controls/layout"),o=e("views/application/split_pane/multi_object"),s=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.template=function(){return'<div id="list-pane" class="pane"></div><div id="object-pane" class="pane"></div>'},i.prototype.initialize=function(){var t;return this.app=this.options.app,this.selection=null!=(t=this.options.selection)?t:new Backbone.Collection,this.options.layoutOptions={north:{paneSelector:"#list-pane",size:"50%"},center:{paneSelector:"#object-pane"}},i.__super__.initialize.call(this)},i.prototype.cleanup=function(){return this.selection.off(null,null,this),i.__super__.cleanup.apply(this,arguments)},i.prototype.beforeRender=function(){return this.selection.off("reset",null,this),this.selection.on("reset",this.updateSelection,this)},i.prototype.afterRender=function(){return i.__super__.afterRender.apply(this,arguments),this.onResize()},i.prototype.applyController=function(t){var e,n,i;return this.collection=t.collection,this.messages=null!=(e=t.messages)?e:{},this.tabs=null!=(n=_.result(t,"tabs"))?n:[],this.currentTabId=t.currentTabId,this.emptyView=new r({message:this.messages.selectEmpty}),this.multiView=new o({selection:this.selection,message:this.messages.selectMulti(this.selection.length)}),t.objectViewClass!==this.objectViewClass&&(this.objectViewClass=t.objectViewClass,this.activeObjectView===this.objectView&&null!=this.activeObjectView&&null!=this.objectView&&this.updateSelection()),t.listViewClass!==this.listViewClass||(null!=(i=this.listView)?i.collection:void 0)!==t.collection?(this.listViewClass=t.listViewClass,this.listView=new this.listViewClass({app:this.app,collection:t.collection,selection:this.selection,actions:t.actions,controller:t}),this.setView("#list-pane",this.listView).render()):void 0},i.prototype.updateSelection=function(){var t;return this.activeObjectView=0===this.selection.length?this.emptyView=new r({message:this.messages.selectEmpty()}):1===this.selection.length?this.objectView=new this.objectViewClass({model:this.selection.at(0),app:this.app,tabs:function(){var e,n,r,i;for(r=this.tabs,i=[],e=0,n=r.length;n>e;e++)t=r[e],(!t.condition||t.condition(this.selection.at(0),this.app))&&i.push(t);return i}.call(this),currentTabId:this.currentTabId,label:this.messages.label(1)}):this.multiView=new o({selection:this.selection,message:this.messages.selectMulti(this.selection.length)}),this.setView("#object-pane",this.activeObjectView).render()},i.prototype.resizePanes=function(){var t;return null!=(t=this.instance)&&t.resizeAll(),this.onResize()},i.prototype.onResize=function(){var t,e;return t=1<=arguments.length?n.call(arguments,0):[],null!=this.listView&&this.listView.resizeGrid(),null!=(e=this.objectView)&&"function"==typeof e.resize&&e.resize(),i.__super__.onResize.apply(this,arguments)
},i}(i)})}.call(this),function(){var t=[].slice;define("helpers/tracking",["require","jquery","underscore","b","router","config"],function(e){var n,r,i,o,s;return n=e("jquery"),o=e("underscore"),r=e("b"),s=e("router"),i=function(){function r(t){var n;this.options=null!=t?t:{},this.gaConfig=e("config").ga,(null!=(n=this.gaConfig)?n.account:void 0)&&(this.ga("_setAccount",this.gaConfig.account),this.ga("_setDomainName",this.gaConfig.domain),s.on("navigate",this.onNavigate,this),s.on("route",this.onRoute,this))}return r.prototype.render=function(){var t;return(null!=(t=this.gaConfig)?t.account:void 0)?n.ajax({url:"https://ssl.google-analytics.com/ga.js",dataType:"script",cache:!0}):void 0},r.prototype.onNavigate=function(t,e){var n,r,i,o;if(e!==!0&&(null!=e?!e.trigger:!0)&&t!==document.location.pathname){for("/"===t[0]&&(t=t.substr(1)),o=s.handlers,r=0,i=o.length;i>r;r++)if(n=o[r],n.raw&&n.route.test(t)){t=n.raw;break}return this.trackUrl(t)}},r.prototype.onRoute=function(t){var e;if("trailFix"!==t)return e=s.handlersByName[t]||document.location.pathname,this.trackUrl(e)},r.prototype.trackUrl=function(t){return"/"!==t[0]&&(t="/"+t),this.ga("_trackPageview",t)},r.prototype.trackEvent=function(t,e){return this.ga("_trackEvent",t,e)},r.prototype.ga=function(){var e,n;return e=1<=arguments.length?t.call(arguments,0):[],(null!=(n=this.gaConfig)?n.account:void 0)?(window._gaq||(window._gaq=[]),window._gaq.push(e)):void 0},r}()})}.call(this),define("templates/application/upgrade_banner",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;limit_exceeded&&buf.push("<div>This installation is managing <em>"+escape(null==(interp=node_count)?"":interp)+"</em> nodes, but is only licensed for <em>"+escape(null==(interp=node_license)?"":interp)+'</em>. Please <a href="'+escape(null==(interp=upgrade_url)?"":interp)+'" target="_blank">upgrade now to ensure proper licensing</a>.</div>')}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/application/upgrade_banner",["require","b","j!application/upgrade_banner"],function(e){var n,r,i;return n=e("b"),i=e("j!application/upgrade_banner"),r=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.template=i,n.prototype.initialize=function(){return this.listenTo(this.model,"change",this.render)},n.prototype.serialize=function(){return this.model.attributes},n}(n.Layout)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/application/modals/master_queue",["require","views/controls/modals/base","views/controls/queue_view"],function(e){var n,r,i;return n=e("views/controls/modals/base"),i=e("views/controls/queue_view"),r=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.title="Tasks Still in Progress",n.prototype.closeButtonText="Close",n.prototype.initialize=function(){return this.masterQueue=this.options.masterQueue,n.__super__.initialize.apply(this,arguments)},n.prototype.afterRender=function(){return n.__super__.afterRender.apply(this,arguments),this.setView(".modal-body",new i({jobQueue:this.masterQueue})).render()},n}(n)})}.call(this),define("templates/controls/notification_center",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){if(buf.push('<div class="notification_center dropdown-menu">'),totalInvites>0){var org_verb=totalInvites>1?"invitations":"invitation";buf.push('<li class="total_invites notification_entry">');var __val__="You have "+totalInvites+" organization "+org_verb+" pending.";buf.push(escape(null==__val__?"":__val__)),buf.push("</li>")}if(totalInvites>0&&errorArrayLength>0&&buf.push('<li class="divider"></li>'),errorArrayLength>0){var error_verb=errorArrayLength>1?"requests":"request";buf.push('<li class="errors_pending notification_entry">');var __val__="You have "+errorArrayLength+" failed "+error_verb+" pending.";buf.push(escape(null==__val__?"":__val__)),buf.push("</li>")}buf.push("</div>")}return buf.join("")}}),define("templates/application/modals/master_queue_errors_modal",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<div class="modal-header">'),"started"!==state&&buf.push('<i data-dismiss="modal" aria-hidden="true" class="icon-remove"></i>'),buf.push('<h3 id="modal-label">');var __val__=title;buf.push(escape(null==__val__?"":__val__)),buf.push('</h3></div><div class="modal-subheader">');var __val__="These are the errors that occured during requests you send to the background.";if(buf.push(escape(null==__val__?"":__val__)),buf.push('</div><div class="modal-body">'),"finished"===state)buf.push("Success!");else if("error"===state){buf.push('<div class="alert alert-error alert-block"><h4><i class="icon-exclamation-sign"></i>&nbsp;Server Error</h4>');var __val__=message;buf.push(null==__val__?"":__val__),buf.push("</div>")}else if("queued"===state||"started"===state){var __val__=logo();buf.push(null==__val__?"":__val__)}else{buf.push('<div class="well">');var i=-1;(function(){if("number"==typeof errorArray.length)for(var t=0,e=errorArray.length;e>t;t++){var n=errorArray[t];i+=1,buf.push('<div class="clearfix"><i title="Click to re-queue failed request on close." class="icon-refresh pull-left"></i><i title="Click to throw away failed request." class="icon-remove-sign pull-left"></i>');var r=void 0!==n.model&&void 0!==n.model.id?n.model.id:"this object";if(403==n.originalError.xhr.status){buf.push('<div class="error_entry alert alert-error pull-left">');var o="You do not have permission to "+n.actionVerb+" on object "+r;buf.push(escape(null==o?"":o)),buf.push("</div>")}else{buf.push('<div class="error_entry alert alert-error pull-left">');var o="Action "+n.actionVerb+" failed for object "+r;buf.push(escape(null==o?"":o)),buf.push("</div>")}buf.push("</div>")}else for(var t in errorArray){var n=errorArray[t];i+=1,buf.push('<div class="clearfix"><i title="Click to re-queue failed request on close." class="icon-refresh pull-left"></i><i title="Click to throw away failed request." class="icon-remove-sign pull-left"></i>');var r=void 0!==n.model&&void 0!==n.model.id?n.model.id:"this object";if(403==n.originalError.xhr.status){buf.push('<div class="error_entry alert alert-error pull-left">');var o="You do not have permission to "+n.actionVerb+" on object "+r;buf.push(escape(null==o?"":o)),buf.push("</div>")}else{buf.push('<div class="error_entry alert alert-error pull-left">');var o="Action "+n.actionVerb+" failed for object "+r;buf.push(escape(null==o?"":o)),buf.push("</div>")}buf.push("</div>")}}).call(this),buf.push("</div>")}buf.push('</div><div class="modal-list"></div><div class="modal-footer"><button class="btn btn-clear">Clear All</button><button'),buf.push(attrs({"data-dismiss":"modal","aria-hidden":"true",disabled:"started"===state,"class":"btn btn-close"},{"data-dismiss":!0,"aria-hidden":!0,disabled:!0})),buf.push(">");var __val__=closeButtonText;buf.push(escape(null==__val__?"":__val__)),buf.push("</button></div>")}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/application/modals/master_queue_errors_modal",["require","views/controls/modals/base","views/controls/empty","j!application/modals/master_queue_errors_modal","services/job_queue","bootstrap-tooltip"],function(e){var n,r,i,o,s;return n=e("views/controls/modals/base"),r=e("views/controls/empty"),s=e("j!application/modals/master_queue_errors_modal"),i=e("services/job_queue"),e("bootstrap-tooltip"),o=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.template=s,n.prototype.className=n.prototype.className+" modal-request-errors",n.prototype.closeButtonText="Close",n.prototype.events={"click .icon-refresh":"retryRequest","click .icon-remove-sign":"deleteRequestAttempt","click .btn-clear":"clearAllAndClose"},n.prototype.initialize=function(){return this.masterQueue=this.options.app.masterQueue,this.errorQueue=this.options.errorQueue,this.retryQueue=new i,n.__super__.initialize.apply(this,arguments)},n.prototype.cleanup=function(){var t,e;return null!=(t=this.app.usernav)&&t.updateNotificationsUI(),null!=(e=this.app.usernav)&&e.notificationCenter.hide(),this.retryQueue.sendRemainingToDifferentQueue(this.masterQueue)},n.prototype.serialize=function(){return _.extend(n.__super__.serialize.call(this),{errorArray:this.errorQueue.requestArray})},n.prototype.deleteRequestAttempt=function(t){return t.preventDefault(),this.removeRequestFromErrors(t),this.renderEmpty()},n.prototype.retryRequest=function(t){var e;return t.preventDefault(),e=this.removeRequestFromErrors(t),this.retryQueue.queueRequest(e),this.renderEmpty()},n.prototype.renderEmpty=function(){return 0===this.$(".error_entry").length?this.setView(".modal-body",new r).render():void 0},n.prototype.removeRequestFromErrors=function(t){var e,n;return e=$(t.currentTarget).parent(),e.remove(),n=this.errorQueue.removeIndex(e.index())},n.prototype.clearAllAndClose=function(t){return t.preventDefault(),this.$(".error_entry").each(function(t){return function(e,n){return t.errorQueue.removeIndex(0),t.$(n).remove()}}(this)),this.renderEmpty()},n}(n)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/controls/notification_center",["require","b","j!controls/notification_center","views/application/modals/org_invitation","views/application/modals/master_queue_errors_modal"],function(e){var n,r,i,o,s;return n=e("b"),s=e("j!controls/notification_center"),o=e("views/application/modals/org_invitation"),r=e("views/application/modals/master_queue_errors_modal"),i=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.template=s,n.prototype.events={"click .total_invites":"renderOrgInvitesModal","click .errors_pending":"renderErrorsModal"},n.prototype.initialize=function(t){return this.app=t.app,this.usernav=t.usernav,this.totalInvites=t.totalInvites,this.errorQueue=t.errorQueue},n.prototype.serialize=function(){return{totalInvites:this.totalInvites,errorArrayLength:this.errorQueue.length()}},n.prototype.updateNotifications=function(t){return this.totalInvites=t,this.render()},n.prototype.hide=function(){return this.$(".notification_center").hide()},n.prototype.toggle=function(){return this.$(".notification_center").toggle()},n.prototype.renderOrgInvitesModal=function(t){return t.preventDefault(),new o({app:this.app,usernav:this.usernav,title:"Organization Invitations"})},n.prototype.renderErrorsModal=function(t){return t.preventDefault(),new r({app:this.app,errorQueue:this.errorQueue,title:"Errors from Background Processes"})},n}(n.Layout)})}.call(this),define("templates/application/usernav/organization_dropdown",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<a class="dropdown-toggle">'),labelIcon&&(buf.push("<i"),buf.push(attrs({"class":"dropdown-toggle-icon icon-"+labelIcon},{"class":!0})),buf.push("></i>")),buf.push('<span class="dropdown-toggle-label">');var __val__=label;buf.push(escape(null==__val__?"":__val__)),buf.push('</span><i class="icon-caret-down"></i></a><ul'),buf.push(attrs({role:"menu","class":"dropdown-menu semimodal-pullout "+pulloutClassName},{"class":!0,role:!0})),buf.push('><li class="dropdown-header">Organizations</li>'),function(){if("number"==typeof orgs.models.length)for(var t=0,e=orgs.models.length;e>t;t++){var n=orgs.models[t];if(n.id==org.id){buf.push('<li class="selected icon"><a'),buf.push(attrs({tabindex:"-1","data-action":"switch:"+n.id},{tabindex:!0,"data-action":!0})),buf.push('><i class="icon-ok"></i>');var r=n.id;buf.push(escape(null==r?"":r)),buf.push("</a></li>")}else{buf.push("<li><a"),buf.push(attrs({tabindex:"-1","data-action":"switch:"+n.id},{tabindex:!0,"data-action":!0})),buf.push(">");var r=n.id;buf.push(escape(null==r?"":r)),buf.push("</a></li>")}}else for(var t in orgs.models){var n=orgs.models[t];if(n.id==org.id){buf.push('<li class="selected icon"><a'),buf.push(attrs({tabindex:"-1","data-action":"switch:"+n.id},{tabindex:!0,"data-action":!0})),buf.push('><i class="icon-ok"></i>');var r=n.id;buf.push(escape(null==r?"":r)),buf.push("</a></li>")}else{buf.push("<li><a"),buf.push(attrs({tabindex:"-1","data-action":"switch:"+n.id},{tabindex:!0,"data-action":!0})),buf.push(">");var r=n.id;buf.push(escape(null==r?"":r)),buf.push("</a></li>")}}}.call(this),buf.push('<li class="divider"></li><li><a tabindex="-1" data-action="manage">Manage Organizations</a></li></ul>')}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/application/usernav/organization_dropdown",["require","views/controls/dropdown","router","j!application/usernav/organization_dropdown"],function(e){var n,r,i,o;return n=e("views/controls/dropdown"),i=e("router"),o=e("j!application/usernav/organization_dropdown"),r=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.template=o,n.prototype.pulloutClassName="with-icons responsive-header",n.prototype.initialize=function(){return this.app=this.options.app,this.collection=this.app.organizations,this.model=this.collection.last(),this.options.label=this.model.id,n.__super__.initialize.apply(this,arguments)},n.prototype.beforeRender=function(){return i.on("all",this.updateOrg,this)},n.prototype.cleanup=function(){return i.off(null,null,this)},n.prototype.serialize=function(){var t;return t=n.__super__.serialize.apply(this,arguments),t.orgs=this.collection,t.org=this.model,t},n.prototype.numOptions=function(){return this.collection.length+2},n.prototype.updateOrg=function(){var t;return t=this.collection.last(),t!==this.model?(this.model=t,this.label=this.model.get("full_name"),this.render()):void 0},n}(n)})}.call(this),define("templates/application/usernav/user_dropdown",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<a class="dropdown-toggle">'),labelIcon&&(buf.push("<i"),buf.push(attrs({"class":"dropdown-toggle-icon icon-"+labelIcon},{"class":!0})),buf.push("></i>")),buf.push('<span class="dropdown-toggle-label">');var __val__=label;buf.push(escape(null==__val__?"":__val__)),buf.push('</span><i class="icon-caret-down"></i></a><ul'),buf.push(attrs({role:"menu","class":"dropdown-menu semimodal-pullout "+pulloutClassName},{"class":!0,role:!0})),buf.push('><li class="dropdown-header">');var __val__=username?"Signed in as "+username:"User";buf.push(escape(null==__val__?"":__val__)),buf.push("</li>"),function(){if("number"==typeof items.length)for(var t=0,e=items.length;e>t;t++){var n=items[t];buf.push("<li"),buf.push(attrs({"class":n.id},{"class":!0})),buf.push("><a"),buf.push(attrs({tabindex:1,"data-action":n.id},{tabindex:!0,"data-action":!0})),buf.push(">");var r=n.label;buf.push(escape(null==r?"":r)),buf.push("</a></li>")}else for(var t in items){var n=items[t];buf.push("<li"),buf.push(attrs({"class":n.id},{"class":!0})),buf.push("><a"),buf.push(attrs({tabindex:1,"data-action":n.id},{tabindex:!0,"data-action":!0})),buf.push(">");var r=n.label;buf.push(escape(null==r?"":r)),buf.push("</a></li>")}}.call(this),buf.push("</ul>")}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/application/usernav/user_dropdown",["require","views/controls/dropdown","utils/i18n.gettext","state","config","j!application/usernav/user_dropdown"],function(e){var n,r,i,o,s;return n=e("views/controls/dropdown"),r=e("utils/i18n.gettext"),s=e("state"),o=e("config"),i=function(n){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,n),i.prototype.template=e("j!application/usernav/user_dropdown"),i.prototype.pulloutClassName="responsive-header",i.prototype.items=[{id:"profile",label:r("My Profile")},{id:"logout",label:r("Sign Out")}],i.prototype.initialize=function(){return this.user=s.get("user"),this.options.label=this.user.get("display_name")||"User",o.private_chef||this.items.splice(1,0,{id:"account",label:r("My Account")}),i.__super__.initialize.apply(this,arguments)},i.prototype.serialize=function(){return _.extend(i.__super__.serialize.apply(this,arguments),{labelIcon:"user",username:this.user.get("display_name")})},i}(n)})}.call(this),define("templates/application/usernav",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<div class="usernav-section report-bug"><i class="icon-comment"></i><span class="section-label">Feedback</span></div>'),organizations.length>0&&buf.push('<div class="usernav-section organization"><span class="section-label">Organization</span><span class="organization-dropdown"></span></div>'),buf.push('<div class="usernav-section user"><span class="section-label">Signed in as</span><span class="user-dropdown"></span></div><div title="Background Tasks in Progress" class="usernav-section jobs-container"><span disabled="disabled" class="jobs-in-progress"></span></div><div class="usernav-section invites"><span class="notifier"></span><div class="notifications-dropdown"></div></div>')}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/application/usernav",["require","jquery","b","views/application/modals/master_queue","views/controls/notification_center","views/application/usernav/organization_dropdown","views/controls/modals/report_feedback","utils/i18n.gettext","views/application/usernav/user_dropdown","config","router","state","bootstrap-tooltip","j!application/usernav"],function(e){var n,r,i,o,s,a,l,u,c,d,p,h;return n=e("jquery"),r=e("b"),i=e("views/application/modals/master_queue"),o=e("views/controls/notification_center"),s=e("views/application/usernav/organization_dropdown"),a=e("views/controls/modals/report_feedback"),l=e("utils/i18n.gettext"),u=e("views/application/usernav/user_dropdown"),d=e("config"),p=e("router"),h=e("state"),e("bootstrap-tooltip"),c=function(r){function l(){return l.__super__.constructor.apply(this,arguments)}return t(l,r),l.prototype.template=e("j!application/usernav"),l.prototype.events={"click .report-bug":"reportFeedback","click .notifier":"pendingInvites","click .jobs-in-progress":"renderMasterQueueModal"},l.prototype.renderMasterQueueModal=function(){return new i({app:this.app,masterQueue:this.app.masterQueue})},l.prototype.initialize=function(){return this.app=this.options.app,this.userDropdown=new u,this.setView(".user-dropdown",this.userDropdown),this.app.organizations.isEmpty()||(this.organizationDropdown=new s({app:this.app}),this.setView(".organization-dropdown",this.organizationDropdown)),this.on("invites_updated",this.updateInvites,this),this.totalInvites=0,this.app.masterQueue.on("success",this.updateJobsInProgress,this),this.app.masterQueue.on("error",this.errorInMasterQueue,this),this.app.masterQueue.on("queue_extended",this.updateJobsInProgress,this)},l.prototype.beforeRender=function(){return this.userDropdown.off(null,null,this),this.userDropdown.on("action:logout",this.logout,this),this.userDropdown.on("action:account",this.showAccount,this),this.userDropdown.on("action:profile",this.showProfile,this),this.organizationDropdown.off(null,null,this),this.organizationDropdown.on("action",this.switchOrg,this),this.organizationDropdown.on("action:manage",this.manageOrgs,this)},l.prototype.serialize=function(){return{organizations:this.app.organizations}},l.prototype.errorInMasterQueue=function(){return this.updateJobsInProgress(),this.updateNotificationsUI()},l.prototype.updateJobsInProgress=function(){return this.$(".jobs-in-progress").html(this.app.masterQueue.length())},l.prototype.cleanup=function(){return this.userDropdown.off(null,null,this),this.organizationDropdown.off(null,null,this),this.off(null,null,this)},l.prototype.afterRender=function(){return this.$(".jobs-container").tooltip({placement:"bottom"}),this.notificationCenter=new o({totalInvites:this.totalInvites,errorQueue:this.app.masterQueue.generateErrorQueue(),app:this.app,usernav:this}),this.setView(".notifications-dropdown",this.notificationCenter).render(),this.updateInvites(),this.notificationCenter.hide(),this.updateJobsInProgress()},l.prototype.updateJobsInProgress=function(){return this.$(".jobs-in-progress").html(this.app.masterQueue.length()),this.app.masterQueue.length()>0?this.$(".jobs-in-progress").attr("disabled",!1):this.$(".jobs-in-progress").attr("disabled",!0)},l.prototype.applyController=function(t){return this.controller=t,this.updateInvites()},l.prototype.getInviteData=function(){var t;return n.ajax({url:"/users/"+(null!=(t=h.get("user"))?t.id:void 0)+"/association_requests",type:"get"})},l.prototype.updateInvites=function(){var t;return t=this.getInviteData(),t.success(function(t){return function(e){return t.totalInvites=e.length,t.updateNotificationsUI()}}(this))},l.prototype.updateNotificationsUI=function(){var t;return t=this.totalInvites+this.app.masterQueue.numberOfErrors(),t>0?this.$(".notifier").attr("disabled",!1):(this.$(".notifier").attr("disabled",!0),this.notificationCenter.hide()),this.notificationCenter.updateNotifications(this.totalInvites),this.$(".notifier").html(t)},l.prototype.pendingInvites=function(t){return t.preventDefault(),"none"===this.$(".notification_center").css("display")&&this.notificationCenter.updateNotifications(this.totalInvites),this.notificationCenter.toggle()},l.prototype.reportFeedback=function(t){return null!=t&&t.preventDefault(),new a({app:this.app,controller:h.get("controller")})},l.prototype.logout=function(){return n.post("/logout").then(function(){return window.location.assign("/login")})},l.prototype.showHelp=function(){return window.open(d.chef_documentation_url,"_blank")},l.prototype.showProfile=function(){var t;return d.private_chef?(p.navigate(null!=(t=h.get("user"))?t.url():void 0,{trigger:!0}),h.get("controller").collection.trigger("url_manually_navigated",h.get("user"))):window.open(d.chef_identity_url)},l.prototype.showAccount=function(){return window.open(d.chef_account_management_url)},l.prototype.switchOrg=function(t){var e,n,r;return(e=t.match(/^switch:(.+)$/))&&(this.organizationDropdown.close(),r=this.app.organizations.get(e[1]),r&&r!==this.app.organizations.last())?(n=this.controller.url(r),this.app.organizations.getCurrent(r.id),this.app.trigger("change:org",r),p.navigate(n,{trigger:!0})):void 0},l.prototype.manageOrgs=function(){return this.organizationDropdown.close(),p.navigate(this.app.organizations.url(),{trigger:!0})},l}(r.Layout)})}.call(this),define("templates/application/application",["jade/runtime"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<div id="banner"></div><div id="header"><div id="logo"><a href="/"><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNi4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB3aWR0aD0iMzM4LjEwM3B4IiBoZWlnaHQ9Ijk4LjYxNXB4IiB2aWV3Qm94PSIwIDAgMzM4LjEwMyA5OC42MTUiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDMzOC4xMDMgOTguNjE1Ig0KCSB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnPg0KCTxnPg0KCQk8cGF0aCBmaWxsPSIjRkZGRkZGIiBkPSJNMTA2LjcxNywzNS42MzR2LTAuMTY2YzAtMTYuNjExLDEyLjUyMS0zMC4yMTcsMzAuNDY3LTMwLjIxN2MxMS4wMTksMCwxNy42MTIsMy42NzMsMjMuMDM5LDkuMDE1DQoJCQlsLTguMTgxLDkuNDMyYy00LjUwNy00LjA5LTkuMDk4LTYuNTk0LTE0Ljk0MS02LjU5NGMtOS44NSwwLTE2Ljk0NCw4LjE4LTE2Ljk0NCwxOC4xOTZ2MC4xNjcNCgkJCWMwLDEwLjAxNiw2LjkyOCwxOC4zNjMsMTYuOTQ0LDE4LjM2M2M2LjY3OCwwLDEwLjc2OC0yLjY3MSwxNS4zNTgtNi44NDVsOC4xOCw4LjI2NGMtNi4wMDksNi40MjctMTIuNjg4LDEwLjQzMy0yMy45NTYsMTAuNDMzDQoJCQlDMTE5LjQ4OSw2NS42ODQsMTA2LjcxNyw1Mi40MTMsMTA2LjcxNywzNS42MzR6Ii8+DQoJCTxwYXRoIGZpbGw9IiNGRkZGRkYiIGQ9Ik0xNzAuOTA3LDYuMjUzaDEyLjg1NHYyMy4xMjJoMjMuNzA2VjYuMjUzaDEyLjg1NHY1OC40M2gtMTIuODU0VjQxLjIyN2gtMjMuNzA2djIzLjQ1NmgtMTIuODU0VjYuMjUzeiIvPg0KCQk8cGF0aCBmaWxsPSIjRkZGRkZGIiBkPSJNMjM2LjAxNiw2LjI1M2g0NC4wNzN2MTEuNDM2aC0zMS4zMDF2MTEuODUzaDI3LjU0NXYxMS40MzVoLTI3LjU0NXYxMi4yNzFoMzEuNzE5djExLjQzNmgtNDQuNDkxVjYuMjUzeiINCgkJCS8+DQoJCTxwYXRoIGZpbGw9IiNGRkZGRkYiIGQ9Ik0yOTMuNjEyLDYuMjUzaDQ0LjQ5djExLjY4NmgtMzEuNjM1djEyLjQzOGgyNy44OHYxMS42ODZoLTI3Ljg4djIyLjYyMWgtMTIuODU1VjYuMjUzeiIvPg0KCTwvZz4NCjwvZz4NCjxwYXRoIGZpbGw9IiNGRkZGRkYiIGQ9Ik00Ni44MDgsNjcuODg5Yy0xMS42MjUsMC0yMS4wODItOS40NTgtMjEuMDgyLTIxLjA4M2MwLTExLjYyNSw5LjQ1OC0yMS4wODIsMjEuMDgyLTIxLjA4Mg0KCWM5LjU5NSwwLDE3LjcwNyw2LjQ0NSwyMC4yNSwxNS4yMzFoOC4xNThjLTIuNzE0LTEzLjE5Ni0xNC40Mi0yMy4xNS0yOC40MDgtMjMuMTVjLTE1Ljk5MSwwLTI5LDEzLjAwOS0yOSwyOQ0KCXMxMy4wMDksMjkuMDAxLDI5LDI5LjAwMWMxMy45ODgsMCwyNS42OTQtOS45NTQsMjguNDA4LTIzLjE1aC04LjE1OEM2NC41MTUsNjEuNDQzLDU2LjQwMiw2Ny44ODksNDYuODA4LDY3Ljg4OXoiLz4NCjxwYXRoIGZpbGw9IiNGRkZGRkYiIGQ9Ik0zMi41OTcsNjEuMDE3YzMuNjQxLDMuNjQxLDguNjY3LDUuODk2LDE0LjIxMSw1Ljg5NnYtOC40MDVjLTMuMjMxLDAtNi4xNTctMS4zMS04LjI3NC0zLjQyN0wzMi41OTcsNjEuMDE3DQoJeiIvPg0KPHBhdGggZmlsbD0iI0YzOEIwMCIgZD0iTTI2LjcwMSw0Ni44MDZjMCwyLjg3OCwwLjYxMiw1LjYxNCwxLjcwNiw4LjA5Mmw3LjY4OS0zLjM4MWMtMC42MzUtMS40NDEtMC45OS0zLjAzNC0wLjk5LTQuNzENCgljMC02LjQ2Myw1LjIzOS0xMS43MDIsMTEuNzAxLTExLjcwMnYtOC40MDVDMzUuNzIxLDI2LjY5OSwyNi43MDEsMzUuNzE5LDI2LjcwMSw0Ni44MDZ6Ii8+DQo8cGF0aCBmaWxsPSIjRkZGRkZGIiBkPSJNNTQuMDk5LDI4LjA2OWwtMy4wNDksNy44MzZjMi40ODksMC45Nyw0LjU2NywyLjc2Myw1Ljg5MSw1LjA1MWg5LjEwNA0KCUM2NC4yNDYsMzUuMDU0LDU5LjgwMSwzMC4yOTYsNTQuMDk5LDI4LjA2OXoiLz4NCjxwYXRoIGZpbGw9IiNGMzhCMDAiIGQ9Ik01MS4wNSw1Ny43MDhsMy4wNDksNy44MzZjNS43MDItMi4yMjgsMTAuMTQ2LTYuOTg1LDExLjk0NS0xMi44ODdINTYuOTQNCglDNTUuNjE2LDU0Ljk0NCw1My41MzksNTYuNzM3LDUxLjA1LDU3LjcwOHoiLz4NCjxwYXRoIGZpbGw9IiNGRkZGRkYiIGQ9Ik05LjYwOSw1OC4wNTRjLTAuMTM0LTAuNDQtMC4yNi0wLjg4NC0wLjM3OC0xLjMzYy0wLjAwNy0wLjAyNy0wLjAxNC0wLjA1NC0wLjAyMS0wLjA4Mg0KCUM5LjEwMSw1Ni4yMyw5LDU1LjgxNSw4LjkwNCw1NS4zOThjLTAuMDE5LTAuMDg0LTAuMDM3LTAuMTctMC4wNTUtMC4yNTVjLTAuMDc5LTAuMzU5LTAuMTU0LTAuNzE4LTAuMjI0LTEuMDgNCgljLTAuMDMtMC4xNi0wLjA1OC0wLjMyMi0wLjA4Ni0wLjQ4M2MtMC4wNTEtMC4yODktMC4xMDItMC41NzctMC4xNDYtMC44NjdjLTAuMDM4LTAuMjQ3LTAuMDcxLTAuNDk2LTAuMTA0LTAuNzQ1DQoJYy0wLjIyOC0xLjY5NS0wLjM1Mi0zLjQxNy0wLjM1LTUuMTYzSDBjLTAuMDAyLDEuOTAzLDAuMTE3LDMuNzgzLDAuMzQxLDUuNjM1SDAuMzRjMC4wMDUsMC4wNDEsMC4wMTIsMC4wODEsMC4wMTcsMC4xMjINCgljMC4wNjIsMC41MDUsMC4xMzEsMS4wMDgsMC4yMSwxLjUwOWMwLjAyMSwwLjEzOCwwLjA0NiwwLjI3NCwwLjA2OSwwLjQxMmMwLjA2OCwwLjQxMiwwLjEzOSwwLjgyMiwwLjIxOCwxLjIzDQoJYzAuMDQyLDAuMjE3LDAuMDg5LDAuNDMzLDAuMTM0LDAuNjQ4YzAuMDY4LDAuMzI1LDAuMTM2LDAuNjUsMC4yMSwwLjk3M2MwLjA2NSwwLjI4NSwwLjEzNywwLjU2NiwwLjIwOCwwLjg0OQ0KCUMxLjQ3LDU4LjQzNywxLjUzMiw1OC42OSwxLjYsNTguOTQxYzAuMDksMC4zMzQsMC4xODYsMC42NjYsMC4yODMsMC45OTdDMS45MjMsNjAuMDc3LDEuOTU4LDYwLjIxNywyLDYwLjM1NGwwLjAwNS0wLjAwMQ0KCWMwLjU0OCwxLjgxNCwxLjE5NywzLjU4NCwxLjk1Miw1LjI5N2w3LjI3Ni0zLjJDMTAuNjA1LDYxLjAyOCwxMC4wNjUsNTkuNTU5LDkuNjA5LDU4LjA1NEw5LjYwOSw1OC4wNTR6Ii8+DQo8cGF0aCBmaWxsPSIjRjM4QjAwIiBkPSJNNDYuODA4LDg1LjY3NWMtMTAuNzE2LDAtMjAuNDMtNC4zNjMtMjcuNDY3LTExLjQwMmwtNS42MjUsNS42MjVjOC40Nyw4LjQ3MSwyMC4xNjcsMTMuNzE1LDMzLjA5MiwxMy43MTUNCgljMjMuODY5LDAsNDMuNTY0LTE3Ljg2Nyw0Ni40NDMtNDAuOTU2aC04LjAxNEM4Mi40MDYsNzEuMzI0LDY2LjI1Miw4NS42NzUsNDYuODA4LDg1LjY3NXoiLz4NCjxwYXRoIGZpbGw9IiNGMzhCMDAiIGQ9Ik00Ni44MDgsNy45MzhjOC43MDYsMCwxNi43NSwyLjg3OCwyMy4yMzUsNy43MzJMNzQuOCw5LjI5M0M2Ni45OTMsMy40NTgsNTcuMzA1LDAsNDYuODA4LDANCglDMjYuOTQ2LDAsOS45NzYsMTIuMzcyLDMuMTc5LDI5LjgzbDcuNDA3LDIuODgyQzE2LjI0MSwxOC4yMjcsMzAuMzQ0LDcuOTM4LDQ2LjgwOCw3LjkzOHoiLz4NCjxwYXRoIGZpbGw9IiNGRkZGRkYiIGQ9Ik04NS4yMzYsNDAuOTU2aDguMDE0Yy0wLjg1OS02Ljg4OC0zLjIxNS0xMy4zMTEtNi43MzItMTguOTM0bC02Ljc0OCw0LjIxMQ0KCUM4Mi41MjYsMzAuNjMxLDg0LjQyNywzNS42MTYsODUuMjM2LDQwLjk1NnoiLz4NCjxwYXRoIGZpbGw9IiNGMzhCMDAiIGQ9Ik03Ni4yMDgsNDAuOTU2aDguMDQxYy0yLjA5OC0xMy40ODItMTEuMzMyLTI0LjYyOS0yMy43MDMtMjkuNDU5bC0yLjg3Myw3LjM4NA0KCUM2Ny4wODMsMjIuNTUzLDc0LjIsMzAuODQyLDc2LjIwOCw0MC45NTZ6Ii8+DQo8cGF0aCBmaWxsPSIjRkZGRkZGIiBkPSJNNDYuODA4LDE2LjgzMUw0Ni44MDgsMTYuODMxbDAuMDAxLTcuOTE4YzAsMCwwLDAtMC4wMDEsMGMtMTYuMDUsMC0yOS43OTksMTAuMDMxLTM1LjMxMiwyNC4xNTMNCglsNy4zNzgsMi44NzFDMjMuMjM1LDI0Ljc2NiwzNC4xMTEsMTYuODMxLDQ2LjgwOCwxNi44MzF6Ii8+DQo8cGF0aCBmaWxsPSIjRjM4QjAwIiBkPSJNMTYuODMyLDQ2LjgwNkwxNi44MzIsNDYuODA2bC03LjkxOCwwdjBjMCwxNS45MjQsOS44NzYsMjkuNTc4LDIzLjgyMiwzNS4xNzZsMi45NC03LjM1DQoJQzI0LjY0NCw3MC4yMDQsMTYuODMyLDU5LjQwMywxNi44MzIsNDYuODA2eiIvPg0KPHBhdGggZmlsbD0iI0ZGRkZGRiIgZD0iTTQ2LjgwOCw3Ni43ODJWODQuN2MxOC45MDYsMCwzNC42MjEtMTMuOTE2LDM3LjQ0Mi0zMi4wNDJoLTguMDQxDQoJQzczLjQ3OSw2Ni4zOTUsNjEuMzM1LDc2Ljc4Miw0Ni44MDgsNzYuNzgyeiIvPg0KPGc+DQoJPHBhdGggZmlsbD0iI0YxOEEyMSIgZD0iTTEyNS4wMzQsODkuNTE3aC0wLjEwOGwtNS45MTItOC44NTRWOTQuMTZoLTMuMjY2Vjc1LjI2NWgzLjUzNmw1Ljc1LDguOTM1bDUuNzUtOC45MzVoMy41MzZWOTQuMTZIMTMxDQoJCVY4MC42MDlMMTI1LjAzNCw4OS41MTd6Ii8+DQoJPHBhdGggZmlsbD0iI0YxOEEyMSIgZD0iTTE2My4xODMsOTQuMTZoLTMuNTA5bC0xLjkxNy00LjU2MmgtOC45MzVsLTEuOTQzLDQuNTYyaC0zLjQwMWw4LjMxNC0xOS4wM2gzLjA3N0wxNjMuMTgzLDk0LjE2eg0KCQkgTTE1My4yNzcsNzkuMDk4bC0zLjIzOSw3LjU1OGg2LjUwNUwxNTMuMjc3LDc5LjA5OHoiLz4NCgk8cGF0aCBmaWxsPSIjRjE4QTIxIiBkPSJNMTg1LjU0LDc1LjI2NWgzLjI2NlY5NC4xNmgtMi43OGwtMTAuNDE5LTEzLjQ0MlY5NC4xNmgtMy4yNjZWNzUuMjY1aDMuMDc3TDE4NS41NCw4OC4zM1Y3NS4yNjV6Ii8+DQoJPHBhdGggZmlsbD0iI0YxOEEyMSIgZD0iTTIxNy42NjgsOTQuMTZoLTMuNTA5bC0xLjkxNy00LjU2MmgtOC45MzVsLTEuOTQzLDQuNTYyaC0zLjQwMWw4LjMxNC0xOS4wM2gzLjA3N0wyMTcuNjY4LDk0LjE2eg0KCQkgTTIwNy43NjIsNzkuMDk4bC0zLjIzOSw3LjU1OGg2LjUwNUwyMDcuNzYyLDc5LjA5OHoiLz4NCgk8cGF0aCBmaWxsPSIjRjE4QTIxIiBkPSJNMjM0LjYyNyw5NC40ODRjLTUuOTExLDAtOS43OTgtNC4yMTEtOS43OTgtOS43NDVjMC01LjMxNyw0LjA0OS05Ljc5OCw5Ljc0NC05Ljc5OA0KCQljMy4yOTMsMCw1LjMxNywwLjkxOCw3LjI2MSwyLjU2NGwtMi4xMDUsMi41MWMtMS40NTctMS4yNDEtMi44ODgtMi4wMjQtNS4yOS0yLjAyNGMtMy40ODIsMC02LjEyOCwzLjAyMy02LjEyOCw2LjY5NA0KCQljMCwzLjkxNCwyLjU2NCw2Ljc3NSw2LjQyNSw2Ljc3NWMxLjc4MSwwLDMuNDAxLTAuNTY3LDQuNTYyLTEuNDMxdi0zLjUzNmgtNC44MzJ2LTIuODg4aDguMDQ0djcuOTM2DQoJCUMyNDAuNjQ2LDkzLjEzNCwyMzcuOTc1LDk0LjQ4NCwyMzQuNjI3LDk0LjQ4NHoiLz4NCgk8cGF0aCBmaWxsPSIjRjE4QTIxIiBkPSJNMjY2Ljc1Niw3OC4yMzRoLTEwLjY4OXY0LjkxM2g5LjQ3NXYyLjk2OWgtOS40NzV2NS4wNzVoMTAuODI0djIuOTY5aC0xNC4xNDRWNzUuMjY1aDE0LjAwOVY3OC4yMzR6Ii8+DQo8L2c+DQo8L3N2Zz4NCg==" alt="Chef Manage"/></a></div><div id="mainnav"></div><div id="usernav"></div></div><div id="content"><div id="sidebar"></div><div id="panes"></div></div><div id="footer"><div class="pull-left">Copyright &copy; 2012&thinsp;&ndash;&thinsp;'+escape(null==(interp=(new Date).getFullYear())?"":interp)+' Chef Software, Inc.</div><div class="pull-right"><a href="#" class="leave-feedback">Feedback</a><a id="changelog" href="/changelog" target="_blank">What\'s New?</a><a id="about-manage">About Chef Manage</a></div>Need help? If you have questions or you\'re stuck,\n<a href="'+escape(null==(interp=support_site_url)?"":interp)+'" target="_blank">we\'re here to help</a>.</div>')
}return buf.join("")}}),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("controllers/application",["require","jquery","views/controls/modals/about","controllers/admin","b","views/application/modals/browser_version","services/job_queue","models/license_info","views/application/mainnav","views/organizations/modals/no_organizations","controllers/nodes_parent","collections/organizations","controllers/policies","views/controls/modals/report_feedback","controllers/reporting","router","views/application/split_pane","helpers/tracking","views/application/upgrade_banner","models/user","views/application/usernav","underscore","j!application/application","config","state"],function(e){var n,r,i,o,s,a,l,u,c,d,p,h,f,g,m,v,y,b,_,w,x,k,C,j,M;return n=e("jquery"),r=e("views/controls/modals/about"),i=e("controllers/admin"),s=e("b"),a=e("views/application/modals/browser_version"),l=e("services/job_queue"),u=e("models/license_info"),c=e("views/application/mainnav"),d=e("views/organizations/modals/no_organizations"),p=e("controllers/nodes_parent"),h=e("collections/organizations"),f=e("controllers/policies"),g=e("views/controls/modals/report_feedback"),m=e("controllers/reporting"),j=e("router"),v=e("views/application/split_pane"),y=e("helpers/tracking"),b=e("views/application/upgrade_banner"),_=e("models/user"),w=e("views/application/usernav"),x=e("underscore"),k=e("j!application/application"),C=e("config"),M=e("state"),o=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.template=k,o.prototype.events={"click #logo":"clickLogo","click .leave-feedback":"reportFeedback","click #about-manage":"aboutModal"},o.prototype.initialize=function(){var t,e,r,o,a,u;for(this.csrf_param=n('meta[name="csrf-param"]').attr("content"),this.csrf_token=n('meta[name="csrf-token"]').attr("content"),n.ajaxSetup({beforeSend:function(t){return function(e,n){return!n.crossDomain&&"GET"!==n.type&&t.csrf_token?e.setRequestHeader("X-CSRF-Token",t.csrf_token):void 0}}(this)}),n(document).ajaxError(function(t,e){return 401===e.status?n.ajax({url:"/logout",type:"POST"}).always(function(){return window.location.reload()}):void 0}),j.route(/(.*?)\/+(\?.*)?$/,"trailFix",function(t,e){return this.navigate(this.toFragment(t,e),{trigger:!0})}),j.route("","root",function(t){return function(){return x.defer(x.bind(t.rootRoute,t))}}(this)),this.selection=new s.Collection,this.tracking=new y,this.splitPane=new v({app:this,selection:this.selection}),this.masterQueue=new l({storeErrorQueue:!0}),this.setUpNavigationPrevention(this.masterQueue),o=C.organizations||[],t=0,e=o.length;e>t;t++)r=o[t],r.app=this;return this.organizations=new h(C.organizations),this.organizations.on("current:changed",function(t){return function(e){return t.currentOrg=e}}(this)),this.currentOrg=this.organizations.last(),null!=(a=window.Chef)&&"function"==typeof a.preload&&a.preload(this.organizations),M.set({user:new _(C.user,{collection:null!=(u=this.currentOrg)?u.users:void 0})}),n(window).on("resize",n.proxy(this.onResize,this)),this.organizations.isEmpty()?void 0:(this.mainTabs=[new p({app:this}),new m({app:this}),new f({app:this}),new i({app:this})],this.usernav=new w({app:this}),this.mainnav=new c({el:!1,app:this}),this.setViews({"#mainnav":this.mainnav,"#usernav":this.usernav}))},o.prototype.serialize=function(){return{support_site_url:C.support_site_url}},o.prototype.afterRender=function(){return this.onResize(),s.history.start({pushState:!0}),this.tracking.render(),new a({app:this}),C.disable_upgrade_banner||(this.licenseInfo=new u,this.upgradeBannerView=new b({el:this.$("#banner"),model:this.licenseInfo}),this.listenTo(this.upgradeBannerView,"afterRender",this.onResize),this.licenseInfo.fetch()),this.organizations.isEmpty()?new d({app:this}):void 0},o.prototype.cleanup=function(){return n(window).off("resize",n.proxy(this.onResize,this))},o.prototype.goToNoOrganizationsModal=function(){return new d({app:this})},o.prototype.onResize=function(){return this.splitPane.resizePanes(),this.$("#content").css("top",this.$el.height())},o.prototype.applyController=function(t,e,r){var i,o,s,a,l,u,c;for(M.set({controller:t}),n("body").attr("class",t.id),this.mainnav.applyController(t),this.usernav.applyController(t),(null!=(l=t.collection)?l.url:void 0)&&0===t.collection.length&&t.collection.fetch(),a=t.sidebarView(),a!==this.sidebarView&&(this.sidebarView=a,this.setView("#sidebar",this.sidebarView).render()),u=this.sidebarView.sections,i=o=0,s=u.length;s>o;i=++o)c=u[i],c.controller===t&&this.sidebarView.openThisAndCloseAllOthers(this.$(c.el),{silent:!0});return(null!=e?e:t.split_pane)?(this.paneView!==this.splitPane&&(this.paneView=this.splitPane,this.setView("#panes",this.splitPane).render()),this.splitPane.applyController(t)):(this.paneView=null!=r?r:x.result(t,"paneView"),this.setView("#panes",this.paneView).render(),this.splitPane.listViewClass=void 0,this.splitPane.objectViewClass=void 0,this.splitPane.activeObjectView=void 0)},o.prototype.rootRoute=function(){var t,e,n,r,i;if(!this.organizations.isEmpty()){for(r=this.mainTabs,e=0,n=r.length;n>e;e++)if(i=r[e],i.checkAccess()){t=i;break}return t?j.navigate(t.url(),{trigger:!0}):j.navigate(this.organizations.url(),{trigger:!0})}},o.prototype.clickLogo=function(t){return t.preventDefault(),this.rootRoute()},o.prototype.aboutModal=function(t){return t.preventDefault(),new r({app:this,collection:null})},o.prototype.reportFeedback=function(t){return t.preventDefault(),new g({app:this,controller:M.get("controller")})},o.prototype.isHosted=function(){return!C.private_chef},o.prototype.setUpNavigationPrevention=function(t){return(window.Chef||(window.Chef={})).masterQueue=t,window.onbeforeunload=function(){return 0!==window.Chef.masterQueue.length()?"You have background requests still waiting to be sent to the server for processing! If you leave the console, these requests will not be finished.":void 0}},o}(s.Layout)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("models/sign_up_form",["require","b","utils/i18n.gettext","config"],function(e){var n,r,i;return n=e("b"),i=e("utils/i18n.gettext"),r=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.defaults={username:"",email:"",display_name:"",first_name:"",last_name:"",job_title:"",company:"",phone:"",terms:null},r.prototype.validation={username:[{required:!0,maxLength:50},{pattern:/^[a-z0-9\-_]+$/,msg:i("Username can only contain lowercase letters, numbers, hyphens, and underscores")},{fn:"signUpValidate"}],email:[{pattern:"email"},{fn:"signUpValidate"}],display_name:{required:!0,fn:"notRequiredForVip"},first_name:{fn:"onlyRequiredForVip",required:!0},last_name:{fn:"onlyRequiredForVip",required:!0},job_title:{fn:"onlyRequiredForVip",required:!0},company:{fn:"onlyRequiredForVip",required:!0},phone:{fn:"onlyRequiredForVip",required:!0}},r.prototype.initialize=function(){return r.__super__.initialize.apply(this,arguments),e("config").private_chef?delete this.validation.terms:void 0},r.prototype.signUpValidate=function(t,e){return(t||"").toString().trim()?$.Deferred(function(n){return $.ajax({type:"GET",url:"/signup/validity/"+e,data:{value:t},dataType:"json",success:n.resolve,error:function(t){return n.reject(409===t.status?i("This "+e+" is already in use"):i("A server error occurred. Please refresh and try again"))}})}):void 0},r.prototype.onlyRequiredForVip=function(t,e,n){return"vip"!==n.ref?!1:void 0},r.prototype.notRequiredForVip=function(t,e,n){return"vip"===n.ref?!1:void 0},r}(n.Model)})}.call(this),function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define("views/sign_up",["require","jquery","b","views/application/modals/browser_version","models/sign_up_form","helpers/tracking"],function(e){var n,r,i,o,s,a;return n=e("jquery"),r=e("b"),i=e("views/application/modals/browser_version"),o=e("models/sign_up_form"),a=e("helpers/tracking"),s=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.bindings={"#signup-username":"username","#signup-email":"email","#signup-display-name":"display_name","#signup-first-name":"first_name","#signup-last-name":"last_name","#signup-job-title":"job_title","#signup-company":"company","#signup-phone":"phone","#signup-organization":"organization","#signup-comment":"comment","#signup-terms":"terms"},n.prototype.events={"submit form":"onSubmit"},n.prototype.initialize=function(){return this.model=new o({ref:this.$("input[name=ref]").val()}),this.tracking=new a},n.prototype.afterRender=function(){return this.bindValidation(),this.tracking.render(),this.tracking.onRoute(),new i},n.prototype.onSubmit=function(t){return t.preventDefault(),this.model.validate().then(function(){return t.target.submit()})},n}(r.Layout)})}.call(this),parseUri.options={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},define("parseUri",function(t){return function(){var e;return e||t.parseUri}}(this)),function(t,e){function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function r(t){return"undefined"==typeof t}var i={},o=t.TraceKit,s=[].slice,a="?";i.noConflict=function(){return t.TraceKit=o,i},i.wrap=function(t){function e(){try{return t.apply(this,arguments)}catch(e){throw i.report(e),e}}return e},i.report=function(){function e(t){l.push(t)}function r(t){for(var e=l.length-1;e>=0;--e)l[e]===t&&l.splice(e,1)}function o(t,e){var r=null;if(!e||i.collectWindowErrors){for(var o in l)if(n(l,o))try{l[o].apply(null,[t].concat(s.call(arguments,2)))}catch(a){r=a}if(r)throw r}}function a(e){var n=s.call(arguments,1);if(c){if(u===e)return;var r=c;c=null,u=null,o.apply(null,[r,null].concat(n))}var a=i.computeStackTrace(e);throw c=a,u=e,t.setTimeout(function(){u===e&&(c=null,u=null,o.apply(null,[a,null].concat(n)))},a.incomplete?2e3:0),e}var l=[],u=null,c=null,d=t.onerror;return t.onerror=function(t,e,n){var r=null;if(c)i.computeStackTrace.augmentStackTraceWithInitialElement(c,e,n,t),r=c,c=null,u=null;else{var s={url:e,line:n};s.func=i.computeStackTrace.guessFunctionName(s.url,s.line),s.context=i.computeStackTrace.gatherContext(s.url,s.line),r={mode:"onerror",message:t,url:document.location.href,stack:[s],useragent:navigator.userAgent}}return o(r,"from window.onerror"),d?d.apply(this,arguments):!1},a.subscribe=e,a.unsubscribe=r,a}(),i.computeStackTrace=function(){function e(e){function n(){try{return new t.XMLHttpRequest}catch(e){return new t.ActiveXObject("Microsoft.XMLHTTP")}}if(!i.remoteFetching)return"";try{var r=n();return r.open("GET",e,!1),r.send(""),r.responseText}catch(o){return""}}function o(t){if(!n(x,t)){var r="";-1!==t.indexOf(document.domain)&&(r=e(t)),x[t]=r?r.split("\n"):[]}return x[t]}function s(t,e){var n,i=/function ([^(]*)\(([^)]*)\)/,s=/['"]?([0-9A-Za-z$_]+)['"]?\s*[:=]\s*(function|eval|new Function)/,l="",u=10,c=o(t);if(!c.length)return a;for(var d=0;u>d;++d)if(l=c[e-d]+l,!r(l)){if(n=s.exec(l))return n[1];if(n=i.exec(l))return n[1]}return a}function l(t,e){var n=o(t);if(!n.length)return null;var s=[],a=Math.floor(i.linesOfContext/2),l=a+i.linesOfContext%2,u=Math.max(0,e-a-1),c=Math.min(n.length,e+l-1);e-=1;for(var d=u;c>d;++d)r(n[d])||s.push(n[d]);return s.length>0?s:null}function u(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#]/g,"\\$&")}function c(t){return u(t).replace("<","(?:<|&lt;)").replace(">","(?:>|&gt;)").replace("&","(?:&|&amp;)").replace('"','(?:"|&quot;)').replace(/\s+/g,"\\s+")}function d(t,e){for(var n,r,i=0,s=e.length;s>i;++i)if((n=o(e[i])).length&&(n=n.join("\n"),r=t.exec(n)))return{url:e[i],line:n.substring(0,r.index).split("\n").length,column:r.index-n.lastIndexOf("\n",r.index)-1};return null}function p(t,e,n){var r,i=o(e),s=new RegExp("\\b"+u(t)+"\\b");return n-=1,i&&i.length>n&&(r=s.exec(i[n]))?r.index:null}function h(e){for(var n,r,i,o,s=[t.location.href],a=document.getElementsByTagName("script"),l=""+e,p=/^function(?:\s+([\w$]+))?\s*\(([\w\s,]*)\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/,h=/^function on([\w$]+)\s*\(event\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/,f=0;f<a.length;++f){var g=a[f];g.src&&s.push(g.src)}if(i=p.exec(l)){var m=i[1]?"\\s+"+i[1]:"",v=i[2].split(",").join("\\s*,\\s*");n=u(i[3]).replace(/;$/,";?"),r=new RegExp("function"+m+"\\s*\\(\\s*"+v+"\\s*\\)\\s*{\\s*"+n+"\\s*}")}else r=new RegExp(u(l).replace(/\s+/g,"\\s+"));if(o=d(r,s))return o;if(i=h.exec(l)){var y=i[1];if(n=c(i[2]),r=new RegExp("on"+y+"=[\\'\"]\\s*"+n+"\\s*[\\'\"]","i"),o=d(r,s[0]))return o;if(r=new RegExp(n),o=d(r,s))return o}return null}function f(t){if(!t.stack)return null;for(var e,n,r=/^\s*at (?:((?:\[object object\])?\S+) )?\(?((?:file|http|https):.*?):(\d+)(?::(\d+))?\)?\s*$/i,i=/^\s*(\S*)(?:\((.*?)\))?@((?:file|http|https).*?):(\d+)(?::(\d+))?\s*$/i,o=t.stack.split("\n"),u=[],c=/^(.*) is undefined$/.exec(t.message),d=0,h=o.length;h>d;++d){if(e=i.exec(o[d]))n={url:e[3],func:e[1]||a,args:e[2]?e[2].split(","):"",line:+e[4],column:e[5]?+e[5]:null};else{if(!(e=r.exec(o[d])))continue;n={url:e[2],func:e[1]||a,line:+e[3],column:e[4]?+e[4]:null}}!n.func&&n.line&&(n.func=s(n.url,n.line)),n.line&&(n.context=l(n.url,n.line)),u.push(n)}return u[0]&&u[0].line&&!u[0].column&&c&&(u[0].column=p(c[1],u[0].url,u[0].line)),u.length?{mode:"stack",name:t.name,message:t.message,url:document.location.href,stack:u,useragent:navigator.userAgent}:null}function g(t){for(var e,n=t.stacktrace,r=/ line (\d+), column (\d+) in (?:<anonymous function: ([^>]+)>|([^\)]+))\((.*)\) in (.*):\s*$/i,i=n.split("\n"),o=[],a=0,u=i.length;u>a;a+=2)if(e=r.exec(i[a])){var c={line:+e[1],column:+e[2],func:e[3]||e[4],args:e[5]?e[5].split(","):[],url:e[6]};if(!c.func&&c.line&&(c.func=s(c.url,c.line)),c.line)try{c.context=l(c.url,c.line)}catch(d){}c.context||(c.context=[i[a+1]]),o.push(c)}return o.length?{mode:"stacktrace",name:t.name,message:t.message,url:document.location.href,stack:o,useragent:navigator.userAgent}:null}function m(e){var r=e.message.split("\n");if(r.length<4)return null;var i,a,u,p,h=/^\s*Line (\d+) of linked script ((?:file|http|https)\S+)(?:: in function (\S+))?\s*$/i,f=/^\s*Line (\d+) of inline#(\d+) script in ((?:file|http|https)\S+)(?:: in function (\S+))?\s*$/i,g=/^\s*Line (\d+) of function script\s*$/i,m=[],v=document.getElementsByTagName("script"),y=[];for(a in v)n(v,a)&&!v[a].src&&y.push(v[a]);for(a=2,u=r.length;u>a;a+=2){var b=null;if(i=h.exec(r[a]))b={url:i[2],func:i[3],line:+i[1]};else if(i=f.exec(r[a])){b={url:i[3],func:i[4]};var _=+i[1],w=y[i[2]-1];if(w&&(p=o(b.url))){p=p.join("\n");var x=p.indexOf(w.innerText);x>=0&&(b.line=_+p.substring(0,x).split("\n").length)}}else if(i=g.exec(r[a])){var k=t.location.href.replace(/#.*$/,""),C=i[1],j=new RegExp(c(r[a+1]));p=d(j,[k]),b={url:k,line:p?p.line:C,func:""}}if(b){b.func||(b.func=s(b.url,b.line));var M=l(b.url,b.line),S=M?M[Math.floor(M.length/2)]:null;b.context=M&&S.replace(/^\s*/,"")===r[a+1].replace(/^\s*/,"")?M:[r[a+1]],m.push(b)}}return m.length?{mode:"multiline",name:e.name,message:r[0],url:document.location.href,stack:m,useragent:navigator.userAgent}:null}function v(t,e,n,r){var i={url:e,line:n};if(i.url&&i.line){t.incomplete=!1,i.func||(i.func=s(i.url,i.line)),i.context||(i.context=l(i.url,i.line));var o=/ '([^']+)' /.exec(r);if(o&&(i.column=p(o[1],i.url,i.line)),t.stack.length>0&&t.stack[0].url===i.url){if(t.stack[0].line===i.line)return!1;if(!t.stack[0].line&&t.stack[0].func===i.func)return t.stack[0].line=i.line,t.stack[0].context=i.context,!1}return t.stack.unshift(i),t.partial=!0,!0}return t.incomplete=!0,!1}function y(t,e){for(var n,r,o,l=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,u=[],c={},d=!1,f=y.caller;f&&!d;f=f.caller)if(f!==b&&f!==i.report){if(r={url:null,func:a,line:null,column:null},f.name?r.func=f.name:(n=l.exec(f.toString()))&&(r.func=n[1]),o=h(f)){r.url=o.url,r.line=o.line,r.func===a&&(r.func=s(r.url,r.line));var g=/ '([^']+)' /.exec(t.message||t.description);g&&(r.column=p(g[1],o.url,o.line))}c[""+f]?d=!0:c[""+f]=!0,u.push(r)}e&&u.splice(0,e);var m={mode:"callers",name:t.name,message:t.message,url:document.location.href,stack:u,useragent:navigator.userAgent};return v(m,t.sourceURL||t.fileName,t.line||t.lineNumber,t.message||t.description),m}function b(t,e){var n=null;e=null==e?0:+e;try{if(n=g(t))return n}catch(r){if(w)throw r}try{if(n=f(t))return n}catch(r){if(w)throw r}try{if(n=m(t))return n}catch(r){if(w)throw r}try{if(n=y(t,e+1))return n}catch(r){if(w)throw r}return{mode:"failed"}}function _(t){t=(null==t?0:+t)+1;try{throw new Error}catch(e){return b(e,t+1)}return null}var w=!1,x={};return b.augmentStackTraceWithInitialElement=v,b.guessFunctionName=s,b.gatherContext=l,b.ofCaller=_,b}(),function(){var e=function(e){var n=t[e];t[e]=function(){var t=s.call(arguments),e=t[0];return"function"==typeof e&&(t[0]=i.wrap(e)),n.apply?n.apply(this,t):n(t[0],t[1])}};e("setTimeout"),e("setInterval")}(),function(t){if(t){var n=t.event.add;t.event.add=function(e,r,o,s,a){var l;return o.handler?(l=o.handler,o.handler=i.wrap(o.handler)):(l=o,o=i.wrap(o)),o.guid=l.guid?l.guid:l.guid=t.guid++,n.call(this,e,r,o,s,a)};var r=t.fn.ready;t.fn.ready=function(t){return r.call(this,i.wrap(t))};var o=t.ajax;t.ajax=function(n,r){var s,a=["complete","error","success"];for("object"==typeof n&&(r=n,n=e),r=r||{};s=a.pop();)t.isFunction(r[s])&&(r[s]=i.wrap(r[s]));try{return o.call(this,n,r)}catch(l){throw i.report(l),l}}}}(t.jQuery),i.remoteFetching||(i.remoteFetching=!0),i.collectWindowErrors||(i.collectWindowErrors=!0),(!i.linesOfContext||i.linesOfContext<1)&&(i.linesOfContext=11),t.TraceKit=i}(window),function(t,e){"use strict";function n(t){for(var e=S.exec(t),n={},r=14;r--;)n[M[r]]=e[r]||"";return n}function r(t){return"undefined"==typeof t}function i(t){return"function"==typeof t}function o(t,e){var n,i;if(r(t.length))for(n in t)t.hasOwnProperty(n)&&e.call(null,n,t[n]);else for(n=0,i=t.length;i>n;n++)e.call(null,n,t[n])}function s(){if(C)return C;var t=["sentry_version=2.0","sentry_client=raven-js/"+j.VERSION];return y&&t.push("sentry_key="+y),C="?"+t.join("&")}function a(t,e){var n,r,i=[],o=0;if(t.stack&&(n=t.stack.length))for(;n>o;o++)r=l(t.stack[o]),r&&i.push(r);c(t.name,t.message,t.url,t.lineno,i,e)}function l(t){if(t.url){var e={filename:t.url,lineno:t.line,colno:t.column,"function":t.func||"?"},n=u(t);if(n)for(var r=3,i=["pre_context","context_line","post_context"];r--;)e[i[r]]=n[r];return e.in_app=!/(Raven|TraceKit)\./.test(e["function"]),e}}function u(t){if(t.context&&x.fetchContext){for(var e=t.context,n=~~(e.length/2),i=e.length,o=!1;i--;)if(e[i].length>300){o=!0;break}if(o){if(r(t.column))return;return[[],e[n].substr(t.column,50),[]]}return[e.slice(0,n),e[n],e.slice(n+1)]}}function c(t,e,n,r,i,o){var s,a,l;for(l=x.ignoreErrors.length;l--;)if(e===x.ignoreErrors[l])return;for(i&&i.length?(s={frames:i},n=n||i[0].filename):n&&(s={frames:[{filename:n,lineno:r}]}),l=x.ignoreUrls.length;l--;)if(x.ignoreUrls[l].test(n))return;a=r?e+" at "+r:e,h(d({"sentry.interfaces.Exception":{type:t,value:e},"sentry.interfaces.Stacktrace":s,culprit:n,message:a},o))}function d(t,e){return e?(o(e,function(e,n){t[e]=n}),t):t}function p(){var e={url:t.location.href,headers:{"User-Agent":navigator.userAgent}};return t.document.referrer&&(e.headers.Referer=t.document.referrer),e}function h(t){g()&&(t=d({project:b,logger:x.logger,site:x.site,platform:"javascript","sentry.interfaces.Http":p()},t),v&&(t["sentry.interfaces.User"]=v),i(x.dataCallback)&&(t=x.dataCallback(t)),f(t))}function f(t){(new Image).src=m+s()+"&sentry_data="+encodeURIComponent(JSON.stringify(t))}function g(){return w?m?!0:(t.console&&console.error&&console.error("Error: Raven has not been configured."),!1):!1}var m,v,y,b,_=t.Raven,w=!r(t.JSON),x={logger:"javascript",ignoreErrors:[],ignoreUrls:[]},k=TraceKit.noConflict();k.remoteFetching=!1;var C,j={VERSION:"1.0.7",noConflict:function(){return t.Raven=_,j},config:function(e,r){var i=n(e),s=i.path.lastIndexOf("/"),a=i.path.substr(1,s);return r&&r.ignoreErrors&&t.console&&console.warn&&console.warn("DeprecationWarning: `ignoreErrors` is going to be removed soon."),r&&o(r,function(t,e){x[t]=e}),x.ignoreErrors.push("Script error."),y=i.user,b=~~i.path.substr(s+1),m="//"+i.host+(i.port?":"+i.port:"")+"/"+a+"api/"+b+"/store/",i.protocol&&(m=i.protocol+":"+m),x.fetchContext&&(k.remoteFetching=!0),j},install:function(){return g()?(k.report.subscribe(a),j):void 0},context:function(t,n,r){i(t)&&(r=n||[],n=t,t=e),j.wrap(t,n).apply(this,r)},wrap:function(t,n){return i(t)&&(n=t,t=e),function(){try{n.apply(this,arguments)}catch(e){throw j.captureException(e,t),e}}},uninstall:function(){return k.report.unsubscribe(a),j},captureException:function(t,e){if("string"==typeof t)return j.captureMessage(t,e);try{k.report(t,e)}catch(n){if(t!==n)throw n}return j},captureMessage:function(t,e){return h(d({message:t},e)),j},setUser:function(t){return v=t,j}},M="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),S=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;t.Raven=j,"function"==typeof define&&define.amd&&define("raven",[],function(){return j})}(window),function(){define("utils/raven/options",[],function(){return{ignoreErrors:["top.GLOBALS","originalCreateNotification","canvas.contentDocument","MyApp_RemoveAllHighlights","http://tt.epicplay.com","Can't find variable: ZiteReader","jigsaw is not defined","ComboSearch is not defined","http://loading.retry.widdit.com/","atomicFindClose","fb_xd_fragment","bmi_SafeAddOnload","EBCallBackMessageReceived","conduitPage","QuotaExceededError: DOM Exception 22"],ignoreUrls:[/graph\.facebook\.com/i,/connect\.facebook\.net\/en_US\/all\.js/i,/eatdifferent\.com\.woopra-ns\.com/i,/static\.woopra\.com\/js\/woopra\.js/i,/extensions\//i,/^chrome:\/\//i,/127\.0\.0\.1:4001\/isrunning/i,/webappstoolbarba\.texthelp\.com\//i,/metrics\.itunes\.apple\.com\.edgesuite\.net\//i]}})}.call(this),function(){define("utils/raven/configure",["require","config","raven","underscore","utils/raven/options"],function(t){var e,n,r,i,o,s;return i=t("config"),o=i.sentry,s=i.user,e=t("raven"),n=t("underscore"),r=t("utils/raven/options"),function(){return o&&(e.config(o,r).install(),s)?e.setUser(n.omit(s,"public_key")):void 0}})}.call(this),function(){define("application",["require","es5-shim","jquery","controllers/application","views/sign_up","helpers/tracking","utils/raven/configure"],function(t){var e,n,r,i,o;return t("es5-shim"),e=t("jquery"),n=t("controllers/application"),r=t("views/sign_up"),i=t("helpers/tracking"),o=t("utils/raven/configure"),o(),e(function(){var t,o,s;return t=e("#app"),o=e("#signup"),t.length>0&&(e("#loading").remove(),window.app=new n({el:t})),o.length>0&&(window.app=new r({el:o})),window.app?window.app.render():(s=new i,s.render(),s.onRoute())})})}.call(this),function(){require(["almond","application"],function(){return null})}.call(this),define("locale/application_en",function(){})}();kJF?      YjYj=[Kz   X    :https://manage.chef.io/assets/locale/application_en-74fe501304e3364da390102224804179.js necko:classified 1 security-info FnhllAKWRHGAlo+ESXykKAAAAAAAAAAAwAAAAAAAAEaphjojH6pBabDSgSnsfLHeAAQAAgAAAAAAAAAAAAAAAAAAAAAB4vFIJp5wRkeyPxAQ9RJGKPqbqVvKO0mKuIl8ec8o/uhmCjImkVxP+7sgiYWmMt8FvcOXmlQiTNWFiWlrbpbqgwAAAAAAAAVXMIIFUzCCBDugAwIBAgIQDhi8Law5Rw+vX24q4YF8cTANBgkqhkiG9w0BAQsFADBNMQswCQYDVQQGEwJVUzEVMBMGA1UEChMMRGlnaUNlcnQgSW5jMScwJQYDVQQDEx5EaWdpQ2VydCBTSEEyIFNlY3VyZSBTZXJ2ZXIgQ0EwHhcNMTcwNjE0MDAwMDAwWhcNMTcwOTI3MTIwMDAwWjBpMQswCQYDVQQGEwJVUzETMBEGA1UECBMKV2FzaGluZ3RvbjEQMA4GA1UEBxMHU2VhdHRsZTEbMBkGA1UEChMSQ2hlZiBTb2Z0d2FyZSwgSW5jMRYwFAYDVQQDDA0qLmdldGNoZWYuY29tMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA1qPl3xiZDks5vB7W/qsoYaGhk63/aov9vATpmiY0gJ0mznblKgvYMJLIcD5Rsyj+wC/c3ZL+NS4xEftvIgOETgqfLyOpNmTj/OqH8GoGgoaTLTsYrwFmf93lzYrBUzyq6/lkwtIrA4GAHLr0WEtvyPJJWON2LL5mLPQ5nZLcnRuqGSH0GATdn/DXurl26WKJKOR/ih8sPkwApLHAiKFzj/vbA6Fwq+IQHy6L8tlcFYFQJq5HPDWsCXm6JTUQ7NjEJqo0uqEESIO61l0eYPpj55zHSeIJLB7S6ZgOuY/u35Repi6Ww3mVZU115VsurAa6T1zCAeP+IC108AotHrDYMwIDAQABo4ICETCCAg0wHwYDVR0jBBgwFoAUD4BhHIIxYdUvKOeNRji0LOHG2eIwHQYDVR0OBBYEFJBENLnOJkpidkIU7vJvGv4r/t86MFUGA1UdEQROMEyCC29wc2NvZGUuY29tgg0qLm9wc2NvZGUuY29tggdjaGVmLmlvggkqLmNoZWYuaW+CC2dldGNoZWYuY29tgg0qLmdldGNoZWYuY29tMA4GA1UdDwEB/wQEAwIFoDAdBgNVHSUEFjAUBggrBgEFBQcDAQYIKwYBBQUHAwIwawYDVR0fBGQwYjAvoC2gK4YpaHR0cDovL2NybDMuZGlnaWNlcnQuY29tL3NzY2Etc2hhMi1nMS5jcmwwL6AtoCuGKWh0dHA6Ly9jcmw0LmRpZ2ljZXJ0LmNvbS9zc2NhLXNoYTItZzEuY3JsMEwGA1UdIARFMEMwNwYJYIZIAYb9bAEBMCowKAYIKwYBBQUHAgEWHGh0dHBzOi8vd3d3LmRpZ2ljZXJ0LmNvbS9DUFMwCAYGZ4EMAQICMHwGCCsGAQUFBwEBBHAwbjAkBggrBgEFBQcwAYYYaHR0cDovL29jc3AuZGlnaWNlcnQuY29tMEYGCCsGAQUFBzAChjpodHRwOi8vY2FjZXJ0cy5kaWdpY2VydC5jb20vRGlnaUNlcnRTSEEyU2VjdXJlU2VydmVyQ0EuY3J0MAwGA1UdEwEB/wQCMAAwDQYJKoZIhvcNAQELBQADggEBANTF/nXrqy6s9TXr9pO9XpaXXaHfcbmLn2GxIR+A9xbmFsLceBS+KA9Ri0zaA/x0YJe89oWuHMvwa+Mo/V3bfDY0+VEpVnMd0R8boLfMTDJTXKLwqcCN/80us2nNPQWMQqL8sNXF4Bb2wZBbH5iUOyFQjc66tFsMJXEX8IMW1uogBRCnanvYK8gyJL7d3lwrMFUOW2XdjhN1I5d4+ZSkx/GQxFI6a1V72o1GHeuHG1Tuab5mLT0E9nv7X8eYiev/GBLNhTAWkYk96wZp5xqpVF7wypWdKEXNwU44kAuKjkZGOUtV8gWhUtscXLq4NQHY4tJHHpIXCJjBj93Iv9H65k/ALwADAAAAAAEBAAA= request-method GET response-head HTTP/1.1 200 OK
Accept-Ranges: bytes
Cache-Control: max-age=31536000, public
Content-Type: application/javascript
Date: Sat, 15 Jul 2017 20:41:30 GMT
Expires: Sun, 15 Jul 2018 20:41:30 GMT
Last-Modified: Tue, 04 Jul 2017 09:50:50 GMT
Server: openresty/1.11.2.1
Content-Length: 1316371
 uncompressed-len 0  